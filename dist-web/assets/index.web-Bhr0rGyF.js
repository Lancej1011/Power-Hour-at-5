var e=Object.defineProperty,t=Object.getOwnPropertyNames,r=(t,r,n)=>((t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n)(t,"symbol"!=typeof r?r+"":r,n);import{a as n,e as a,r as i,f as o,j as s,g as l,h as c,B as u,I as d,T as h,S as p,i as f,u as m,D as g,k as y,l as b,A as x,L as v,R as w,m as S,n as j,o as C,p as k,q as P,s as A,P as E,t as I,C as M,v as T,F as R,w as z,x as D,M as L,y as O,z as _,E as F,G as $,H as N,J as W,K as U,N as B,O as H,Q as V,U as Y,V as G,W as q,X as J,Y as K,Z as X,$ as Q,a0 as Z,a1 as ee,a2 as te,a3 as re,a4 as ne,a5 as ae,a6 as ie,a7 as oe,a8 as se,a9 as le,aa as ce,c as ue,ab as de,ac as he,ad as pe,ae as fe,af as me,ag as ge,ah as ye,ai as be,aj as xe,ak as ve,al as we,am as Se,an as je,d as Ce,ao as ke,ap as Pe,aq as Ae,ar as Ee,as as Ie,at as Me,au as Te,av as Re,aw as ze,ax as De,ay as Le,az as Oe}from"./vendor-DNcHt9lZ.js";import{D as _e,C as Fe,P as $e,u as Ne}from"./ui-Jcx2fah-.js";import{r as We}from"./audio-1gD0i2Ur.js";import{i as Ue,g as Be,a as He,o as Ve,G as Ye,s as Ge,b as qe,c as Je,u as Ke,d as Xe,e as Qe,f as Ze,E as et,r as tt,h as rt,l as nt,j as at,k as it,m as ot,n as st,p as lt,q as ct,t as ut,v as dt,w as ht,x as pt,y as ft,z as mt,A as gt,B as yt,C as bt,D as xt,F as vt,H as wt,I as St,J as jt,T as Ct}from"./firebase-69wtQcyZ.js";var kt,Pt,At=(kt={"assets/index.web-Bhr0rGyF.js"(e,t){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var kt,Pt,At,Et,It={exports:{}},Mt={},Tt={exports:{}},Rt={};function zt(){return Pt||(Pt=1,Tt.exports=(kt||(kt=1,function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<a(i,t)))break e;e[n]=t,e[r]=i,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,o=i>>>1;n<o;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,r))c<i&&0>a(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<i&&0>a(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var a=r(c);null!==a;){if(null===a.callback)n(c);else{if(!(a.startTime<=e))break;n(c),a.sortIndex=a.expirationTime,t(l,a)}a=r(c)}}function w(e){if(m=!1,v(e),!f)if(null!==r(l))f=!0,j||(j=!0,S());else{var t=r(c);null!==t&&T(w,t.startTime-e)}}var S,j=!1,C=-1,k=5,P=-1;function A(){return!(!g&&e.unstable_now()-P<k)}function E(){if(g=!1,j){var t=e.unstable_now();P=t;var a=!0;try{e:{f=!1,m&&(m=!1,b(C),C=-1),p=!0;var i=h;try{t:{for(v(t),d=r(l);null!==d&&!(d.expirationTime>t&&A());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof s){d.callback=s,v(t),a=!0;break t}d===r(l)&&n(l),v(t)}else n(l);d=r(l)}if(null!==d)a=!0;else{var u=r(c);null!==u&&T(w,u.startTime-t),a=!1}}break e}finally{d=null,h=i,p=!1}a=void 0}}finally{a?S():j=!1}}}if("function"==typeof x)S=function(){x(E)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,M=I.port2;I.port1.onmessage=E,S=function(){M.postMessage(null)}}else S=function(){y(E,0)};function T(t,r){C=y((function(){t(e.unstable_now())}),r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,a,i){var o=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?o+i:o,n){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return n={id:u++,callback:a,priorityLevel:n,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(n.sortIndex=i,t(c,n),null===r(l)&&n===r(c)&&(m?(b(C),C=-1):m=!0,T(w,i-o))):(n.sortIndex=s,t(l,n),f||p||(f=!0,j||(j=!0,S()))),n},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(Rt)),Rt)),Tt.exports}
/**
     * @license React
     * react-dom-client.production.js
     *
     * Copyright (c) Meta Platforms, Inc. and affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */function Dt(){if(At)return Mt;At=1;var e=zt(),t=n(),r=a();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function s(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function c(e){if(s(e)!==e)throw Error(i(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),v=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),A=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function I(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=E&&e[E]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function T(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case m:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case S:return"Suspense";case j:return"SuspenseList";case P:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case f:return"Portal";case v:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:T(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return T(e(t))}catch(r){}}return null}var R=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},O=[],_=-1;function F(e){return{current:e}}function $(e){0>_||(e.current=O[_],O[_]=null,_--)}function N(e,t){_++,O[_]=e.current,e.current=t}var W=F(null),U=F(null),B=F(null),H=F(null);function V(e,t){switch(N(B,t),N(U,e),N(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?od(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=od(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(W),N(W,e)}function Y(){$(W),$(U),$(B)}function G(e){null!==e.memoizedState&&N(H,e);var t=W.current,r=sd(t,e.type);t!==r&&(N(U,e),N(W,r))}function q(e){U.current===e&&($(W),$(U)),H.current===e&&($(H),Kd._currentValue=L)}var J=Object.prototype.hasOwnProperty,K=e.unstable_scheduleCallback,X=e.unstable_cancelCallback,Q=e.unstable_shouldYield,Z=e.unstable_requestPaint,ee=e.unstable_now,te=e.unstable_getCurrentPriorityLevel,re=e.unstable_ImmediatePriority,ne=e.unstable_UserBlockingPriority,ae=e.unstable_NormalPriority,ie=e.unstable_LowPriority,oe=e.unstable_IdlePriority,se=e.log,le=e.unstable_setDisableYieldValue,ce=null,ue=null;function de(e){if("function"==typeof se&&le(e),ue&&"function"==typeof ue.setStrictMode)try{ue.setStrictMode(ce,e)}catch(t){}}var he=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(pe(e)/fe|0)|0},pe=Math.log,fe=Math.LN2,me=256,ge=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&n;return 0!==s?0!==(n=s&~i)?a=ye(n):0!==(o&=s)?a=ye(o):r||0!==(r=s&~e)&&(a=ye(r)):0!==(s=n&~i)?a=ye(s):0!==o?a=ye(o):r||0!==(r=n&~e)&&(a=ye(r)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(r=t&-t)||32===i&&4194048&r)?t:a}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ve(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=me;return!(4194048&(me<<=1))&&(me=256),e}function Se(){var e=ge;return!(62914560&(ge<<=1))&&(ge=4194304),e}function je(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-he(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194090&r}function Pe(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-he(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ee(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ie(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:dh(e.type)}var Me=Math.random().toString(36).slice(2),Te="__reactFiber$"+Me,Re="__reactProps$"+Me,ze="__reactContainer$"+Me,De="__reactEvents$"+Me,Le="__reactListeners$"+Me,Oe="__reactHandles$"+Me,_e="__reactResources$"+Me,Fe="__reactMarker$"+Me;function $e(e){delete e[Te],delete e[Re],delete e[De],delete e[Le],delete e[Oe]}function Ne(e){var t=e[Te];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ze]||r[Te]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=wd(e);null!==e;){if(r=e[Te])return r;e=wd(e)}return t}r=(e=r).parentNode}return null}function We(e){if(e=e[Te]||e[ze]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Be(e){var t=e[_e];return t||(t=e[_e]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[Fe]=!0}var Ve=new Set,Ye={};function Ge(e,t){qe(e,t),qe(e+"Capture",t)}function qe(e,t){for(Ye[e]=t,e=0;e<t.length;e++)Ve.add(t[e])}var Je,Ke,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qe={},Ze={};function et(e,t,r){if(a=t,J.call(Ze,a)||!J.call(Qe,a)&&(Xe.test(a)?Ze[a]=!0:(Qe[a]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var a}function tt(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function rt(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function nt(e){if(void 0===Je)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Ke=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Ke}var at=!1;function it(e,t){if(!e||at)return"";at=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(a){var n=a}Reflect.construct(e,[],r)}else{try{r.call()}catch(i){n=i}e.call(r.prototype)}}else{try{throw Error()}catch(o){n=o}(r=e())&&"function"==typeof r.catch&&r.catch((function(){}))}}catch(s){if(s&&n&&"string"==typeof s.stack)return[s.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),o=i[0],s=i[1];if(o&&s){var l=o.split("\n"),c=s.split("\n");for(a=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(n===l.length||a===c.length)for(n=l.length-1,a=c.length-1;1<=n&&0<=a&&l[n]!==c[a];)a--;for(;1<=n&&0<=a;n--,a--)if(l[n]!==c[a]){if(1!==n||1!==a)do{if(n--,0>--a||l[n]!==c[a]){var u="\n"+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=n&&0<=a);break}}}finally{at=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?nt(r):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return nt(e.type);case 16:return nt("Lazy");case 13:return nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return nt("Activity");default:return""}}function st(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}function lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ct(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function ht(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,r,n,a,i,o,s){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+lt(t)):e.value!==""+lt(t)&&(e.value=""+lt(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,lt(t)):null!=r?yt(e,o,lt(r)):null!=n&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+lt(s):e.removeAttribute("name")}function gt(e,t,r,n,a,i,o,s){if(null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.type=i),null!=t||null!=r){if(("submit"===i||"reset"===i)&&null==t)return;r=null!=r?""+lt(r):"",t=null!=t?""+lt(t):r,s||t===e.value||(e.value=t),e.defaultValue=t}n="function"!=typeof(n=null!=n?n:a)&&"symbol"!=typeof n&&!!n,e.checked=s?e.checked:!!n,e.defaultChecked=!!n,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o)}function yt(e,t,r){"number"===t&&ht(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function bt(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+lt(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function xt(e,t,r){null==t||((t=""+lt(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+lt(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function vt(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(i(92));if(R(n)){if(1<n.length)throw Error(i(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=lt(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function wt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jt(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"==typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!=typeof r||0===r||St.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Ct(e,t,r){if(null!=t&&"object"!=typeof t)throw Error(i(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&r[a]!==n&&jt(e,a,n)}else for(var o in t)t.hasOwnProperty(o)&&jt(e,o,t[o])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Tt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Lt=null;function Ot(e){var t=We(e);if(t&&(e=t.stateNode)){var r=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n[Re]||null;if(!a)throw Error(i(90));mt(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&dt(n)}break e;case"textarea":xt(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&bt(e,!!r.multiple,t,!1)}}}var _t=!1;function Ft(e,t,r){if(_t)return e(t,r);_t=!0;try{return e(t)}finally{if(_t=!1,(null!==Dt||null!==Lt)&&(Bc(),Dt&&(t=Dt,e=Lt,Lt=Dt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function $t(e,t){var r=e.stateNode;if(null===r)return null;var n=r[Re]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(i(231,t,typeof r));return r}var Nt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Wt=!1;if(Nt)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Lh){Wt=!1}var Bt=null,Ht=null,Vt=null;function Yt(){if(Vt)return Vt;var e,t,r=Ht,n=r.length,a="value"in Bt?Bt.value:Bt.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===a[i-t];t++);return Vt=a.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Jt(){return!1}function Kt(e){function t(t,r,n,a,i){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?qt:Jt,this.isPropagationStopped=Jt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Xt,Qt,Zt,er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=Kt(er),rr=d({},er,{view:0,detail:0}),nr=Kt(rr),ar=d({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Xt=e.screenX-Zt.screenX,Qt=e.screenY-Zt.screenY):Qt=Xt=0,Zt=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),ir=Kt(ar),or=Kt(d({},ar,{dataTransfer:0})),sr=Kt(d({},rr,{relatedTarget:0})),lr=Kt(d({},er,{animationName:0,elapsedTime:0,pseudoElement:0})),cr=Kt(d({},er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ur=Kt(d({},er,{data:0})),dr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pr[e])&&!!t[e]}function mr(){return fr}var gr=Kt(d({},rr,{key:function(e){if(e.key){var t=dr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yr=Kt(d({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),br=Kt(d({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr})),xr=Kt(d({},er,{propertyName:0,elapsedTime:0,pseudoElement:0})),vr=Kt(d({},ar,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wr=Kt(d({},er,{newState:0,oldState:0})),Sr=[9,13,27,32],jr=Nt&&"CompositionEvent"in window,Cr=null;Nt&&"documentMode"in document&&(Cr=document.documentMode);var kr=Nt&&"TextEvent"in window&&!Cr,Pr=Nt&&(!jr||Cr&&8<Cr&&11>=Cr),Ar=String.fromCharCode(32),Er=!1;function Ir(e,t){switch(e){case"keyup":return-1!==Sr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Tr=!1,Rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rr[e.type]:"textarea"===t}function Dr(e,t,r,n){Dt?Lt?Lt.push(n):Lt=[n]:Dt=n,0<(t=Yu(t,"onChange")).length&&(r=new tr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Lr=null,Or=null;function _r(e){Fu(e,0)}function Fr(e){if(dt(Ue(e)))return e}function $r(e,t){if("change"===e)return t}var Nr=!1;if(Nt){var Wr;if(Nt){var Ur="oninput"in document;if(!Ur){var Br=document.createElement("div");Br.setAttribute("oninput","return;"),Ur="function"==typeof Br.oninput}Wr=Ur}else Wr=!1;Nr=Wr&&(!document.documentMode||9<document.documentMode)}function Hr(){Lr&&(Lr.detachEvent("onpropertychange",Vr),Or=Lr=null)}function Vr(e){if("value"===e.propertyName&&Fr(Or)){var t=[];Dr(t,Or,e,Rt(e)),Ft(_r,t)}}function Yr(e,t,r){"focusin"===e?(Hr(),Or=r,(Lr=t).attachEvent("onpropertychange",Vr)):"focusout"===e&&Hr()}function Gr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fr(Or)}function qr(e,t){if("click"===e)return Fr(t)}function Jr(e,t){if("input"===e||"change"===e)return Fr(t)}var Kr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Xr(e,t){if(Kr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!J.call(t,a)||!Kr(e[a],t[a]))return!1}return!0}function Qr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zr(e,t){var r,n=Qr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qr(n)}}function en(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?en(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function tn(e){for(var t=ht((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=ht((e=t.contentWindow).document)}return t}function rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nn=Nt&&"documentMode"in document&&11>=document.documentMode,an=null,on=null,sn=null,ln=!1;function cn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;ln||null==an||an!==ht(n)||(n="selectionStart"in(n=an)&&rn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},sn&&Xr(sn,n)||(sn=n,0<(n=Yu(on,"onSelect")).length&&(t=new tr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=an)))}function un(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var dn={animationend:un("Animation","AnimationEnd"),animationiteration:un("Animation","AnimationIteration"),animationstart:un("Animation","AnimationStart"),transitionrun:un("Transition","TransitionRun"),transitionstart:un("Transition","TransitionStart"),transitioncancel:un("Transition","TransitionCancel"),transitionend:un("Transition","TransitionEnd")},hn={},pn={};function fn(e){if(hn[e])return hn[e];if(!dn[e])return e;var t,r=dn[e];for(t in r)if(r.hasOwnProperty(t)&&t in pn)return hn[e]=r[t];return e}Nt&&(pn=document.createElement("div").style,"AnimationEvent"in window||(delete dn.animationend.animation,delete dn.animationiteration.animation,delete dn.animationstart.animation),"TransitionEvent"in window||delete dn.transitionend.transition);var mn=fn("animationend"),gn=fn("animationiteration"),yn=fn("animationstart"),bn=fn("transitionrun"),xn=fn("transitionstart"),vn=fn("transitioncancel"),wn=fn("transitionend"),Sn=new Map,jn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,t){Sn.set(e,t),Ge(t,[e])}jn.push("scrollEnd");var kn=new WeakMap;function Pn(e,t){if("object"==typeof e&&null!==e){var r=kn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:st(t)},kn.set(e,t),t)}return{value:e,source:t,stack:st(t)}}var An=[],En=0,In=0;function Mn(){for(var e=En,t=In=En=0;t<e;){var r=An[t];An[t++]=null;var n=An[t];An[t++]=null;var a=An[t];An[t++]=null;var i=An[t];if(An[t++]=null,null!==n&&null!==a){var o=n.pending;null===o?a.next=a:(a.next=o.next,o.next=a),n.pending=a}0!==i&&Dn(r,a,i)}}function Tn(e,t,r,n){An[En++]=e,An[En++]=t,An[En++]=r,An[En++]=n,In|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Rn(e,t,r,n){return Tn(e,t,r,n),Ln(e)}function zn(e,t){return Tn(e,null,null,t),Ln(e)}function Dn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var a=!1,i=e.return;null!==i;)i.childLanes|=r,null!==(n=i.alternate)&&(n.childLanes|=r),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-he(r),null===(n=(e=i.hiddenUpdates)[a])?e[a]=[t]:n.push(t),t.lane=536870912|r),i):null}function Ln(e){if(50<Dc)throw Dc=0,Lc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var On={};function _n(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(e,t,r,n){return new _n(e,t,r,n)}function $n(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nn(e,t){var r=e.alternate;return null===r?((r=Fn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Wn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Un(e,t,r,n,a,o){var s=0;if(n=e,"function"==typeof e)$n(e)&&(s=1);else if("string"==typeof e)s=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,r,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case P:return(e=Fn(31,r,t,a)).elementType=P,e.lanes=o,e;case m:return Bn(r.children,a,o,t);case g:s=8,a|=24;break;case y:return(e=Fn(12,r,t,2|a)).elementType=y,e.lanes=o,e;case S:return(e=Fn(13,r,t,a)).elementType=S,e.lanes=o,e;case j:return(e=Fn(19,r,t,a)).elementType=j,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case v:s=10;break e;case x:s=9;break e;case w:s=11;break e;case C:s=14;break e;case k:s=16,n=null;break e}s=29,r=Error(i(130,null===e?"null":typeof e,"")),n=null}return(t=Fn(s,r,t,a)).elementType=e,t.type=n,t.lanes=o,t}function Bn(e,t,r,n){return(e=Fn(7,e,n,t)).lanes=r,e}function Hn(e,t,r){return(e=Fn(6,e,null,t)).lanes=r,e}function Vn(e,t,r){return(t=Fn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Yn=[],Gn=0,qn=null,Jn=0,Kn=[],Xn=0,Qn=null,Zn=1,ea="";function ta(e,t){Yn[Gn++]=Jn,Yn[Gn++]=qn,qn=e,Jn=t}function ra(e,t,r){Kn[Xn++]=Zn,Kn[Xn++]=ea,Kn[Xn++]=Qn,Qn=e;var n=Zn;e=ea;var a=32-he(n)-1;n&=~(1<<a),r+=1;var i=32-he(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Zn=1<<32-he(t)+a|r<<a|n,ea=i+e}else Zn=1<<i|r<<a|n,ea=e}function na(e){null!==e.return&&(ta(e,1),ra(e,1,0))}function aa(e){for(;e===qn;)qn=Yn[--Gn],Yn[Gn]=null,Jn=Yn[--Gn],Yn[Gn]=null;for(;e===Qn;)Qn=Kn[--Xn],Kn[Xn]=null,ea=Kn[--Xn],Kn[Xn]=null,Zn=Kn[--Xn],Kn[Xn]=null}var ia=null,oa=null,sa=!1,la=null,ca=!1,ua=Error(i(519));function da(e){throw ya(Pn(Error(i(418,"")),e)),ua}function ha(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Te]=e,t[Re]=n,r){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(r=0;r<Ou.length;r++)$u(Ou[r],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),gt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ut(t);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),vt(t,n.value,n.defaultValue,n.children),ut(t)}"string"!=typeof(r=n.children)&&"number"!=typeof r&&"bigint"!=typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Qu(t.textContent,r)?(null!=n.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=n.onScroll&&$u("scroll",t),null!=n.onScrollEnd&&$u("scrollend",t),null!=n.onClick&&(t.onclick=Zu),t=!0):t=!1,t||da(e)}function pa(e){for(ia=e.return;ia;)switch(ia.tag){case 5:case 13:return void(ca=!1);case 27:case 3:return void(ca=!0);default:ia=ia.return}}function fa(e){if(e!==ia)return!1;if(!sa)return pa(e),sa=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ld(e.type,e.memoizedProps)),t=!t),t&&oa&&da(e),pa(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){oa=xd(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}oa=null}}else 27===r?(r=oa,md(e.type)?(e=vd,vd=null,oa=e):oa=r):oa=ia?xd(e.stateNode.nextSibling):null;return!0}function ma(){oa=ia=null,sa=!1}function ga(){var e=la;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),la=null),e}function ya(e){null===la?la=[e]:la.push(e)}var ba=F(null),xa=null,va=null;function wa(e,t,r){N(ba,t._currentValue),t._currentValue=r}function Sa(e){e._currentValue=ba.current,$(ba)}function ja(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ca(e,t,r,n){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var o=a.dependencies;if(null!==o){var s=a.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),ja(o.return,r,e),n||(s=null);break e}o=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=r,null!==(o=s.alternate)&&(o.lanes|=r),ja(s,r,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function ka(e,t,r,n){e=null;for(var a=t,o=!1;null!==a;){if(!o)if(524288&a.flags)o=!0;else if(262144&a.flags)break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(i(387));if(null!==(s=s.memoizedProps)){var l=a.type;Kr(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===H.current){if(null===(s=a.alternate))throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Kd):e=[Kd])}a=a.return}null!==e&&Ca(t,e,r,n),t.flags|=262144}function Pa(e){for(e=e.firstContext;null!==e;){if(!Kr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Aa(e){xa=e,va=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ea(e){return Ma(xa,e)}function Ia(e,t){return null===xa&&Aa(e),Ma(e,t)}function Ma(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===va){if(null===e)throw Error(i(308));va=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else va=va.next=t;return r}var Ta="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ra=e.unstable_scheduleCallback,za=e.unstable_NormalPriority,Da={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function La(){return{controller:new Ta,data:new Map,refCount:0}}function Oa(e){e.refCount--,0===e.refCount&&Ra(za,(function(){e.controller.abort()}))}var _a=null,Fa=0,$a=0,Na=null;function Wa(){if(0===--Fa&&null!==_a){null!==Na&&(Na.status="fulfilled");var e=_a;_a=null,$a=0,Na=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ua=z.S;z.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===_a){var r=_a=[];Fa=0,$a=Tu(),Na={status:"pending",value:void 0,then:function(e){r.push(e)}}}Fa++,t.then(Wa,Wa)}(0,t),null!==Ua&&Ua(e,t)};var Ba=F(null);function Ha(){var e=Ba.current;return null!==e?e:ic.pooledCache}function Va(e,t){N(Ba,null===t?Ba.current:t.pool)}function Ya(){var e=Ha();return null===e?null:{parent:Da._currentValue,pool:e}}var Ga=Error(i(460)),qa=Error(i(474)),Ja=Error(i(542)),Ka={then:function(){}};function Xa(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Qa(){}function Za(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Qa,Qa),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw ri(e=t.reason),e;default:if("string"==typeof t.status)t.then(Qa,Qa);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}}),(function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ri(e=t.reason),e}throw ei=t,Ga}}var ei=null;function ti(){if(null===ei)throw Error(i(459));var e=ei;return ei=null,e}function ri(e){if(e===Ga||e===Ja)throw Error(i(483))}var ni=!1;function ai(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function si(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&ac){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=Ln(e),Dn(e,null,r),t}return Tn(e,n,t,r),Ln(e)}function li(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Pe(e,r)}}function ci(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===i?a=i=o:i=i.next=o,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var ui=!1;function di(){if(ui&&null!==Na)throw Na}function hi(e,t,r,n){ui=!1;var a=e.updateQueue;ni=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==i){var h=a.baseState;for(o=0,u=c=l=null,s=i;;){var p=-536870913&s.lane,f=p!==s.lane;if(f?(sc&p)===p:(n&p)===p){0!==p&&p===$a&&(ui=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;p=t;var y=r;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){h=m.call(y,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(y,h,p):m))break e;h=d({},h,p);break e;case 2:ni=!0}}null!==(p=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=a.callbacks)?a.callbacks=[p]:f.push(p))}else f={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=p;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}null===u&&(l=h),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===i&&(a.shared.lanes=0),mc|=o,e.lanes=o,e.memoizedState=h}}function pi(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function fi(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)pi(r[e],t)}var mi=F(null),gi=F(0);function yi(e,t){N(gi,e=pc),N(mi,t),pc=e|t.baseLanes}function bi(){N(gi,pc),N(mi,mi.current)}function xi(){pc=gi.current,$(mi),$(gi)}var vi=0,wi=null,Si=null,ji=null,Ci=!1,ki=!1,Pi=!1,Ai=0,Ei=0,Ii=null,Mi=0;function Ti(){throw Error(i(321))}function Ri(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Kr(e[r],t[r]))return!1;return!0}function zi(e,t,r,n,a,i){return vi=i,wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=null===e||null===e.memoizedState?qo:Jo,Pi=!1,i=r(n,a),Pi=!1,ki&&(i=Li(t,r,n,a)),Di(e),i}function Di(e){z.H=Go;var t=null!==Si&&null!==Si.next;if(vi=0,ji=Si=wi=null,Ci=!1,Ei=0,Ii=null,t)throw Error(i(300));null===e||Is||null!==(e=e.dependencies)&&Pa(e)&&(Is=!0)}function Li(e,t,r,n){wi=e;var a=0;do{if(ki&&(Ii=null),Ei=0,ki=!1,25<=a)throw Error(i(301));if(a+=1,ji=Si=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}z.H=Ko,o=t(r,n)}while(ki);return o}function Oi(){var e=z.H,t=e.useState()[0];return t="function"==typeof t.then?Ui(t):t,e=e.useState()[0],(null!==Si?Si.memoizedState:null)!==e&&(wi.flags|=1024),t}function _i(){var e=0!==Ai;return Ai=0,e}function Fi(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function $i(e){if(Ci){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ci=!1}vi=0,ji=Si=wi=null,ki=!1,Ei=Ai=0,Ii=null}function Ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ji?wi.memoizedState=ji=e:ji=ji.next=e,ji}function Wi(){if(null===Si){var e=wi.alternate;e=null!==e?e.memoizedState:null}else e=Si.next;var t=null===ji?wi.memoizedState:ji.next;if(null!==t)ji=t,Si=e;else{if(null===e){if(null===wi.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Si=e).memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},null===ji?wi.memoizedState=ji=e:ji=ji.next=e}return ji}function Ui(e){var t=Ei;return Ei+=1,null===Ii&&(Ii=[]),e=Za(Ii,e,t),t=wi,null===(null===ji?t.memoizedState:ji.next)&&(t=t.alternate,z.H=null===t||null===t.memoizedState?qo:Jo),e}function Bi(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ui(e);if(e.$$typeof===v)return Ea(e)}throw Error(i(438,String(e)))}function Hi(e){var t=null,r=wi.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=wi.alternate;null!==n&&null!==(n=n.updateQueue)&&null!=(n=n.memoCache)&&(t={data:n.data.map((function(e){return e.slice()})),index:0})}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=A;return t.index++,r}function Vi(e,t){return"function"==typeof t?t(e):t}function Yi(e){return Gi(Wi(),Si,e)}function Gi(e,t,r){var n=e.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=r;var a=e.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,n.pending=null}if(o=e.baseState,null===a)e.memoizedState=o;else{var l=s=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(sc&h)===h:(vi&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===$a&&(d=!0);else{if((vi&p)===p){u=u.next,p===$a&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=o):c=c.next=h,wi.lanes|=p,mc|=p}h=u.action,Pi&&r(o,h),o=u.hasEagerState?u.eagerState:r(o,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=o):c=c.next=p,wi.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=o:c.next=l,!Kr(o,e.memoizedState)&&(Is=!0,d&&null!==(r=Na)))throw r;e.memoizedState=o,e.baseState=s,e.baseQueue=c,n.lastRenderedState=o}return null===a&&(n.lanes=0),[e.memoizedState,n.dispatch]}function qi(e){var t=Wi(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(null!==a){r.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);Kr(o,t.memoizedState)||(Is=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Ji(e,t,r){var n=wi,a=Wi(),o=sa;if(o){if(void 0===r)throw Error(i(407));r=r()}else r=t();var s=!Kr((Si||a).memoizedState,r);if(s&&(a.memoizedState=r,Is=!0),a=a.queue,xo(2048,8,Qi.bind(null,n,a,e),[e]),a.getSnapshot!==t||s||null!==ji&&1&ji.memoizedState.tag){if(n.flags|=2048,go(9,{destroy:void 0,resource:void 0},Xi.bind(null,n,a,r,t),null),null===ic)throw Error(i(349));o||124&vi||Ki(n,t,r)}return r}function Ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=wi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Xi(e,t,r,n){t.value=r,t.getSnapshot=n,Zi(t)&&eo(e)}function Qi(e,t,r){return r((function(){Zi(t)&&eo(e)}))}function Zi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Kr(e,r)}catch(n){return!0}}function eo(e){var t=zn(e,2);null!==t&&Fc(t,0,2)}function to(e){var t=Ni();if("function"==typeof e){var r=e;if(e=r(),Pi){de(!0);try{r()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},t}function ro(e,t,r,n){return e.baseState=r,Gi(e,Si,"function"==typeof n?n:Vi)}function no(e,t,r,n,a){if(Ho(e))throw Error(i(485));if(null!==(e=t.action)){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==z.T?r(!0):o.isTransition=!1,n(o),null===(r=t.pending)?(o.next=t.pending=o,ao(t,o)):(o.next=r.next,t.pending=r.next=o)}}function ao(e,t){var r=t.action,n=t.payload,a=e.state;if(t.isTransition){var i=z.T,o={};z.T=o;try{var s=r(a,n),l=z.S;null!==l&&l(o,s),io(e,t,s)}catch(c){so(e,t,c)}finally{z.T=i}}else try{io(e,t,i=r(a,n))}catch(u){so(e,t,u)}}function io(e,t,r){null!==r&&"object"==typeof r&&"function"==typeof r.then?r.then((function(r){oo(e,t,r)}),(function(r){return so(e,t,r)})):oo(e,t,r)}function oo(e,t,r){t.status="fulfilled",t.value=r,lo(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,ao(e,r)))}function so(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,lo(t),t=t.next}while(t!==n)}e.action=null}function lo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function co(e,t){return t}function uo(e,t){if(sa){var r=ic.formState;if(null!==r){e:{var n=wi;if(sa){if(oa){t:{for(var a=oa,i=ca;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=xd(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){oa=xd(a.nextSibling),n="F!"===a.data;break e}}da(n)}n=!1}n&&(t=r[0])}}return(r=Ni()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:t},r.queue=n,r=Wo.bind(null,wi,n),n.dispatch=r,n=to(!1),i=Bo.bind(null,wi,!1,n.queue),a={state:t,dispatch:null,action:e,pending:null},(n=Ni()).queue=a,r=no.bind(null,wi,a,i,r),a.dispatch=r,n.memoizedState=e,[t,r,!1]}function ho(e){return po(Wi(),Si,e)}function po(e,t,r){if(t=Gi(e,t,co)[0],e=Yi(Vi)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var n=Ui(t)}catch(o){if(o===Ga)throw Ja;throw o}else n=t;var a=(t=Wi()).queue,i=a.dispatch;return r!==t.memoizedState&&(wi.flags|=2048,go(9,{destroy:void 0,resource:void 0},fo.bind(null,a,r),null)),[n,i,e]}function fo(e,t){e.action=t}function mo(e){var t=Wi(),r=Si;if(null!==r)return po(t,r,e);Wi(),t=t.memoizedState;var n=(r=Wi()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function go(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=wi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wi.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function yo(){return Wi().memoizedState}function bo(e,t,r,n){var a=Ni();n=void 0===n?null:n,wi.flags|=e,a.memoizedState=go(1|t,{destroy:void 0,resource:void 0},r,n)}function xo(e,t,r,n){var a=Wi();n=void 0===n?null:n;var i=a.memoizedState.inst;null!==Si&&null!==n&&Ri(n,Si.memoizedState.deps)?a.memoizedState=go(t,i,r,n):(wi.flags|=e,a.memoizedState=go(1|t,i,r,n))}function vo(e,t){bo(8390656,8,e,t)}function wo(e,t){xo(2048,8,e,t)}function So(e,t){return xo(4,2,e,t)}function jo(e,t){return xo(4,4,e,t)}function Co(e,t){if("function"==typeof t){e=e();var r=t(e);return function(){"function"==typeof r?r():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function ko(e,t,r){r=null!=r?r.concat([e]):null,xo(4,4,Co.bind(null,t,e),r)}function Po(){}function Ao(e,t){var r=Wi();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&Ri(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Eo(e,t){var r=Wi();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&Ri(t,n[1]))return n[0];if(n=e(),Pi){de(!0);try{e()}finally{de(!1)}}return r.memoizedState=[n,t],n}function Io(e,t,r){return void 0===r||1073741824&vi?e.memoizedState=t:(e.memoizedState=r,e=_c(),wi.lanes|=e,mc|=e,r)}function Mo(e,t,r,n){return Kr(r,t)?r:null!==mi.current?(e=Io(e,r,n),Kr(e,t)||(Is=!0),e):42&vi?(e=_c(),wi.lanes|=e,mc|=e,t):(Is=!0,e.memoizedState=r)}function To(e,t,r,n,a){var i=D.p;D.p=0!==i&&8>i?i:8;var o,s,l,c=z.T,u={};z.T=u,Bo(e,!1,t,r);try{var d=a(),h=z.S;null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then?Uo(e,t,(o=n,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then((function(){l.status="fulfilled",l.value=o;for(var e=0;e<s.length;e++)(0,s[e])(o)}),(function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)})),l),Oc()):Uo(e,t,n,Oc())}catch(p){Uo(e,t,{then:function(){},status:"rejected",reason:p},Oc())}finally{D.p=i,z.T=c}}function Ro(){}function zo(e,t,r,n){if(5!==e.tag)throw Error(i(476));var a=Do(e).queue;To(e,a,t,L,null===r?Ro:function(){return Lo(e),r(n)})}function Do(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:L},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Lo(e){Uo(e,Do(e).next.queue,{},Oc())}function Oo(){return Ea(Kd)}function _o(){return Wi().memoizedState}function Fo(){return Wi().memoizedState}function $o(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Oc(),n=si(t,e=oi(r),r);return null!==n&&(Fc(n,0,r),li(n,t,r)),t={cache:La()},void(e.payload=t)}t=t.return}}function No(e,t,r){var n=Oc();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ho(e)?Vo(t,r):null!==(r=Rn(e,t,r,n))&&(Fc(r,0,n),Yo(r,t,n))}function Wo(e,t,r){Uo(e,t,r,Oc())}function Uo(e,t,r,n){var a={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ho(e))Vo(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Kr(s,o))return Tn(e,t,a,0),null===ic&&Mn(),!1}catch(l){}if(null!==(r=Rn(e,t,a,n)))return Fc(r,0,n),Yo(r,t,n),!0}return!1}function Bo(e,t,r,n){if(n={lane:2,revertLane:Tu(),action:n,hasEagerState:!1,eagerState:null,next:null},Ho(e)){if(t)throw Error(i(479))}else null!==(t=Rn(e,r,n,2))&&Fc(t,0,2)}function Ho(e){var t=e.alternate;return e===wi||null!==t&&t===wi}function Vo(e,t){ki=Ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Yo(e,t,r){if(4194048&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Pe(e,r)}}var Go={readContext:Ea,use:Bi,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useLayoutEffect:Ti,useInsertionEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useSyncExternalStore:Ti,useId:Ti,useHostTransitionStatus:Ti,useFormState:Ti,useActionState:Ti,useOptimistic:Ti,useMemoCache:Ti,useCacheRefresh:Ti},qo={readContext:Ea,use:Bi,useCallback:function(e,t){return Ni().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:vo,useImperativeHandle:function(e,t,r){r=null!=r?r.concat([e]):null,bo(4194308,4,Co.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bo(4194308,4,e,t)},useInsertionEffect:function(e,t){bo(4,2,e,t)},useMemo:function(e,t){var r=Ni();t=void 0===t?null:t;var n=e();if(Pi){de(!0);try{e()}finally{de(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=Ni();if(void 0!==r){var a=r(t);if(Pi){de(!0);try{r(t)}finally{de(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=No.bind(null,wi,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ni().memoizedState=e},useState:function(e){var t=(e=to(e)).queue,r=Wo.bind(null,wi,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Po,useDeferredValue:function(e,t){return Io(Ni(),e,t)},useTransition:function(){var e=to(!1);return e=To.bind(null,wi,e.queue,!0,!1),Ni().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=wi,a=Ni();if(sa){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===ic)throw Error(i(349));124&sc||Ki(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,vo(Qi.bind(null,n,o,e),[e]),n.flags|=2048,go(9,{destroy:void 0,resource:void 0},Xi.bind(null,n,o,r,t),null),r},useId:function(){var e=Ni(),t=ic.identifierPrefix;if(sa){var r=ea;t=""+t+"R"+(r=(Zn&~(1<<32-he(Zn)-1)).toString(32)+r),0<(r=Ai++)&&(t+="H"+r.toString(32)),t+=""}else t=""+t+"r"+(r=Mi++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Oo,useFormState:uo,useActionState:uo,useOptimistic:function(e){var t=Ni();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Bo.bind(null,wi,!0,r),r.dispatch=t,[e,t]},useMemoCache:Hi,useCacheRefresh:function(){return Ni().memoizedState=$o.bind(null,wi)}},Jo={readContext:Ea,use:Bi,useCallback:Ao,useContext:Ea,useEffect:wo,useImperativeHandle:ko,useInsertionEffect:So,useLayoutEffect:jo,useMemo:Eo,useReducer:Yi,useRef:yo,useState:function(){return Yi(Vi)},useDebugValue:Po,useDeferredValue:function(e,t){return Mo(Wi(),Si.memoizedState,e,t)},useTransition:function(){var e=Yi(Vi)[0],t=Wi().memoizedState;return["boolean"==typeof e?e:Ui(e),t]},useSyncExternalStore:Ji,useId:_o,useHostTransitionStatus:Oo,useFormState:ho,useActionState:ho,useOptimistic:function(e,t){return ro(Wi(),0,e,t)},useMemoCache:Hi,useCacheRefresh:Fo},Ko={readContext:Ea,use:Bi,useCallback:Ao,useContext:Ea,useEffect:wo,useImperativeHandle:ko,useInsertionEffect:So,useLayoutEffect:jo,useMemo:Eo,useReducer:qi,useRef:yo,useState:function(){return qi(Vi)},useDebugValue:Po,useDeferredValue:function(e,t){var r=Wi();return null===Si?Io(r,e,t):Mo(r,Si.memoizedState,e,t)},useTransition:function(){var e=qi(Vi)[0],t=Wi().memoizedState;return["boolean"==typeof e?e:Ui(e),t]},useSyncExternalStore:Ji,useId:_o,useHostTransitionStatus:Oo,useFormState:mo,useActionState:mo,useOptimistic:function(e,t){var r=Wi();return null!==Si?ro(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Hi,useCacheRefresh:Fo},Xo=null,Qo=0;function Zo(e){var t=Qo;return Qo+=1,null===Xo&&(Xo=[]),Za(Xo,e,t)}function es(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ts(e,t){if(t.$$typeof===h)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rs(e){return(0,e._init)(e._payload)}function ns(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Nn(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Hn(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===m?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===k&&rs(i)===t.type)?(es(t=a(t,r.props),r),t.return=e,t):(es(t=Un(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Vn(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=Bn(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Hn(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return es(r=Un(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case f:return(t=Vn(t,e.mode,r)).return=e,t;case k:return h(e,t=(0,t._init)(t._payload),r)}if(R(t)||I(t))return(t=Bn(t,e.mode,r,null)).return=e,t;if("function"==typeof t.then)return h(e,Zo(t),r);if(t.$$typeof===v)return h(e,Ia(e,t),r);ts(e,t)}return null}function g(e,t,r,n){var a=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return null!==a?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return r.key===a?c(e,t,r,n):null;case f:return r.key===a?u(e,t,r,n):null;case k:return g(e,t,r=(a=r._init)(r._payload),n)}if(R(r)||I(r))return null!==a?null:d(e,t,r,n,null);if("function"==typeof r.then)return g(e,t,Zo(r),n);if(r.$$typeof===v)return g(e,t,Ia(e,r),n);ts(e,r)}return null}function y(e,t,r,n,a){if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case f:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case k:return y(e,t,r,n=(0,n._init)(n._payload),a)}if(R(n)||I(n))return d(t,e=e.get(r)||null,n,a,null);if("function"==typeof n.then)return y(e,t,r,Zo(n),a);if(n.$$typeof===v)return y(e,t,r,Ia(t,n),a);ts(t,n)}return null}function b(l,c,u,d){if("object"==typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var x=u.key;null!==c;){if(c.key===x){if((x=u.type)===m){if(7===c.tag){r(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===k&&rs(x)===c.type){r(l,c.sibling),es(d=a(c,u.props),u),d.return=l,l=d;break e}r(l,c);break}t(l,c),c=c.sibling}u.type===m?((d=Bn(u.props.children,l.mode,d,u.key)).return=l,l=d):(es(d=Un(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return s(l);case f:e:{for(x=u.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){r(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}r(l,c);break}t(l,c),c=c.sibling}(d=Vn(u,l.mode,d)).return=l,l=d}return s(l);case k:return b(l,c,u=(x=u._init)(u._payload),d)}if(R(u))return function(a,i,s,l){for(var c=null,u=null,d=i,p=i=0,f=null;null!==d&&p<s.length;p++){d.index>p?(f=d,d=null):f=d.sibling;var m=g(a,d,s[p],l);if(null===m){null===d&&(d=f);break}e&&d&&null===m.alternate&&t(a,d),i=o(m,i,p),null===u?c=m:u.sibling=m,u=m,d=f}if(p===s.length)return r(a,d),sa&&ta(a,p),c;if(null===d){for(;p<s.length;p++)null!==(d=h(a,s[p],l))&&(i=o(d,i,p),null===u?c=d:u.sibling=d,u=d);return sa&&ta(a,p),c}for(d=n(d);p<s.length;p++)null!==(f=y(d,a,p,s[p],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?p:f.key),i=o(f,i,p),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(a,e)})),sa&&ta(a,p),c}(l,c,u,d);if(I(u)){if("function"!=typeof(x=I(u)))throw Error(i(150));return function(a,s,l,c){if(null==l)throw Error(i(151));for(var u=null,d=null,p=s,f=s=0,m=null,b=l.next();null!==p&&!b.done;f++,b=l.next()){p.index>f?(m=p,p=null):m=p.sibling;var x=g(a,p,b.value,c);if(null===x){null===p&&(p=m);break}e&&p&&null===x.alternate&&t(a,p),s=o(x,s,f),null===d?u=x:d.sibling=x,d=x,p=m}if(b.done)return r(a,p),sa&&ta(a,f),u;if(null===p){for(;!b.done;f++,b=l.next())null!==(b=h(a,b.value,c))&&(s=o(b,s,f),null===d?u=b:d.sibling=b,d=b);return sa&&ta(a,f),u}for(p=n(p);!b.done;f++,b=l.next())null!==(b=y(p,a,f,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?f:b.key),s=o(b,s,f),null===d?u=b:d.sibling=b,d=b);return e&&p.forEach((function(e){return t(a,e)})),sa&&ta(a,f),u}(l,c,u=x.call(u),d)}if("function"==typeof u.then)return b(l,c,Zo(u),d);if(u.$$typeof===v)return b(l,c,Ia(l,u),d);ts(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(r(l,c.sibling),(d=a(c,u)).return=l,l=d):(r(l,c),(d=Hn(u,l.mode,d)).return=l,l=d),s(l)):r(l,c)}return function(e,t,r,n){try{Qo=0;var a=b(e,t,r,n);return Xo=null,a}catch(o){if(o===Ga||o===Ja)throw o;var i=Fn(29,o,null,e.mode);return i.lanes=n,i.return=e,i}}}var as=ns(!0),is=ns(!1),os=F(null),ss=null;function ls(e){var t=e.alternate;N(hs,1&hs.current),N(os,e),null===ss&&(null===t||null!==mi.current||null!==t.memoizedState)&&(ss=e)}function cs(e){if(22===e.tag){if(N(hs,hs.current),N(os,e),null===ss){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ss=e)}}else us()}function us(){N(hs,hs.current),N(os,os.current)}function ds(e){$(os),ss===e&&(ss=null),$(hs)}var hs=F(0);function ps(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||bd(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fs(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:d({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ms={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Oc(),a=oi(n);a.payload=t,null!=r&&(a.callback=r),null!==(t=si(e,a,n))&&(Fc(t,0,n),li(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Oc(),a=oi(n);a.tag=1,a.payload=t,null!=r&&(a.callback=r),null!==(t=si(e,a,n))&&(Fc(t,0,n),li(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Oc(),n=oi(r);n.tag=2,null!=t&&(n.callback=t),null!==(t=si(e,n,r))&&(Fc(t,0,r),li(t,e,r))}};function gs(e,t,r,n,a,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,o):!(t.prototype&&t.prototype.isPureReactComponent&&Xr(r,n)&&Xr(a,i))}function ys(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ms.enqueueReplaceState(t,t.state,null)}function bs(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var a in r===t&&(r=d({},r)),e)void 0===r[a]&&(r[a]=e[a]);return r}var xs="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function vs(e){xs(e)}function ws(e){}function Ss(e){xs(e)}function js(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout((function(){throw r}))}}function Cs(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout((function(){throw n}))}}function ks(e,t,r){return(r=oi(r)).tag=3,r.payload={element:null},r.callback=function(){js(e,t)},r}function Ps(e){return(e=oi(e)).tag=3,e}function As(e,t,r,n){var a=r.type.getDerivedStateFromError;if("function"==typeof a){var i=n.value;e.payload=function(){return a(i)},e.callback=function(){Cs(t,r,n)}}var o=r.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){Cs(t,r,n),"function"!=typeof a&&(null===Pc?Pc=new Set([this]):Pc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Es=Error(i(461)),Is=!1;function Ms(e,t,r,n){t.child=null===e?is(t,null,r,n):as(t,e.child,r,n)}function Ts(e,t,r,n,a){r=r.render;var i=t.ref;if("ref"in n){var o={};for(var s in n)"ref"!==s&&(o[s]=n[s])}else o=n;return Aa(t),n=zi(e,t,r,o,i,a),s=_i(),null===e||Is?(sa&&s&&na(t),t.flags|=1,Ms(e,t,n,a),t.child):(Fi(e,t,a),Xs(e,t,a))}function Rs(e,t,r,n,a){if(null===e){var i=r.type;return"function"!=typeof i||$n(i)||void 0!==i.defaultProps||null!==r.compare?((e=Un(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,zs(e,t,i,n,a))}if(i=e.child,!Qs(e,a)){var o=i.memoizedProps;if((r=null!==(r=r.compare)?r:Xr)(o,n)&&e.ref===t.ref)return Xs(e,t,a)}return t.flags|=1,(e=Nn(i,n)).ref=t.ref,e.return=t,t.child=e}function zs(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(Xr(i,n)&&e.ref===t.ref){if(Is=!1,t.pendingProps=n=i,!Qs(e,a))return t.lanes=e.lanes,Xs(e,t,a);131072&e.flags&&(Is=!0)}}return _s(e,t,r,n,a)}function Ds(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(128&t.flags){if(n=null!==i?i.baseLanes|r:r,null!==e){for(a=t.child=e.child,i=0;null!==a;)i=i|a.lanes|a.childLanes,a=a.sibling;t.childLanes=i&~n}else t.childLanes=0,t.child=null;return Ls(e,t,n,r)}if(!(536870912&r))return t.lanes=t.childLanes=536870912,Ls(e,t,null!==i?i.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Va(0,null!==i?i.cachePool:null),null!==i?yi(t,i):bi(),cs(t)}else null!==i?(Va(0,i.cachePool),yi(t,i),us(),t.memoizedState=null):(null!==e&&Va(0,null),bi(),us());return Ms(e,t,a,r),t.child}function Ls(e,t,r,n){var a=Ha();return a=null===a?null:{parent:Da._currentValue,pool:a},t.memoizedState={baseLanes:r,cachePool:a},null!==e&&Va(0,null),bi(),cs(t),null!==e&&ka(e,t,n,!0),null}function Os(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof r&&"object"!=typeof r)throw Error(i(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function _s(e,t,r,n,a){return Aa(t),r=zi(e,t,r,n,void 0,a),n=_i(),null===e||Is?(sa&&n&&na(t),t.flags|=1,Ms(e,t,r,a),t.child):(Fi(e,t,a),Xs(e,t,a))}function Fs(e,t,r,n,a,i){return Aa(t),t.updateQueue=null,r=Li(t,n,r,a),Di(e),n=_i(),null===e||Is?(sa&&n&&na(t),t.flags|=1,Ms(e,t,r,i),t.child):(Fi(e,t,i),Xs(e,t,i))}function $s(e,t,r,n,a){if(Aa(t),null===t.stateNode){var i=On,o=r.contextType;"object"==typeof o&&null!==o&&(i=Ea(o)),i=new r(n,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=ms,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=n,i.state=t.memoizedState,i.refs={},ai(t),o=r.contextType,i.context="object"==typeof o&&null!==o?Ea(o):On,i.state=t.memoizedState,"function"==typeof(o=r.getDerivedStateFromProps)&&(fs(t,r,o,n),i.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(o=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&ms.enqueueReplaceState(i,i.state,null),hi(t,n,i,a),di(),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,l=bs(r,s);i.props=l;var c=i.context,u=r.contextType;o=On,"object"==typeof u&&null!==u&&(o=Ea(u));var d=r.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s||c!==o)&&ys(t,i,n,o),ni=!1;var h=t.memoizedState;i.state=h,hi(t,n,i,a),di(),c=t.memoizedState,s||h!==c||ni?("function"==typeof d&&(fs(t,r,d,n),c=t.memoizedState),(l=ni||gs(t,r,l,n,h,c,o))?(u||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=o,n=l):("function"==typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,ii(e,t),u=bs(r,o=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=r.contextType,l=On,"object"==typeof c&&null!==c&&(l=Ea(c)),(c="function"==typeof(s=r.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==d||h!==l)&&ys(t,i,n,l),ni=!1,h=t.memoizedState,i.state=h,hi(t,n,i,a),di();var p=t.memoizedState;o!==d||h!==p||ni||null!==e&&null!==e.dependencies&&Pa(e.dependencies)?("function"==typeof s&&(fs(t,r,s,n),p=t.memoizedState),(u=ni||gs(t,r,u,n,h,p,l)||null!==e&&null!==e.dependencies&&Pa(e.dependencies))?(c||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=l,n=u):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return i=n,Os(e,t),n=!!(128&t.flags),i||n?(i=t.stateNode,r=n&&"function"!=typeof r.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&n?(t.child=as(t,e.child,null,a),t.child=as(t,null,r,a)):Ms(e,t,r,a),t.memoizedState=i.state,e=t.child):e=Xs(e,t,a),e}function Ns(e,t,r,n){return ma(),t.flags|=256,Ms(e,t,r,n),t.child}var Ws={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Us(e){return{baseLanes:e,cachePool:Ya()}}function Bs(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=bc),e}function Hs(e,t,r){var n,a=t.pendingProps,o=!1,s=!!(128&t.flags);if((n=s)||(n=(null===e||null!==e.memoizedState)&&!!(2&hs.current)),n&&(o=!0,t.flags&=-129),n=!!(32&t.flags),t.flags&=-33,null===e){if(sa){if(o?ls(t):us(),sa){var l,c=oa;if(l=c){e:{for(l=c,c=ca;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=xd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Qn?{id:Zn,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},(l=Fn(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ia=t,oa=null,l=!0):l=!1}l||da(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return bd(c)?t.lanes=32:t.lanes=536870912,null;ds(t)}return c=a.children,a=a.fallback,o?(us(),c=Ys({mode:"hidden",children:c},o=t.mode),a=Bn(a,o,r,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(o=t.child).memoizedState=Us(r),o.childLanes=Bs(e,n,r),t.memoizedState=Ws,a):(ls(t),Vs(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(s)256&t.flags?(ls(t),t.flags&=-257,t=Gs(e,t,r)):null!==t.memoizedState?(us(),t.child=e.child,t.flags|=128,t=null):(us(),o=a.fallback,c=t.mode,a=Ys({mode:"visible",children:a.children},c),(o=Bn(o,c,r,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,as(t,e.child,null,r),(a=t.child).memoizedState=Us(r),a.childLanes=Bs(e,n,r),t.memoizedState=Ws,t=o);else if(ls(t),bd(c)){if(n=c.nextSibling&&c.nextSibling.dataset)var u=n.dgst;n=u,(a=Error(i(419))).stack="",a.digest=n,ya({value:a,source:null,stack:null}),t=Gs(e,t,r)}else if(Is||ka(e,t,r,!1),n=0!==(r&e.childLanes),Is||n){if(null!==(n=ic)&&0!==(a=0!==((a=42&(a=r&-r)?1:Ae(a))&(n.suspendedLanes|r))?0:a)&&a!==l.retryLane)throw l.retryLane=a,zn(e,a),Fc(n,0,a),Es;"$?"===c.data||Jc(),t=Gs(e,t,r)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,oa=xd(c.nextSibling),ia=t,sa=!0,la=null,ca=!1,null!==e&&(Kn[Xn++]=Zn,Kn[Xn++]=ea,Kn[Xn++]=Qn,Zn=e.id,ea=e.overflow,Qn=t),(t=Vs(t,a.children)).flags|=4096);return t}return o?(us(),o=a.fallback,c=t.mode,u=(l=e.child).sibling,(a=Nn(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Nn(u,o):(o=Bn(o,c,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,null===(c=e.child.memoizedState)?c=Us(r):(null!==(l=c.cachePool)?(u=Da._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ya(),c={baseLanes:c.baseLanes|r,cachePool:l}),o.memoizedState=c,o.childLanes=Bs(e,n,r),t.memoizedState=Ws,a):(ls(t),e=(r=e.child).sibling,(r=Nn(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function Vs(e,t){return(t=Ys({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ys(e,t){return(e=Fn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gs(e,t,r){return as(t,e.child,null,r),(e=Vs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qs(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ja(e.return,t,r)}function Js(e,t,r,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Ks(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ms(e,t,n.children,r),2&(n=hs.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qs(e,r,t);else if(19===e.tag)qs(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(N(hs,n),a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ps(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Js(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ps(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Js(t,!0,r,null,i);break;case"together":Js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(ka(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Nn(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Nn(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Qs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pa(e))}function Zs(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Is=!0;else{if(!(Qs(e,r)||128&t.flags))return Is=!1,function(e,t,r){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),wa(0,Da,e.memoizedState.cache),ma();break;case 27:case 5:G(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:wa(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(ls(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Hs(e,t,r):(ls(t),null!==(e=Xs(e,t,r))?e.sibling:null);ls(t);break;case 19:var a=!!(128&e.flags);if((n=0!==(r&t.childLanes))||(ka(e,t,r,!1),n=0!==(r&t.childLanes)),a){if(n)return Ks(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),N(hs,hs.current),n)break;return null;case 22:case 23:return t.lanes=0,Ds(e,t,r);case 24:wa(0,Da,e.memoizedState.cache)}return Xs(e,t,r)}(e,t,r);Is=!!(131072&e.flags)}else Is=!1,sa&&1048576&t.flags&&ra(t,Jn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,"function"!=typeof n){if(null!=n){if((a=n.$$typeof)===w){t.tag=11,t=Ts(null,t,n,e,r);break e}if(a===C){t.tag=14,t=Rs(null,t,n,e,r);break e}}throw t=T(n)||n,Error(i(306,t,""))}$n(n)?(e=bs(n,e),t.tag=1,t=$s(null,t,n,e,r)):(t.tag=0,t=_s(null,t,n,e,r))}return t;case 0:return _s(e,t,t.type,t.pendingProps,r);case 1:return $s(e,t,n=t.type,a=bs(n,t.pendingProps),r);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(i(387));n=t.pendingProps;var o=t.memoizedState;a=o.element,ii(e,t),hi(t,n,null,r);var s=t.memoizedState;if(n=s.cache,wa(0,Da,n),n!==o.cache&&Ca(t,[Da],r,!0),di(),n=s.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ns(e,t,n,r);break e}if(n!==a){ya(a=Pn(Error(i(424)),t)),t=Ns(e,t,n,r);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,oa=xd(e.firstChild),ia=t,sa=!0,la=null,ca=!0,r=is(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ma(),n===a){t=Xs(e,t,r);break e}Ms(e,t,n,r)}t=t.child}return t;case 26:return Os(e,t),null===e?(r=Md(t.type,null,t.pendingProps,null))?t.memoizedState=r:sa||(r=t.type,e=t.pendingProps,(n=id(B.current).createElement(r))[Te]=t,n[Re]=e,rd(n,r,e),He(n),t.stateNode=n):t.memoizedState=Md(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&sa&&(n=t.stateNode=Sd(t.type,t.pendingProps,B.current),ia=t,ca=!0,a=oa,md(t.type)?(vd=a,oa=xd(n.firstChild)):oa=a),Ms(e,t,t.pendingProps.children,r),Os(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&sa&&((a=n=oa)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var a=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=xd(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,ca))?(t.stateNode=n,ia=t,oa=xd(n.firstChild),ca=!1,a=!0):a=!1),a||da(t)),G(t),a=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,n=o.children,ld(a,o)?n=null:null!==s&&ld(a,s)&&(t.flags|=32),null!==t.memoizedState&&(a=zi(e,t,Oi,null,null,r),Kd._currentValue=a),Os(e,t),Ms(e,t,n,r),t.child;case 6:return null===e&&sa&&((e=r=oa)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=xd(e.nextSibling)))return null}return e}(r,t.pendingProps,ca))?(t.stateNode=r,ia=t,oa=null,e=!0):e=!1),e||da(t)),null;case 13:return Hs(e,t,r);case 4:return V(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=as(t,null,n,r):Ms(e,t,n,r),t.child;case 11:return Ts(e,t,t.type,t.pendingProps,r);case 7:return Ms(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ms(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,wa(0,t.type,n.value),Ms(e,t,n.children,r),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,Aa(t),n=n(a=Ea(a)),t.flags|=1,Ms(e,t,n,r),t.child;case 14:return Rs(e,t,t.type,t.pendingProps,r);case 15:return zs(e,t,t.type,t.pendingProps,r);case 19:return Ks(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?((r=Ys(n,r)).ref=t.ref,t.child=r,r.return=t,t=r):((r=Nn(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Ds(e,t,r);case 24:return Aa(t),n=Ea(Da),null===e?(null===(a=Ha())&&(a=ic,o=La(),a.pooledCache=o,o.refCount++,null!==o&&(a.pooledCacheLanes|=r),a=o),t.memoizedState={parent:n,cache:a},ai(t),wa(0,Da,a)):(0!==(e.lanes&r)&&(ii(e,t),hi(t,null,null,r),di()),a=e.memoizedState,o=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),wa(0,Da,n)):(n=o.cache,wa(0,Da,n),n!==a.cache&&Ca(t,[Da],r,!0))),Ms(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function el(e){e.flags|=4}function tl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=os.current)&&((4194048&sc)===sc?null!==ss:(62914560&sc)!==sc&&!(536870912&sc)||t!==ss))throw ei=Ka,qa;e.flags|=8192}}function rl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,xc|=t)}function nl(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function al(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=65011712&a.subtreeFlags,n|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function il(e,t,r){var n=t.pendingProps;switch(aa(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return al(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Sa(Da),Y(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?el(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,ga())),al(t),null;case 26:return r=t.memoizedState,null===e?(el(t),null!==r?(al(t),tl(t,r)):(al(t),t.flags&=-16777217)):r?r!==e.memoizedState?(el(t),al(t),tl(t,r)):(al(t),t.flags&=-16777217):(e.memoizedProps!==n&&el(t),al(t),t.flags&=-16777217),null;case 27:q(t),r=B.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&el(t);else{if(!n){if(null===t.stateNode)throw Error(i(166));return al(t),null}e=W.current,fa(t)?ha(t):(e=Sd(a,n,r),t.stateNode=e,el(t))}return al(t),null;case 5:if(q(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&el(t);else{if(!n){if(null===t.stateNode)throw Error(i(166));return al(t),null}if(e=W.current,fa(t))ha(t);else{switch(a=id(B.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof n.is?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"==typeof n.is?a.createElement(r,{is:n.is}):a.createElement(r)}}e[Te]=t,e[Re]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(rd(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&el(t)}}return al(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&el(t);else{if("string"!=typeof n&&null===t.stateNode)throw Error(i(166));if(e=B.current,fa(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(a=ia))switch(a.tag){case 27:case 5:n=a.memoizedProps}e[Te]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Qu(e.nodeValue,r)))||da(t)}else(e=id(e).createTextNode(n))[Te]=t,t.stateNode=e}return al(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=fa(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[Te]=t}else ma(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;al(t),a=!1}else a=ga(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(ds(t),t):(ds(t),null)}if(ds(t),128&t.flags)return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){a=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(a=n.alternate.memoizedState.cachePool.pool);var o=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),rl(t,t.updateQueue),al(t),null;case 4:return Y(),null===e&&Uu(t.stateNode.containerInfo),al(t),null;case 10:return Sa(t.type),al(t),null;case 19:if($(hs),null===(a=t.memoizedState))return al(t),null;if(n=!!(128&t.flags),null===(o=a.rendering))if(n)nl(a,!1);else{if(0!==fc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=ps(e))){for(t.flags|=128,nl(a,!1),e=o.updateQueue,t.updateQueue=e,rl(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Wn(r,e),r=r.sibling;return N(hs,1&hs.current|2),t.child}e=e.sibling}null!==a.tail&&ee()>Cc&&(t.flags|=128,n=!0,nl(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ps(o))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,rl(t,e),nl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!sa)return al(t),null}else 2*ee()-a.renderingStartTime>Cc&&536870912!==r&&(t.flags|=128,n=!0,nl(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ee(),t.sibling=null,e=hs.current,N(hs,n?1&e|2:1&e),t):(al(t),null);case 22:case 23:return ds(t),xi(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?!!(536870912&r)&&!(128&t.flags)&&(al(t),6&t.subtreeFlags&&(t.flags|=8192)):al(t),null!==(r=t.updateQueue)&&rl(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&$(Ba),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Sa(Da),al(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function ol(e,t){switch(aa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Sa(Da),Y(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return q(t),null;case 13:if(ds(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return $(hs),null;case 4:return Y(),null;case 10:return Sa(t.type),null;case 22:case 23:return ds(t),xi(),null!==e&&$(Ba),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Sa(Da),null;default:return null}}function sl(e,t){switch(aa(t),t.tag){case 3:Sa(Da),Y();break;case 26:case 27:case 5:q(t);break;case 4:Y();break;case 13:ds(t);break;case 19:$(hs);break;case 10:Sa(t.type);break;case 22:case 23:ds(t),xi(),null!==e&&$(Ba);break;case 24:Sa(Da)}}function ll(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var a=n.next;r=a;do{if((r.tag&e)===e){n=void 0;var i=r.create,o=r.inst;n=i(),o.destroy=n}r=r.next}while(r!==a)}}catch(s){hu(t,t.return,s)}}function cl(e,t,r){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var i=a.next;n=i;do{if((n.tag&e)===e){var o=n.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,a=t;var l=r,c=s;try{c()}catch(u){hu(a,l,u)}}}n=n.next}while(n!==i)}}catch(u){hu(t,t.return,u)}}function ul(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{fi(t,r)}catch(n){hu(e,e.return,n)}}}function dl(e,t,r){r.props=bs(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){hu(e,t,n)}}function hl(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"==typeof r?e.refCleanup=r(n):r.current=n}}catch(a){hu(e,t,a)}}function pl(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"==typeof n)try{n()}catch(a){hu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof r)try{r(null)}catch(i){hu(e,t,i)}else r.current=null}function fl(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(a){hu(e,e.return,a)}}function ml(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,o=null,s=null,l=null,c=null,u=null,d=null;for(f in r){var h=r[f];if(r.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(f)||ed(e,t,f,null,n,h)}}for(var p in n){var f=n[p];if(h=r[p],n.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":o=f;break;case"name":a=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:f!==h&&ed(e,t,p,f,n,h)}}return void mt(e,s,l,c,u,d,o,a);case"select":for(o in f=s=l=p=null,r)if(c=r[o],r.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":f=c;default:n.hasOwnProperty(o)||ed(e,t,o,null,n,c)}for(a in n)if(o=n[a],c=r[a],n.hasOwnProperty(a)&&(null!=o||null!=c))switch(a){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:o!==c&&ed(e,t,a,o,n,c)}return t=l,r=s,n=f,void(null!=p?bt(e,!!r,p,!1):!!n!=!!r&&(null!=t?bt(e,!!r,t,!0):bt(e,!!r,r?[]:"",!1)));case"textarea":for(l in f=p=null,r)if(a=r[l],r.hasOwnProperty(l)&&null!=a&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ed(e,t,l,null,n,a)}for(s in n)if(a=n[s],o=r[s],n.hasOwnProperty(s)&&(null!=a||null!=o))switch(s){case"value":p=a;break;case"defaultValue":f=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(i(91));break;default:a!==o&&ed(e,t,s,a,n,o)}return void xt(e,p,f);case"option":for(var m in r)p=r[m],r.hasOwnProperty(m)&&null!=p&&!n.hasOwnProperty(m)&&("selected"===m?e.selected=!1:ed(e,t,m,null,n,p));for(c in n)p=n[c],f=r[c],!n.hasOwnProperty(c)||p===f||null==p&&null==f||("selected"===c?e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p:ed(e,t,c,p,n,f));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)p=r[g],r.hasOwnProperty(g)&&null!=p&&!n.hasOwnProperty(g)&&ed(e,t,g,null,n,p);for(u in n)if(p=n[u],f=r[u],n.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:ed(e,t,u,p,n,f)}return;default:if(kt(t)){for(var y in r)p=r[y],r.hasOwnProperty(y)&&void 0!==p&&!n.hasOwnProperty(y)&&td(e,t,y,void 0,n,p);for(d in n)p=n[d],f=r[d],!n.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||td(e,t,d,p,n,f);return}}for(var b in r)p=r[b],r.hasOwnProperty(b)&&null!=p&&!n.hasOwnProperty(b)&&ed(e,t,b,null,n,p);for(h in n)p=n[h],f=r[h],!n.hasOwnProperty(h)||p===f||null==p&&null==f||ed(e,t,h,p,n,f)}(n,e.type,r,t),n[Re]=t}catch(a){hu(e,e.return,a)}}function gl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function yl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function bl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Zu));else if(4!==n&&(27===n&&md(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(bl(e,t,r),e=e.sibling;null!==e;)bl(e,t,r),e=e.sibling}function xl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&md(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(xl(e,t,r),e=e.sibling;null!==e;)xl(e,t,r),e=e.sibling}function vl(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);rd(t,n,r),t[Te]=e,t[Re]=r}catch(i){hu(e,e.return,i)}}var wl=!1,Sl=!1,jl=!1,Cl="function"==typeof WeakSet?WeakSet:Set,kl=null;function Pl(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:$l(e,r),4&n&&ll(5,r);break;case 1:if($l(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(o){hu(r,r.return,o)}else{var a=bs(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){hu(r,r.return,s)}}64&n&&ul(r),512&n&&hl(r,r.return);break;case 3:if($l(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{fi(e,t)}catch(o){hu(r,r.return,o)}}break;case 27:null===t&&4&n&&vl(r);case 26:case 5:$l(e,r),null===t&&4&n&&fl(r),512&n&&hl(r,r.return);break;case 12:$l(e,r);break;case 13:$l(e,r),4&n&&Rl(e,r),64&n&&null!==(e=r.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=gu.bind(null,r));break;case 22:if(!(n=null!==r.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||Sl,a=wl;var i=Sl;wl=n,(Sl=t)&&!i?Wl(e,r,!!(8772&r.subtreeFlags)):$l(e,r),wl=a,Sl=i}break;case 30:break;default:$l(e,r)}}function Al(e){var t=e.alternate;null!==t&&(e.alternate=null,Al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&$e(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var El=null,Il=!1;function Ml(e,t,r){for(r=r.child;null!==r;)Tl(e,t,r),r=r.sibling}function Tl(e,t,r){if(ue&&"function"==typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(ce,r)}catch(i){}switch(r.tag){case 26:Sl||pl(r,t),Ml(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:Sl||pl(r,t);var n=El,a=Il;md(r.type)&&(El=r.stateNode,Il=!1),Ml(e,t,r),jd(r.stateNode),El=n,Il=a;break;case 5:Sl||pl(r,t);case 6:if(n=El,a=Il,El=null,Ml(e,t,r),Il=a,null!==(El=n))if(Il)try{(9===El.nodeType?El.body:"HTML"===El.nodeName?El.ownerDocument.body:El).removeChild(r.stateNode)}catch(o){hu(r,t,o)}else try{El.removeChild(r.stateNode)}catch(o){hu(r,t,o)}break;case 18:null!==El&&(Il?(gd(9===(e=El).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Ih(e)):gd(El,r.stateNode));break;case 4:n=El,a=Il,El=r.stateNode.containerInfo,Il=!0,Ml(e,t,r),El=n,Il=a;break;case 0:case 11:case 14:case 15:Sl||cl(2,r,t),Sl||cl(4,r,t),Ml(e,t,r);break;case 1:Sl||(pl(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount&&dl(r,t,n)),Ml(e,t,r);break;case 21:Ml(e,t,r);break;case 22:Sl=(n=Sl)||null!==r.memoizedState,Ml(e,t,r),Sl=n;break;default:Ml(e,t,r)}}function Rl(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Ih(e)}catch(r){hu(t,t.return,r)}}function zl(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Cl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Cl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach((function(t){var n=yu.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}function Dl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n],o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){El=l.stateNode,Il=!1;break e}break;case 5:El=l.stateNode,Il=!1;break e;case 3:case 4:El=l.stateNode.containerInfo,Il=!0;break e}l=l.return}if(null===El)throw Error(i(160));Tl(o,s,a),El=null,Il=!1,null!==(o=a.alternate)&&(o.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Ll=null;function Ol(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dl(t,e),_l(e),4&n&&(cl(3,e,e.return),ll(3,e),cl(5,e,e.return));break;case 1:Dl(t,e),_l(e),512&n&&(Sl||null===r||pl(r,r.return)),64&n&&wl&&null!==(e=e.updateQueue)&&null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n));break;case 26:var a=Ll;if(Dl(t,e),_l(e),512&n&&(Sl||null===r||pl(r,r.return)),4&n){var o=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":(!(o=a.getElementsByTagName("title")[0])||o[Fe]||o[Te]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=a.createElement(n),a.head.insertBefore(o,a.querySelector("head > title"))),rd(o,n,r),o[Te]=e,He(o),n=o;break e;case"link":var s=Wd("link","href",a).get(n+(r.href||""));if(s)for(var l=0;l<s.length;l++)if((o=s[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&o.getAttribute("rel")===(null==r.rel?null:r.rel)&&o.getAttribute("title")===(null==r.title?null:r.title)&&o.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){s.splice(l,1);break t}rd(o=a.createElement(n),n,r),a.head.appendChild(o);break;case"meta":if(s=Wd("meta","content",a).get(n+(r.content||"")))for(l=0;l<s.length;l++)if((o=s[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&o.getAttribute("name")===(null==r.name?null:r.name)&&o.getAttribute("property")===(null==r.property?null:r.property)&&o.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&o.getAttribute("charset")===(null==r.charSet?null:r.charSet)){s.splice(l,1);break t}rd(o=a.createElement(n),n,r),a.head.appendChild(o);break;default:throw Error(i(468,n))}o[Te]=e,He(o),n=o}e.stateNode=n}else Ud(a,e.type,e.stateNode);else e.stateNode=Od(a,n,e.memoizedProps);else o!==n?(null===o?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):o.count--,null===n?Ud(a,e.type,e.stateNode):Od(a,n,e.memoizedProps)):null===n&&null!==e.stateNode&&ml(e,e.memoizedProps,r.memoizedProps)}break;case 27:Dl(t,e),_l(e),512&n&&(Sl||null===r||pl(r,r.return)),null!==r&&4&n&&ml(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Dl(t,e),_l(e),512&n&&(Sl||null===r||pl(r,r.return)),32&e.flags){a=e.stateNode;try{wt(a,"")}catch(f){hu(e,e.return,f)}}4&n&&null!=e.stateNode&&ml(e,a=e.memoizedProps,null!==r?r.memoizedProps:a),1024&n&&(jl=!0);break;case 6:if(Dl(t,e),_l(e),4&n){if(null===e.stateNode)throw Error(i(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(f){hu(e,e.return,f)}}break;case 3:if(Nd=null,a=Ll,Ll=Pd(t.containerInfo),Dl(t,e),Ll=a,_l(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ih(t.containerInfo)}catch(f){hu(e,e.return,f)}jl&&(jl=!1,Fl(e));break;case 4:n=Ll,Ll=Pd(e.stateNode.containerInfo),Dl(t,e),_l(e),Ll=n;break;case 12:default:Dl(t,e),_l(e);break;case 13:Dl(t,e),_l(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==r&&null!==r.memoizedState)&&(jc=ee()),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,zl(e,n));break;case 22:a=null!==e.memoizedState;var c=null!==r&&null!==r.memoizedState,u=wl,d=Sl;if(wl=u||a,Sl=d||c,Dl(t,e),Sl=d,wl=u,_l(e),8192&n)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||c||wl||Sl||Nl(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){c=r=t;try{if(o=c.stateNode,a)"function"==typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(f){hu(c,c.return,f)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(f){hu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&null!==(n=e.updateQueue)&&null!==(r=n.retryQueue)&&(n.retryQueue=null,zl(e,r));break;case 19:Dl(t,e),_l(e),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,zl(e,n));case 30:case 21:}}function _l(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(gl(n)){r=n;break}n=n.return}if(null==r)throw Error(i(160));switch(r.tag){case 27:var a=r.stateNode;xl(e,yl(e),a);break;case 5:var o=r.stateNode;32&r.flags&&(wt(o,""),r.flags&=-33),xl(e,yl(e),o);break;case 3:case 4:var s=r.stateNode.containerInfo;bl(e,yl(e),s);break;default:throw Error(i(161))}}catch(l){hu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function $l(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Pl(e,t.alternate,t),t=t.sibling}function Nl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cl(4,t,t.return),Nl(t);break;case 1:pl(t,t.return);var r=t.stateNode;"function"==typeof r.componentWillUnmount&&dl(t,t.return,r),Nl(t);break;case 27:jd(t.stateNode);case 26:case 5:pl(t,t.return),Nl(t);break;case 22:null===t.memoizedState&&Nl(t);break;default:Nl(t)}e=e.sibling}}function Wl(e,t,r){for(r=r&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,a=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Wl(a,i,r),ll(4,i);break;case 1:if(Wl(a,i,r),"function"==typeof(a=(n=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){hu(n,n.return,c)}if(null!==(a=(n=i).updateQueue)){var s=n.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)pi(l[a],s)}catch(c){hu(n,n.return,c)}}r&&64&o&&ul(i),hl(i,i.return);break;case 27:vl(i);case 26:case 5:Wl(a,i,r),r&&null===n&&4&o&&fl(i),hl(i,i.return);break;case 12:Wl(a,i,r);break;case 13:Wl(a,i,r),r&&4&o&&Rl(a,i);break;case 22:null===i.memoizedState&&Wl(a,i,r),hl(i,i.return);break;case 30:break;default:Wl(a,i,r)}t=t.sibling}}function Ul(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&Oa(r))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oa(e))}function Hl(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Vl(e,t,r,n),t=t.sibling}function Vl(e,t,r,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,r,n),2048&a&&ll(9,t);break;case 1:case 13:default:Hl(e,t,r,n);break;case 3:Hl(e,t,r,n),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oa(e)));break;case 12:if(2048&a){Hl(e,t,r,n),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,s=i.onPostCommit;"function"==typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){hu(t,t.return,l)}}else Hl(e,t,r,n);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Hl(e,t,r,n):Gl(e,t):2&i._visibility?Hl(e,t,r,n):(i._visibility|=2,Yl(e,t,r,n,!!(10256&t.subtreeFlags))),2048&a&&Ul(o,t);break;case 24:Hl(e,t,r,n),2048&a&&Bl(t.alternate,t)}}function Yl(e,t,r,n,a){for(a=a&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,o=t,s=r,l=n,c=o.flags;switch(o.tag){case 0:case 11:case 15:Yl(i,o,s,l,a),ll(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Yl(i,o,s,l,a):Gl(i,o):(u._visibility|=2,Yl(i,o,s,l,a)),a&&2048&c&&Ul(o.alternate,o);break;case 24:Yl(i,o,s,l,a),a&&2048&c&&Bl(o.alternate,o);break;default:Yl(i,o,s,l,a)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,a=n.flags;switch(n.tag){case 22:Gl(r,n),2048&a&&Ul(n.alternate,n);break;case 24:Gl(r,n),2048&a&&Bl(n.alternate,n);break;default:Gl(r,n)}t=t.sibling}}var ql=8192;function Jl(e){if(e.subtreeFlags&ql)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Jl(e),e.flags&ql&&null!==e.memoizedState&&function(e,t,r){if(null===Hd)throw Error(i(475));var n=Hd;if(!("stylesheet"!==t.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&t.state.loading)){if(null===t.instance){var a=Td(r.href),o=e.querySelector(Rd(a));if(o)return null!==(e=o._p)&&"object"==typeof e&&"function"==typeof e.then&&(n.count++,n=Yd.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=o,void He(o);o=e.ownerDocument||e,r=zd(r),(a=Cd.get(a))&&Fd(r,a),He(o=o.createElement("link"));var s=o;s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),rd(o,"link",r),t.instance=o}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(n.count++,t=Yd.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Jl(e);break;case 3:case 4:var t=Ll;Ll=Pd(e.stateNode.containerInfo),Jl(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ql,ql=16777216,Jl(e),ql=t):Jl(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ql(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];kl=n,tc(n,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Ql(e),2048&e.flags&&cl(9,e,e.return);break;case 3:case 12:default:Ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ec(e)):Ql(e)}}function ec(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];kl=n,tc(n,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:cl(8,t,t.return),ec(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,ec(t));break;default:ec(t)}e=e.sibling}}function tc(e,t){for(;null!==kl;){var r=kl;switch(r.tag){case 0:case 11:case 15:cl(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Oa(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,kl=n;else e:for(r=e;null!==kl;){var a=(n=kl).sibling,i=n.return;if(Al(n),n===r){kl=null;break e}if(null!==a){a.return=i,kl=a;break e}kl=i}}}var rc={getCacheForType:function(e){var t=Ea(Da),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},nc="function"==typeof WeakMap?WeakMap:Map,ac=0,ic=null,oc=null,sc=0,lc=0,cc=null,uc=!1,dc=!1,hc=!1,pc=0,fc=0,mc=0,gc=0,yc=0,bc=0,xc=0,vc=null,wc=null,Sc=!1,jc=0,Cc=1/0,kc=null,Pc=null,Ac=0,Ec=null,Ic=null,Mc=0,Tc=0,Rc=null,zc=null,Dc=0,Lc=null;function Oc(){return 2&ac&&0!==sc?sc&-sc:null!==z.T?0!==$a?$a:Tu():Ie()}function _c(){0===bc&&(bc=536870912&sc&&!sa?536870912:we());var e=os.current;return null!==e&&(e.flags|=32),bc}function Fc(e,t,r){(e!==ic||2!==lc&&9!==lc)&&null===e.cancelPendingCommit||(Vc(e,0),Uc(e,sc,bc,!1)),Ce(e,r),2&ac&&e===ic||(e===ic&&(!(2&ac)&&(gc|=r),4===fc&&Uc(e,sc,bc,!1)),Cu(e))}function $c(e,t,r){if(6&ac)throw Error(i(327));for(var n=!r&&!(124&t)&&0===(t&e.expiredLanes)||xe(e,t),a=n?function(e,t){var r=ac;ac|=2;var n=Gc(),a=qc();ic!==e||sc!==t?(kc=null,Cc=ee()+500,Vc(e,t)):dc=xe(e,t);e:for(;;)try{if(0!==lc&&null!==oc){t=oc;var o=cc;t:switch(lc){case 1:lc=0,cc=null,tu(e,t,o,1);break;case 2:case 9:if(Xa(o)){lc=0,cc=null,eu(t);break}t=function(){2!==lc&&9!==lc||ic!==e||(lc=7),Cu(e)},o.then(t,t);break e;case 3:lc=7;break e;case 4:lc=5;break e;case 7:Xa(o)?(lc=0,cc=null,eu(t)):(lc=0,cc=null,tu(e,t,o,7));break;case 5:var s=null;switch(oc.tag){case 26:s=oc.memoizedState;case 5:case 27:var l=oc;if(!s||Bd(s)){lc=0,cc=null;var c=l.sibling;if(null!==c)oc=c;else{var u=l.return;null!==u?(oc=u,ru(u)):oc=null}break t}}lc=0,cc=null,tu(e,t,o,5);break;case 6:lc=0,cc=null,tu(e,t,o,6);break;case 8:Hc(),fc=6;break e;default:throw Error(i(462))}}Qc();break}catch(d){Yc(e,d)}return va=xa=null,z.H=n,z.A=a,ac=r,null!==oc?0:(ic=null,sc=0,Mn(),fc)}(e,t):Kc(e,t,!0),o=n;;){if(0===a){dc&&!n&&Uc(e,t,0,!1);break}if(r=e.current.alternate,!o||Wc(r)){if(2===a){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!=(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;a=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Vc(l,s).flags|=256),2!==(s=Kc(l,s,!1))){if(hc&&!c){l.errorRecoveryDisabledLanes|=o,gc|=o,a=4;break e}o=wc,wc=a,null!==o&&(null===wc?wc=o:wc.push.apply(wc,o))}a=s}if(o=!1,2!==a)continue}}if(1===a){Vc(e,0),Uc(e,t,0,!0);break}e:{switch(n=e,o=a){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Uc(n,t,bc,!uc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(a=jc+300-ee())){if(Uc(n,t,bc,!uc),0!==be(n,0,!0))break e;n.timeoutHandle=ud(Nc.bind(null,n,r,wc,kc,Sc,t,bc,gc,xc,uc,o,2,-0,0),a)}else Nc(n,r,wc,kc,Sc,t,bc,gc,xc,uc,o,0,-0,0)}break}a=Kc(e,t,!1),o=!1}Cu(e)}function Nc(e,t,r,n,a,o,s,l,c,u,d,h,p,f){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||!(16785408&~h))&&(Hd={stylesheets:null,count:0,unsuspend:Vd},Kl(t),null!==(h=function(){if(null===Hd)throw Error(i(475));var e=Hd;return e.stylesheets&&0===e.count&&qd(e,e.stylesheets),0<e.count?function(t){var r=setTimeout((function(){if(e.stylesheets&&qd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=h(au.bind(null,e,t,o,r,n,a,s,l,c,d,1,p,f)),void Uc(e,o,s,!u);au(e,t,o,r,n,a,s,l,c)}function Wc(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&null!==(r=t.updateQueue)&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Kr(i(),a))return!1}catch(o){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,r,n){t&=~yc,t&=~gc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var i=31-he(a),o=1<<i;n[i]=-1,a&=~o}0!==r&&ke(e,r,t)}function Bc(){return!!(6&ac)||(ku(0),!1)}function Hc(){if(null!==oc){if(0===lc)var e=oc.return;else va=xa=null,$i(e=oc),Xo=null,Qo=0,e=oc;for(;null!==e;)sl(e.alternate,e),e=e.return;oc=null}}function Vc(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,dd(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),Hc(),ic=e,oc=r=Nn(e.current,null),sc=t,lc=0,cc=null,uc=!1,dc=xe(e,t),hc=!1,xc=bc=yc=gc=mc=fc=0,wc=vc=null,Sc=!1,8&t&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var a=31-he(n),i=1<<a;t|=e[a],n&=~i}return pc=t,Mn(),r}function Yc(e,t){wi=null,z.H=Go,t===Ga||t===Ja?(t=ti(),lc=3):t===qa?(t=ti(),lc=4):lc=t===Es?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,cc=t,null===oc&&(fc=1,js(e,Pn(t,e.current)))}function Gc(){var e=z.H;return z.H=Go,null===e?Go:e}function qc(){var e=z.A;return z.A=rc,e}function Jc(){fc=4,uc||(4194048&sc)!==sc&&null!==os.current||(dc=!0),!(134217727&mc)&&!(134217727&gc)||null===ic||Uc(ic,sc,bc,!1)}function Kc(e,t,r){var n=ac;ac|=2;var a=Gc(),i=qc();ic===e&&sc===t||(kc=null,Vc(e,t)),t=!1;var o=fc;e:for(;;)try{if(0!==lc&&null!==oc){var s=oc,l=cc;switch(lc){case 8:Hc(),o=6;break e;case 3:case 2:case 9:case 6:null===os.current&&(t=!0);var c=lc;if(lc=0,cc=null,tu(e,s,l,c),r&&dc){o=0;break e}break;default:c=lc,lc=0,cc=null,tu(e,s,l,c)}}Xc(),o=fc;break}catch(u){Yc(e,u)}return t&&e.shellSuspendCounter++,va=xa=null,ac=n,z.H=a,z.A=i,null===oc&&(ic=null,sc=0,Mn()),o}function Xc(){for(;null!==oc;)Zc(oc)}function Qc(){for(;null!==oc&&!Q();)Zc(oc)}function Zc(e){var t=Zs(e.alternate,e,pc);e.memoizedProps=e.pendingProps,null===t?ru(e):oc=t}function eu(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Fs(r,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Fs(r,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:$i(t);default:sl(r,t),t=Zs(r,t=oc=Wn(t,pc),pc)}e.memoizedProps=e.pendingProps,null===t?ru(e):oc=t}function tu(e,t,r,n){va=xa=null,$i(t),Xo=null,Qo=0;var a=t.return;try{if(function(e,t,r,n,a){if(r.flags|=32768,null!==n&&"object"==typeof n&&"function"==typeof n.then){if(null!==(t=r.alternate)&&ka(t,r,a,!0),null!==(r=os.current)){switch(r.tag){case 13:return null===ss?Jc():null===r.alternate&&0===fc&&(fc=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===Ka?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),pu(e,n,a)),!1;case 22:return r.flags|=65536,n===Ka?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),pu(e,n,a)),!1}throw Error(i(435,r.tag))}return pu(e,n,a),Jc(),!1}if(sa)return null!==(t=os.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==ua&&ya(Pn(e=Error(i(422),{cause:n}),r))):(n!==ua&&ya(Pn(t=Error(i(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,n=Pn(n,r),ci(e,a=ks(e.stateNode,n,a)),4!==fc&&(fc=2)),!1;var o=Error(i(520),{cause:n});if(o=Pn(o,r),null===vc?vc=[o]:vc.push(o),4!==fc&&(fc=2),null===t)return!0;n=Pn(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,ci(r,e=ks(r.stateNode,n,e)),!1;case 1:if(t=r.type,o=r.stateNode,!(128&r.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==Pc&&Pc.has(o))))return r.flags|=65536,a&=-a,r.lanes|=a,As(a=Ps(a),e,r,n),ci(r,a),!1}r=r.return}while(null!==r);return!1}(e,a,t,r,sc))return fc=1,js(e,Pn(r,e.current)),void(oc=null)}catch(o){if(null!==a)throw oc=a,o;return fc=1,js(e,Pn(r,e.current)),void(oc=null)}32768&t.flags?(sa||1===n?e=!0:dc||536870912&sc?e=!1:(uc=e=!0,(2===n||9===n||3===n||6===n)&&null!==(n=os.current)&&13===n.tag&&(n.flags|=16384)),nu(t,e)):ru(t)}function ru(e){var t=e;do{if(32768&t.flags)return void nu(t,uc);e=t.return;var r=il(t.alternate,t,pc);if(null!==r)return void(oc=r);if(null!==(t=t.sibling))return void(oc=t);oc=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var r=ol(e.alternate,e);if(null!==r)return r.flags&=32767,void(oc=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(oc=e);oc=e=r}while(null!==e);fc=6,oc=null}function au(e,t,r,n,a,o,s,l,c){e.cancelPendingCommit=null;do{cu()}while(0!==Ac);if(6&ac)throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,function(e,t,r,n,a,i){var o=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=o&~r;0<r;){var u=31-he(r),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}r&=~d}0!==n&&ke(e,n,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,r,o|=In,s,l,c),e===ic&&(oc=ic=null,sc=0),Ic=t,Ec=e,Mc=r,Tc=o,Rc=a,zc=n,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,K(ae,(function(){return uu(),null}))):(e.callbackNode=null,e.callbackPriority=0),n=!!(13878&t.flags),13878&t.subtreeFlags||n){n=z.T,z.T=null,a=D.p,D.p=2,s=ac,ac|=4;try{!function(e,t){if(e=e.containerInfo,nd=ah,rn(e=tn(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(g){r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==a&&3!==h.nodeType||(l=s+a),h!==o||0!==n&&3!==h.nodeType||(c=s+n),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++u===a&&(l=s),p===o&&++d===n&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ad={focusedElem:e,selectionRange:r},ah=!1,kl=t;null!==kl;)if(e=(t=kl).child,1024&t.subtreeFlags&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(o=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,r=t,a=o.memoizedProps,o=o.memoizedState,n=r.stateNode;try{var m=bs(r.type,a,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(m,o),n.__reactInternalSnapshotBeforeUpdate=e}catch(y){hu(r,r.return,y)}}break;case 3:if(1024&e)if(9===(r=(e=t.stateNode.containerInfo).nodeType))yd(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{ac=s,D.p=a,z.T=n}}Ac=1,iu(),ou(),su()}}function iu(){if(1===Ac){Ac=0;var e=Ec,t=Ic,r=!!(13878&t.flags);if(13878&t.subtreeFlags||r){r=z.T,z.T=null;var n=D.p;D.p=2;var a=ac;ac|=4;try{Ol(t,e);var i=ad,o=tn(e.containerInfo),s=i.focusedElem,l=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&en(s.ownerDocument.documentElement,s)){if(null!==l&&rn(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=s.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(o=g,g=m,m=o);var y=Zr(s,m),b=Zr(s,g);if(y&&b&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==b.node||p.focusOffset!==b.offset)){var x=d.createRange();x.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(x),p.extend(b.node,b.offset)):(x.setEnd(b.node,b.offset),p.addRange(x))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var v=d[s];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}ah=!!nd,ad=nd=null}finally{ac=a,D.p=n,z.T=r}}e.current=t,Ac=2}}function ou(){if(2===Ac){Ac=0;var e=Ec,t=Ic,r=!!(8772&t.flags);if(8772&t.subtreeFlags||r){r=z.T,z.T=null;var n=D.p;D.p=2;var a=ac;ac|=4;try{Pl(e,t.alternate,t)}finally{ac=a,D.p=n,z.T=r}}Ac=3}}function su(){if(4===Ac||3===Ac){Ac=0,Z();var e=Ec,t=Ic,r=Mc,n=zc;10256&t.subtreeFlags||10256&t.flags?Ac=5:(Ac=0,Ic=Ec=null,lu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Pc=null),Ee(r),t=t.stateNode,ue&&"function"==typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==n){t=z.T,a=D.p,D.p=2,z.T=null;try{for(var i=e.onRecoverableError,o=0;o<n.length;o++){var s=n[o];i(s.value,{componentStack:s.stack})}}finally{z.T=t,D.p=a}}3&Mc&&cu(),Cu(e),a=e.pendingLanes,4194090&r&&42&a?e===Lc?Dc++:(Dc=0,Lc=e):Dc=0,ku(0)}}function lu(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Oa(t))}function cu(e){return iu(),ou(),su(),uu()}function uu(){if(5!==Ac)return!1;var e=Ec,t=Tc;Tc=0;var r=Ee(Mc),n=z.T,a=D.p;try{D.p=32>r?32:r,z.T=null,r=Rc,Rc=null;var o=Ec,s=Mc;if(Ac=0,Ic=Ec=null,Mc=0,6&ac)throw Error(i(331));var l=ac;if(ac|=4,Zl(o.current),Vl(o,o.current,s,r),ac=l,ku(0),ue&&"function"==typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(ce,o)}catch(c){}return!0}finally{D.p=a,z.T=n,lu(e,t)}}function du(e,t,r){t=Pn(r,t),null!==(e=si(e,t=ks(e.stateNode,t,2),2))&&(Ce(e,2),Cu(e))}function hu(e,t,r){if(3===e.tag)du(e,e,r);else for(;null!==t;){if(3===t.tag){du(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Pc||!Pc.has(n))){e=Pn(r,e),null!==(n=si(t,r=Ps(2),2))&&(As(r,n,t,e),Ce(n,2),Cu(n));break}}t=t.return}}function pu(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new nc;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(hc=!0,a.add(r),e=fu.bind(null,e,t,r),t.then(e,e))}function fu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,ic===e&&(sc&r)===r&&(4===fc||3===fc&&(62914560&sc)===sc&&300>ee()-jc?!(2&ac)&&Vc(e,0):yc|=r,xc===sc&&(xc=0)),Cu(e)}function mu(e,t){0===t&&(t=Se()),null!==(e=zn(e,t))&&(Ce(e,t),Cu(e))}function gu(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),mu(e,r)}function yu(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==n&&n.delete(t),mu(e,r)}var bu=null,xu=null,vu=!1,wu=!1,Su=!1,ju=0;function Cu(e){e!==xu&&null===e.next&&(null===xu?bu=xu=e:xu=xu.next=e),wu=!0,vu||(vu=!0,pd((function(){6&ac?K(re,Pu):Au()})))}function ku(e,t){if(!Su&&wu){Su=!0;do{for(var r=!1,n=bu;null!==n;){if(0!==e){var a=n.pendingLanes;if(0===a)var i=0;else{var o=n.suspendedLanes,s=n.pingedLanes;i=(1<<31-he(42|e)+1)-1,i=201326741&(i&=a&~(o&~s))?201326741&i|1:i?2|i:0}0!==i&&(r=!0,Mu(n,i))}else i=sc,!(3&(i=be(n,n===ic?i:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||xe(n,i)||(r=!0,Mu(n,i));n=n.next}}while(r);Su=!1}}function Pu(){Au()}function Au(){wu=vu=!1;var e,t=0;0!==ju&&(((e=window.event)&&"popstate"===e.type?e!==cd&&(cd=e,!0):(cd=null,!1))&&(t=ju),ju=0);for(var r=ee(),n=null,a=bu;null!==a;){var i=a.next,o=Eu(a,r);0===o?(a.next=null,null===n?bu=i:n.next=i,null===i&&(xu=n)):(n=a,(0!==t||3&o)&&(wu=!0)),a=i}ku(t)}function Eu(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-he(i),s=1<<o,l=a[o];-1===l?0!==(s&r)&&0===(s&n)||(a[o]=ve(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}if(r=sc,r=be(e,e===(t=ic)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===lc||9===lc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&X(n),e.callbackNode=null,e.callbackPriority=0;if(!(3&r)||xe(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&X(n),Ee(r)){case 2:case 8:r=ne;break;case 32:default:r=ae;break;case 268435456:r=oe}return n=Iu.bind(null,e),r=K(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&X(n),e.callbackPriority=2,e.callbackNode=null,2}function Iu(e,t){if(0!==Ac&&5!==Ac)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(cu()&&e.callbackNode!==r)return null;var n=sc;return 0===(n=be(e,e===ic?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:($c(e,n,t),Eu(e,ee()),null!=e.callbackNode&&e.callbackNode===r?Iu.bind(null,e):null)}function Mu(e,t){if(cu())return null;$c(e,t,!0)}function Tu(){return 0===ju&&(ju=we()),ju}function Ru(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:It(""+e)}function zu(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Du=0;Du<jn.length;Du++){var Lu=jn[Du];Cn(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}Cn(mn,"onAnimationEnd"),Cn(gn,"onAnimationIteration"),Cn(yn,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(bn,"onTransitionRun"),Cn(xn,"onTransitionStart"),Cn(vn,"onTransitionCancel"),Cn(wn,"onTransitionEnd"),qe("onMouseEnter",["mouseout","mouseover"]),qe("onMouseLeave",["mouseout","mouseover"]),qe("onPointerEnter",["pointerout","pointerover"]),qe("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_u=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Fu(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(u){xs(u)}a.currentTarget=null,i=l}else for(o=0;o<n.length;o++){if(l=(s=n[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(u){xs(u)}a.currentTarget=null,i=l}}}}function $u(e,t){var r=t[De];void 0===r&&(r=t[De]=new Set);var n=e+"__bubble";r.has(n)||(Bu(t,e,2,!1),r.add(n))}function Nu(e,t,r){var n=0;t&&(n|=4),Bu(r,e,n,t)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[Wu]){e[Wu]=!0,Ve.forEach((function(t){"selectionchange"!==t&&(_u.has(t)||Nu(t,!1,e),Nu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wu]||(t[Wu]=!0,Nu("selectionchange",!1,t))}}function Bu(e,t,r,n){switch(dh(t)){case 2:var a=ih;break;case 8:a=oh;break;default:a=sh}r=a.bind(null,t,r,e),a=void 0,!Wt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Hu(e,t,r,n,a){var i=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var l=n.stateNode.containerInfo;if(l===a)break;if(4===o)for(o=n.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==l;){if(null===(o=Ne(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){n=i=o;continue e}l=l.parentNode}}n=n.return}Ft((function(){var n=i,a=Rt(r),o=[];e:{var l=Sn.get(e);if(void 0!==l){var c=tr,u=e;switch(e){case"keypress":if(0===Gt(r))break e;case"keydown":case"keyup":c=gr;break;case"focusin":u="focus",c=sr;break;case"focusout":u="blur",c=sr;break;case"beforeblur":case"afterblur":c=sr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=or;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=br;break;case mn:case gn:case yn:c=lr;break;case wn:c=xr;break;case"scroll":case"scrollend":c=nr;break;case"wheel":c=vr;break;case"copy":case"cut":case"paste":c=cr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yr;break;case"toggle":case"beforetoggle":c=wr}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=n;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=$t(m,p))&&d.push(Vu(m,g,f)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,r,a),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||r===Tt||!(u=r.relatedTarget||r.fromElement)||!Ne(u)&&!u[ze])&&(c||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=n,null!==(u=(u=r.relatedTarget||r.toElement)?Ne(u):null)&&(h=s(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=n),c!==u)){if(d=ir,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yr,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?l:Ue(c),f=null==u?l:Ue(u),(l=new d(g,m+"leave",c,r,a)).target=h,l.relatedTarget=f,g=null,Ne(a)===n&&((d=new d(p,m+"enter",u,r,a)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(p=u,m=0,f=d=c;f;f=Gu(f))m++;for(f=0,g=p;g;g=Gu(g))f++;for(;0<m-f;)d=Gu(d),m--;for(;0<f-m;)p=Gu(p),f--;for(;m--;){if(d===p||null!==p&&d===p.alternate)break e;d=Gu(d),p=Gu(p)}d=null}else d=null;null!==c&&qu(o,l,c,d,!1),null!==u&&null!==h&&qu(o,h,u,d,!0)}if("select"===(c=(l=n?Ue(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=$r;else if(zr(l))if(Nr)y=Jr;else{y=Gr;var b=Yr}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?n&&kt(n.elementType)&&(y=$r):y=qr;switch(y&&(y=y(e,n))?Dr(o,y,r,a):(b&&b(e,l,n),"focusout"===e&&n&&"number"===l.type&&null!=n.memoizedProps.value&&yt(l,"number",l.value)),b=n?Ue(n):window,e){case"focusin":(zr(b)||"true"===b.contentEditable)&&(an=b,on=n,sn=null);break;case"focusout":sn=on=an=null;break;case"mousedown":ln=!0;break;case"contextmenu":case"mouseup":case"dragend":ln=!1,cn(o,r,a);break;case"selectionchange":if(nn)break;case"keydown":case"keyup":cn(o,r,a)}var x;if(jr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Tr?Ir(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Pr&&"ko"!==r.locale&&(Tr||"onCompositionStart"!==v?"onCompositionEnd"===v&&Tr&&(x=Yt()):(Ht="value"in(Bt=a)?Bt.value:Bt.textContent,Tr=!0)),0<(b=Yu(n,v)).length&&(v=new ur(v,e,null,r,a),o.push({event:v,listeners:b}),(x||null!==(x=Mr(r)))&&(v.data=x))),(x=kr?function(e,t){switch(e){case"compositionend":return Mr(t);case"keypress":return 32!==t.which?null:(Er=!0,Ar);case"textInput":return(e=t.data)===Ar&&Er?null:e;default:return null}}(e,r):function(e,t){if(Tr)return"compositionend"===e||!jr&&Ir(e,t)?(e=Yt(),Vt=Ht=Bt=null,Tr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pr&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(v=Yu(n,"onBeforeInput")).length&&(b=new ur("onBeforeInput","beforeinput",null,r,a),o.push({event:b,listeners:v}),b.data=x),function(e,t,r,n,a){if("submit"===t&&r&&r.stateNode===a){var i=Ru((a[Re]||null).action),o=n.submitter;o&&null!==(t=(t=o[Re]||null)?Ru(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var s=new tr("action","action",null,n,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==ju){var e=o?zu(a,o):new FormData(a);zo(r,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"==typeof i&&(s.preventDefault(),e=o?zu(a,o):new FormData(a),zo(r,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(o,e,n,r,a)}Fu(o,t)}))}function Vu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Yu(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=$t(e,r))&&n.unshift(Vu(e,a,i)),null!=(a=$t(e,t))&&n.push(Vu(e,a,i))),3===e.tag)return n;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function qu(e,t,r,n,a){for(var i=t._reactName,o=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===n)break;5!==s&&26!==s&&27!==s||null===c||(l=c,a?null!=(c=$t(r,i))&&o.unshift(Vu(r,c,l)):a||null!=(c=$t(r,i))&&o.push(Vu(r,c,l))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Ju=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Xu(e){return("string"==typeof e?e:""+e).replace(Ju,"\n").replace(Ku,"")}function Qu(e,t){return t=Xu(t),Xu(e)===t}function Zu(){}function ed(e,t,r,n,a,o){switch(r){case"children":"string"==typeof n?"body"===t||"textarea"===t&&""===n||wt(e,n):("number"==typeof n||"bigint"==typeof n)&&"body"!==t&&wt(e,""+n);break;case"className":tt(e,"class",n);break;case"tabIndex":tt(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":tt(e,r,n);break;case"style":Ct(e,n,o);break;case"data":if("object"!==t){tt(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"==typeof n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=It(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"==typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===r?("input"!==t&&ed(e,t,"name",a.name,a,null),ed(e,t,"formEncType",a.formEncType,a,null),ed(e,t,"formMethod",a.formMethod,a,null),ed(e,t,"formTarget",a.formTarget,a,null)):(ed(e,t,"encType",a.encType,a,null),ed(e,t,"method",a.method,a,null),ed(e,t,"target",a.target,a,null))),null==n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=It(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Zu);break;case"onScroll":null!=n&&$u("scroll",e);break;case"onScrollEnd":null!=n&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(i(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"muted":e.muted=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"==typeof n||"boolean"==typeof n||"symbol"==typeof n){e.removeAttribute("xlink:href");break}r=It(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"==typeof n||"symbol"==typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":$u("beforetoggle",e),$u("toggle",e),et(e,"popover",n);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":et(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&et(e,r=Pt.get(r)||r,n)}}function td(e,t,r,n,a,o){switch(r){case"style":Ct(e,n,o);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(i(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=r}}break;case"children":"string"==typeof n?wt(e,n):("number"==typeof n||"bigint"==typeof n)&&wt(e,""+n);break;case"onScroll":null!=n&&$u("scroll",e);break;case"onScrollEnd":null!=n&&$u("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ye.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"==typeof(o=null!=(o=e[Re]||null)?o[r]:null)&&e.removeEventListener(t,o,a),"function"!=typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):et(e,r,n):("function"!=typeof o&&null!==o&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,a)))}}function rd(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var n,a=!1,o=!1;for(n in r)if(r.hasOwnProperty(n)){var s=r[n];if(null!=s)switch(n){case"src":a=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ed(e,t,n,s,r,null)}}return o&&ed(e,t,"srcSet",r.srcSet,r,null),void(a&&ed(e,t,"src",r.src,r,null));case"input":$u("invalid",e);var l=n=s=o=null,c=null,u=null;for(a in r)if(r.hasOwnProperty(a)){var d=r[a];if(null!=d)switch(a){case"name":o=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":n=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:ed(e,t,a,d,r,null)}}return gt(e,n,l,c,u,s,o,!1),void ut(e);case"select":for(o in $u("invalid",e),a=s=n=null,r)if(r.hasOwnProperty(o)&&null!=(l=r[o]))switch(o){case"value":n=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:ed(e,t,o,l,r,null)}return t=n,r=s,e.multiple=!!a,void(null!=t?bt(e,!!a,t,!1):null!=r&&bt(e,!!a,r,!0));case"textarea":for(s in $u("invalid",e),n=o=a=null,r)if(r.hasOwnProperty(s)&&null!=(l=r[s]))switch(s){case"value":a=l;break;case"defaultValue":o=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:ed(e,t,s,l,r,null)}return vt(e,a,o,n),void ut(e);case"option":for(c in r)r.hasOwnProperty(c)&&null!=(a=r[c])&&("selected"===c?e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a:ed(e,t,c,a,r,null));return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(a=0;a<Ou.length;a++)$u(Ou[a],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&null!=(a=r[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ed(e,t,u,a,r,null)}return;default:if(kt(t)){for(d in r)r.hasOwnProperty(d)&&void 0!==(a=r[d])&&td(e,t,d,a,r,void 0);return}}for(l in r)r.hasOwnProperty(l)&&null!=(a=r[l])&&ed(e,t,l,a,r,null)}var nd=null,ad=null;function id(e){return 9===e.nodeType?e:e.ownerDocument}function od(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ld(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var cd=null,ud="function"==typeof setTimeout?setTimeout:void 0,dd="function"==typeof clearTimeout?clearTimeout:void 0,hd="function"==typeof Promise?Promise:void 0,pd="function"==typeof queueMicrotask?queueMicrotask:void 0!==hd?function(e){return hd.resolve(null).then(e).catch(fd)}:ud;function fd(e){setTimeout((function(){throw e}))}function md(e){return"head"===e}function gd(e,t){var r=t,n=0,a=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0<n&&8>n){r=n;var o=e.ownerDocument;if(1&r&&jd(o.documentElement),2&r&&jd(o.body),4&r)for(jd(r=o.head),o=r.firstChild;o;){var s=o.nextSibling,l=o.nodeName;o[Fe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||r.removeChild(o),o=s}}if(0===a)return e.removeChild(i),void Ih(t);a--}else"$"===r||"$?"===r||"$!"===r?a++:n=r.charCodeAt(0)-48;else n=0;r=i}while(r);Ih(t)}function yd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":yd(r),$e(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function bd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function xd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function Sd(e,t,r){switch(t=id(r),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function jd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$e(e)}var Cd=new Map,kd=new Set;function Pd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ad=D.d;D.d={f:function(){var e=Ad.f(),t=Bc();return e||t},r:function(e){var t=We(e);null!==t&&5===t.tag&&"form"===t.type?Lo(t):Ad.r(e)},D:function(e){Ad.D(e),Id("dns-prefetch",e,null)},C:function(e,t){Ad.C(e,t),Id("preconnect",e,t)},L:function(e,t,r){Ad.L(e,t,r);var n=Ed;if(n&&e&&t){var a='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&r&&r.imageSrcSet?(a+='[imagesrcset="'+ft(r.imageSrcSet)+'"]',"string"==typeof r.imageSizes&&(a+='[imagesizes="'+ft(r.imageSizes)+'"]')):a+='[href="'+ft(e)+'"]';var i=a;switch(t){case"style":i=Td(e);break;case"script":i=Dd(e)}Cd.has(i)||(e=d({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),Cd.set(i,e),null!==n.querySelector(a)||"style"===t&&n.querySelector(Rd(i))||"script"===t&&n.querySelector(Ld(i))||(rd(t=n.createElement("link"),"link",e),He(t),n.head.appendChild(t)))}},m:function(e,t){Ad.m(e,t);var r=Ed;if(r&&e){var n=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+ft(n)+'"][href="'+ft(e)+'"]',i=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Dd(e)}if(!Cd.has(i)&&(e=d({rel:"modulepreload",href:e},t),Cd.set(i,e),null===r.querySelector(a))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ld(i)))return}rd(n=r.createElement("link"),"link",e),He(n),r.head.appendChild(n)}}},X:function(e,t){Ad.X(e,t);var r=Ed;if(r&&e){var n=Be(r).hoistableScripts,a=Dd(e),i=n.get(a);i||((i=r.querySelector(Ld(a)))||(e=d({src:e,async:!0},t),(t=Cd.get(a))&&$d(e,t),He(i=r.createElement("script")),rd(i,"link",e),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}},S:function(e,t,r){Ad.S(e,t,r);var n=Ed;if(n&&e){var a=Be(n).hoistableStyles,i=Td(e);t=t||"default";var o=a.get(i);if(!o){var s={loading:0,preload:null};if(o=n.querySelector(Rd(i)))s.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Cd.get(i))&&Fd(e,r);var l=o=n.createElement("link");He(l),rd(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){s.loading|=1})),l.addEventListener("error",(function(){s.loading|=2})),s.loading|=4,_d(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:s},a.set(i,o)}}},M:function(e,t){Ad.M(e,t);var r=Ed;if(r&&e){var n=Be(r).hoistableScripts,a=Dd(e),i=n.get(a);i||((i=r.querySelector(Ld(a)))||(e=d({src:e,async:!0,type:"module"},t),(t=Cd.get(a))&&$d(e,t),He(i=r.createElement("script")),rd(i,"link",e),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}};var Ed="undefined"==typeof document?null:document;function Id(e,t,r){var n=Ed;if(n&&"string"==typeof t&&t){var a=ft(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof r&&(a+='[crossorigin="'+r+'"]'),kd.has(a)||(kd.add(a),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(a)&&(rd(t=n.createElement("link"),"link",e),He(t),n.head.appendChild(t)))}}function Md(e,t,r,n){var a,o,s,l,c=(c=B.current)?Pd(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof r.precedence&&"string"==typeof r.href?(t=Td(r.href),(n=(r=Be(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"==typeof r.href&&"string"==typeof r.precedence){e=Td(r.href);var u=Be(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Rd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Cd.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Cd.set(e,r),u||(a=c,o=e,s=r,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=a.createElement("link"),l.preload=o,o.addEventListener("load",(function(){return l.loading|=1})),o.addEventListener("error",(function(){return l.loading|=2})),rd(o,"link",s),He(o),a.head.appendChild(o))))),t&&null===n)throw Error(i(528,""));return d}if(t&&null!==n)throw Error(i(529,""));return null;case"script":return t=r.async,"string"==typeof(r=r.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Dd(r),(n=(r=Be(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Td(e){return'href="'+ft(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function zd(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Dd(e){return'[src="'+ft(e)+'"]'}function Ld(e){return"script[async]"+e}function Od(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+ft(r.href)+'"]');if(n)return t.instance=n,He(n),n;var a=d({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return He(n=(e.ownerDocument||e).createElement("style")),rd(n,"style",a),_d(n,r.precedence,e),t.instance=n;case"stylesheet":a=Td(r.href);var o=e.querySelector(Rd(a));if(o)return t.state.loading|=4,t.instance=o,He(o),o;n=zd(r),(a=Cd.get(a))&&Fd(n,a),He(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),rd(o,"link",n),t.state.loading|=4,_d(o,r.precedence,e),t.instance=o;case"script":return o=Dd(r.src),(a=e.querySelector(Ld(o)))?(t.instance=a,He(a),a):(n=r,(a=Cd.get(o))&&$d(n=d({},r),a),He(a=(e=e.ownerDocument||e).createElement("script")),rd(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,_d(n,r.precedence,e));return t.instance}function _d(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,i=a,o=0;o<n.length;o++){var s=n[o];if(s.dataset.precedence===t)i=s;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function $d(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Nd=null;function Wd(e,t,r){if(null===Nd){var n=new Map,a=Nd=new Map;a.set(r,n)}else(n=(a=Nd).get(r))||(n=new Map,a.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),a=0;a<r.length;a++){var i=r[a];if(!(i[Fe]||i[Te]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var s=n.get(o);s?s.push(i):n.set(o,[i])}}return n}function Ud(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Hd=null;function Vd(){}function Yd(){if(this.count--,0===this.count)if(this.stylesheets)qd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function qd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Jd,e),Gd=null,Yd.call(e))}function Jd(e,t){if(!(4&t.state.loading)){var r=Gd.get(e);if(r)var n=r.get(null);else{r=new Map,Gd.set(e,r);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(r.set(o.dataset.precedence,o),n=o)}n&&r.set(null,n)}o=(a=t.instance).getAttribute("data-precedence"),(i=r.get(o)||n)===n&&r.set(null,a),r.set(o,a),this.count++,n=Yd.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Kd={$$typeof:v,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Xd(e,t,r,n,a,i,o,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Qd(e,t,r,n,a,i,o,s,l,c,u,d){return e=new Xd(e,t,r,o,s,l,c,d),t=1,!0===i&&(t|=24),i=Fn(3,null,null,t),e.current=i,i.stateNode=e,(t=La()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:n,isDehydrated:r,cache:t},ai(i),e}function Zd(e){return e?e=On:On}function eh(e,t,r,n,a,i){a=Zd(a),null===n.context?n.context=a:n.pendingContext=a,(n=oi(t)).payload={element:r},null!==(i=void 0===i?null:i)&&(n.callback=i),null!==(r=si(e,n,t))&&(Fc(r,0,t),li(r,e,t))}function th(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function rh(e,t){th(e,t),(e=e.alternate)&&th(e,t)}function nh(e){if(13===e.tag){var t=zn(e,67108864);null!==t&&Fc(t,0,67108864),rh(e,67108864)}}var ah=!0;function ih(e,t,r,n){var a=z.T;z.T=null;var i=D.p;try{D.p=2,sh(e,t,r,n)}finally{D.p=i,z.T=a}}function oh(e,t,r,n){var a=z.T;z.T=null;var i=D.p;try{D.p=8,sh(e,t,r,n)}finally{D.p=i,z.T=a}}function sh(e,t,r,n){if(ah){var a=lh(n);if(null===a)Hu(e,t,n,ch,r),vh(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return ph=wh(ph,e,t,r,n,a),!0;case"dragenter":return fh=wh(fh,e,t,r,n,a),!0;case"mouseover":return mh=wh(mh,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return gh.set(i,wh(gh.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,yh.set(i,wh(yh.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(vh(e,n),4&t&&-1<xh.indexOf(e)){for(;null!==a;){var i=We(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=ye(i.pendingLanes);if(0!==o){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-he(o);s.entanglements[1]|=l,o&=~l}Cu(i),!(6&ac)&&(Cc=ee()+500,ku(0))}}break;case 13:null!==(s=zn(i,2))&&Fc(s,0,2),Bc(),rh(i,2)}if(null===(i=lh(n))&&Hu(e,t,n,ch,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else Hu(e,t,n,null,r)}}function lh(e){return uh(e=Rt(e))}var ch=null;function uh(e){if(ch=null,null!==(e=Ne(e))){var t=s(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=l(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ch=e,null}function dh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case re:return 2;case ne:return 8;case ae:case ie:return 32;case oe:return 268435456;default:return 32}default:return 32}}var hh=!1,ph=null,fh=null,mh=null,gh=new Map,yh=new Map,bh=[],xh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":ph=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yh.delete(t.pointerId)}}function wh(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&null!==(t=We(t))&&nh(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Sh(e){var t=Ne(e.target);if(null!==t){var r=s(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=l(r)))return e.blockedOn=t,void function(e,t){var r=D.p;try{return D.p=e,t()}finally{D.p=r}}(e.priority,(function(){if(13===r.tag){var e=Oc();e=Ae(e);var t=zn(r,e);null!==t&&Fc(t,0,e),rh(r,e)}}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function jh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=lh(e.nativeEvent);if(null!==r)return null!==(t=We(r))&&nh(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Tt=n,r.target.dispatchEvent(n),Tt=null,t.shift()}return!0}function Ch(e,t,r){jh(e)&&r.delete(t)}function kh(){hh=!1,null!==ph&&jh(ph)&&(ph=null),null!==fh&&jh(fh)&&(fh=null),null!==mh&&jh(mh)&&(mh=null),gh.forEach(Ch),yh.forEach(Ch)}function Ph(t,r){t.blockedOn===r&&(t.blockedOn=null,hh||(hh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,kh)))}var Ah=null;function Eh(t){Ah!==t&&(Ah=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,(function(){Ah===t&&(Ah=null);for(var e=0;e<t.length;e+=3){var r=t[e],n=t[e+1],a=t[e+2];if("function"!=typeof n){if(null===uh(n||r))continue;break}var i=We(r);null!==i&&(t.splice(e,3),e-=3,zo(i,{pending:!0,data:a,method:r.method,action:n},n,a))}})))}function Ih(e){function t(t){return Ph(t,e)}null!==ph&&Ph(ph,e),null!==fh&&Ph(fh,e),null!==mh&&Ph(mh,e),gh.forEach(t),yh.forEach(t);for(var r=0;r<bh.length;r++){var n=bh[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<bh.length&&null===(r=bh[0]).blockedOn;)Sh(r),null===r.blockedOn&&bh.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var a=r[n],i=r[n+1],o=a[Re]||null;if("function"==typeof i)o||Eh(r);else if(o){var s=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[Re]||null)s=o.formAction;else if(null!==uh(a))continue}else s=o.action;"function"==typeof s?r[n+1]=s:(r.splice(n,3),n-=3),Eh(r)}}}function Mh(e){this._internalRoot=e}function Th(e){this._internalRoot=e}Th.prototype.render=Mh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));eh(t.current,Oc(),e,t,null,null)},Th.prototype.unmount=Mh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;eh(e.current,2,null,e,null,null),Bc(),t[ze]=null}},Th.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bh.length&&0!==t&&t<bh[r].priority;r++);bh.splice(r,0,e),0===r&&Sh(e)}};var Rh=t.version;if("19.1.0"!==Rh)throw Error(i(527,Rh,"19.1.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(n=a.return)){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return c(a),e;if(o===n)return c(a),t;o=o.sibling}throw Error(i(188))}if(r.return!==n.return)r=a,n=o;else{for(var l=!1,u=a.child;u;){if(u===r){l=!0,r=a,n=o;break}if(u===n){l=!0,n=a,r=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===r){l=!0,r=o,n=a;break}if(u===n){l=!0,n=o,r=a;break}u=u.sibling}if(!l)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var zh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{ce=Dh.inject(zh),ue=Dh}catch(Oh){}}return Mt.createRoot=function(e,t){if(!o(e))throw Error(i(299));var r=!1,n="",a=vs,s=ws,l=Ss;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qd(e,1,!1,null,0,r,n,a,s,l,0,null),e[ze]=t.current,Uu(e),new Mh(t)},Mt.hydrateRoot=function(e,t,r){if(!o(e))throw Error(i(299));var n=!1,a="",s=vs,l=ws,c=Ss,u=null;return null!=r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onUncaughtError&&(s=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(u=r.formState)),(t=Qd(e,1,!0,t,0,n,a,s,l,c,0,u)).context=Zd(null),r=t.current,(a=oi(n=Ae(n=Oc()))).callback=null,si(r,a,n),r=n,t.current.lanes=r,Ce(t,r),Cu(t),e[ze]=t.current,Uu(e),new Th(t)},Mt.version="19.1.0",Mt}var Lt,Ot=(Et||(Et=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),It.exports=Dt()),It.exports),_t={};!function(){if(Lt)return _t;Lt=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.parse=function(e,t){const r=new i,n=e.length;if(n<2)return r;const a=t?.decode||l;let c=0;do{const t=e.indexOf("=",c);if(-1===t)break;const i=e.indexOf(";",c),l=-1===i?n:i;if(t>l){c=e.lastIndexOf(";",t-1)+1;continue}const u=o(e,c,t),d=s(e,t,u),h=e.slice(u,d);if(void 0===r[h]){let n=o(e,t+1,l),i=s(e,l,n);const c=a(e.slice(n,i));r[h]=c}c=l+1}while(c<n);return r},_t.serialize=function(i,o,s){const l=s?.encode||encodeURIComponent;if(!e.test(i))throw new TypeError(`argument name is invalid: ${i}`);const c=l(o);if(!t.test(c))throw new TypeError(`argument val is invalid: ${o}`);let u=i+"="+c;if(!s)return u;if(void 0!==s.maxAge){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);u+="; Max-Age="+s.maxAge}if(s.domain){if(!r.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);u+="; Domain="+s.domain}if(s.path){if(!n.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);u+="; Path="+s.path}if(s.expires){if(!function(e){return"[object Date]"===a.call(e)}(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);u+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(u+="; HttpOnly"),s.secure&&(u+="; Secure"),s.partitioned&&(u+="; Partitioned"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():void 0){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return u};const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function o(e,t,r){do{const r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function s(e,t,r){for(;t>r;){const r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function l(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}}();var Ft="popstate";function $t(e={}){return function(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,s="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){s="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:s,location:m.location,delta:t})}function h(e,t){s="PUSH";let n=Bt(m.location,e,t);r&&r(n,e),c=u()+1;let d=Ut(n,c),h=m.createHref(n);try{o.pushState(d,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;a.location.assign(h)}i&&l&&l({action:s,location:m.location,delta:1})}function p(e,t){s="REPLACE";let n=Bt(m.location,e,t);r&&r(n,e),c=u();let a=Ut(n,c),d=m.createHref(n);o.replaceState(a,"",d),i&&l&&l({action:s,location:m.location,delta:0})}function f(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,r="string"==typeof e?e:Ht(e);return r=r.replace(/ $/,"%20"),Nt(t,`No window.location.(origin|href) available to create URL for href: ${r}`),new URL(r,t)}null==c&&(c=0,o.replaceState({...o.state,idx:c},""));let m={get action(){return s},get location(){return e(a,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(Ft,d),l=e,()=>{a.removeEventListener(Ft,d),l=null}},createHref:e=>t(a,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>o.go(e)};return m}((function(e,t){let{pathname:r="/",search:n="",hash:a=""}=Vt(e.location.hash.substring(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),Bt("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"==typeof t?t:Ht(t))}),(function(e,t){Wt("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)}),e)}function Nt(e,t){if(!1===e||null==e)throw new Error(t)}function Wt(e,t){if(!e)try{throw new Error(t)}catch(r){}}function Ut(e,t){return{usr:e.state,key:e.key,idx:t}}function Bt(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Vt(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function Ht({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function Vt(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Yt(e,t,r="/"){return function(e,t,r,n){let a="string"==typeof t?Vt(t):t,i=tr(a.pathname||"/",r);if(null==i)return null;let o=Gt(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let l=0;null==s&&l<o.length;++l){let e=er(i);s=Qt(o[l],e,n)}return s}(e,t,r,!1)}function Gt(e,t=[],r=[],n=""){let a=(e,a,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(Nt(o.relativePath.startsWith(n),`Absolute route path "${o.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(n.length));let s=ir([n,o.relativePath]),l=r.concat(o);e.children&&e.children.length>0&&(Nt(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${s}".`),Gt(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:Xt(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of qt(e.path))a(e,t,r);else a(e,t)})),t}function qt(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return a?[i,""]:[i];let o=qt(n.join("/")),s=[];return s.push(...o.map((e=>""===e?i:[i,e].join("/")))),a&&s.push(...o),s.map((t=>e.startsWith("/")&&""===t?"/":t))}var Jt=/^:[\w-]+$/,Kt=e=>"*"===e;function Xt(e,t){let r=e.split("/"),n=r.length;return r.some(Kt)&&(n+=-2),t&&(n+=2),r.filter((e=>!Kt(e))).reduce(((e,t)=>e+(Jt.test(t)?3:""===t?1:10)),n)}function Qt(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],l=s===n.length-1,c="/"===i?t:t.slice(i.length)||"/",u=Zt({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=Zt({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:ir([i,u.pathname]),pathnameBase:or(ir([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=ir([i,u.pathnameBase]))}return o}function Zt(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){Wt("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let i=new RegExp(a,t?void 0:"i");return[i,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:n.reduce(((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=s[n]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const a=s[n];return e[t]=r&&!a?void 0:(a||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:o,pattern:e}}function er(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return Wt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function tr(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function rr(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nr(e){let t=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t.map(((e,r)=>r===t.length-1?e.pathname:e.pathnameBase))}function ar(e,t,r,n=!1){let a;"string"==typeof e?a=Vt(e):(a={...e},Nt(!a.pathname||!a.pathname.includes("?"),rr("?","pathname","search",a)),Nt(!a.pathname||!a.pathname.includes("#"),rr("#","pathname","hash",a)),Nt(!a.search||!a.search.includes("#"),rr("#","search","hash",a)));let i,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(null==s)i=r;else{let e=t.length-1;if(!n&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:r,search:n="",hash:a=""}="string"==typeof e?Vt(e):e,i=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:i,search:sr(n),hash:lr(a)}}(a,i),c=s&&"/"!==s&&s.endsWith("/"),u=(o||"."===s)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var ir=e=>e.join("/").replace(/\/\/+/g,"/"),or=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sr=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",lr=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",cr=["POST","PUT","PATCH","DELETE"];new Set(cr);var ur=["GET",...cr];new Set(ur);var dr=i.createContext(null);dr.displayName="DataRouter";var hr=i.createContext(null);hr.displayName="DataRouterState";var pr=i.createContext({isTransitioning:!1});pr.displayName="ViewTransition",i.createContext(new Map).displayName="Fetchers",i.createContext(null).displayName="Await";var fr=i.createContext(null);fr.displayName="Navigation";var mr=i.createContext(null);mr.displayName="Location";var gr=i.createContext({outlet:null,matches:[],isDataRoute:!1});gr.displayName="Route";var yr=i.createContext(null);function br(){return null!=i.useContext(mr)}function xr(){return Nt(br(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(mr).location}yr.displayName="RouteError";var vr="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wr(e){i.useContext(fr).static||i.useLayoutEffect(e)}function Sr(){let{isDataRoute:e}=i.useContext(gr);return e?function(){let{router:e}=function(e){let t=i.useContext(dr);return Nt(t,Ir(e)),t}("useNavigate"),t=Mr("useNavigate"),r=i.useRef(!1);return wr((()=>{r.current=!0})),i.useCallback((async(n,a={})=>{Wt(r.current,vr),r.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...a}))}),[e,t])}():function(){Nt(br(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(dr),{basename:t,navigator:r}=i.useContext(fr),{matches:n}=i.useContext(gr),{pathname:a}=xr(),o=JSON.stringify(nr(n)),s=i.useRef(!1);return wr((()=>{s.current=!0})),i.useCallback(((n,i={})=>{if(Wt(s.current,vr),!s.current)return;if("number"==typeof n)return void r.go(n);let l=ar(n,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ir([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)}),[t,r,o,a,e])}()}function jr(e,{relative:t}={}){let{matches:r}=i.useContext(gr),{pathname:n}=xr(),a=JSON.stringify(nr(r));return i.useMemo((()=>ar(e,JSON.parse(a),n,"path"===t)),[e,a,n,t])}function Cr(e,t,r,n){Nt(br(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=i.useContext(fr),{matches:s}=i.useContext(gr),l=s[s.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Rr(u,!h||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,f=xr();if(t){let e="string"==typeof t?Vt(t):t;Nt("/"===d||e.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||"/",g=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=!o&&r&&r.matches&&r.matches.length>0?r.matches:Yt(e,{pathname:g});Wt(h||null!=y,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Wt(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=function(e,t=[],r=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let n=e,a=r?.errors;if(null!=a){let e=n.findIndex((e=>e.route.id&&void 0!==a?.[e.route.id]));Nt(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,e+1))}let o=!1,s=-1;if(r)for(let i=0;i<n.length;i++){let e=n[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(s=i),e.route.id){let{loaderData:t,errors:a}=r,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!a||void 0===a[e.route.id]);if(e.route.lazy||i){o=!0,n=s>=0?n.slice(0,s+1):[n[0]];break}}}return n.reduceRight(((e,l,c)=>{let u,d=!1,h=null,p=null;r&&(u=a&&l.route.id?a[l.route.id]:void 0,h=l.route.errorElement||Pr,o&&(s<0&&0===c?(Rr("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):s===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let f=t.concat(n.slice(0,c+1)),m=()=>{let t;return t=u?h:d?p:l.route.Component?i.createElement(l.route.Component,null):l.route.element?l.route.element:e,i.createElement(Er,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?i.createElement(Ar,{location:r.location,revalidation:r.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ir([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:ir([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,r);return t&&b?i.createElement(mr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function kr(){let e=function(){let e=i.useContext(yr),t=function(e){let t=i.useContext(hr);return Nt(t,Ir(e)),t}("useRouteError"),r=Mr("useRouteError");return void 0!==e?e:t.errors?.[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},s=null;return s=i.createElement(i.Fragment,null,i.createElement("p",null," Hey developer "),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:o},"ErrorBoundary")," or"," ",i.createElement("code",{style:o},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),r?i.createElement("pre",{style:a},r):null,s)}i.createContext(null);var Pr=i.createElement(kr,null),Ar=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?i.createElement(gr.Provider,{value:this.props.routeContext},i.createElement(yr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Er({routeContext:e,match:t,children:r}){let n=i.useContext(dr);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),i.createElement(gr.Provider,{value:e},r)}function Ir(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mr(e){let t=function(e){let t=i.useContext(gr);return Nt(t,Ir(e)),t}(e),r=t.matches[t.matches.length-1];return Nt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var Tr={};function Rr(e,t,r){t||Tr[e]||(Tr[e]=!0,Wt(!1,r))}function zr(e){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dr({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:o=!1}){Nt(!br(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),l=i.useMemo((()=>({basename:s,navigator:a,static:o,future:{}})),[s,a,o]);"string"==typeof r&&(r=Vt(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:p="default"}=r,f=i.useMemo((()=>{let e=tr(c,s);return null==e?null:{location:{pathname:e,search:u,hash:d,state:h,key:p},navigationType:n}}),[s,c,u,d,h,p,n]);return Wt(null!=f,`<Router basename="${s}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:i.createElement(fr.Provider,{value:l},i.createElement(mr.Provider,{children:t,value:f}))}function Lr({children:e,location:t}){return Cr(Or(e),t)}function Or(e,t=[]){let r=[];return i.Children.forEach(e,((e,n)=>{if(!i.isValidElement(e))return;let a=[...t,n];if(e.type===i.Fragment)return void r.push.apply(r,Or(e.props.children,a));Nt(e.type===zr,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Or(e.props.children,a)),r.push(o)})),r}i.memo((function({routes:e,future:t,state:r}){return Cr(e,void 0,r,t)}));var _r="get",Fr="application/x-www-form-urlencoded";function $r(e){return null!=e&&"string"==typeof e.tagName}function Nr(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map((e=>[r,e])):[[r,n]])}),[]))}var Wr=null,Ur=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Br(e){return null==e||Ur.has(e)?e:(Wt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fr}"`),null)}function Hr(e,t){let r,n,a,i,o;if($r(s=e)&&"form"===s.tagName.toLowerCase()){let o=e.getAttribute("action");n=o?tr(o,t):null,r=e.getAttribute("method")||_r,a=Br(e.getAttribute("enctype"))||Fr,i=new FormData(e)}else if(function(e){return $r(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return $r(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||o.getAttribute("action");if(n=s?tr(s,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||_r,a=Br(e.getAttribute("formenctype"))||Br(o.getAttribute("enctype"))||Fr,i=new FormData(o,e),!function(){if(null===Wr)try{new FormData(document.createElement("form"),0),Wr=!1}catch(e){Wr=!0}return Wr}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,n)}}else{if($r(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_r,n=null,a=Fr,o=e}var s;return i&&"text/plain"===a&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}function Vr(e,t){if(!1===e||null==e)throw new Error(t)}function Yr(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Gr(e,t,r){return function(e,t){let r=new Set;return new Set(t),e.reduce(((e,t)=>{let n=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(t));return r.has(n)||(r.add(n),e.push({key:n,link:t})),e}),[])}((await Promise.all(e.map((async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}(n,r);return e.links?e.links():[]}return[]})))).flat(1).filter(Yr).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}function qr(e,t,r,n,a,i){let o=(e,t)=>!r[t]||e.route.id!==r[t].route.id,s=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===i?t.filter(((e,t)=>o(e,t)||s(e,t))):"data"===i?t.filter(((t,i)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,i)||s(t,i))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0})):[]}function Jr(e,t,{includeHydrateFallback:r}={}){return n=e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a})).flat(1),[...new Set(n)];var n}function Kr(){let e=i.useContext(dr);return Vr(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}var Xr=i.createContext(void 0);function Qr(){let e=i.useContext(Xr);return Vr(e,"You must render this element inside a <HydratedRouter> element"),e}function Zr(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function en({page:e,...t}){let{router:r}=Kr(),n=i.useMemo((()=>Yt(r.routes,e,r.basename)),[r.routes,e,r.basename]);return n?i.createElement(tn,{page:e,matches:n,...t}):null}function tn({page:e,matches:t,...r}){let n=xr(),{manifest:a,routeModules:o}=Qr(),{basename:s}=Kr(),{loaderData:l,matches:c}=function(){let e=i.useContext(hr);return Vr(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),u=i.useMemo((()=>qr(e,t,c,a,n,"data")),[e,t,c,a,n]),d=i.useMemo((()=>qr(e,t,c,a,n,"assets")),[e,t,c,a,n]),h=i.useMemo((()=>{if(e===n.pathname+n.search+n.hash)return[];let r=new Set,i=!1;if(t.forEach((e=>{let t=a.routes[e.route.id];t&&t.hasLoader&&(!u.some((t=>t.route.id===e.route.id))&&e.route.id in l&&o[e.route.id]?.shouldRevalidate||t.hasClientLoader?i=!0:r.add(e.route.id))})),0===r.size)return[];let c=function(e,t){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.data":t&&"/"===tr(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}(e,s);return i&&r.size>0&&c.searchParams.set("_routes",t.filter((e=>r.has(e.route.id))).map((e=>e.route.id)).join(",")),[c.pathname+c.search]}),[s,l,n,a,u,t,e,o]),p=i.useMemo((()=>Jr(d,a)),[d,a]),f=function(e){let{manifest:t,routeModules:r}=Qr(),[n,a]=i.useState([]);return i.useEffect((()=>{let n=!1;return Gr(e,t,r).then((e=>{n||a(e)})),()=>{n=!0}}),[e,t,r]),n}(d);return i.createElement(i.Fragment,null,h.map((e=>i.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r}))),p.map((e=>i.createElement("link",{key:e,rel:"modulepreload",href:e,...r}))),f.map((({key:e,link:t})=>i.createElement("link",{key:e,...t}))))}function rn(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}Xr.displayName="FrameworkContext";var nn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{nn&&(window.__reactRouterVersion="7.5.3")}catch(xz){}function an({basename:e,children:t,window:r}){let n=i.useRef();null==n.current&&(n.current=$t({window:r,v5Compat:!0}));let a=n.current,[o,s]=i.useState({action:a.action,location:a.location}),l=i.useCallback((e=>{i.startTransition((()=>s(e)))}),[s]);return i.useLayoutEffect((()=>a.listen(l)),[a,l]),i.createElement(Dr,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a})}var on=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sn=i.forwardRef((function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:a,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},p){let f,{basename:m}=i.useContext(fr),g="string"==typeof c&&on.test(c),y=!1;if("string"==typeof c&&g&&(f=c,nn))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=tr(t.pathname,m);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:y=!0}catch(xz){Wt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=function(e,{relative:t}={}){Nt(br(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=i.useContext(fr),{hash:a,pathname:o,search:s}=jr(e,{relative:t}),l=o;return"/"!==r&&(l="/"===o?r:ir([r,o])),n.createHref({pathname:l,search:s,hash:a})}(c,{relative:n}),[x,v,w]=function(e,t){let r=i.useContext(Xr),[n,a]=i.useState(!1),[o,s]=i.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=i.useRef(null);i.useEffect((()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{s(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),i.useEffect((()=>{if(n){let e=setTimeout((()=>{s(!0)}),100);return()=>{clearTimeout(e)}}}),[n]);let f=()=>{a(!0)},m=()=>{a(!1),s(!1)};return r?"intent"!==e?[o,p,{}]:[o,p,{onFocus:Zr(l,f),onBlur:Zr(c,m),onMouseEnter:Zr(u,f),onMouseLeave:Zr(d,m),onTouchStart:Zr(h,f)}]:[!1,p,{}]}(r,h),S=function(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:o,viewTransition:s}={}){let l=Sr(),c=xr(),u=jr(e,{relative:o});return i.useCallback((i=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(i,t)){i.preventDefault();let t=void 0!==r?r:Ht(c)===Ht(u);l(e,{replace:t,state:n,preventScrollReset:a,relative:o,viewTransition:s})}}),[c,l,u,r,n,t,e,a,o,s])}(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:n,viewTransition:d}),j=i.createElement("a",{...h,...w,href:f||b,onClick:y||a?e:function(t){e&&e(t),t.defaultPrevented||S(t)},ref:rn(p,v),target:l,"data-discover":g||"render"!==t?void 0:"true"});return x&&!g?i.createElement(i.Fragment,null,j,i.createElement(en,{page:b})):j}));function ln(e){let t=i.useContext(dr);return Nt(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}function cn(e){Wt("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=i.useRef(Nr(e)),r=i.useRef(!1),n=xr(),a=i.useMemo((()=>function(e,t){let r=Nr(e);return t&&t.forEach(((e,n)=>{r.has(n)||t.getAll(n).forEach((e=>{r.append(n,e)}))})),r}(n.search,r.current?null:t.current)),[n.search]),o=Sr(),s=i.useCallback(((e,t)=>{const n=Nr("function"==typeof e?e(a):e);r.current=!0,o("?"+n,t)}),[o,a]);return[a,s]}sn.displayName="Link",i.forwardRef((function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:a,to:o,viewTransition:s,children:l,...c},u){let d=jr(o,{relative:c.relative}),h=xr(),p=i.useContext(hr),{navigator:f,basename:m}=i.useContext(fr),g=null!=p&&function(e,t={}){let r=i.useContext(pr);Nt(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ln("useViewTransitionState"),a=jr(e,{relative:t.relative});if(!r.isTransitioning)return!1;let o=tr(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=tr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=Zt(a.pathname,s)||null!=Zt(a.pathname,o)}(d)&&!0===s,y=f.encodeLocation?f.encodeLocation(d).pathname:d.pathname,b=h.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(b=b.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&m&&(x=tr(x,m)||x);const v="/"!==y&&y.endsWith("/")?y.length-1:y.length;let w,S=b===y||!n&&b.startsWith(y)&&"/"===b.charAt(v),j=null!=x&&(x===y||!n&&x.startsWith(y)&&"/"===x.charAt(y.length)),C={isActive:S,isPending:j,isTransitioning:g},k=S?e:void 0;w="function"==typeof r?r(C):[r,S?"active":null,j?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let P="function"==typeof a?a(C):a;return i.createElement(sn,{...c,"aria-current":k,className:w,ref:u,style:P,to:o,viewTransition:s},"function"==typeof l?l(C):l)})).displayName="NavLink",i.forwardRef((({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:o,method:s=_r,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...p},f)=>{let m=function(){let{router:e}=ln("useSubmit"),{basename:t}=i.useContext(fr),r=Mr("useRouteId");return i.useCallback((async(n,a={})=>{let{action:i,method:o,encType:s,formData:l,body:c}=Hr(n,t);if(!1===a.navigate){let t=a.fetcherKey||`__${String(++un)}__`;await e.fetch(t,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||o,formEncType:a.encType||s,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||o,formEncType:a.encType||s,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})}),[e,t,r])}(),g=function(e,{relative:t}={}){let{basename:r}=i.useContext(fr),n=i.useContext(gr);Nt(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...jr(e||".",{relative:t})},s=xr();if(null==e){o.search=s.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let r=e.toString();o.search=r?`?${r}`:""}}return e&&"."!==e||!a.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(o.pathname="/"===o.pathname?r:ir([r,o.pathname])),Ht(o)}(l,{relative:u}),y="get"===s.toLowerCase()?"get":"post",b="string"==typeof l&&on.test(l);return i.createElement("form",{ref:f,method:y,action:g,onSubmit:n?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,i=n?.getAttribute("formmethod")||s;m(n||e.currentTarget,{fetcherKey:t,method:i,navigate:r,replace:a,state:o,relative:u,preventScrollReset:d,viewTransition:h})},...p,"data-discover":b||"render"!==e?void 0:"true"})})).displayName="Form";var un=0;new TextEncoder;const dn=o(s.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),hn=o(s.jsx("path",{d:"M8 5v14l11-7z"})),pn=o(s.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"})),fn=o(s.jsx("path",{d:"M6 6h12v12H6z"})),mn=o(s.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),gn=o(s.jsx("path",{d:"M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77"})),yn=o(s.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63m2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71M4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9zM12 4 9.91 6.09 12 8.18z"}));var bn=We();const xn=o(s.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),vn=o(s.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),wn=o(s.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),Sn=o(s.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),jn=o(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),Cn=o(s.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4z"})),kn=o(s.jsx("path",{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"})),Pn=o(s.jsx("path",{d:"m6 18 8.5-6L6 6zM16 6v12h2V6z"})),An=o(s.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),En=o(s.jsx("path",{d:"M17 17h2v4c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V3c0-1.1.9-1.99 2-1.99L17 1c1.1 0 2 .9 2 2v4h-2V6H7v12h10zm5-5-4-4v3h-5v2h5v3z"})),In=o(s.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),Mn=o(s.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Tn=o(s.jsx("path",{d:"m7 10 5 5 5-5z"})),Rn=o(s.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}));var zn,Dn,Ln=function(){if(Dn)return zn;function e(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}return Dn=1,zn=function(t,r){r=r||{};var n=t.numberOfChannels,a=t.sampleRate,i=r.float32?3:1,o=3===i?32:16;return function(t,r,n,a,i){var o=i/8,s=a*o,l=new ArrayBuffer(44+t.length*o),c=new DataView(l);return e(c,0,"RIFF"),c.setUint32(4,36+t.length*o,!0),e(c,8,"WAVE"),e(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,r,!0),c.setUint16(22,a,!0),c.setUint32(24,n,!0),c.setUint32(28,n*s,!0),c.setUint16(32,s,!0),c.setUint16(34,i,!0),e(c,36,"data"),c.setUint32(40,t.length*o,!0),1===r?function(e,t,r){for(var n=0;n<r.length;n++,t+=2){var a=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,a<0?32768*a:32767*a,!0)}}(c,44,t):function(e,t,r){for(var n=0;n<r.length;n++,t+=4)e.setFloat32(t,r[n],!0)}(c,44,t),l}(2===n?function(e,t){for(var r=e.length+t.length,n=new Float32Array(r),a=0,i=0;a<r;)n[a++]=e[i],n[a++]=t[i],i++;return n}(t.getChannelData(0),t.getChannelData(1)):t.getChannelData(0),i,a,n,o)}}();const On=l(Ln),_n=o(s.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"})),Fn="power_hour_volume_settings",$n={mixVolume:1,playlistVolume:1,visualizerVolume:1,previewVolume:1,mixMuted:!1,playlistMuted:!1,visualizerMuted:!1,previewMuted:!1},Nn=class e{constructor(){r(this,"settings",$n),this.loadFromStorage()}static getInstance(){return e.instance||(e.instance=new e),e.instance}loadFromStorage(){try{const e=localStorage.getItem(Fn);if(e){const t=JSON.parse(e);this.settings={...$n,...t}}}catch(e){this.settings=$n}}saveToStorage(){try{localStorage.setItem(Fn,JSON.stringify(this.settings))}catch(e){}}getVolumeSettings(){return{...this.settings}}getMixVolume(){return this.settings.mixVolume}setMixVolume(e){this.settings.mixVolume=Math.max(0,Math.min(1,e)),this.saveToStorage()}getMixMuted(){return this.settings.mixMuted}setMixMuted(e){this.settings.mixMuted=e,this.saveToStorage()}getPlaylistVolume(){return this.settings.playlistVolume}setPlaylistVolume(e){this.settings.playlistVolume=Math.max(0,Math.min(1,e)),this.saveToStorage()}getPlaylistMuted(){return this.settings.playlistMuted}setPlaylistMuted(e){this.settings.playlistMuted=e,this.saveToStorage()}getVisualizerVolume(){return this.settings.visualizerVolume}setVisualizerVolume(e){this.settings.visualizerVolume=Math.max(0,Math.min(1,e)),this.saveToStorage()}getVisualizerMuted(){return this.settings.visualizerMuted}setVisualizerMuted(e){this.settings.visualizerMuted=e,this.saveToStorage()}getPreviewVolume(){return this.settings.previewVolume}setPreviewVolume(e){this.settings.previewVolume=Math.max(0,Math.min(1,e)),this.saveToStorage()}getPreviewMuted(){return this.settings.previewMuted}setPreviewMuted(e){this.settings.previewMuted=e,this.saveToStorage()}resetToDefaults(){this.settings={...$n},this.saveToStorage()}};r(Nn,"instance");let Wn=Nn;const Un=i.createContext(void 0),Bn=()=>{const e=i.useContext(Un);if(!e)throw new Error("useAudio must be used within an AudioProvider");return e},Hn=({children:e,showSnackbar:t})=>{const r=Wn.getInstance(),[n,a]=i.useState(null),[o,l]=i.useState(null),[c,u]=i.useState(null),[d,h]=i.useState(!1),[p,f]=i.useState(0),[m,g]=i.useState(0),[y,b]=i.useState((()=>r.getMixVolume())),[x,v]=i.useState((()=>r.getMixMuted())),[w,S]=i.useState(null),[j,C]=i.useState(null),[k,P]=i.useState(null),[A,E]=i.useState(null),[I,M]=i.useState(null),[T,R]=i.useState(!1),[z,D]=i.useState(-1),[L,O]=i.useState(0),[_,F]=i.useState(0),[$,N]=i.useState((()=>r.getPlaylistVolume())),[W,U]=i.useState((()=>r.getPlaylistMuted())),[B,H]=i.useState(!1),[V,Y]=i.useState(null),G=i.useRef(0),[q,J]=i.useState(null),[K,X]=i.useState(!1),[Q,Z]=i.useState(0),[ee,te]=i.useState(0),[re,ne]=i.useState(null),[ae,ie]=i.useState(-1),[oe,se]=i.useState(0),[le,ce]=i.useState(null),[ue,de]=i.useState(null),[he,pe]=i.useState((()=>r.getPreviewVolume())),[fe,me]=i.useState((()=>r.getPreviewMuted())),ge=i.useRef(null),ye=i.useRef(null);i.useEffect((()=>{ge.current=A}),[A]);const be=i.useRef(null),xe=i.useRef(null),ve=i.useRef(null),we=(e=!1)=>{be.current&&(clearInterval(be.current),be.current=null),I&&(T||e)&&(be.current=setInterval((()=>{if(I&&I.playing()){const e=I.seek();"number"!=typeof e||isNaN(e)||O(e)}}),100))},Se=()=>{be.current&&(clearInterval(be.current),be.current=null)},je=e=>{xe.current&&clearInterval(xe.current);const t=e||q;t&&(xe.current=setInterval((()=>{if(t&&t.playing()){const e=t.seek();"number"!=typeof e||isNaN(e)||Z(e)}}),100))},Ce=()=>{xe.current&&(clearInterval(xe.current),xe.current=null)},ke=()=>{Se(),c&&(c.pause(),c.currentTime=0,h(!1),f(0),S(null),C(null),P(null)),I&&(I.stop(),I.unload(),M(null),R(!1),O(0),F(0)),V&&(V.stop(),V.unload(),Y(null),H(!1)),Ce(),q&&(q.stop(),q.unload(),J(null),X(!1),Z(0),te(0),ne(null),ie(-1),se(0),de(null)),a(null)},Pe=async(e,r)=>{const n=r||ge.current;if(!n||e<0||e>=n.clips.length)return;const a=n.clips[e];if(Se(),I&&(I.stop(),I.unload()),V&&(V.stop(),V.unload(),Y(null)),O(0),G.current=0,!a.clipPath)return t?.(`Clip ${a.name} has no audio file path`,"error"),void(e<n.clips.length-1?setTimeout((()=>Pe(e+1)),50):Ee());if(window.electronAPI&&a.clipPath&&!a.clipPath.startsWith("blob:")&&!a.clipPath.startsWith("http"))try{const r=await window.electronAPI.getFileBlob(a.clipPath),i=new Blob([r],{type:"audio/wav"}),o=URL.createObjectURL(i),s=new bn.Howl({src:[o],html5:!0,format:["wav"],volume:W?0:$,onload:()=>{F(s.duration()),D(e),R(!0),s.play()},onplay:()=>{setTimeout((()=>{I&&T&&!be.current&&we()}),100)},onend:()=>{ye.current?ye.current(e):e<n.clips.length-1?Pe(e+1):Ee()},onloaderror:(r,i)=>{t?.(`Error loading clip: ${a.name}`,"error"),URL.revokeObjectURL(o),e<n.clips.length-1?setTimeout((()=>Pe(e+1)),50):Ee()},onplayerror:(r,i)=>{t?.(`Error playing clip: ${a.name}`,"error"),e<n.clips.length-1?setTimeout((()=>Pe(e+1)),50):Ee()}});M(s)}catch(i){t?.(`Error loading clip: ${a.name}`,"error"),e<n.clips.length-1?setTimeout((()=>Pe(e+1)),50):Ee()}else{const r=new bn.Howl({src:[a.clipPath],html5:!0,format:["mp3","wav","ogg"],volume:W?0:$,onload:()=>{F(r.duration()),D(e),R(!0),r.play()},onplay:()=>{setTimeout((()=>{I&&T&&!be.current&&we()}),100)},onend:()=>{ye.current?ye.current(e):e<n.clips.length-1?Pe(e+1):Ee()},onloaderror:(r,i)=>{t?.(`Error loading clip: ${a.name}`,"error"),e<n.clips.length-1?setTimeout((()=>Pe(e+1)),50):Ee()},onplayerror:(r,i)=>{t?.(`Error playing clip: ${a.name}`,"error"),e<n.clips.length-1?setTimeout((()=>Pe(e+1)),50):Ee()}});M(r)}},Ae=async e=>{const t=ge.current;if(t&&t.drinkingSoundPath)if(H(!0),window.electronAPI&&t.drinkingSoundPath&&!t.drinkingSoundPath.startsWith("blob:")&&!t.drinkingSoundPath.startsWith("http"))try{const r=await window.electronAPI.getFileBlob(t.drinkingSoundPath),n=new Blob([r],{type:"audio/wav"}),a=URL.createObjectURL(n),i=new bn.Howl({src:[a],html5:!0,format:["wav"],volume:W?0:$,onend:()=>{H(!1),Y(null),URL.revokeObjectURL(a),e<t.clips.length-1?Pe(e+1):Ee()},onloaderror:(r,n)=>{H(!1),Y(null),URL.revokeObjectURL(a),e<t.clips.length-1?Pe(e+1):Ee()},onplayerror:(r,n)=>{H(!1),Y(null),e<t.clips.length-1?Pe(e+1):Ee()}});Y(i),i.play()}catch(r){H(!1),Y(null),e<t.clips.length-1?Pe(e+1):Ee()}else{const r=new bn.Howl({src:[t.drinkingSoundPath],html5:!0,format:["mp3","wav","ogg"],volume:W?0:$,onend:()=>{H(!1),Y(null),e<t.clips.length-1?Pe(e+1):Ee()},onloaderror:(r,n)=>{H(!1),Y(null),e<t.clips.length-1?Pe(e+1):Ee()},onplayerror:(r,n)=>{H(!1),Y(null),e<t.clips.length-1?Pe(e+1):Ee()}});Y(r),r.play()}else t&&e<t.clips.length-1?Pe(e+1):Ee()};i.useEffect((()=>{ye.current=Ae}),[Ae]);const Ee=()=>{Se(),I&&(I.stop(),I.unload(),M(null)),V&&(V.stop(),V.unload(),Y(null)),R(!1),D(-1),O(0),F(0),H(!1),E(null),G.current=0,"playlist"===n&&a(null)};i.useEffect((()=>(T&&I?we():Se(),()=>Se())),[T,I]),i.useEffect((()=>()=>Se()),[]);const Ie={audioSource:n,currentMix:o,mixAudio:c,mixPlaying:d,mixCurrentTime:p,mixDuration:m,mixVolume:y,mixMuted:x,mixArtist:w,mixYear:j,mixGenre:k,currentPlaylist:A,playlistSound:I,playlistPlaying:T,currentClipIndex:z,playlistProgress:L,playlistDuration:_,playlistVolume:$,playlistMuted:W,isDrinkingSoundPlaying:B,previewSound:q,previewPlaying:K,previewCurrentTime:Q,previewDuration:ee,previewClipName:re,previewClipIndex:ae,previewClipsTotal:oe,previewPlaylistName:le,previewClipArtist:ue,previewVolume:he,previewMuted:fe,playMix:e=>{ke();let r="";r=window.electronAPI&&e.localFilePath||e.localFilePath?e.localFilePath:`http://localhost:4000/mix/${e.filename}`;const n=new Audio(r);n.crossOrigin="anonymous",n.volume=x?0:y,u(n),l(e),h(!0),S(e.artist||null),C(e.year||null),P(e.genre||null),a("mix"),n.onloadedmetadata=()=>{g(n.duration)},n.ontimeupdate=()=>{f(n.currentTime)},n.onended=()=>{h(!1),f(0)},n.play().catch((e=>{h(!1)})),n.onerror=r=>{h(!1),t?.(`Error playing mix: ${e.name}`,"error")},n.play().catch((r=>{h(!1),t?.(`Error playing mix: ${e.name}`,"error")}))},pauseMix:()=>{c&&d&&(c.pause(),h(!1))},resumeMix:()=>{c&&!d&&(c.play(),h(!0))},stopMix:()=>{c&&(c.pause(),c.currentTime=0,h(!1),f(0),l(null),u(null),S(null),C(null),P(null),"mix"===n&&a(null))},seekMix:e=>{c&&(c.currentTime=e,f(e))},setMixVolume:e=>{const t=Math.max(0,Math.min(1,e));b(t),r.setMixVolume(t),c&&(c.volume=x?0:t)},toggleMixMute:()=>{const e=!x;v(e),r.setMixMuted(e),c&&(c.volume=e?0:y)},playPlaylist:e=>{ke(),E(e),D(-1),O(0),F(0),a("playlist"),e.clips.length>0?Pe(0,e):(t?.("Playlist has no clips to play","error"),E(null),a(null))},playClipAtIndex:Pe,pausePlaylist:()=>{if(I&&T){const e=I.seek();"number"!=typeof e||isNaN(e)||(G.current=e),I.pause(),R(!1),Se()}},resumePlaylist:()=>{I&&!T?"loaded"===I.state()?(G.current>0&&(I.seek(G.current),O(G.current)),I.play(),R(!0),setTimeout((()=>{I&&!be.current&&we(!0)}),50)):Pe(z>=0?z:0):!A||I||T||Pe(z>=0?z:0)},stopPlaylist:Ee,nextClip:()=>{A&&z<A.clips.length-1&&(I&&I.stop(),ye.current?ye.current(z):Pe(z+1))},previousClip:()=>{z>0&&(I&&I.stop(),Pe(z-1))},seekPlaylist:e=>{I&&"number"==typeof e&&!isNaN(e)&&(I.seek(e),O(e))},setPlaylistVolume:e=>{const t=Math.max(0,Math.min(1,e)),n=t>0&&W;n&&(U(!1),r.setPlaylistMuted(!1)),N(t),r.setPlaylistVolume(t);const a=n?t:W?0:t;I&&I.volume(a),V&&V.volume(a)},togglePlaylistMute:()=>{const e=!W;U(e),r.setPlaylistMuted(e);const t=e?0:$;I&&I.volume(t),V&&V.volume(t)},playPreview:(e,r,i,o,s,l)=>{ke();const c=new bn.Howl({src:[e],format:["wav"],html5:!0,volume:fe?0:he,onload:()=>{te(c.duration()),X(!0),a("preview"),ne(r||null),ie(i??-1),se(o??0),ce(s||null),de(l||null),Z(0),c.play()},onplay:()=>{je(c)},onend:()=>{Ce(),X(!1),J(null),Z(0),te(0),ne(null),ce(null),de(null),"preview"===n&&a(null)},onloaderror:(e,r)=>{X(!1),J(null),Z(0),te(0),ne(null),ce(null),de(null),"preview"===n&&a(null),t?.("Error loading preview","error")},onplayerror:(e,r)=>{X(!1),J(null),Z(0),te(0),ne(null),ce(null),de(null),"preview"===n&&a(null),t?.("Error playing preview","error")}});J(c)},pausePreview:()=>{q&&K&&(q.pause(),X(!1),Ce())},resumePreview:()=>{q&&!K&&(q.play(),X(!0),je(q))},stopPreview:()=>{Ce(),q&&(q.stop(),q.unload(),J(null),X(!1),Z(0),te(0),ne(null),ie(-1),se(0),ce(null),de(null),"preview"===n&&a(null))},seekPreview:e=>{q&&"number"==typeof e&&!isNaN(e)&&(q.seek(e),Z(e))},previousPreviewClip:()=>{ve.current&&ae>0&&ve.current(ae-1)},nextPreviewClip:()=>{ve.current&&ae<oe-1&&ve.current(ae+1)},setPreviewClipNavigationCallback:e=>{ve.current=e},setPreviewVolume:e=>{const t=Math.max(0,Math.min(1,e)),n=t>0&&fe;n&&(me(!1),r.setPreviewMuted(!1)),pe(t),r.setPreviewVolume(t);const a=n?t:fe?0:t;q&&q.volume(a)},togglePreviewMute:()=>{const e=!fe;me(e),r.setPreviewMuted(e),q&&q.volume(e?0:he)},stopAll:ke};return s.jsx(Un.Provider,{value:Ie,children:e})},Vn=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,Yn=({open:e,playlist:t,currentClipIndex:r=-1,isDrinkingSoundPlaying:n=!1,title:a,subtitle:o,clipIndex:l,totalClips:m,isPlaying:g,progress:y,duration:b,volume:x,isMuted:v,onPlayPause:w,onStop:S,onPrevious:j,onNext:C,onSeek:k,onVolumeChange:P,onMuteToggle:A,onClose:E,onJumpToSong:I,showJumpToSong:M=!1})=>{const T=Bn(),[R,z]=i.useState(null);if(!e)return null;const D=!!t,L=D&&t?t.clips[r]:null,O=r<=0,_=!(!D||!t)&&r>=t.clips.length-1;return D&&t?t.name:T.previewPlaylistName,s.jsxs(c,{elevation:8,sx:{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:24,zIndex:2e3,p:1.5,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"background.paper",borderRadius:3,boxShadow:6,minWidth:420,maxWidth:580,width:"auto",minHeight:100},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",mb:2,position:"relative"},children:[s.jsx(u,{sx:{width:"32px",display:"flex",justifyContent:"flex-start"},children:M&&I?s.jsx(d,{onClick:I,size:"small",sx:{color:"text.secondary","&:hover":{color:"text.primary"},padding:"4px"},title:"Jump to song in library",children:s.jsx(_n,{fontSize:"small"})}):null}),s.jsx(u,{sx:{flex:1,textAlign:"center",overflow:"hidden",maxWidth:"400px",px:.25},children:D?n?s.jsx(h,{variant:"subtitle1",color:"primary.main",sx:{fontWeight:"bold",fontSize:"0.85rem"},children:" Time to Drink! "}):L?s.jsxs(u,{sx:{textAlign:"center",width:"100%"},children:[s.jsx(h,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:"bold",fontSize:"0.85rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.2,maxWidth:"100%"},children:L.name}),(()=>{let e=L.artist;if(!e&&L.songName&&L.songName!==t?.name&&L.songName.includes(" - ")&&(e=L.songName.split(" - ")[0]),!e&&L.name&&L.name!==t?.name){const t=L.name.match(/^(.+?)\s*-\s*(.+?)(?:\s*\[[\d:]+\s*-\s*[\d:]+\])?$/);t&&(e=t[1].trim())}e||(e="Unknown Artist");const r=(()=>{const e=L.name.match(/\[(\d+:\d+)\s*-\s*(\d+:\d+)\]/);return e?`${e[1]} - ${e[2]}`:null})();return s.jsxs(u,{sx:{textAlign:"center",width:"100%"},children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.1,maxWidth:"100%",mt:.25},children:e}),r&&s.jsx(h,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem",opacity:.8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.1,maxWidth:"100%",mt:.25,fontStyle:"italic"},children:r})]})})()]}):null:s.jsxs(u,{sx:{textAlign:"center",width:"100%"},children:[s.jsx(h,{variant:"subtitle1",color:"text.primary",sx:{fontWeight:"bold",fontSize:"0.85rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.2,maxWidth:"100%"},children:(()=>{let e=a||o||"Now Playing";if(e=e.replace(/\s*\[[\d:]+\s*-\s*[\d:]+\]$/,""),e.includes(" - ")){const t=e.split(" - ");t.length>=2&&(e=t.slice(1).join(" - "))}return e.trim()||a||"Now Playing"})()}),(()=>{let e="mix"===T.audioSource?T.mixArtist:T.previewClipArtist;if(!e){const t=(a||o||"").replace(/\s*\[[\d:]+\s*-\s*[\d:]+\]$/,"");if(t.includes(" - ")){const r=t.split(" - ");r.length>=2&&(e=r[0].trim())}}const t=(()=>{const e=(a||o||"").match(/\[(\d+:\d+)\s*-\s*(\d+:\d+)\]/);return e?`${e[1]} - ${e[2]}`:null})();return s.jsxs(u,{sx:{textAlign:"center",width:"100%"},children:[e&&s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.1,maxWidth:"100%",mt:.25},children:e}),t&&s.jsx(h,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem",opacity:.8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.1,maxWidth:"100%",mt:.25,fontStyle:"italic"},children:t})]})})()]})}),s.jsx(u,{sx:{width:"32px",display:"flex",justifyContent:"flex-end"},children:s.jsx(d,{onClick:E,size:"small",sx:{color:"text.secondary","&:hover":{color:"text.primary",bgcolor:"action.hover"},width:"32px",height:"32px"},children:s.jsx(An,{fontSize:"small"})})})]}),s.jsx(u,{sx:{width:"100%",mb:1.5,px:.5},children:s.jsx(p,{min:0,max:b||0,value:isNaN(y)?0:Math.min(y,b||0),onChange:(e,t)=>{const r=Number(t);!isNaN(r)&&r>=0&&r<=(b||0)&&k(r)},sx:{width:"100%","& .MuiSlider-thumb":{width:14,height:14},"& .MuiSlider-track":{height:4},"& .MuiSlider-rail":{height:4}},disabled:!b||0===b})}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",mb:1.5,px:1},children:[s.jsx(h,{variant:"caption",color:"text.secondary",sx:{minWidth:"35px",textAlign:"left",fontSize:"0.75rem"},children:Vn(isNaN(y)?0:y)}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[j&&s.jsx(d,{onClick:j,disabled:!!D&&O,size:"small",children:s.jsx(kn,{fontSize:"small"})}),s.jsx(d,{onClick:w,sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},mx:.5,width:40,height:40},children:g?s.jsx(pn,{}):s.jsx(hn,{})}),s.jsx(d,{onClick:S,size:"small",children:s.jsx(fn,{fontSize:"small"})}),C&&s.jsx(d,{onClick:C,disabled:!!D&&_,size:"small",children:s.jsx(Pn,{fontSize:"small"})}),s.jsx(d,{onClick:e=>{z(e.currentTarget)},size:"small",sx:{color:"text.secondary","&:hover":{color:"text.primary"},ml:.5},children:v||0===x?s.jsx(yn,{fontSize:"small"}):s.jsx(gn,{fontSize:"small"})})]}),s.jsx(h,{variant:"caption",color:"text.secondary",sx:{minWidth:"35px",textAlign:"right",fontSize:"0.75rem"},children:Vn(b||0)})]}),s.jsx(f,{open:Boolean(R),anchorEl:R,onClose:()=>{z(null)},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},sx:{zIndex:2500},disablePortal:!1,disableScrollLock:!0,disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,children:s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:2,height:120,minWidth:56,bgcolor:"background.paper",borderRadius:1,boxShadow:3,overflow:"hidden"},children:s.jsx(p,{orientation:"vertical",min:0,max:1,step:.01,value:v?0:x,onChange:(e,t)=>{const r=Array.isArray(t)?t[0]:t;P(r)},onMouseDown:e=>{e.stopPropagation()},onMouseUp:e=>{e.stopPropagation()},sx:{height:100,"& .MuiSlider-track":{width:4},"& .MuiSlider-rail":{width:4},"& .MuiSlider-thumb":{width:16,height:16}}})})})]})},Gn={},qn=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");n=e(t.map((e=>{if((e=function(e){return"/"+e}(e))in Gn)return;Gn[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise(((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then((t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)}))},Jn=o(s.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),Kn=o(s.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"})),Xn=o(s.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"})),Qn=o(s.jsx("path",{d:"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3z"})),Zn=o(s.jsx("path",{fillRule:"evenodd",d:"M3 3v8h8V3zm6 6H5V5h4zm-6 4v8h8v-8zm6 6H5v-4h4zm4-16v8h8V3zm6 6h-4V5h4zm-6 4v8h8v-8zm6 6h-4v-4h4z"})),ea=o(s.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"})),ta=o(s.jsx("path",{d:"M20 9H4v2h16zM4 15h16v-2H4z"})),ra=o(s.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),na=o(s.jsx("path",{d:"M21 5V3H3v2l8 9v5H6v2h12v-2h-5v-5zM7.43 7 5.66 5h12.69l-1.78 2z"})),aa=o(s.jsx("path",{d:"M15 6H3v2h12zm0 4H3v2h12zM3 16h8v-2H3zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6z"})),ia=o(s.jsx("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"})),oa=o(s.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),sa=o(s.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),la=o(s.jsx("path",{d:"M10 9h4V6h3l-5-5-5 5h3zm-1 1H6V7l-5 5 5 5v-3h3zm14 2-5-5v3h-3v4h3v3zm-9 3h-4v3H7l5 5 5-5h-3z"})),ca=o(s.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),ua=o(s.jsx("path",{d:"M10.59 9.17 5.41 4 4 5.41l5.17 5.17zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4zm.33 9.41-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04z"})),da=o(s.jsx("path",{d:"M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z"})),ha=o(s.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),pa=o(s.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"})),fa=o(s.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),ma=o(s.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),ga=o(s.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),ya=o(s.jsx("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),ba=e=>{const[t,r]=i.useState({}),[n,a]=i.useState({}),[o,s]=i.useState({});return i.useEffect((()=>{let t=!0;const n=[];return(async()=>{const i={},o={},l={};for(const r of e)if(o[r.id]=!1,l[r.id]=null,r.imagePath)if(r.imagePath.startsWith("blob:")||r.imagePath.startsWith("http"))i[r.id]=r.imagePath;else if(window.electronAPI){o[r.id]=!0;try{const e=await window.electronAPI.getFileBlob(r.imagePath);if(!t)return;const a=r.imagePath.toLowerCase().split(".").pop();let s="image/jpeg";switch(a){case"png":s="image/png";break;case"gif":s="image/gif";break;case"webp":s="image/webp";break;default:s="image/jpeg"}const l=new Blob([e],{type:s}),c=URL.createObjectURL(l);n.push(c),i[r.id]=c,o[r.id]=!1}catch(c){if(!t)return;l[r.id]=`Failed to load image: ${c.message}`,i[r.id]=null,o[r.id]=!1}}else i[r.id]=r.imagePath;else i[r.id]=null;t&&(r(i),a(o),s(l))})(),()=>{t=!1,n.forEach((e=>URL.revokeObjectURL(e)))}}),[e]),{imageUrls:t,loading:n,errors:o}},xa=o([s.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),s.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),va=o(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),wa=o(s.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Sa=o([s.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),s.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),ja=o(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5m0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1"})),Ca=o(s.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),ka=o(s.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})),Pa=o(s.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 11h-3v3.75c0 1.24-1.01 2.25-2.25 2.25S8.5 17.99 8.5 16.75s1.01-2.25 2.25-2.25c.46 0 .89.14 1.25.38V11h4zm-3-4V3.5L18.5 9z"})),Aa=o(s.jsx("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"})),Ea=o(s.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"})),Ia=o(s.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"})),Ma=o(s.jsx("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"})),Ta=o(s.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),Ra=o(s.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7.5 18c-.83 0-1.5-.67-1.5-1.5S6.67 15 7.5 15s1.5.67 1.5 1.5S8.33 18 7.5 18m0-9C6.67 9 6 8.33 6 7.5S6.67 6 7.5 6 9 6.67 9 7.5 8.33 9 7.5 9m4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m0-9c-.83 0-1.5-.67-1.5-1.5S15.67 6 16.5 6s1.5.67 1.5 1.5S17.33 9 16.5 9"})),za=o(s.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),Da=o(s.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),La=o(s.jsx("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"})),Oa=o(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),_a=o(s.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"})),Fa=o(s.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),$a=o(s.jsx("path",{d:"M19 2h-4.18C14.4.84 13.3 0 12 0S9.6.84 9.18 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m7 18H5V4h2v3h10V4h2z"})),Na=o(s.jsx("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"})),Wa=o(s.jsx("path",{d:"M7 5h10v2h2V3c0-1.1-.9-1.99-2-1.99L7 1c-1.1 0-2 .9-2 2v4h2zm8.41 11.59L20 12l-4.59-4.59L14 8.83 17.17 12 14 15.17zM10 15.17 6.83 12 10 8.83 8.59 7.41 4 12l4.59 4.59zM17 19H7v-2H5v4c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-4h-2z"})),Ua=o(s.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),Ba=o(s.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),Ha=o([s.jsx("circle",{cx:"12",cy:"4",r:"2"},"0"),s.jsx("path",{d:"M15.89 8.11C15.5 7.72 14.83 7 13.53 7h-2.54C8.24 6.99 6 4.75 6 2H4c0 3.16 2.11 5.84 5 6.71V22h2v-6h2v6h2V10.05L18.95 14l1.41-1.41z"},"1")]),Va=o(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),Ya=o(s.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),Ga=o(s.jsx("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"})),qa=o(s.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"})),Ja=o(s.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"})),Ka=o(s.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),Xa=o(s.jsx("path",{d:"M7 2v11h3v9l7-12h-4l4-8z"})),Qa=o(s.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"})),Za=o(s.jsx("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"})),ei=o(s.jsx("path",{d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"})),ti=o(s.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"})),ri=o(s.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),ni=o(s.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),ai=o(s.jsx("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"})),ii=o(s.jsx("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-1 2H5v-2h2zm0-3H5V8h2zm9 7H8v-2h8zm0-4h-2v-2h2zm0-3h-2V8h2zm3 3h-2v-2h2zm0-3h-2V8h2z"})),oi=o(s.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"})),si=o(s.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),li=o(s.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l4 4 4-4H6c0-3.86 3.14-7 7-7s7 3.14 7 7-3.14 7-7 7c-1.9 0-3.62-.76-4.88-1.99L6.7 18.42C8.32 20.01 10.55 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m2 8v-1c0-1.1-.9-2-2-2s-2 .9-2 2v1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1m-1 0h-2v-1c0-.55.45-1 1-1s1 .45 1 1z"})),ci=o(s.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"})),ui=o(s.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),di=o(s.jsx("path",{d:"M12 19c0-3.87 3.13-7 7-7 1.08 0 2.09.25 3 .68V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h8.08c-.05-.33-.08-.66-.08-1M4 6l8 5 8-5v2l-8 5-8-5zm13.34 16-3.54-3.54 1.41-1.41 2.12 2.12 4.24-4.24L23 16.34z"})),hi=o(s.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),pi=(o(s.jsx("path",{d:"m18 4 2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4z"})),o(s.jsx("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3z"}))),fi=o(s.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),mi=o(s.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),gi=o(s.jsx("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68zm-10 5h-2v-2h2zm0-4h-2V7h2z"})),yi=o(s.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),bi=o(s.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"})),xi=o(s.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),vi=o(s.jsx("path",{d:"M14 10H3v2h11zm0-4H3v2h11zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2zM3 16h7v-2H3z"})),wi=o(s.jsx("path",{d:"M3 10h11v2H3zm0-4h11v2H3zm0 8h7v2H3zm13-1v8l6-4z"})),Si=o(s.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),ji=o(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),Ci=o(s.jsx("path",{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2m6 9.8a.9.9 0 0 1-.1.5l-2.1 4.9a1.34 1.34 0 0 1-1.3.8H9a2 2 0 0 1-2-2v-5a1.28 1.28 0 0 1 .4-1L12 5l.69.69a1.08 1.08 0 0 1 .3.7v.2L12.41 10H17a1 1 0 0 1 1 1z"})),ki=o(s.jsx("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2z"})),Pi=o(s.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),Ai=o([s.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),s.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),Ei=o(s.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"})),Ii=o(s.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"})),Mi=(o(s.jsx("path",{d:"m21.58 16.09-1.09-7.66C20.21 6.46 18.52 5 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.43l-1.09 7.66C2.2 17.63 3.39 19 4.94 19c.68 0 1.32-.27 1.8-.75L9 16h6l2.25 2.25c.48.48 1.13.75 1.8.75 1.56 0 2.75-1.37 2.53-2.91M11 11H9v2H8v-2H6v-1h2V8h1v2h2zm4-1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 3c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"})),o(s.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}))),Ti=o(s.jsx("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"})),Ri=o(s.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"})),zi=o(s.jsx("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5M7 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"})),Di=o(s.jsx("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5m0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"})),Li=o(s.jsx("path",{d:"M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74m9.84 4.63-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74c-3.6-.76-3.54-.75-3.67-.75-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38"})),Oi=o(s.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})),_i=o(s.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),Fi=o(s.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})),$i=o(s.jsx("path",{d:"M14.67 5v14H9.33V5zm1 14H21V5h-5.33zm-7.34 0V5H3v14z"})),Ni=o(s.jsx("path",{d:"M2 4v7h20V4zm8 16h12v-7H10zm-8 0h6v-7H2z"})),Wi=o(s.jsx("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"})),Ui=o(s.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),Bi=o(s.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"})),Hi=o(s.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),Vi=o(s.jsx("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"})),Yi=(o(s.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67M11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8"})),({open:e,onClose:t,onSoundSelected:r,currentSoundPath:n,title:a="Manage Drinking Sounds"})=>{const o=m(),[l,c]=i.useState([]),[p,f]=i.useState(null),[E,I]=i.useState(n||null),M=i.useRef(null),T=()=>{M.current&&(M.current.stop(),M.current=null),f(null)},[R,z]=i.useState(!1),D=()=>{T(),t()};return s.jsxs(g,{open:e,onClose:D,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{minHeight:400,maxHeight:"80vh"}},children:[s.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(na,{}),a]}),s.jsxs(b,{children:[s.jsxs(u,{sx:{mb:3},children:[s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[s.jsxs(h,{variant:"subtitle1",fontWeight:"bold",children:["Drinking Sounds (",l.length,")"]}),s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx("input",{type:"file",accept:"audio/*",multiple:!0,onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).map((e=>({id:Math.random().toString(36).substr(2,9),name:e.name.replace(/\.[^/.]+$/,""),file:e})));c((e=>[...e,...t]))}},style:{display:"none"},id:"drinking-sounds-input"}),s.jsx("label",{htmlFor:"drinking-sounds-input",children:s.jsx(d,{component:"span",color:"primary",title:"Add drinking sounds",children:s.jsx(wa,{})})}),l.length>1&&s.jsx(d,{onClick:()=>{if(0===l.length)return;const e=Math.floor(Math.random()*l.length),t=l[e];I(t.id)},color:"secondary",title:"Select random sound",children:s.jsx(Ra,{})}),l.length>0&&s.jsx(d,{onClick:()=>{z(!0)},color:"error",title:"Clear all sounds",children:s.jsx(Mn,{})})]})]}),0===l.length?s.jsx(x,{severity:"info",sx:{textAlign:"center"},children:"No drinking sounds added yet. Click the + button to add some!"}):s.jsx(v,{sx:{maxHeight:300,overflow:"auto"},children:l.map(((e,t)=>s.jsxs(w.Fragment,{children:[s.jsxs(S,{sx:{bgcolor:E===e.id?"primary.main":"transparent",color:E===e.id?"white":"inherit",borderRadius:1,mb:.5,cursor:"pointer"},onClick:()=>I(e.id),children:[s.jsx(j,{primary:`${t+1}. ${e.name}`,secondary:E===e.id?"Selected":"",secondaryTypographyProps:{color:E===e.id?"rgba(255,255,255,0.7)":"text.secondary"}}),s.jsxs(C,{children:[s.jsx(d,{onClick:t=>{t.stopPropagation(),p===e.id?T():(e=>{T();const t=new bn.Howl({src:[URL.createObjectURL(e.file)],html5:!0,volume:.7,onend:()=>{f(null),M.current=null},onloaderror:(e,t)=>{f(null),M.current=null}});M.current=t,f(e.id),t.play()})(e)},color:E===e.id?"inherit":"default",title:p===e.id?"Stop preview":"Preview sound",children:p===e.id?s.jsx(fn,{}):s.jsx(hn,{})}),s.jsx(d,{onClick:t=>{var r;t.stopPropagation(),r=e.id,c((e=>e.filter((e=>e.id!==r)))),p===r&&T()},color:"error",title:"Remove sound",children:s.jsx(dn,{})})]})]}),t<l.length-1&&s.jsx(k,{})]},e.id)))})]}),n&&s.jsxs(x,{severity:"success",sx:{mb:2},children:["Current drinking sound: ",n.split("/").pop()||"Custom sound"]})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:D,children:"Cancel"}),s.jsx(A,{onClick:async()=>{if(!E)return void t();const e=l.find((e=>e.id===E));if(e){try{if(window.electronAPI){const t=await e.file.arrayBuffer(),n=await window.electronAPI.saveDrinkingSound(t);n&&n.success&&n.path&&r(n.path)}else{const t=URL.createObjectURL(e.file);r(t)}}catch(n){}t()}else t()},variant:"contained",disabled:!E,children:E?"Save Selection":"Remove Drinking Sound"})]}),s.jsxs(g,{open:R,onClose:()=>z(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, ${o.palette.background.default} 100%)`,border:`1px solid ${o.palette.divider}`}},children:[s.jsx(y,{sx:{background:`linear-gradient(135deg, ${o.palette.warning.main} 0%, ${o.palette.error.main} 100%)`,color:"white",borderRadius:"12px 12px 0 0",mb:0},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(Mn,{sx:{fontSize:28}}),s.jsx(h,{variant:"h6",fontWeight:"bold",children:"Clear All Drinking Sounds"})]})}),s.jsxs(b,{sx:{p:3},children:[s.jsxs(x,{severity:"warning",sx:{mb:3},children:[s.jsx(h,{variant:"body1",fontWeight:"bold",gutterBottom:!0,children:"This action cannot be undone!"}),s.jsxs(h,{variant:"body2",children:["You are about to permanently delete all ",l.length," drinking sounds from this session."]})]}),s.jsx(h,{variant:"body1",color:"text.secondary",children:"Are you sure you want to clear all drinking sounds?"})]}),s.jsxs(P,{sx:{p:3,gap:2},children:[s.jsx(A,{onClick:()=>z(!1),variant:"outlined",sx:{borderRadius:2,px:3,color:o.palette.text.primary,borderColor:o.palette.divider,"&:hover":{borderColor:o.palette.primary.main,backgroundColor:`${o.palette.primary.main}10`}},children:"Cancel"}),s.jsxs(A,{onClick:()=>{T(),c([]),I(null),z(!1)},variant:"contained",color:"error",sx:{borderRadius:2,px:3,fontWeight:"bold",background:`linear-gradient(135deg, ${o.palette.error.main} 0%, ${o.palette.error.dark} 100%)`,"&:hover":{background:`linear-gradient(135deg, ${o.palette.error.dark} 0%, ${o.palette.error.main} 100%)`}},children:["Clear All (",l.length," sounds)"]})]})]})]})});var Gi,qi,Ji=qi?Gi:(qi=1,Gi=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;0!==a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;0!==a--;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;0!==a--;){var o=i[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r});const Ki=l(Ji);var Xi,Qi,Zi,eo,to,ro={exports:{}},no={exports:{}};function ao(){return to||(to=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){if(eo)return Zi;function e(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function t(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}return eo=1,Zi=function(r,n,a){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"==typeof n&&(a=n,n={}),n=n||{},a=a||function(){},o.type=n.type||"text/javascript",o.charset=n.charset||"utf8",o.async=!("async"in n)||!!n.async,o.src=r,n.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(o,n.attrs),n.text&&(o.text=""+n.text),("onload"in o?e:t)(o,a),o.onload||e(o,a),i.appendChild(o)}}(),a=(r=n)&&r.__esModule?r:{default:r};t.default=function(e){return new Promise((function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)t(window.YT);else{var r="http:"===window.location.protocol?"http:":"https:";(0,a.default)(r+"//www.youtube.com/iframe_api",(function(t){t&&e.trigger("error",t)}));var n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){n&&n(),t(window.YT)}}}))},e.exports=t.default}(no,no.exports)),no.exports}var io,oo,so,lo,co={exports:{}},uo={exports:{}},ho={exports:{}};function po(){if(oo)return io;oo=1;var e=1e3,t=60*e,r=60*t,n=24*r,a=365.25*n;function i(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}return io=function(o,s){s=s||{};var l,c=typeof o;if("string"===c&&o.length>0)return function(i){if(!((i=String(i)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(i);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*n;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*t;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(o);if("number"===c&&!1===isNaN(o))return s.long?i(l=o,n,"day")||i(l,r,"hour")||i(l,t,"minute")||i(l,e,"second")||l+" ms":function(a){return a>=n?Math.round(a/n)+"d":a>=r?Math.round(a/r)+"h":a>=t?Math.round(a/t)+"m":a>=e?Math.round(a/e)+"s":a+"ms"}(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}}function fo(){return so||(so=1,function(e,t){var r;function n(e){function n(){if(n.enabled){var e=n,a=+new Date,i=a-(r||a);e.diff=i,e.prev=r,e.curr=a,r=a;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var l=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;l++;var a=t.formatters[n];if("function"==typeof a){var i=o[l];r=a.call(e,i),o.splice(l,1),l--}return r})),t.formatArgs.call(e,o),(n.log||t.log||function(){}.bind()).apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,a=0;a<n;a++)r[a]&&("-"===(e=r[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=po(),t.names=[],t.skips=[],t.formatters={}}(ho,ho.exports)),ho.exports}var mo,go,yo,bo,xo,vo,wo={exports:{}},So={exports:{}},jo={exports:{}},Co={exports:{}};function ko(){return bo||(bo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){return yo||(yo=1,e=Co,t=Co.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default),Co.exports;var e,t}(),a=(r=n)&&r.__esModule?r:{default:r};t.default={pauseVideo:{acceptableStates:[a.default.ENDED,a.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[a.default.ENDED,a.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[a.default.ENDED,a.default.PLAYING,a.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default}(jo,jo.exports)),jo.exports}function Po(){return xo||(xo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=(lo||(lo=1,function(e,t){var r={};function n(){var e;try{e=t.storage.debug}catch(xz){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=r.DEBUG),e}(t=e.exports=fo()).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),r){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(a++,"%c"===e&&(i=a))})),e.splice(i,0,n)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(xz){}},t.load=n,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(xz){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(n())}(uo,uo.exports)),uo.exports),n=c(r),a=function(){return mo||(mo=1,e=wo,t=wo.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default),wo.exports;var e,t}(),i=c(a),o=function(){return go||(go=1,e=So,t=So.exports,Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default),So.exports;var e,t}(),s=c(o),l=c(ko());function c(e){return e&&e.__esModule?e:{default:e}}var u=(0,n.default)("youtube-player"),d={proxyEvents:function(e){var t={},r=function(r){var n="on"+r.slice(0,1).toUpperCase()+r.slice(1);t[n]=function(t){u('event "%s"',n,t),e.trigger(r,t)}},n=!0,a=!1,i=void 0;try{for(var o,l=s.default[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)r(o.value)}catch(c){a=!0,i=c}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={},n=function(n){t&&l.default[n]?r[n]=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.then((function(e){var t=l.default[n],a=e.getPlayerState(),i=e[n].apply(e,r);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(a)?new Promise((function(r){e.addEventListener("onStateChange",(function n(){var a=e.getPlayerState(),i=void 0;"number"==typeof t.timeout&&(i=setTimeout((function(){e.removeEventListener("onStateChange",n),r()}),t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(a)&&(e.removeEventListener("onStateChange",n),clearTimeout(i),r())}))})).then((function(){return i})):i}))}:r[n]=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.then((function(e){return e[n].apply(e,r)}))}},a=!0,o=!1,s=void 0;try{for(var c,u=i.default[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)n(c.value)}catch(d){o=!0,s=d}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}return r}};t.default=d,e.exports=t.default}(co,co.exports)),co.exports}var Ao=(vo||(vo=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o(Qi?Xi:(Qi=1,Xi=function(){var e={},t={};return e.on=function(e,r){var n={name:e,handler:r};return t[e]=t[e]||[],t[e].unshift(n),n},e.off=function(e){var r=t[e.name].indexOf(e);-1!==r&&t[e.name].splice(r,1)},e.trigger=function(e,r){var n,a=t[e];if(a)for(n=a.length;n--;)a[n].handler(r)},e})),a=o(ao()),i=o(Po());function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,n.default)();if(s||(s=(0,a.default)(l)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"==typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=i.default.proxyEvents(l);var c=new Promise((function(n){"object"===(void 0===e?"undefined":r(e))&&e.playVideo instanceof Function?n(e):s.then((function(r){var a=new r.Player(e,t);return l.on("ready",(function(){n(a)})),null}))})),u=i.default.promisifyPlayer(c,o);return u.on=l.on,u.off=l.off,u},e.exports=t.default}(ro,ro.exports)),ro.exports);const Eo=l(Ao);var Io=Object.defineProperty,Mo=Object.defineProperties,To=Object.getOwnPropertyDescriptors,Ro=Object.getOwnPropertySymbols,zo=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable,Lo=(e,t,r)=>t in e?Io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oo=(e,t)=>{for(var r in t||(t={}))zo.call(t,r)&&Lo(e,r,t[r]);if(Ro)for(var r of Ro(t))Do.call(t,r)&&Lo(e,r,t[r]);return e},_o=(e,t)=>Mo(e,To(t));function Fo(e={}){return _o(Oo({},e),{height:0,width:0,playerVars:_o(Oo({},e.playerVars),{autoplay:0,start:0,end:0})})}var $o={videoId:E.string,id:E.string,className:E.string,iframeClassName:E.string,style:E.object,title:E.string,loading:E.oneOf(["lazy","eager"]),opts:E.objectOf(E.any),onReady:E.func,onError:E.func,onPlay:E.func,onPause:E.func,onEnd:E.func,onStateChange:E.func,onPlaybackRateChange:E.func,onPlaybackQualityChange:E.func},No=class extends w.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var t,r;return null==(r=(t=this.props).onReady)?void 0:r.call(t,e)},this.onPlayerError=e=>{var t,r;return null==(r=(t=this.props).onError)?void 0:r.call(t,e)},this.onPlayerStateChange=e=>{var t,r,n,a,i,o,s,l;switch(null==(r=(t=this.props).onStateChange)||r.call(t,e),e.data){case No.PlayerState.ENDED:null==(a=(n=this.props).onEnd)||a.call(n,e);break;case No.PlayerState.PLAYING:null==(o=(i=this.props).onPlay)||o.call(i,e);break;case No.PlayerState.PAUSED:null==(l=(s=this.props).onPause)||l.call(s,e)}},this.onPlayerPlaybackRateChange=e=>{var t,r;return null==(r=(t=this.props).onPlaybackRateChange)?void 0:r.call(t,e)},this.onPlayerPlaybackQualityChange=e=>{var t,r;return null==(r=(t=this.props).onPlaybackQualityChange)?void 0:r.call(t,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then((()=>this.destroyPlayerPromise=void 0)),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if("undefined"==typeof document)return;if(this.destroyPlayerPromise)return void this.destroyPlayerPromise.then(this.createPlayer);const e=_o(Oo({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=Eo(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then((e=>{this.props.title&&e.setAttribute("title",this.props.title),this.props.loading&&e.setAttribute("loading",this.props.loading)}))},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;null==(e=this.internalPlayer)||e.getIframe().then((e=>{this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.iframeClassName?e.setAttribute("class",this.props.iframeClassName):e.removeAttribute("class"),this.props.opts&&this.props.opts.width?e.setAttribute("width",this.props.opts.width.toString()):e.removeAttribute("width"),this.props.opts&&this.props.opts.height?e.setAttribute("height",this.props.opts.height.toString()):e.removeAttribute("height"),this.props.title?e.setAttribute("title",this.props.title):e.setAttribute("title","YouTube video player"),this.props.loading?e.setAttribute("loading",this.props.loading):e.removeAttribute("loading")}))},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,t,r,n;if(void 0===this.props.videoId||null===this.props.videoId)return void(null==(e=this.internalPlayer)||e.stopVideo());let a=!1;const i={videoId:this.props.videoId};(null==(t=this.props.opts)?void 0:t.playerVars)&&(a=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(i.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(i.endSeconds=this.props.opts.playerVars.end)),a?null==(r=this.internalPlayer)||r.loadVideoById(i):null==(n=this.internalPlayer)||n.cueVideoById(i)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return t=this,r=null,n=function*(){(function(e,t){var r,n,a,i;return e.id!==t.id||e.className!==t.className||(null==(r=e.opts)?void 0:r.width)!==(null==(n=t.opts)?void 0:n.width)||(null==(a=e.opts)?void 0:a.height)!==(null==(i=t.opts)?void 0:i.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title})(e,this.props)&&this.updatePlayer(),function(e,t){return e.videoId!==t.videoId||!Ki(Fo(e.opts),Fo(t.opts))}(e,this.props)&&(yield this.resetPlayer()),function(e,t){var r,n;if(e.videoId!==t.videoId)return!0;const a=(null==(r=e.opts)?void 0:r.playerVars)||{},i=(null==(n=t.opts)?void 0:n.playerVars)||{};return a.start!==i.start||a.end!==i.end}(e,this.props)&&this.updateVideo()},new Promise(((e,a)=>{var i=e=>{try{s(n.next(e))}catch(xz){a(xz)}},o=e=>{try{s(n.throw(e))}catch(xz){a(xz)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,o);s((n=n.apply(t,r)).next())}));var t,r,n}componentWillUnmount(){this.destroyPlayer()}render(){return w.createElement("div",{className:this.props.className,style:this.props.style},w.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},Wo=No;Wo.propTypes=$o,Wo.defaultProps={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},Wo.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var Uo=Wo;const Bo=({open:e,onClose:t,onSoundSelected:r,currentSoundPath:n,title:a="Create Drinking Clips"})=>{const o=m(),[l,f]=i.useState("search"),[C,E]=i.useState((()=>{try{const e=localStorage.getItem("drinking_clips_library");if(e)return JSON.parse(e)}catch(e){}return[]})),[J,K]=i.useState(null),[X,Q]=i.useState("youtube"),[Z,ee]=i.useState(""),[te,re]=i.useState([]),[ne,ae]=i.useState(!1),[ie,oe]=i.useState(null),[se,le]=i.useState(0),[ce,ue]=i.useState(5),[de,he]=i.useState(!1),[pe,fe]=i.useState(50),[me,ge]=i.useState(!1),[ye,be]=i.useState(!1),[xe,ve]=i.useState("0:00"),[we,Se]=i.useState("5"),[je,Ce]=i.useState({startTime:"",duration:""}),[ke,Pe]=i.useState(0),[Ae,Ee]=i.useState(0),[Ie,Me]=i.useState(!1),[Te,Re]=i.useState(null),[ze,De]=i.useState(null),[Le,Oe]=i.useState(!1),[_e,Fe]=i.useState(""),[$e,Ne]=i.useState(!1),[We,Ue]=i.useState("compact"),[Be,He]=i.useState(""),[Ve,Ye]=i.useState("recent"),[Ge,qe]=i.useState(new Set),[Je,Ke]=i.useState(!1),Xe=i.useRef(null),Qe=i.useRef(null);i.useRef(null),w.useEffect((()=>{try{const e=C.map((e=>({id:e.id,name:e.name,type:e.type,youtubeId:e.youtubeId,duration:e.duration,startTime:e.startTime,path:e.path})));localStorage.setItem("drinking_clips_library",JSON.stringify(e))}catch(e){}}),[C]);const Ze=w.useMemo((()=>{let e=C;if(Be.trim()){const t=Be.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.type.toLowerCase().includes(t)))}return e.sort(((e,t)=>{switch(Ve){case"name":return e.name.localeCompare(t.name);case"type":return e.type.localeCompare(t.type);case"duration":return(e.duration||0)-(t.duration||0);default:return C.indexOf(t)-C.indexOf(e)}})),e}),[C,Be,Ve]),et=i.useCallback((e=>{qe((t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}))}),[]),tt=i.useCallback((()=>{qe(new Set(Ze.map((e=>e.id))))}),[Ze]),rt=i.useCallback((()=>{qe(new Set)}),[]),nt=i.useCallback((()=>{0!==Ge.size&&(E((e=>e.filter((e=>!Ge.has(e.id))))),qe(new Set),Ke(!1))}),[Ge]);o.palette.primary.main,o.palette.secondary.main,w.useEffect((()=>{(async()=>{try{window.electronAPI?.ytDlpCheckAvailability&&(await window.electronAPI.ytDlpCheckAvailability()).available}catch(e){}})()}),[]);const at=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,it=e=>{const t=e.split(":");if(1===t.length){const e=parseInt(t[0])||0;return Math.max(0,e)}if(2===t.length){const e=parseInt(t[0])||0,r=parseInt(t[1])||0;return Math.max(0,60*e+r)}return 0},ot=i.useCallback((async e=>{const t=e||Z;if(t.trim()){ae(!0);try{let e=t;if(["cheers","beer","party"].some((t=>e.toLowerCase().trim()===t))&&(e+=" sound"),!window.electronAPI?.ytDlpSearch)throw new Error("yt-dlp not available: Electron API not found. Please make sure the app is running in Electron.");const r=await window.electronAPI.ytDlpSearch(e,50);if(!r.success)throw new Error(r.error||"yt-dlp search failed");const n=(Array.isArray(r.data)?r.data:[r.data]).filter((e=>e&&(e.id||e.url))).map(((e,t)=>{let r=e.id;if(r&&"string"==typeof r&&(r=r.replace(/[^a-zA-Z0-9_-]/g,""),r.length),!r&&e.url){const t=e.url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);r=t?t[1]:null}return r&&11===r.length?{id:r,title:e.title||e.fulltitle||`Video ${t+1}`,channelTitle:e.uploader||e.channel||e.uploader_id||"Unknown Channel",duration:e.duration?`${Math.floor(e.duration/60)}:${(e.duration%60).toString().padStart(2,"0")}`:"Unknown",thumbnail:e.thumbnail||e.thumbnails?.[0]?.url||`https://img.youtube.com/vi/${r}/mqdefault.jpg`,description:e.description||"",publishedAt:e.upload_date?new Date(e.upload_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")).toISOString():(new Date).toISOString(),viewCount:e.view_count?.toString()||"0",likeCount:e.like_count?.toString()||"0"}:null})).filter((e=>null!==e));re(n)}catch(r){const e=r.message||"Unknown error";e.includes("not a valid URL")&&e.includes("ytsearch")?alert("yt-dlp configuration error. This should be fixed automatically. Please try again."):e.includes("yt-dlp not available")?alert("yt-dlp is not installed.\n\nTo fix this, install yt-dlp:\npip install yt-dlp"):e.includes("Electron API not found")?alert("This feature requires the desktop app. Please use the Electron version of PHat5."):alert(`YouTube search failed: ${e}`),re([])}finally{ae(!1)}}}),[Z]);i.useCallback((e=>{const t=e.keywords[Math.floor(Math.random()*e.keywords.length)];ee(t),ot(t)}),[ot]);const st=i.useCallback((e=>{oe(e),le(0),ue(5),ve("0:00"),Se("5"),Ce({startTime:"",duration:""}),Pe(0),Ee(0),Me(!1),De(null),Oe(!1),Te&&(clearTimeout(Te),Re(null)),f("preview")}),[Te]);i.useCallback((e=>{f(e)}),[]);const lt=i.useCallback((()=>{oe(null),Te&&(clearTimeout(Te),Re(null)),Me(!1),f("search")}),[Te]),ct=i.useCallback((e=>{ve(e);const t=((e,t=600)=>{if(!e.trim())return{isValid:!1,error:"Time is required",value:0};const r=it(e);return isNaN(r)||r<0?{isValid:!1,error:"Invalid time format",value:0}:r>t?{isValid:!1,error:`Time cannot exceed ${at(t)}`,value:0}:{isValid:!0,error:"",value:r}})(e,Ae||600);t.isValid?(le(t.value),Ce((e=>({...e,startTime:""})))):Ce((e=>({...e,startTime:t.error})))}),[Ae]),ut=i.useCallback((e=>{Se(e);const t=((e,t=0,r=30)=>{if(!e.trim())return{isValid:!1,error:"Duration is required",value:0};let n;return n=e.includes(":")?it(e):parseInt(e)||0,isNaN(n)||n<=0?{isValid:!1,error:"Duration must be greater than 0",value:0}:n>r?{isValid:!1,error:`Duration cannot exceed ${r} seconds`,value:0}:Ae>0&&t+n>Ae?{isValid:!1,error:"Clip extends beyond video length",value:0}:{isValid:!0,error:"",value:n}})(e,se,30);t.isValid?(ue(t.value),Ce((e=>({...e,duration:""})))):Ce((e=>({...e,duration:t.error})))}),[se,Ae]),dt=i.useCallback((()=>{if(Qe.current)if(Ie)Qe.current.pauseVideo(),Me(!1),Te&&(clearTimeout(Te),Re(null));else{Qe.current.seekTo(se,!0),Qe.current.playVideo(),Me(!0);const e=setTimeout((()=>{Qe.current&&Qe.current.pauseVideo(),Me(!1),Re(null)}),1e3*ce);Re(e)}}),[se,ce,Ie,Te]),ht=i.useCallback((e=>{Qe.current=e.target,e.target.setVolume(me?0:pe);const t=e.target.getDuration();t&&t>0?Ee(t):setTimeout((()=>{const t=e.target.getDuration();t&&t>0&&Ee(t)}),1e3)}),[me,pe,ie?.id]),pt=i.useCallback((e=>{if(he(1===e.data),1===e.data){const e=()=>{if(Qe.current&&de){const t=Qe.current.getCurrentTime();Pe(t),setTimeout(e,100)}};e()}}),[de]),ft=i.useCallback((()=>{if(!ie)return;const e={id:Math.random().toString(36).substr(2,9),name:`${ie.title.substring(0,30)}... (${ce}s)`,type:"youtube",youtubeId:ie.id,duration:ce,startTime:se};E((t=>[...t,e])),Q("library"),f("library")}),[ie,ce,se]),mt=i.useCallback((async e=>{if(e.target.files){const r=Array.from(e.target.files),n=[];for(const e of r){const r=Math.random().toString(36).substr(2,9),a=e.name.replace(/\.[^/.]+$/,"");try{if(window.electronAPI){const t=await e.arrayBuffer(),i=await window.electronAPI.saveDrinkingSound(t);i&&i.success&&i.path&&n.push({id:r,name:a,type:"audio",duration:5,path:i.path})}else n.push({id:r,name:a,type:"audio",file:e,duration:5})}catch(t){}}n.length>0&&(E((e=>[...e,...n])),Q("library"),f("library"))}}),[]),gt=i.useCallback((()=>{const e=(e=>{const t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return t?t[1]:null})(_e);if(!e)return void alert("Please enter a valid YouTube URL");const t={id:Math.random().toString(36).substr(2,9),name:`YouTube Clip (${ce}s)`,type:"youtube",youtubeId:e,duration:ce,startTime:se};E((e=>[...e,t])),Fe(""),Ne(!1),f("library")}),[_e,ce,se]),yt=i.useCallback((e=>{E((t=>t.filter((t=>t.id!==e)))),J===e&&xt()}),[J]),bt=i.useCallback((e=>{if(xt(),"audio"===e.type){let t;if(e.file)t=URL.createObjectURL(e.file);else{if(!e.path)return;t=e.path}const r=new bn.Howl({src:[t],html5:!0,volume:.7,onend:()=>{K(null),Xe.current=null},onloaderror:(e,t)=>{K(null),Xe.current=null,alert("Unable to preview this audio clip. The file may have been moved or deleted.")},onload:()=>{}});Xe.current=r,K(e.id),r.play(),e.duration&&setTimeout((()=>{r.stop(),K(null),Xe.current=null}),1e3*e.duration)}else if("youtube"===e.type&&e.youtubeId){K(e.id);const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.zIndex="9999",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.id="youtube-preview-overlay";const r=document.createElement("div");r.style.position="relative",r.style.width="80%",r.style.maxWidth="800px",r.style.height="450px",r.style.backgroundColor="#000",r.style.borderRadius="12px",r.style.overflow="hidden",r.style.boxShadow="0 20px 60px rgba(0, 0, 0, 0.5)";const n=document.createElement("button");n.innerHTML="",n.style.position="absolute",n.style.top="10px",n.style.right="10px",n.style.background="rgba(255, 255, 255, 0.9)",n.style.color="#000",n.style.border="none",n.style.borderRadius="50%",n.style.width="40px",n.style.height="40px",n.style.cursor="pointer",n.style.fontSize="18px",n.style.fontWeight="bold",n.style.zIndex="10000",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center";const a=document.createElement("iframe"),i=e.startTime||0;a.src=`https://www.youtube.com/embed/${e.youtubeId}?start=${i}&autoplay=1&controls=1&modestbranding=1&rel=0`,a.style.width="100%",a.style.height="100%",a.style.border="none",a.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",a.allowFullscreen=!0;const o=document.createElement("div");o.style.position="absolute",o.style.bottom="10px",o.style.left="10px",o.style.background="rgba(0, 0, 0, 0.8)",o.style.color="white",o.style.padding="8px 12px",o.style.borderRadius="6px",o.style.fontSize="14px",o.style.zIndex="10000",o.innerHTML=`Preview: ${e.name}<br>Duration: ${e.duration}s | Start: ${at(i)}`,r.appendChild(a),r.appendChild(n),r.appendChild(o),t.appendChild(r),document.body.appendChild(t);const s=()=>{document.body.contains(t)&&document.body.removeChild(t),K(null)};n.onclick=s,t.onclick=e=>{e.target===t&&s()},setTimeout((()=>{s()}),1e3*(e.duration||30))}}),[]),xt=i.useCallback((()=>{Xe.current&&(Xe.current.stop(),Xe.current=null),K(null)}),[]),vt=i.useCallback((async e=>{if("audio"===e.type){let t;if(e.path)t=e.path;else{if(!e.file)return void alert("Audio sound has no file or path. Please try again.");if(window.electronAPI)try{const r=await e.file.arrayBuffer(),n=await window.electronAPI.saveDrinkingSound(r);if(!(n&&n.success&&n.path))return void alert("Failed to save audio file. Please try again.");t=n.path}catch(n){return void alert("Failed to save audio file. Please try again.")}else t=URL.createObjectURL(e.file)}const a=JSON.stringify({type:"audio",path:t,name:e.name});r(a)}else{if("youtube"!==e.type)return void alert("Invalid sound configuration. Please try again.");{const t=JSON.stringify({type:"youtube",youtubeId:e.youtubeId,duration:e.duration,startTime:e.startTime,name:e.name});r(t)}}t()}),[C,r,t]),wt=i.useCallback((()=>{if(0===C.length)return;const e=Math.floor(Math.random()*C.length),t=C[e];vt(t)}),[C,vt]),[St,jt]=i.useState(!1),Ct=i.useCallback((()=>{jt(!0)}),[]),kt=i.useCallback((()=>{xt(),E([]),jt(!1),qe(new Set)}),[xt]),Pt=i.useCallback((()=>{xt(),Te&&(clearTimeout(Te),Re(null)),Me(!1),f("search"),oe(null),ee(""),re([]),t()}),[t,Te]);return w.useEffect((()=>()=>{Te&&clearTimeout(Te),Xe.current&&Xe.current.stop()}),[Te]),s.jsxs(g,{open:e,onClose:Pt,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, ${o.palette.background.default} 100%)`,backdropFilter:"blur(20px)",border:`1px solid ${o.palette.divider}`,minHeight:"80vh"}},children:[s.jsx(y,{sx:{background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,color:"white",borderRadius:"12px 12px 0 0",mb:0},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(na,{sx:{fontSize:28}}),s.jsx(h,{variant:"h5",fontWeight:"bold",children:a})]}),s.jsx(d,{onClick:Pt,sx:{color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:s.jsx(Ca,{})})]})}),s.jsxs(b,{sx:{p:0,overflow:"hidden"},children:[s.jsx(u,{sx:{p:3,borderBottom:`1px solid ${o.palette.divider}`,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, rgba(255,255,255,0.02) 100%)`},children:s.jsxs(I,{direction:"row",spacing:2,justifyContent:"center",children:[s.jsx(A,{variant:"youtube"===X?"contained":"outlined",startIcon:s.jsx(da,{}),onClick:()=>{Q("youtube"),f("search")},sx:{borderRadius:3,px:4,py:1.5,fontSize:"1rem",fontWeight:"bold",background:"youtube"===X?`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`:"transparent","&:hover":{background:"youtube"===X?`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.secondary.dark} 100%)`:`rgba(${o.palette.primary.main}, 0.1)`}},children:"YouTube Videos"}),s.jsx(A,{variant:"audio"===X?"contained":"outlined",startIcon:s.jsx(Pa,{}),onClick:()=>{Q("audio"),f("search")},sx:{borderRadius:3,px:4,py:1.5,fontSize:"1rem",fontWeight:"bold",background:"audio"===X?`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`:"transparent","&:hover":{background:"audio"===X?`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.secondary.dark} 100%)`:`rgba(${o.palette.primary.main}, 0.1)`}},children:"Audio Files"}),s.jsx(A,{variant:"library"===X?"contained":"outlined",startIcon:s.jsx(na,{}),onClick:()=>{Q("library"),f("library")},sx:{borderRadius:3,px:4,py:1.5,fontSize:"1rem",fontWeight:"bold",background:"library"===X?`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`:"transparent",borderColor:C.length>0?o.palette.primary.main:o.palette.text.secondary,color:"library"===X?"white":C.length>0?o.palette.primary.main:o.palette.text.secondary,"&:hover":{background:"library"===X?`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.secondary.dark} 100%)`:`rgba(${o.palette.primary.main}, 0.1)`,borderColor:o.palette.primary.main,color:"library"===X?"white":o.palette.primary.main}},children:C.length>0?`My Library (${C.length})`:"My Library (Empty)"})]})}),"audio"===X&&s.jsx(M,{maxWidth:"md",sx:{py:4},children:s.jsxs(u,{sx:{textAlign:"center",mb:4},children:[s.jsx(Fa,{sx:{fontSize:64,color:o.palette.primary.main,mb:2}}),s.jsx(h,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Upload Audio Files"}),s.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Add your own audio files to use as drinking sounds"}),s.jsx("input",{type:"file",accept:"audio/*",multiple:!0,onChange:mt,style:{display:"none"},id:"audio-files-input"}),s.jsx("label",{htmlFor:"audio-files-input",children:s.jsx(A,{component:"span",variant:"contained",size:"large",startIcon:s.jsx(wa,{}),sx:{borderRadius:3,px:4,py:2,fontSize:"1.1rem",fontWeight:"bold",background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,"&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.secondary.dark} 100%)`}},children:"Choose Audio Files"})})]})}),"library"===X&&s.jsxs(M,{maxWidth:"lg",sx:{py:3,height:"calc(80vh - 200px)",overflow:"auto"},children:[s.jsxs(u,{sx:{textAlign:"center",mb:4},children:[s.jsx(h,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Your Drinking Clip Library"}),s.jsx(h,{variant:"body1",color:"text.secondary",children:"Manage your collection of drinking clips and sounds"})]}),s.jsxs(u,{sx:{display:"flex",justifyContent:"center",gap:2,mb:4,flexWrap:"wrap"},children:[s.jsx(A,{variant:"outlined",startIcon:s.jsx(Ca,{}),onClick:()=>Q("youtube"),sx:{borderRadius:3,px:3},children:"Add More Clips"}),C.length>1&&s.jsx(A,{variant:"outlined",startIcon:s.jsx(Ra,{}),onClick:wt,sx:{borderRadius:3,px:3},children:"Random Selection"}),C.length>0&&s.jsx(A,{variant:"outlined",onClick:()=>{Ge.size===C.length?qe(new Set):qe(new Set(C.map((e=>e.id))))},sx:{borderRadius:3,px:3},children:Ge.size===C.length?"Deselect All":"Select All"}),Ge.size>0&&s.jsxs(A,{variant:"outlined",color:"error",startIcon:s.jsx(dn,{}),onClick:nt,sx:{borderRadius:3,px:3},children:["Delete Selected (",Ge.size,")"]}),C.length>0&&s.jsx(A,{variant:"outlined",color:"warning",startIcon:s.jsx(Mn,{}),onClick:Ct,sx:{borderRadius:3,px:3},children:"Clear All"})]}),0===C.length?s.jsxs(u,{sx:{textAlign:"center",py:8},children:[s.jsx(na,{sx:{fontSize:64,color:o.palette.text.secondary,mb:2}}),s.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No drinking clips yet"}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:4},children:"Add some clips to get started with your power hour"}),s.jsx(A,{variant:"contained",startIcon:s.jsx(wa,{}),onClick:()=>Q("youtube"),sx:{borderRadius:3,px:4,py:1.5,fontSize:"1rem",fontWeight:"bold",background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,"&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.secondary.dark} 100%)`}},children:"Add Your First Clip"})]}):s.jsxs(u,{children:[s.jsxs(u,{sx:{mb:3,p:3,bgcolor:"background.paper",borderRadius:2,border:`1px solid ${o.palette.divider}`},children:[s.jsxs(u,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,alignItems:{md:"center"},justifyContent:"space-between",mb:2},children:[s.jsxs(u,{sx:{display:"flex",gap:2,flex:1,maxWidth:{md:"400px"}},children:[s.jsx(T,{size:"small",placeholder:"Search clips...",value:Be,onChange:e=>He(e.target.value),InputProps:{startAdornment:s.jsx(In,{sx:{color:"text.secondary",mr:1}})},sx:{flex:1}}),s.jsxs(R,{size:"small",sx:{minWidth:120},children:[s.jsx(z,{children:"Sort by"}),s.jsxs(D,{value:Ve,label:"Sort by",onChange:e=>Ye(e.target.value),children:[s.jsx(L,{value:"recent",children:"Recent"}),s.jsx(L,{value:"name",children:"Name"}),s.jsx(L,{value:"type",children:"Type"}),s.jsx(L,{value:"duration",children:"Duration"})]})]})]}),s.jsx(u,{sx:{display:"flex",gap:1},children:s.jsxs(O,{value:We,exclusive:!0,onChange:(e,t)=>t&&Ue(t),size:"small",children:[s.jsx(_,{value:"compact","aria-label":"compact view",children:s.jsx(ea,{})}),s.jsx(_,{value:"list","aria-label":"list view",children:s.jsx(Wi,{})}),s.jsx(_,{value:"grid","aria-label":"grid view",children:s.jsx(Ni,{})})]})})]}),s.jsxs(u,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[s.jsxs(h,{variant:"body2",color:"text.secondary",children:[Ze.length," clips",Ge.size>0&&` (${Ge.size} selected)`]}),Ze.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(A,{size:"small",onClick:Ge.size===Ze.length?rt:tt,children:Ge.size===Ze.length?"Clear All":"Select All"}),Ge.size>0&&s.jsxs(A,{size:"small",color:"error",startIcon:s.jsx(dn,{}),onClick:()=>Ke(!0),children:["Delete Selected (",Ge.size,")"]})]})]})]}),"compact"===We?s.jsx(v,{sx:{bgcolor:"background.paper",borderRadius:2,border:`1px solid ${o.palette.divider}`},children:Ze.map(((e,t)=>s.jsxs(w.Fragment,{children:[s.jsxs(S,{sx:{py:1,"&:hover":{bgcolor:"action.hover"}},children:[s.jsx(F,{sx:{minWidth:40},children:s.jsx($,{checked:Ge.has(e.id),onChange:()=>et(e.id),size:"small"})}),s.jsx(F,{sx:{minWidth:40},children:"audio"===e.type?s.jsx(Pa,{sx:{color:o.palette.secondary.main}}):s.jsx(da,{sx:{color:"#FF0000"}})}),s.jsx(j,{primary:e.name,secondary:`${"youtube"===e.type?"YouTube":"Audio"}  ${e.duration||"?"}s`,primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}}),s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(d,{size:"small",onClick:()=>J===e.id?xt():bt(e),sx:{color:J===e.id?"primary.main":"text.secondary"},children:J===e.id?s.jsx(fn,{}):s.jsx(hn,{})}),s.jsx(d,{size:"small",onClick:()=>vt(e),sx:{color:"primary.main"},children:s.jsx(za,{})}),s.jsx(d,{size:"small",onClick:()=>yt(e.id),sx:{color:"error.main"},children:s.jsx(dn,{})})]})]}),t<Ze.length-1&&s.jsx(k,{})]},e.id)))}):"list"===We?s.jsx(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:Ze.map((e=>s.jsx(N,{sx:{borderRadius:2,border:`1px solid ${o.palette.divider}`,"&:hover":{boxShadow:2}},children:s.jsx(W,{sx:{p:2},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx($,{checked:Ge.has(e.id),onChange:()=>et(e.id)}),"audio"===e.type?s.jsx(Pa,{sx:{color:o.palette.secondary.main,fontSize:32}}):s.jsx(da,{sx:{color:"#FF0000",fontSize:32}}),s.jsxs(u,{sx:{flex:1},children:[s.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:e.name}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:["youtube"===e.type?"YouTube Clip":"Audio File","  ",e.duration||"?","s"]})]}),s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(d,{onClick:()=>J===e.id?xt():bt(e),sx:{color:J===e.id?"primary.main":"text.secondary"},children:J===e.id?s.jsx(fn,{}):s.jsx(hn,{})}),s.jsx(A,{variant:"contained",size:"small",onClick:()=>vt(e),sx:{minWidth:80},children:"Use"}),s.jsx(d,{onClick:()=>yt(e.id),sx:{color:"error.main"},children:s.jsx(dn,{})})]})]})})},e.id)))}):s.jsx(U,{container:!0,spacing:2,children:Ze.map((e=>s.jsx(U,{item:!0,xs:12,sm:6,lg:4,xl:3,children:s.jsx(N,{sx:{borderRadius:2,border:`1px solid ${o.palette.divider}`,height:"100%",display:"flex",flexDirection:"column","&:hover":{transform:"translateY(-2px)",boxShadow:3}},children:s.jsxs(W,{sx:{p:2,flex:1},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"flex-start",gap:1,mb:1},children:[s.jsx($,{checked:Ge.has(e.id),onChange:()=>et(e.id),size:"small"}),"audio"===e.type?s.jsx(Pa,{sx:{color:o.palette.secondary.main,fontSize:24}}):s.jsx(da,{sx:{color:"#FF0000",fontSize:24}})]}),s.jsx(h,{variant:"body2",fontWeight:"bold",sx:{mb:1,lineHeight:1.3},children:e.name}),s.jsxs(h,{variant:"caption",color:"text.secondary",sx:{mb:2,display:"block"},children:["youtube"===e.type?"YouTube":"Audio","  ",e.duration||"?","s"]}),s.jsxs(u,{sx:{display:"flex",gap:.5,mt:"auto"},children:[s.jsx(d,{size:"small",onClick:()=>J===e.id?xt():bt(e),sx:{color:J===e.id?"primary.main":"text.secondary"},children:J===e.id?s.jsx(fn,{}):s.jsx(hn,{})}),s.jsx(d,{size:"small",onClick:()=>yt(e.id),sx:{color:"error.main"},children:s.jsx(dn,{})})]}),s.jsx(A,{fullWidth:!0,variant:"contained",size:"small",onClick:()=>vt(e),sx:{mt:1,py:.5},children:"Use"})]})})},e.id)))})]})]}),"youtube"===X&&s.jsxs(u,{sx:{height:"calc(80vh - 200px)",overflow:"hidden"},children:["search"===l&&s.jsx(M,{maxWidth:"lg",sx:{py:3,height:"100%",overflow:"auto"},children:s.jsxs(u,{sx:{mb:4},children:[s.jsx(h,{variant:"h4",fontWeight:"bold",gutterBottom:!0,textAlign:"center",children:"Find the Perfect Drinking Clip"}),s.jsx(h,{variant:"body1",color:"text.secondary",textAlign:"center",sx:{mb:4},children:"Search YouTube for videos or browse by category"}),s.jsxs(c,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, rgba(255,255,255,0.05) 100%)`,border:`1px solid ${o.palette.divider}`,mb:4},children:[s.jsxs(u,{sx:{display:"flex",gap:2,mb:3},children:[s.jsx(T,{fullWidth:!0,label:"Search YouTube",value:Z,onChange:e=>ee(e.target.value),placeholder:"Search for any YouTube video or sound...",onKeyPress:e=>"Enter"===e.key&&ot(),sx:{"& .MuiOutlinedInput-root":{borderRadius:3,fontSize:"1.1rem","&:hover fieldset":{borderColor:o.palette.primary.main}}},InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(In,{sx:{color:o.palette.primary.main}})})}}),s.jsx(A,{variant:"contained",onClick:()=>ot(),disabled:!Z.trim()||ne,sx:{minWidth:140,borderRadius:3,px:3,fontSize:"1rem",fontWeight:"bold",background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,"&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.secondary.dark} 100%)`}},startIcon:ne?s.jsx(H,{size:20,color:"inherit"}):s.jsx(In,{}),children:ne?"Searching...":"Search"})]}),s.jsx(u,{sx:{display:"flex",justifyContent:"center",mb:2},children:s.jsx(A,{variant:"text",startIcon:s.jsx(oi,{}),onClick:()=>Ne(!$e),sx:{borderRadius:2,color:o.palette.text.secondary,"&:hover":{color:o.palette.primary.main}},children:"Or add by YouTube URL"})}),s.jsx(V,{in:$e,children:s.jsxs(u,{sx:{display:"flex",gap:2,mt:2},children:[s.jsx(T,{fullWidth:!0,label:"YouTube URL",value:_e,onChange:e=>Fe(e.target.value),placeholder:"https://www.youtube.com/watch?v=...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(da,{sx:{color:"#FF0000"}})})}}),s.jsx(A,{variant:"outlined",onClick:gt,disabled:!_e,sx:{minWidth:100,borderRadius:2},children:"Add"})]})})]}),te.length>0&&s.jsxs(u,{children:[s.jsxs(h,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:["Search Results (",te.length,")"]}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Click on any video to preview and configure your drinking clip"}),s.jsx(U,{container:!0,spacing:2,children:te.map((e=>s.jsx(U,{item:!0,xs:12,sm:6,lg:4,xl:3,children:s.jsxs(N,{sx:{cursor:"pointer",borderRadius:3,border:"2px solid transparent",background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, rgba(255,255,255,0.02) 100%)`,transition:"all 0.3s ease","&:hover":{border:`2px solid ${o.palette.primary.main}`,transform:"translateY(-4px)",boxShadow:`0 8px 25px ${o.palette.primary.main}40`}},onClick:()=>st(e),children:[s.jsx(Y,{component:"img",height:"140",image:e.thumbnail,alt:e.title,sx:{objectFit:"cover",borderRadius:"12px 12px 0 0"}}),s.jsxs(W,{sx:{p:2},children:[s.jsx(G,{title:e.title,children:s.jsx(h,{variant:"body2",fontWeight:"bold",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",fontSize:"0.85rem",lineHeight:1.3,mb:1,minHeight:"2.6em"},children:e.title})}),s.jsx(h,{variant:"caption",color:"text.secondary",display:"block",sx:{mb:1},children:e.channelTitle}),e.duration&&s.jsx(q,{label:e.duration,size:"small",sx:{height:20,fontSize:"0.7rem",background:`linear-gradient(135deg, ${o.palette.primary.main}20 0%, ${o.palette.secondary.main}20 100%)`,color:o.palette.primary.main,fontWeight:"bold"}})]})]})},e.id)))})]}),Z&&0===te.length&&!ne&&s.jsxs(u,{sx:{textAlign:"center",py:6},children:[s.jsx(In,{sx:{fontSize:64,color:o.palette.text.secondary,mb:2}}),s.jsxs(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:['No results found for "',Z,'"']}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"Try different search terms or keywords"})]})]})}),"preview"===l&&ie&&s.jsxs(M,{maxWidth:"lg",sx:{py:3,height:"100%",overflow:"auto"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:4},children:[s.jsx(d,{onClick:lt,sx:{mr:2,background:`linear-gradient(135deg, ${o.palette.primary.main}20 0%, ${o.palette.secondary.main}20 100%)`,"&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.main}40 0%, ${o.palette.secondary.main}40 100%)`}},children:s.jsx(Ca,{})}),s.jsxs(u,{children:[s.jsx(h,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Preview & Configure"}),s.jsx(h,{variant:"body1",color:"text.secondary",children:"Set the perfect start time and duration for your drinking clip"})]})]}),s.jsx(c,{sx:{p:4,borderRadius:3,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, rgba(255,255,255,0.02) 100%)`,border:`1px solid ${o.palette.divider}`,mb:4},children:s.jsxs(u,{sx:{display:"flex",gap:4,flexDirection:{xs:"column",lg:"row"}},children:[s.jsx(u,{sx:{flex:{xs:"1",lg:"2"}},children:s.jsxs(u,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",borderRadius:3,boxShadow:`0 8px 32px ${o.palette.primary.main}20`,background:"#000",border:"2px solid red",minHeight:"300px"},children:[s.jsxs(u,{sx:{position:"absolute",top:10,left:10,background:"rgba(0,0,0,0.9)",color:"white",px:2,py:1,borderRadius:1,fontSize:"0.75rem",zIndex:1e3},children:[s.jsxs("div",{children:["Video ID: ",ie.id]}),s.jsxs("div",{children:["Duration: ",Ae,"s"]}),s.jsxs("div",{children:["Player Ready: ",Qe.current?"Yes":"No"]}),s.jsxs("div",{children:["Fallback: ",Le?"Yes":"No"]})]}),s.jsx(u,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(45deg, #ff0000, #00ff00)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"2rem",fontWeight:"bold",zIndex:0},children:"VIDEO CONTAINER TEST"}),Le?s.jsx("iframe",{src:`https://www.youtube.com/embed/${ie.id}?controls=1&modestbranding=1&rel=0&fs=1`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"12px",border:"none"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:ie.title}):s.jsx(Uo,{videoId:ie.id,opts:{width:"100%",height:"100%",playerVars:{autoplay:0,controls:1,modestbranding:1,rel:0,enablejsapi:1,origin:window.location.origin,fs:1,cc_load_policy:0,iv_load_policy:3,start:0}},onReady:ht,onStateChange:pt,onError:e=>{De(`YouTube player error: ${e.data}`),Oe(!0)},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"12px",zIndex:1,backgroundColor:"#000"}},ie.id),ze&&s.jsxs(u,{sx:{position:"absolute",top:50,left:10,right:10,background:"rgba(255,0,0,0.8)",color:"white",px:2,py:1,borderRadius:1,fontSize:"0.75rem",zIndex:10},children:[ze," - Using fallback player"]}),s.jsxs(u,{sx:{position:"absolute",bottom:10,right:10,zIndex:10,display:"flex",gap:1},children:[s.jsx(A,{variant:"contained",size:"small",onClick:()=>Oe(!Le),sx:{background:Le?"rgba(0,255,0,0.8)":"rgba(0,0,0,0.8)",color:"white","&:hover":{background:Le?"rgba(0,255,0,1)":"rgba(0,0,0,1)"}},children:Le?"Use React Player":"Use Iframe Player"}),s.jsx(A,{variant:"contained",size:"small",onClick:()=>{window.open(`https://www.youtube.com/watch?v=${ie.id}`,"_blank")},sx:{background:"rgba(255,0,0,0.8)",color:"white","&:hover":{background:"rgba(255,0,0,1)"}},children:"Open in YouTube"})]}),Ae>0&&s.jsxs(u,{sx:{position:"absolute",bottom:60,left:20,right:20,background:"rgba(0, 0, 0, 0.9)",borderRadius:3,p:3,color:"white",backdropFilter:"blur(10px)"},children:[s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[s.jsxs(h,{variant:"body2",fontWeight:"bold",children:["Current: ",at(ke)]}),s.jsxs(h,{variant:"body2",fontWeight:"bold",sx:{color:o.palette.primary.main,background:"rgba(255,255,255,0.1)",px:2,py:.5,borderRadius:2},children:["Clip: ",at(se),"  ",at(se+ce)]}),s.jsxs(h,{variant:"body2",fontWeight:"bold",children:["Total: ",at(Ae)]})]}),s.jsxs(u,{sx:{position:"relative",height:12,background:"rgba(255,255,255,0.2)",borderRadius:2,cursor:"pointer"},onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),r=(e.clientX-t.left)/t.width*Ae;Qe.current&&Qe.current.seekTo(r,!0)},children:[s.jsx(u,{sx:{position:"absolute",left:0,width:ke/Ae*100+"%",height:"100%",background:"rgba(255,255,255,0.4)",borderRadius:2}}),s.jsx(u,{sx:{position:"absolute",left:se/Ae*100+"%",width:ce/Ae*100+"%",height:"100%",background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,borderRadius:2,opacity:.9,border:"1px solid rgba(255,255,255,0.3)"}}),s.jsx(u,{sx:{position:"absolute",left:ke/Ae*100+"%",width:3,height:"100%",background:"white",borderRadius:2,boxShadow:"0 0 8px rgba(255,255,255,0.8)",transform:"translateX(-50%)"}}),s.jsx(u,{sx:{position:"absolute",left:se/Ae*100+"%",width:2,height:"150%",top:"-25%",background:o.palette.primary.main,borderRadius:1,transform:"translateX(-50%)"}}),s.jsx(u,{sx:{position:"absolute",left:(se+ce)/Ae*100+"%",width:2,height:"150%",top:"-25%",background:o.palette.secondary.main,borderRadius:1,transform:"translateX(-50%)"}})]}),s.jsxs(u,{sx:{display:"flex",justifyContent:"center",gap:1,mt:2},children:[s.jsx(d,{size:"small",onClick:()=>{Qe.current&&Qe.current.seekTo(Math.max(0,ke-10),!0)},sx:{color:"white",background:"rgba(255,255,255,0.1)"},children:s.jsx(h,{variant:"caption",sx:{fontSize:"0.7rem"},children:"-10s"})}),s.jsx(d,{size:"small",onClick:()=>{Qe.current&&Qe.current.seekTo(se,!0)},sx:{color:o.palette.primary.main,background:"rgba(255,255,255,0.1)"},children:s.jsx(h,{variant:"caption",sx:{fontSize:"0.7rem"},children:"Start"})}),s.jsx(d,{size:"small",onClick:()=>{Qe.current&&Qe.current.seekTo(se+ce,!0)},sx:{color:o.palette.secondary.main,background:"rgba(255,255,255,0.1)"},children:s.jsx(h,{variant:"caption",sx:{fontSize:"0.7rem"},children:"End"})}),s.jsx(d,{size:"small",onClick:()=>{Qe.current&&Qe.current.seekTo(Math.min(Ae,ke+10),!0)},sx:{color:"white",background:"rgba(255,255,255,0.1)"},children:s.jsx(h,{variant:"caption",sx:{fontSize:"0.7rem"},children:"+10s"})})]})]})]})}),s.jsx(u,{sx:{flex:{xs:"1",lg:"1"}},children:s.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s.jsxs(u,{children:[s.jsx(h,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:ie.title}),s.jsx(h,{variant:"body2",color:"text.secondary",display:"block",sx:{mb:2},children:ie.channelTitle}),ie.duration&&s.jsx(q,{label:ie.duration,size:"small",sx:{height:24,fontSize:"0.75rem",background:`linear-gradient(135deg, ${o.palette.primary.main}20 0%, ${o.palette.secondary.main}20 100%)`,color:o.palette.primary.main,fontWeight:"bold"}})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle2",fontWeight:"bold",sx:{mb:2},children:"Start Time"}),s.jsx(T,{fullWidth:!0,value:xe,onChange:e=>ct(e.target.value),placeholder:"0:00 or 30",error:!!je.startTime,helperText:je.startTime||"Format: MM:SS or seconds (e.g., 1:30 or 90)",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, rgba(255,255,255,0.02) 100%)`,"&:hover fieldset":{borderColor:o.palette.primary.main},"&.Mui-focused fieldset":{borderColor:o.palette.primary.main}}},InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(Ri,{sx:{color:o.palette.primary.main}})})}})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle2",fontWeight:"bold",sx:{mb:2},children:"Clip Duration"}),s.jsx(T,{fullWidth:!0,value:we,onChange:e=>ut(e.target.value),placeholder:"5",error:!!je.duration,helperText:je.duration||"Format: seconds or MM:SS (e.g., 5 or 0:05)",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, rgba(255,255,255,0.02) 100%)`,"&:hover fieldset":{borderColor:o.palette.primary.main},"&.Mui-focused fieldset":{borderColor:o.palette.primary.main}}},InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(Ri,{sx:{color:o.palette.secondary.main}})})}})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle2",fontWeight:"bold",sx:{mb:2},children:"Clip Preview & Navigation"}),s.jsx(A,{variant:"contained",onClick:dt,startIcon:Ie?s.jsx(fn,{}):s.jsx(Si,{}),fullWidth:!0,sx:{mb:2,py:1.5,borderRadius:3,fontSize:"1rem",fontWeight:"bold",background:Ie?`linear-gradient(135deg, ${o.palette.error.main} 0%, ${o.palette.error.dark} 100%)`:`linear-gradient(135deg, ${o.palette.success.main} 0%, ${o.palette.success.dark} 100%)`,"&:hover":{background:Ie?`linear-gradient(135deg, ${o.palette.error.dark} 0%, ${o.palette.error.main} 100%)`:`linear-gradient(135deg, ${o.palette.success.dark} 0%, ${o.palette.success.main} 100%)`}},children:Ie?"Stop Preview":"Preview Clip"}),s.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:1,mb:2},children:[s.jsx(A,{variant:"outlined",size:"small",onClick:()=>{Qe.current&&Qe.current.seekTo(se,!0)},startIcon:s.jsx(Pn,{sx:{transform:"rotate(180deg)"}}),sx:{borderRadius:2,borderColor:o.palette.primary.main,color:o.palette.primary.main,"&:hover":{background:`${o.palette.primary.main}10`,borderColor:o.palette.primary.main}},children:"Go to Start"}),s.jsx(A,{variant:"outlined",size:"small",onClick:()=>{Qe.current&&Qe.current.seekTo(se+ce,!0)},endIcon:s.jsx(Pn,{}),sx:{borderRadius:2,borderColor:o.palette.secondary.main,color:o.palette.secondary.main,"&:hover":{background:`${o.palette.secondary.main}10`,borderColor:o.palette.secondary.main}},children:"Go to End"})]}),s.jsxs(u,{sx:{mb:2},children:[s.jsx(h,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"Playback Speed"}),s.jsx(u,{sx:{display:"flex",gap:1},children:[.5,.75,1,1.25,1.5,2].map((e=>s.jsxs(A,{variant:"outlined",size:"small",onClick:()=>{Qe.current&&Qe.current.setPlaybackRate(e)},sx:{minWidth:"auto",px:1,py:.5,fontSize:"0.75rem",borderRadius:1,borderColor:o.palette.divider,color:o.palette.text.secondary,"&:hover":{background:`${o.palette.primary.main}10`,borderColor:o.palette.primary.main,color:o.palette.primary.main}},children:[e,"x"]},e)))})]}),Ae>0&&s.jsxs(u,{sx:{background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, rgba(255,255,255,0.02) 100%)`,border:`1px solid ${o.palette.divider}`,borderRadius:2,p:2},children:[s.jsxs(h,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:[s.jsx("strong",{children:"Video Length:"})," ",at(Ae)]}),s.jsxs(h,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:[s.jsx("strong",{children:"Clip Range:"})," ",at(se),"  ",at(se+ce)]}),s.jsxs(h,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:[s.jsx("strong",{children:"Current Time:"})," ",at(ke)]})]})]}),s.jsxs(u,{children:[s.jsxs(h,{variant:"subtitle2",fontWeight:"bold",sx:{mb:2},children:["Volume: ",me?"Muted":`${pe}%`]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(d,{onClick:()=>{ge(!me),Qe.current&&Qe.current.setVolume(me?pe:0)},sx:{background:`linear-gradient(135deg, ${o.palette.primary.main}20 0%, ${o.palette.secondary.main}20 100%)`,"&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.main}40 0%, ${o.palette.secondary.main}40 100%)`}},children:me?s.jsx(yn,{}):s.jsx(gn,{})}),s.jsx(p,{value:pe,onChange:(e,t)=>{fe(t),Qe.current&&!me&&Qe.current.setVolume(t)},min:0,max:100,sx:{flex:1,"& .MuiSlider-thumb":{background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,boxShadow:`0 2px 8px ${o.palette.primary.main}40`},"& .MuiSlider-track":{background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`},"& .MuiSlider-rail":{background:`${o.palette.divider}`}}})]})]}),s.jsx(u,{sx:{display:"flex",gap:2,mt:4},children:s.jsx(A,{variant:"contained",size:"large",onClick:ft,startIcon:s.jsx(Oa,{}),sx:{flex:1,borderRadius:3,py:1.5,fontSize:"1rem",fontWeight:"bold",background:`linear-gradient(135deg, ${o.palette.primary.main} 0%, ${o.palette.secondary.main} 100%)`,"&:hover":{background:`linear-gradient(135deg, ${o.palette.primary.dark} 0%, ${o.palette.secondary.dark} 100%)`}},children:"Add to Library"})})]})})]})})]})]})]}),s.jsxs(g,{open:St,onClose:()=>jt(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:`linear-gradient(135deg, ${o.palette.background.paper} 0%, ${o.palette.background.default} 100%)`,border:`1px solid ${o.palette.divider}`}},children:[s.jsx(y,{sx:{background:`linear-gradient(135deg, ${o.palette.warning.main} 0%, ${o.palette.error.main} 100%)`,color:"white",borderRadius:"12px 12px 0 0",mb:0},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(Mn,{sx:{fontSize:28}}),s.jsx(h,{variant:"h6",fontWeight:"bold",children:"Clear All Drinking Clips"})]})}),s.jsxs(b,{sx:{p:3},children:[s.jsxs(x,{severity:"warning",sx:{mb:3},children:[s.jsx(h,{variant:"body1",fontWeight:"bold",gutterBottom:!0,children:"This action cannot be undone!"}),s.jsxs(h,{variant:"body2",children:["You are about to permanently delete all ",C.length," drinking clips from your library."]})]}),s.jsx(h,{variant:"body1",color:"text.secondary",children:"Are you sure you want to clear all drinking clips? This will remove:"}),s.jsxs(u,{sx:{mt:2,pl:2},children:[s.jsxs(h,{variant:"body2",color:"text.secondary",children:[" All YouTube clips (",C.filter((e=>"youtube"===e.type)).length," clips)"]}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:[" All audio files (",C.filter((e=>"audio"===e.type)).length," files)"]})]})]}),s.jsxs(P,{sx:{p:3,gap:2},children:[s.jsx(A,{onClick:()=>jt(!1),variant:"outlined",sx:{borderRadius:2,px:3,color:o.palette.text.primary,borderColor:o.palette.divider,"&:hover":{borderColor:o.palette.primary.main,backgroundColor:`${o.palette.primary.main}10`}},children:"Cancel"}),s.jsxs(A,{onClick:kt,variant:"contained",color:"error",sx:{borderRadius:2,px:3,fontWeight:"bold",background:`linear-gradient(135deg, ${o.palette.error.main} 0%, ${o.palette.error.dark} 100%)`,"&:hover":{background:`linear-gradient(135deg, ${o.palette.error.dark} 0%, ${o.palette.error.main} 100%)`}},children:["Clear All (",C.length," clips)"]})]})]}),s.jsxs(g,{open:Je,onClose:()=>Ke(!1),maxWidth:"sm",fullWidth:!0,children:[s.jsx(y,{children:s.jsx(h,{variant:"h6",fontWeight:"bold",children:"Delete Selected Clips"})}),s.jsxs(b,{children:[s.jsxs(h,{variant:"body1",sx:{mb:2},children:["Are you sure you want to delete ",Ge.size," selected clip",1!==Ge.size?"s":"","?"]}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"This action cannot be undone."})]}),s.jsxs(P,{sx:{p:3,gap:2},children:[s.jsx(A,{onClick:()=>Ke(!1),variant:"outlined",sx:{borderRadius:2,px:3},children:"Cancel"}),s.jsxs(A,{onClick:nt,variant:"contained",color:"error",sx:{borderRadius:2,px:3,fontWeight:"bold"},children:["Delete ",Ge.size," Clip",1!==Ge.size?"s":""]})]})]})]})},Ho={apiKey:"AIzaSyDy3uVt3zoKmCwtvlfSsi6XnCT9LCoykag",authDomain:"phat5-3b9c6.firebaseapp.com",projectId:"phat5-3b9c6",storageBucket:"phat5-3b9c6.firebasestorage.app",messagingSenderId:"734204724608",appId:"1:734204724608:web:e42e6bca97fa77db8b6d65",measurementId:"G-N2PVV5TZC2"},Vo=()=>!!(Ho.apiKey&&Ho.authDomain&&Ho.projectId&&Ho.storageBucket&&Ho.messagingSenderId&&Ho.appId);let Yo=null,Go=null,qo=null;if(Vo())try{if(Yo=Ue(Ho),Go=Be(Yo),qo=He(Yo),"undefined"!=typeof window&&("file:"===window.location.protocol||"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.protocol.startsWith("app:")||window.location.protocol.startsWith("electron:")||void 0!==window.require))try{qo.settings.appVerificationDisabledForTesting=!0,qo.useDeviceLanguage()}catch(vz){}}catch(vz){}const Jo={USER_SESSION:"phat5_user_session",USER_PROFILE:"phat5_user_profile",USER_PREFERENCES:"phat5_user_preferences",AUTH_STATE:"phat5_auth_state",LAST_SYNC:"phat5_last_sync",PENDING_SYNC:"phat5_pending_sync"},Ko={theme:{mode:"dark",colorTheme:"purple"},audio:{volume:.8,defaultPlaybackSpeed:1,enableDrinkingClips:!0},ui:{showTooltips:!0,enableAnimations:!0,compactMode:!1},privacy:{shareAnalytics:!1,publicProfile:!1},notifications:{enableToasts:!0,playlistUpdates:!0},authentication:{rememberMe:!0,autoSignIn:!0,requireAuthForCommunity:!1}},Xo=(e,t)=>{const r=Date.now(),n=`${e}:${t}:${r}`;let a=0;for(let i=0;i<n.length;i++)a=(a<<5)-a+n.charCodeAt(i),a&=a;return`${r}_${Math.abs(a).toString(36)}`},Qo=(e,t,r,n)=>!!e&&!(new Date>=e),Zo=e=>{const{sessionId:t,sessionExpiry:r,sessionToken:n,userId:a,lastActivity:i}=e;return t&&r&&a?Qo(r)?n&&!((e,t,r)=>{try{const[n,a]=e.split("_"),i=parseInt(n,10),o=60*es.MAX_DURATION_HOURS*60*1e3;if(Date.now()-i>o)return!1;const s=Xo(t,r),[,l]=s.split("_");return a===l}catch(vz){return!1}})(n,t,a)?{isValid:!1,reason:"invalid-session-token"}:i&&(Date.now()-i.getTime())/36e5>es.MAX_DURATION_HOURS?{isValid:!1,reason:"excessive-inactivity"}:{isValid:!0}:{isValid:!1,reason:"session-expired"}:{isValid:!1,reason:"missing-session-data"}},es={DEFAULT_DURATION_HOURS:720,MIN_DURATION_HOURS:24,MAX_DURATION_HOURS:2160,ACTIVITY_EXTENSION_HOURS:168,REFRESH_THRESHOLD_HOURS:168},ts=(e,t,r)=>({...e,profile:t,preferences:r,lastSyncAt:new Date,isOnline:navigator.onLine}),rs=(e,t)=>({id:e.uid,username:e.displayName||`User${Math.floor(1e4*Math.random())}`,displayName:e.displayName||void 0,email:e.email||void 0,photoURL:e.photoURL||void 0,isAnonymous:e.isAnonymous,authMethod:t,stats:{playlistsCreated:0,playlistsShared:0,totalLogins:1,lastActiveAt:new Date}}),ns=(e,t,r,n=!0)=>({code:e,message:t,details:r,timestamp:new Date,recoverable:n}),as=e=>{const t={"auth/user-not-found":{message:"No account found with this email address.",recoverable:!0},"auth/wrong-password":{message:"Incorrect password. Please try again.",recoverable:!0},"auth/email-already-in-use":{message:"An account with this email already exists.",recoverable:!0},"auth/weak-password":{message:"Password should be at least 6 characters long.",recoverable:!0},"auth/invalid-email":{message:"Please enter a valid email address.",recoverable:!0},"auth/network-request-failed":{message:"Network error. Please check your connection and try again.",recoverable:!0},"auth/too-many-requests":{message:"Too many failed attempts. Please try again later.",recoverable:!1},"auth/popup-blocked":{message:"Popup was blocked. Please allow popups and try again.",recoverable:!0},"auth/popup-closed-by-user":{message:"Sign-in was cancelled.",recoverable:!0}}[e.code]||{message:e.message||"An unexpected error occurred.",recoverable:!0};return ns(e.code||"unknown-error",t.message,e,t.recoverable)},is=(e,t)=>{try{const r=JSON.stringify(t);return localStorage.setItem(e,r),!0}catch(vz){return!1}},os=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(vz){return null}},ss=()=>{Object.values(Jo).forEach((e=>{(e=>{try{return localStorage.removeItem(e),!0}catch(vz){return!1}})(e)}))},ls=e=>e?{theme:{...Ko.theme,...e.theme},audio:{...Ko.audio,...e.audio},ui:{...Ko.ui,...e.ui},privacy:{...Ko.privacy,...e.privacy},notifications:{...Ko.notifications,...e.notifications}}:Ko,cs=e=>!!(e&&(!0===e.profile?.isAdmin||ms(e.uid)||e.email&&gs(e.email))),us=(e,t)=>!(!cs(e)||!e?.profile?.adminPermissions)&&!0===e.profile.adminPermissions[t],ds=e=>us(e,"canManageCommunity"),hs=[],ps=["your.email@example.com"],ms=e=>hs.includes(e),gs=e=>ps.includes(e),ys=(e,t,r)=>({type:e,user:t,data:r,timestamp:new Date}),bs=()=>navigator.onLine,xs=class e{constructor(){r(this,"currentUser",null),r(this,"authStateListeners",[]),qo&&Ve(qo,(e=>{this.currentUser=e,this.notifyAuthStateListeners(e)}))}static getInstance(){return e.instance||(e.instance=new e),e.instance}isFirebaseAvailable(){return Vo()&&!!qo&&!!Go}isElectronEnvironment(){return"undefined"!=typeof window&&("file:"===window.location.protocol||window.location.protocol.startsWith("app:")||window.location.protocol.startsWith("electron:")||void 0!==window.require)}getUserType(){return"undefined"!=typeof localStorage&&localStorage.getItem("phat5_user_type")||"unknown"}isElectronAnonymousUser(){const e=this.getUserType();return"electron_anonymous"===e||"anonymous_fallback"===e}async signInWithGoogle(){if(!this.isFirebaseAvailable())return null;if("undefined"!=typeof window&&("file:"===window.location.protocol||window.location.protocol.startsWith("app:")||window.location.protocol.startsWith("electron:")||void 0!==window.require))try{const e=await this.signInAnonymously();if(e)return"undefined"!=typeof localStorage&&(localStorage.setItem("phat5_electron_user","true"),localStorage.setItem("phat5_user_type","electron_anonymous")),e}catch(e){}try{const e=new Ye;e.setCustomParameters({prompt:"select_account"});const t=await Ge(qo,e);return await this.createOrUpdateUserProfile(t.user,!1),t.user}catch(vz){if("auth/unauthorized-domain"===vz.code){try{const e=await this.signInAnonymously();if(e)return"undefined"!=typeof localStorage&&localStorage.setItem("phat5_user_type","anonymous_fallback"),e}catch(e){}throw new Error("Authentication domain not authorized. The app is running with limited authentication. Add localhost and 127.0.0.1 to Firebase Console for full functionality.")}throw vz}}async signInAnonymously(){if(!this.isFirebaseAvailable())return null;try{const e=await qe(qo);return await this.createOrUpdateUserProfile(e.user,!0),e.user}catch(vz){throw vz}}async createUserWithEmailAndPassword(e,t,r){if(!this.isFirebaseAvailable())return null;try{const n=await Je(qo,e,t);return r&&await Ke(n.user,{displayName:r}),await this.createOrUpdateUserProfile(n.user,!1),await this.sendEmailVerification(),n.user}catch(vz){throw vz}}async signInWithEmailAndPassword(e,t){if(!this.isFirebaseAvailable())return null;try{const r=await Xe(qo,e,t);return await this.createOrUpdateUserProfile(r.user,!1),r.user}catch(vz){throw vz}}async sendPasswordResetEmail(e){if(this.isFirebaseAvailable())try{await Qe(qo,e)}catch(vz){throw vz}}async sendEmailVerification(){if(this.isFirebaseAvailable()&&this.currentUser)try{await Ze(this.currentUser)}catch(vz){throw vz}}async updatePassword(e,t){if(this.isFirebaseAvailable()&&this.currentUser)try{const r=et.credential(this.currentUser.email,e);await tt(this.currentUser,r),await rt(this.currentUser,t)}catch(vz){throw vz}}async linkAnonymousToEmail(e,t){if(!this.isFirebaseAvailable()||!this.currentUser)return null;if(!this.currentUser.isAnonymous)return null;try{const r=et.credential(e,t),n=await nt(this.currentUser,r);return await this.createOrUpdateUserProfile(n.user,!1),await this.sendEmailVerification(),n.user}catch(vz){throw vz}}canLinkAccount(){return this.currentUser?.isAnonymous||!1}async signOut(){if(this.isFirebaseAvailable())try{await at(qo)}catch(vz){throw vz}}getCurrentUser(){return this.currentUser}getCurrentUserId(){return this.currentUser?.uid||null}isAuthenticated(){return!!this.currentUser}isAnonymous(){return this.currentUser?.isAnonymous||!1}async getUserProfile(){if(!this.isFirebaseAvailable()||!this.currentUser)return null;try{const e=it(Go,"users",this.currentUser.uid),t=await ot(e);return t.exists()?t.data():null}catch(vz){return null}}async createOrUpdateUserProfile(e,t){var r,n;if(this.isFirebaseAvailable())try{const a=it(Go,"users",e.uid),i=await ot(a),o=st();if(i.exists())await lt(a,{lastLoginAt:o},{merge:!0});else{const i={id:e.uid,username:e.displayName||`User${Math.floor(1e4*Math.random())}`,email:e.email||void 0,createdAt:o,isAnonymous:t,lastLoginAt:o,...(r=e.uid,n=e.email||void 0,ms(r)||n&&gs(n)?{isAdmin:!0,adminPermissions:{canManageCommunity:!0,canManageUsers:!0,canModerateContent:!0,canAccessAnalytics:!0}}:{})};await lt(a,i)}}catch(vz){}}async updateUserProfile(e){if(!this.isFirebaseAvailable()||!Go)return!1;const t=this.getCurrentUser();if(!t)return!1;try{const r=it(Go,"users",t.uid),n={...e,updatedAt:st()};return await lt(r,n,{merge:!0}),!0}catch(vz){return!1}}async getUserPreferences(){if(!this.isFirebaseAvailable()||!Go)return null;const e=this.getCurrentUser();if(!e)return null;try{const t=it(Go,"user_preferences",e.uid),r=await ot(t);return r.exists()?r.data():null}catch(vz){return null}}async updateUserPreferences(e){if(!this.isFirebaseAvailable()||!Go)return!1;const t=this.getCurrentUser();if(!t)return!1;try{const r=it(Go,"user_preferences",t.uid),n={...e,updatedAt:st()};return await lt(r,n,{merge:!0}),!0}catch(vz){return!1}}addAuthStateListener(e){this.authStateListeners.push(e)}removeAuthStateListener(e){const t=this.authStateListeners.indexOf(e);t>-1&&this.authStateListeners.splice(t,1)}notifyAuthStateListeners(e){this.authStateListeners.forEach((t=>{try{t(e)}catch(vz){}}))}async autoSignIn(){return this.isFirebaseAvailable()&&this.currentUser?this.currentUser:null}onAuthStateChanged(e){return this.isFirebaseAvailable()?(this.addAuthStateListener(e),()=>{this.removeAuthStateListener(e)}):()=>{}}getAuthState(){return{user:this.currentUser,isAuthenticated:!!this.currentUser}}isSessionValid(){return!!this.currentUser}};r(xs,"instance");const vs=xs.getInstance(),ws="shared_playlists",Ss="playlist_ratings",js="playlist_downloads",Cs=class e{constructor(){}static getInstance(){return e.instance||(e.instance=new e),e.instance}isAvailable(){return Vo()&&!!Go}async sharePlaylist(e){if(!this.isAvailable())return null;const t=vs.getCurrentUser();if(!t)return null;try{if(e.originalPlaylistId){const t=await this.getSharedVersionOfPlaylist(e.originalPlaylistId);if(t){const r={name:e.name,description:e.description,tags:e.tags,isPublic:e.isPublic,creator:e.creator,clips:e.clips,updatedAt:st()};if(await this.updatePlaylist(t.id,r))return t.id;throw new Error("Failed to update existing shared playlist")}}const r={...e,creatorId:t.uid,createdAt:st(),updatedAt:st()};return(await ct(ut(Go,ws),r)).id}catch(vz){throw vz}}async getPlaylistByCode(e){if(!this.isAvailable())return null;try{const t=dt(ut(Go,ws)),r=(await ht(t),dt(ut(Go,ws),pt("shareCode","==",e.toUpperCase()),pt("isPublic","==",!0))),n=await ht(r);if(n.empty){const t=dt(ut(Go,ws),pt("shareCode","==",e.toUpperCase())),r=await ht(t);if(!r.empty){const e=r.docs[0],t=e.data();return{...t,id:e.id,firebaseId:e.id,originalId:t.id}}return null}const a=n.docs[0],i=a.data();return{...i,id:a.id,firebaseId:a.id,originalId:i.id}}catch(vz){return null}}async getPlaylistsByCategory(e="new",t=20){if(!this.isAvailable())return[];try{let r;switch(e){case"featured":case"highly-rated":case"trending":r=dt(ut(Go,ws),pt("isPublic","==",!0),mt(t));break;default:r=dt(ut(Go,ws),pt("isPublic","==",!0),ft("createdAt","desc"),mt(t))}const n=await ht(r);return n.docs.map((e=>{const t=e.data();return{...t,id:e.id,firebaseId:e.id,originalPlaylistId:t.originalPlaylistId||t.id}}))}catch(vz){return[]}}async recordDownload(e){if(!this.isAvailable())return!1;const t=vs.getCurrentUser();if(!t)return!1;try{const r=dt(ut(Go,js),pt("playlistId","==",e),pt("userId","==",t.uid));if(!(await ht(r)).empty)return!0;await ct(ut(Go,js),{playlistId:e,userId:t.uid,downloadedAt:st()});const n=it(Go,ws,e);return await gt(n,{downloadCount:yt(1)}),!0}catch(vz){return!1}}async ratePlaylist(e,t,r){if(!this.isAvailable())return!1;const n=vs.getCurrentUser();if(!n)return!1;if(t<1||t>5)return!1;try{const a=dt(ut(Go,Ss),pt("playlistId","==",e),pt("userId","==",n.uid)),i=await ht(a);for(const e of i.docs)await bt(e.ref);return await ct(ut(Go,Ss),{playlistId:e,userId:n.uid,rating:t,review:r||null,createdAt:st()}),await this.updatePlaylistRating(e),!0}catch(vz){return!1}}async updatePlaylistRating(e){if(this.isAvailable())try{const t=dt(ut(Go,Ss),pt("playlistId","==",e)),r=await ht(t);if(!r.empty){const t=r.docs.map((e=>e.data().rating)),n=t.reduce(((e,t)=>e+t),0)/t.length,a=it(Go,ws,e);await gt(a,{rating:Math.round(10*n)/10})}}catch(vz){}}async getUserRating(e){if(!this.isAvailable())return null;const t=vs.getCurrentUser();if(!t)return null;try{const r=dt(ut(Go,Ss),pt("playlistId","==",e),pt("userId","==",t.uid)),n=await ht(r);if(n.empty)return null;const a=n.docs[0];return{id:a.id,...a.data()}}catch(vz){return null}}async hasUserDownloaded(e){if(!this.isAvailable())return!1;const t=vs.getCurrentUser();if(!t)return!1;try{const r=dt(ut(Go,js),pt("playlistId","==",e),pt("userId","==",t.uid));return!(await ht(r)).empty}catch(vz){return!1}}async getUserPlaylists(){if(!this.isAvailable())return[];const e=vs.getCurrentUser();if(!e)return[];try{const t=dt(ut(Go,ws),pt("creatorId","==",e.uid)),r=await ht(t);return r.docs.map((e=>{const t=e.data();return{...t,id:e.id,firebaseId:e.id,originalPlaylistId:t.originalPlaylistId||t.id}}))}catch(vz){return[]}}async updatePlaylist(e,t){if(!this.isAvailable())return!1;const r=vs.getCurrentUser();if(!r)return!1;try{const n=it(Go,ws,e),a=await ot(n);if(!a.exists())return!1;if(a.data().creatorId!==r.uid)return!1;const i={...t,updatedAt:st()};return await gt(n,i),!0}catch(vz){return!1}}async deletePlaylist(e){if(!this.isAvailable())return!1;const t=vs.getCurrentUser();if(!t)return!1;try{let r=it(Go,ws,e),n=await ot(r);if(!n.exists()){const a=dt(ut(Go,ws),pt("originalPlaylistId","==",e),pt("creatorId","==",t.uid)),i=await ht(a);if(!i.empty){const e=i.docs[0];r=e.ref,n=e}}if(!n.exists())return!1;if(n.data().creatorId!==t.uid)return!1;const a=r.id,i=dt(ut(Go,Ss),pt("playlistId","==",a)),o=await ht(i);for(const e of o.docs)await bt(e.ref);const s=dt(ut(Go,js),pt("playlistId","==",a)),l=await ht(s);for(const e of l.docs)await bt(e.ref);return await bt(r),!0}catch(vz){return!1}}async isPlaylistOwner(e){if(!this.isAvailable())return!1;const t=vs.getCurrentUser();if(!t)return!1;try{const r=it(Go,ws,e),n=await ot(r);return!!n.exists()&&n.data().creatorId===t.uid}catch(vz){return!1}}async getSharedVersionOfPlaylist(e){if(!this.isAvailable())return null;const t=vs.getCurrentUser();if(!t)return null;try{const r=dt(ut(Go,ws),pt("creatorId","==",t.uid),pt("originalPlaylistId","==",e)),n=await ht(r);if(n.empty)return null;const a=n.docs[0];return{id:a.id,...a.data()}}catch(vz){return null}}async removeFromCommunity(e){if(!this.isAvailable())return!1;const t=vs.getCurrentUser();if(!t)return!1;try{let r=it(Go,ws,e),n=await ot(r);if(!n.exists()){const a=dt(ut(Go,ws),pt("originalPlaylistId","==",e),pt("creatorId","==",t.uid)),i=await ht(a);if(!i.empty){const e=i.docs[0];r=e.ref,n=e}}return!!n.exists()&&(n.data().creatorId===t.uid&&(await gt(r,{isPublic:!1,updatedAt:st()}),!0))}catch(vz){return!1}}async findPlaylistByAnyId(e){if(!this.isAvailable())return null;try{const t=it(Go,ws,e),r=await ot(t);if(r.exists()){const e=r.data();return{...e,id:r.id,firebaseId:r.id,originalPlaylistId:e.originalPlaylistId||e.id}}const n=dt(ut(Go,ws),pt("originalPlaylistId","==",e)),a=await ht(n);if(!a.empty){const e=a.docs[0],t=e.data();return{...t,id:e.id,firebaseId:e.id,originalPlaylistId:t.originalPlaylistId||t.id}}return null}catch(vz){return null}}};r(Cs,"instance");const ks=Cs.getInstance(),Ps="shared_playlists",As="user_profile",Es=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let r=0;r<8;r++)t+=e.charAt(Math.floor(36*Math.random()));return t},Is=()=>{try{const e=localStorage.getItem(As);if(e)return JSON.parse(e)}catch(vz){}const e={id:`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,username:`User${Math.floor(1e4*Math.random())}`,createdAt:(new Date).toISOString()};try{localStorage.setItem(As,JSON.stringify(e))}catch(vz){}return e},Ms=e=>{try{const t=Rs().filter((t=>t.id!==e.id));return t.push(e),localStorage.setItem(Ps,JSON.stringify(t)),!0}catch(vz){return!1}},Ts=async e=>{try{const n=Ms(e);if(ks.isAvailable()){if(!vs.isAuthenticated())try{await vs.autoSignIn()}catch(t){}if(vs.isAuthenticated())try{await ks.sharePlaylist(e)}catch(r){}}return n}catch(vz){return!1}},Rs=()=>{try{const e=localStorage.getItem(Ps);return e?JSON.parse(e):[]}catch(vz){return[]}},zs=async e=>{try{if(ks.isAvailable()&&vs.isAuthenticated())try{return await ks.getPlaylistsByCategory(e||"new")}catch(t){return[]}return[]}catch(vz){return[]}},Ds=async e=>{try{if(!e||"string"!=typeof e||8!==e.length)return{success:!1,message:"Invalid share code format. Share codes must be 8 characters long."};let n=null,a="local";if(ks.isAvailable()){if(!vs.isAuthenticated())try{await vs.autoSignIn()}catch(t){}try{n=await ks.getPlaylistByCode(e.toUpperCase()),n&&(a="firebase")}catch(r){}}if(n||(n=(e=>Rs().find((t=>t.shareCode===e))||null)(e.toUpperCase()),n&&(a="local")),!n)return{success:!1,message:"Playlist not found. Please check the share code and try again."};if("firebase"===a&&(Ms(n),vs.isAuthenticated()))try{await ks.recordDownload(n.id)}catch(vz){}return{success:!0,message:"Playlist imported successfully!",playlist:n,source:a}}catch(vz){return{success:!1,message:"An error occurred while importing the playlist."}}},Ls=async(e,t)=>{const r=await(async(e,t)=>{try{if(ks.isAvailable()&&vs.isAuthenticated())try{const r=(await ks.getPlaylistsByCategory("new",1e3)).find((r=>r.id===e||r.name===t&&r.creator===Is().username));if(r)return r}catch(r){}return Rs().find((r=>r.id===e||r.name===t&&r.creator===Is().username))||null}catch(vz){return null}})(e,t);return r?.shareCode||null},Os="https://phat5-app.com",_s=(e,t=Os)=>{const r=` Check out "${e.name}" - Power Hour Playlist`,n=e.description||`An awesome Power Hour playlist with ${e.clips.length} clips created by ${e.creator}`,a=`${t}/community?code=${e.shareCode}`;return{title:r,description:n,url:a,hashtags:["PowerHour","Music","Party","Playlist",...e.tags.map((e=>e.replace(/\s+/g,"")))],text:` ${r}\n\n${n}\n\n Share Code: ${e.shareCode}\n Created by: ${e.creator}\n ${e.clips.length} clips\n Rating: ${e.rating}/5\n\nImport this playlist in PHat5 using the share code!\n\n${a}\n\n#PowerHour #Music #Party #Playlist ${e.tags.map((e=>`#${e.replace(/\s+/g,"")}`)).join(" ")}`}},Fs=async e=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();const r=document.execCommand("copy");return document.body.removeChild(t),r}}catch(vz){return!1}},$s=e=>{window.open(e,"_blank","noopener,noreferrer")},Ns=async(e,t,r=Os)=>{try{switch(e){case"facebook":return $s(((e,t=Os)=>{const r=_s(e,t);return`https://www.facebook.com/sharer/sharer.php?${new URLSearchParams({u:r.url||"",quote:`${r.title}\n\n${r.description}\n\nShare Code: ${e.shareCode}`}).toString()}`})(t,r)),{success:!0,message:"Facebook share dialog opened"};case"twitter":return $s(((e,t=Os)=>{const r=_s(e,t),n=` "${e.name}" - Power Hour Playlist\n\n${r.description}\n\n Code: ${e.shareCode}\n By: ${e.creator}\n\n${r.url}`;return`https://twitter.com/intent/tweet?${new URLSearchParams({text:n,hashtags:r.hashtags?.slice(0,5).join(",")||"PowerHour,Music,Party"}).toString()}`})(t,r)),{success:!0,message:"Twitter share dialog opened"};case"whatsapp":return $s(((e,t=Os)=>{const r=_s(e,t),n=` *${e.name}* - Power Hour Playlist\n\n${r.description}\n\n *Share Code:* ${e.shareCode}\n *Created by:* ${e.creator}\n *${e.clips.length} clips*\n\nImport this playlist in PHat5 using the share code!\n\n${r.url}`;return`https://wa.me/?${new URLSearchParams({text:n}).toString()}`})(t,r)),{success:!0,message:"WhatsApp share dialog opened"};case"instagram":const e=((e,t=Os)=>{const r=_s(e,t);return` "${e.name}" - Power Hour Playlist\n\n${r.description}\n\n Share Code: ${e.shareCode}\n Created by: ${e.creator}\n ${e.clips.length} clips\n Rating: ${e.rating}/5\n\nImport this playlist in PHat5 using the share code!\n\nLink in bio or search for PHat5 Power Hour app\n\n${r.hashtags?.map((e=>`#${e}`)).join(" ")}`})(t,r),n=await Fs(e);return{success:n,message:n?"Instagram post text copied to clipboard":"Failed to copy Instagram text"};case"generic":const a=((e,t=Os)=>_s(e,t).text)(t,r),i=await Fs(a);return{success:i,message:i?"Share text copied to clipboard":"Failed to copy share text"};default:return{success:!1,message:"Unsupported platform"}}}catch(vz){return{success:!1,message:"An error occurred while sharing"}}},Ws=()=>{const[e,t]=i.useState(!1),[r,n]=i.useState(null);return{isSharing:e,lastShareResult:r,shareOnPlatform:i.useCallback((async(e,r,a)=>{t(!0),n(null);try{const t=await Ns(e,r,a);n(t)}catch(vz){n({success:!1,message:"An unexpected error occurred while sharing"})}finally{t(!1)}}),[]),clearLastResult:i.useCallback((()=>{n(null)}),[])}},Us=({open:e,onClose:t,playlist:r,appUrl:n="https://phat5-app.com"})=>{const a=m(),{isSharing:o,lastShareResult:l,shareOnPlatform:c,clearLastResult:p}=Ws(),[f,v]=i.useState(!1),w=[{id:"facebook",name:"Facebook",icon:s.jsx(Ga,{}),color:"#1877F2",description:"Share on Facebook with friends"},{id:"twitter",name:"Twitter/X",icon:s.jsx(Fi,{}),color:"#1DA1F2",description:"Tweet about this playlist"},{id:"instagram",name:"Instagram",icon:s.jsx(ai,{}),color:"#E4405F",description:"Copy text for Instagram post"},{id:"whatsapp",name:"WhatsApp",icon:s.jsx(Vi,{}),color:"#25D366",description:"Share via WhatsApp message"},{id:"generic",name:"Copy Link",icon:s.jsx(fa,{}),color:a.palette.primary.main,description:"Copy formatted share text"}];i.useEffect((()=>{l&&v(!0)}),[l]);const S=()=>{v(!1),p()},j=()=>{o||(p(),t())};return r?s.jsxs(s.Fragment,{children:[s.jsxs(g,{open:e,onClose:j,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{minHeight:"50vh"}},children:[s.jsx(y,{children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(pa,{sx:{mr:1}}),"Share on Social Media"]}),s.jsx(d,{onClick:j,disabled:o,children:s.jsx(An,{})})]})}),s.jsxs(b,{children:[s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:r.name}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:[r.clips.length," clips  Created by ",r.creator]}),s.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Share Code: ",s.jsx("strong",{children:r.shareCode})]})]}),s.jsx(k,{sx:{mb:3}}),s.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Choose a platform to share:"}),s.jsx(U,{container:!0,spacing:2,children:w.map((e=>s.jsx(U,{item:!0,xs:12,sm:6,children:s.jsx(N,{sx:{height:"100%",cursor:o?"not-allowed":"pointer",opacity:o?.6:1,transition:"all 0.2s ease-in-out","&:hover":{transform:o?"none":"translateY(-2px)",boxShadow:o?"none":a.shadows[4]}},children:s.jsx(J,{onClick:()=>(async e=>{r&&await c(e,r,n)})(e.id),disabled:o,sx:{height:"100%",p:2},children:s.jsxs(W,{sx:{textAlign:"center",p:0},children:[s.jsx(u,{sx:{color:e.color,mb:1,"& svg":{fontSize:40}},children:e.icon}),s.jsx(h,{variant:"h6",gutterBottom:!0,children:e.name}),s.jsx(h,{variant:"body2",color:"text.secondary",children:e.description})]})})})},e.id)))}),s.jsx(u,{sx:{mt:3,p:2,backgroundColor:a.palette.grey[50],borderRadius:1},children:s.jsxs(h,{variant:"body2",color:"text.secondary",children:[s.jsx("strong",{children:"Note:"})," For Instagram, the post text will be copied to your clipboard. For other platforms, a share dialog will open in a new window."]})})]}),s.jsx(P,{children:s.jsx(A,{onClick:j,disabled:o,children:"Close"})})]}),s.jsx(K,{open:f,autoHideDuration:4e3,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:s.jsx(x,{onClose:S,severity:l?.success?"success":"error",sx:{width:"100%"},children:l?.message})})]}):null},Bs=e=>{let t;const r=new Set,n=(e,n)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach((r=>r(t,e)))}},a=()=>t,i={setState:n,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(n,a,i);return i},Hs=e=>e,Vs=e=>{const t=(e=>e?Bs(e):Bs)(e),r=e=>function(e,t=Hs){const r=w.useSyncExternalStore(e.subscribe,(()=>t(e.getState())),(()=>t(e.getInitialState())));return w.useDebugValue(r),r}(t,e);return Object.assign(r,t),r},Ys=e=>Vs,Gs={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_NAME:"PHat5",VITE_APP_VERSION:"1.0.0",VITE_DEBUG_MODE:"false",VITE_DEV_MODE:"false",VITE_ENABLE_ANALYTICS:"false",VITE_ENABLE_CRASH_REPORTING:"false",VITE_ENVIRONMENT:"development",VITE_FIREBASE_API_KEY:"AIzaSyDy3uVt3zoKmCwtvlfSsi6XnCT9LCoykag",VITE_FIREBASE_APP_ID:"1:734204724608:web:e42e6bca97fa77db8b6d65",VITE_FIREBASE_AUTH_DOMAIN:"phat5-3b9c6.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-N2PVV5TZC2",VITE_FIREBASE_MESSAGING_SENDER_ID:"734204724608",VITE_FIREBASE_PROJECT_ID:"phat5-3b9c6",VITE_FIREBASE_STORAGE_BUCKET:"phat5-3b9c6.firebasestorage.app",VITE_GOOGLE_CLIENT_ID:"629878552552-aqe97v1itfti745t4sc91olknv698puj.apps.googleusercontent.com",VITE_LASTFM_API_KEY:"7f664029662dd6948a5b23dc9b3c734f",VITE_USER_NODE_ENV:"production",VITE_YOUTUBE_API_KEY:"your_youtube_api_key_here"},qs=new Map,Js=e=>{const t=qs.get(e);return t?Object.fromEntries(Object.entries(t.stores).map((([e,t])=>[e,t.getState()]))):{}},Ks=(e,t={})=>(r,n,a)=>{const{enabled:i,anonymousActionType:o,store:s,...l}=t;let c;try{c=(null!=i?i:"production"!==(Gs?"production":void 0))&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(xz){}if(!c)return e(r,n,a);const{connection:u,...d}=((e,t,r)=>{if(void 0===e)return{type:"untracked",connection:t.connect(r)};const n=qs.get(r.name);if(n)return{type:"tracked",store:e,...n};const a={connection:t.connect(r),stores:{}};return qs.set(r.name,a),{type:"tracked",store:e,...a}})(s,c,l);let h=!0;a.setState=(e,t,i)=>{const c=r(e,t);if(!h)return c;const d=(e=>{var t,r;if(!e)return;const n=e.split("\n"),a=n.findIndex((e=>e.includes("api.setState")));if(a<0)return;const i=(null==(t=n[a+1])?void 0:t.trim())||"";return null==(r=/.+ (.+) .+/.exec(i))?void 0:r[1]})((new Error).stack),p=void 0===i?{type:o||d||"anonymous"}:"string"==typeof i?{type:i}:i;return void 0===s?(null==u||u.send(p,n()),c):(null==u||u.send({...p,type:`${s}/${p.type}`},{...Js(l.name),[s]:a.getState()}),c)},a.devtools={cleanup:()=>{u&&"function"==typeof u.unsubscribe&&u.unsubscribe(),((e,t)=>{if(void 0===t)return;const r=qs.get(e);r&&(delete r.stores[t],0===Object.keys(r.stores).length&&qs.delete(e))})(l.name,s)}};const p=(...e)=>{const t=h;h=!1,r(...e),h=t},f=e(a.setState,n,a);if("untracked"===d.type?null==u||u.init(f):(d.stores[d.store]=a,null==u||u.init(Object.fromEntries(Object.entries(d.stores).map((([e,t])=>[e,e===d.store?f:t.getState()]))))),a.dispatchFromDevtools&&"function"==typeof a.dispatch){let e=!1;const t=a.dispatch;a.dispatch=(...r)=>{"production"===(Gs?"production":void 0)||"__setState"!==r[0].type||e||(e=!0),t(...r)}}return u.subscribe((e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return;return Xs(e.payload,(e=>{if("__setState"!==e.type)a.dispatchFromDevtools&&"function"==typeof a.dispatch&&a.dispatch(e);else{if(void 0===s)return void p(e.state);Object.keys(e.state).length;const t=e.state[s];if(null==t)return;JSON.stringify(a.getState())!==JSON.stringify(t)&&p(t)}}));case"DISPATCH":switch(e.payload.type){case"RESET":return p(f),void 0===s?null==u?void 0:u.init(a.getState()):null==u?void 0:u.init(Js(l.name));case"COMMIT":return void 0===s?void(null==u||u.init(a.getState())):null==u?void 0:u.init(Js(l.name));case"ROLLBACK":return Xs(e.state,(e=>{if(void 0===s)return p(e),void(null==u||u.init(a.getState()));p(e[s]),null==u||u.init(Js(l.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Xs(e.state,(e=>{void 0!==s?JSON.stringify(a.getState())!==JSON.stringify(e[s])&&p(e[s]):p(e)}));case"IMPORT_STATE":{const{nextLiftedState:r}=e.payload,n=null==(t=r.computedStates.slice(-1)[0])?void 0:t.state;if(!n)return;return p(void 0===s?n:n[s]),void(null==u||u.send(null,r))}case"PAUSE_RECORDING":return h=!h}return}})),f},Xs=(e,t)=>{let r;try{r=JSON.parse(e)}catch(xz){}void 0!==r&&t(r)},Qs=e=>(t,r,n)=>{const a=n.subscribe;return n.subscribe=(e,t,r)=>{let i=e;if(t){const a=(null==r?void 0:r.equalityFn)||Object.is;let o=e(n.getState());i=r=>{const n=e(r);if(!a(o,n)){const e=o;t(o=n,e)}},(null==r?void 0:r.fireImmediately)&&t(o,o)}return a(i)},e(t,r,n)};var Zs=Symbol.for("immer-nothing"),el=Symbol.for("immer-draftable"),tl=Symbol.for("immer-state");function rl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var nl=Object.getPrototypeOf;function al(e){return!!e&&!!e[tl]}function il(e){return!!e&&(sl(e)||Array.isArray(e)||!!e[el]||!!e.constructor?.[el]||hl(e)||pl(e))}var ol=Object.prototype.constructor.toString();function sl(e){if(!e||"object"!=typeof e)return!1;const t=nl(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===ol}function ll(e,t){0===cl(e)?Reflect.ownKeys(e).forEach((r=>{t(r,e[r],e)})):e.forEach(((r,n)=>t(n,r,e)))}function cl(e){const t=e[tl];return t?t.type_:Array.isArray(e)?1:hl(e)?2:pl(e)?3:0}function ul(e,t){return 2===cl(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dl(e,t,r){const n=cl(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function hl(e){return e instanceof Map}function pl(e){return e instanceof Set}function fl(e){return e.copy_||e.base_}function ml(e,t){if(hl(e))return new Map(e);if(pl(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=sl(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[tl];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(nl(e),t)}{const t=nl(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function gl(e,t=!1){return bl(e)||al(e)||!il(e)||(cl(e)>1&&(e.set=e.add=e.clear=e.delete=yl),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>gl(t,!0)))),e}function yl(){rl(2)}function bl(e){return Object.isFrozen(e)}var xl,vl={};function wl(e){const t=vl[e];return t||rl(0),t}function Sl(){return xl}function jl(e,t){t&&(wl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cl(e){kl(e),e.drafts_.forEach(Al),e.drafts_=null}function kl(e){e===xl&&(xl=e.parent_)}function Pl(e){return xl={drafts_:[],parent_:xl,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Al(e){const t=e[tl];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function El(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[tl].modified_&&(Cl(t),rl(4)),il(e)&&(e=Il(t,e),t.parent_||Tl(t,e)),t.patches_&&wl("Patches").generateReplacementPatches_(r[tl].base_,e,t.patches_,t.inversePatches_)):e=Il(t,r,[]),Cl(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Zs?e:void 0}function Il(e,t,r){if(bl(t))return t;const n=t[tl];if(!n)return ll(t,((a,i)=>Ml(e,n,t,a,i,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return Tl(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,i=!1;3===n.type_&&(a=new Set(t),t.clear(),i=!0),ll(a,((a,o)=>Ml(e,n,t,a,o,r,i))),Tl(e,t,!1),r&&e.patches_&&wl("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Ml(e,t,r,n,a,i,o){if(al(a)){const o=Il(e,a,i&&t&&3!==t.type_&&!ul(t.assigned_,n)?i.concat(n):void 0);if(dl(r,n,o),!al(o))return;e.canAutoFreeze_=!1}else o&&r.add(a);if(il(a)&&!bl(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Il(e,a),t&&t.scope_.parent_||"symbol"==typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||Tl(e,a)}}function Tl(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gl(t,r)}var Rl={get(e,t){if(t===tl)return e;const r=fl(e);if(!ul(r,t))return function(e,t,r){const n=Ll(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!il(n)?n:n===Dl(e.base_,t)?(_l(e),e.copy_[t]=Fl(n,e)):n},has:(e,t)=>t in fl(e),ownKeys:e=>Reflect.ownKeys(fl(e)),set(e,t,r){const n=Ll(fl(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Dl(fl(e),t),o=n?.[tl];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(i=n)?0!==a||1/a==1/i:a!=a&&i!=i)&&(void 0!==r||ul(e.base_,t)))return!0;_l(e),Ol(e)}var a,i;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Dl(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,_l(e),Ol(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=fl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){rl(11)},getPrototypeOf:e=>nl(e.base_),setPrototypeOf(){rl(12)}},zl={};function Dl(e,t){const r=e[tl];return(r?fl(r):e)[t]}function Ll(e,t){if(!(t in e))return;let r=nl(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=nl(r)}}function Ol(e){e.modified_||(e.modified_=!0,e.parent_&&Ol(e.parent_))}function _l(e){e.copy_||(e.copy_=ml(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Fl(e,t){const r=hl(e)?wl("MapSet").proxyMap_(e,t):pl(e)?wl("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Sl(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=Rl;r&&(a=[n],i=zl);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return n.draft_=s,n.revoke_=o,s}(e,t);return(t?t.scope_:Sl()).drafts_.push(r),r}function $l(e){if(!il(e)||bl(e))return e;const t=e[tl];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ml(e,t.scope_.immer_.useStrictShallowCopy_)}else r=ml(e,!0);return ll(r,((e,t)=>{dl(r,e,$l(t))})),t&&(t.finalized_=!1),r}ll(Rl,((e,t)=>{zl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),zl.deleteProperty=function(e,t){return zl.set.call(this,e,t,void 0)},zl.set=function(e,t,r){return Rl.set.call(this,e[0],t,r,e[0])};var Nl=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...a){return n.produce(e,(e=>t.call(this,e,...a)))}}let n;if("function"!=typeof t&&rl(6),void 0!==r&&"function"!=typeof r&&rl(7),il(e)){const a=Pl(this),i=Fl(e,void 0);let o=!0;try{n=t(i),o=!1}finally{o?Cl(a):kl(a)}return jl(a,r),El(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===Zs&&(n=void 0),this.autoFreeze_&&gl(n,!0),r){const t=[],a=[];wl("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}rl(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;il(e)||rl(8),al(e)&&(al(t=e)||rl(10),e=$l(t));const r=Pl(this),n=Fl(e,void 0);return n[tl].isManual_=!0,kl(r),n}finishDraft(e,t){const r=e&&e[tl];r&&r.isManual_||rl(9);const{scope_:n}=r;return jl(n,t),El(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=wl("Patches").applyPatches_;return al(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},Wl=Nl.produce;Nl.produceWithPatches.bind(Nl),Nl.setAutoFreeze.bind(Nl),Nl.setUseStrictShallowCopy.bind(Nl),Nl.applyPatches.bind(Nl),Nl.createDraft.bind(Nl),Nl.finishDraft.bind(Nl);const Ul=e=>(t,r,n)=>(n.setState=(e,r,...n)=>{const a="function"==typeof e?Wl(e):e;return t(a,r,...n)},e(n.setState,r,n)),Bl="users",Hl="user_preferences",Vl="user_data_sync",Yl=class e{constructor(){r(this,"syncInProgress",!1),r(this,"pendingSync",null)}static getInstance(){return e.instance||(e.instance=new e),e.instance}isAvailable(){return Vo()&&!!Go}getSyncStatus(){const e=os(Jo.LAST_SYNC),t=os(Jo.PENDING_SYNC)||[];return{lastSyncAt:e?new Date(e):null,pendingChanges:t.length>0,syncInProgress:this.syncInProgress,lastError:null}}async syncUserProfile(e){if(!this.isAvailable())return this.addToPendingSync("profile",e),!1;const t=vs.getCurrentUser();if(!t)return!1;try{const r=it(Go,Bl,t.uid),n={...e,updatedAt:st()};return await lt(r,n,{merge:!0}),await this.updateSyncRecord("profile"),!0}catch(vz){return this.addToPendingSync("profile",e),!1}}async syncUserPreferences(e){if(!this.isAvailable())return this.addToPendingSync("preferences",e),!1;const t=vs.getCurrentUser();if(!t)return!1;try{const r=it(Go,Hl,t.uid),n={...e,updatedAt:st()};return await lt(r,n,{merge:!0}),await this.updateSyncRecord("preferences"),!0}catch(vz){return this.addToPendingSync("preferences",e),!1}}async loadUserProfile(){if(!this.isAvailable())return null;const e=vs.getCurrentUser();if(!e)return null;try{const t=it(Go,Bl,e.uid),r=await ot(t);return r.exists()?r.data():null}catch(vz){return null}}async loadUserPreferences(){if(!this.isAvailable())return null;const e=vs.getCurrentUser();if(!e)return null;try{const t=it(Go,Hl,e.uid),r=await ot(t);if(r.exists()){const e=r.data();return ls(e)}return null}catch(vz){return null}}async syncAllUserData(){if(this.syncInProgress)return this.pendingSync&&await this.pendingSync,{success:!0,errors:[]};this.syncInProgress=!0;const e=[];try{const t=os(Jo.USER_PROFILE),r=os(Jo.USER_PREFERENCES),n=await this.loadUserProfile(),a=await this.loadUserPreferences();if(t?await this.syncUserProfile(t)||e.push("Failed to sync user profile"):n&&is(Jo.USER_PROFILE,n),r)await this.syncUserPreferences(r)||e.push("Failed to sync user preferences");else if(a)is(Jo.USER_PREFERENCES,a);else{const e=Ko;is(Jo.USER_PREFERENCES,e),await this.syncUserPreferences(e)}return await this.processPendingSync(),is(Jo.LAST_SYNC,new Date),{success:0===e.length,errors:e}}catch(vz){return e.push(`Sync failed: ${vz}`),{success:!1,errors:e}}finally{this.syncInProgress=!1,this.pendingSync=null}}addToPendingSync(e,t){try{const r=os(Jo.PENDING_SYNC)||[],n=r.findIndex((t=>t.type===e)),a={type:e,data:t,timestamp:(new Date).toISOString()};n>=0?r[n]=a:r.push(a),is(Jo.PENDING_SYNC,r)}catch(vz){}}async processPendingSync(){try{const e=os(Jo.PENDING_SYNC)||[];if(0===e.length)return;for(const t of e)try{"profile"===t.type?await this.syncUserProfile(t.data):"preferences"===t.type&&await this.syncUserPreferences(t.data)}catch(vz){}is(Jo.PENDING_SYNC,[])}catch(vz){}}async updateSyncRecord(e){if(!this.isAvailable())return;const t=vs.getCurrentUser();if(t)try{const r=it(Go,Vl,t.uid),n={userId:t.uid,lastSyncAt:st(),syncVersion:1};"profile"===e?n.profileLastModified=st():"preferences"===e&&(n.preferencesLastModified=st()),await lt(r,n,{merge:!0})}catch(vz){}}clearLocalUserData(){try{localStorage.removeItem(Jo.USER_PROFILE),localStorage.removeItem(Jo.USER_PREFERENCES),localStorage.removeItem(Jo.LAST_SYNC),localStorage.removeItem(Jo.PENDING_SYNC)}catch(vz){}}};r(Yl,"instance");const Gl=Yl.getInstance(),ql={status:"loading",user:null,profile:null,preferences:null,authMethod:"none",isFirebaseAvailable:!1,canSignIn:!1,sessionId:null,sessionToken:null,lastActivity:null,sessionExpiry:null,isLoading:!0,isSigningIn:!1,isSigningOut:!1,isSyncing:!1,lastError:null,isOnline:bs(),lastSyncAt:null,pendingSyncData:[],localStorageEnabled:!0,localUserData:null},Jl=[],Kl=e=>{const t=`session_${Date.now()}_${Math.random().toString(36).substr(2,12)}_${crypto.getRandomValues(new Uint8Array(4)).reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}`,r=(()=>{const e=es.DEFAULT_DURATION_HOURS,t=Math.max(es.MIN_DURATION_HOURS,Math.min(es.MAX_DURATION_HOURS,e)),r=new Date;return r.setHours(r.getHours()+t),r})();return{sessionId:t,sessionToken:Xo(t,e),sessionExpiry:r,lastActivity:new Date}},Xl=(e,t)=>{const r=new Date;e.lastActivity=r,(e=>{if(!e)return!0;const t=new Date;return(e.getTime()-t.getTime())/36e5<es.REFRESH_THRESHOLD_HOURS})(e.sessionExpiry)&&(e.sessionExpiry=(e=>{const t=new Date;return t.setHours(t.getHours()+es.ACTIVITY_EXTENSION_HOURS),e&&e>t?e:t})(e.sessionExpiry),e.sessionId&&(e.sessionToken=Xo(e.sessionId,t)))},Ql=async()=>{try{const{useCollaborationStore:e}=await qn((async()=>{const{useCollaborationStore:e}=await Promise.resolve().then((()=>du));return{useCollaborationStore:e}}),[]),t=e.getState();t&&t.initialize&&await t.initialize()}catch(vz){}},Zl=Ys()(Ks(Qs(Ul(((e,t)=>({...ql,signInWithGoogle:async()=>{if(t().isSigningIn)return null;e((e=>{e.isSigningIn=!0,e.lastError=null,e.status="loading"}));try{const r=await vs.signInWithGoogle();if(!r)throw new Error("Google sign-in failed");let n=await vs.getUserProfile();n||(rs(r,"google"),await vs.createOrUpdateUserProfile(r,!1),n=await vs.getUserProfile());let a=await Gl.loadUserPreferences();a||(a=ls(null));const i=ts(r,n||void 0,a),o=Kl(r.uid);e((e=>{e.user=i,e.profile=n,e.preferences=a,e.authMethod="google",e.status="authenticated",e.sessionId=o.sessionId,e.sessionToken=o.sessionToken,e.sessionExpiry=o.sessionExpiry,e.lastActivity=o.lastActivity,e.isSigningIn=!1})),t().saveToLocalStorage(),t().startSessionMonitoring(),Gl.syncAllUserData().catch((e=>{})),Ql().catch((e=>{}));const s=ys("sign-in",i);return Jl.forEach((e=>e(s))),i}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r,e.status="error",e.isSigningIn=!1})),vz}},signInAnonymously:async()=>{if(t().isSigningIn)return null;e((e=>{e.isSigningIn=!0,e.lastError=null,e.status="loading"}));try{const r=await vs.signInAnonymously();if(!r)throw new Error("Anonymous sign-in failed");let n=await vs.getUserProfile();n||(rs(r,"anonymous"),await vs.createOrUpdateUserProfile(r,!0),n=await vs.getUserProfile());let a=await Gl.loadUserPreferences();a||(a=ls(null));const i=ts(r,n||void 0,a),o=Kl(r.uid);e((e=>{e.user=i,e.profile=n,e.preferences=a,e.authMethod="anonymous",e.status="authenticated",e.sessionId=o.sessionId,e.sessionToken=o.sessionToken,e.sessionExpiry=o.sessionExpiry,e.lastActivity=o.lastActivity,e.isSigningIn=!1})),t().saveToLocalStorage(),t().startSessionMonitoring();const s=ys("sign-in",i);return Jl.forEach((e=>e(s))),i}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r,e.status="error",e.isSigningIn=!1})),vz}},signInWithEmail:async(r,n)=>{if(t().isSigningIn)return null;e((e=>{e.isSigningIn=!0,e.lastError=null,e.status="loading"}));try{const a=await vs.signInWithEmailAndPassword(r,n);if(!a)throw new Error("Email sign-in failed");let i=await vs.getUserProfile();if(!i){const e=rs(a,"email");await vs.updateUserProfile(e),i=await vs.getUserProfile()}let o=await Gl.loadUserPreferences();o||(o=ls(null));const s=ts(a,i||void 0,o),l=Kl(a.uid);e((e=>{e.user=s,e.profile=i,e.preferences=o,e.authMethod="email",e.status="authenticated",e.sessionId=l.sessionId,e.sessionToken=l.sessionToken,e.sessionExpiry=l.sessionExpiry,e.lastActivity=l.lastActivity,e.isSigningIn=!1})),t().saveToLocalStorage(),t().startSessionMonitoring(),Gl.syncAllUserData().catch((e=>{})),Ql().catch((e=>{}));const c=ys("sign-in",s);return Jl.forEach((e=>e(c))),s}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r,e.status="error",e.isSigningIn=!1})),vz}},createUserWithEmail:async(r,n,a)=>{if(t().isSigningIn)return null;e((e=>{e.isSigningIn=!0,e.lastError=null,e.status="loading"}));try{const i=await vs.createUserWithEmailAndPassword(r,n,a);if(!i)throw new Error("Account creation failed");const o=rs(i,"email");await vs.updateUserProfile(o);const s=await vs.getUserProfile(),l=ls(null);await Gl.syncUserPreferences(l);const c=ts(i,s||void 0,l),u=Kl(i.uid);e((e=>{e.user=c,e.profile=s,e.preferences=l,e.authMethod="email",e.status="authenticated",e.sessionId=u.sessionId,e.sessionToken=u.sessionToken,e.sessionExpiry=u.sessionExpiry,e.lastActivity=u.lastActivity,e.isSigningIn=!1})),t().saveToLocalStorage(),t().startSessionMonitoring(),Gl.syncAllUserData().catch((e=>{})),Ql().catch((e=>{}));const d=ys("sign-in",c);return Jl.forEach((e=>e(d))),c}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r,e.status="error",e.isSigningIn=!1})),vz}},sendPasswordResetEmail:async t=>{try{await vs.sendPasswordResetEmail(t)}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r})),vz}},sendEmailVerification:async()=>{try{await vs.sendEmailVerification()}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r})),vz}},updatePassword:async(t,r)=>{try{await vs.updatePassword(t,r)}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r})),vz}},linkAnonymousToEmail:async(r,n)=>{const a=t();if(!a.user||!a.user.isAnonymous)throw new Error("Cannot link account - user is not anonymous");try{const i=await vs.linkAnonymousToEmail(r,n);if(!i)throw new Error("Account linking failed");const o=rs(i,"email");await vs.updateUserProfile(o);const s=await vs.getUserProfile(),l=ts(i,s||void 0,a.preferences);return e((e=>{e.user=l,e.profile=s,e.authMethod="email"})),t().saveToLocalStorage(),Gl.syncAllUserData().catch((e=>{})),l}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r})),vz}},canLinkAccount:()=>{const e=t();return vs.canLinkAccount()&&!!e.user?.isAnonymous},signOut:async()=>{const r=t();if(!r.isSigningOut){e((e=>{e.isSigningOut=!0,e.lastError=null}));try{const n=r.user;t().stopSessionMonitoring(),await vs.signOut(),e((e=>{e.user=null,e.profile=null,e.preferences=null,e.authMethod="none",e.status="unauthenticated",e.sessionId=null,e.sessionToken=null,e.sessionExpiry=null,e.lastActivity=null,e.isSigningOut=!1,e.lastSyncAt=null,e.pendingSyncData=[]})),ss();const a=ys("sign-out",n);Jl.forEach((e=>e(a)))}catch(vz){const r=as(vz);throw e((e=>{e.lastError=r,e.isSigningOut=!1})),vz}}},refreshSession:async()=>{const r=t();if(r.user&&r.sessionExpiry){if(Zo({sessionId:r.sessionId,sessionExpiry:r.sessionExpiry,sessionToken:r.sessionToken,userId:r.user.uid,lastActivity:r.lastActivity}).isValid)return e((e=>{Xl(e,r.user.uid)})),void t().saveToLocalStorage();try{const n=vs.getCurrentUser();if(n&&n.uid===r.user.uid){const r=Kl(n.uid);e((e=>{e.sessionId=r.sessionId,e.sessionToken=r.sessionToken,e.sessionExpiry=r.sessionExpiry,e.lastActivity=r.lastActivity})),t().saveToLocalStorage()}else await t().signOut()}catch(vz){await t().signOut()}}},validateSession:async()=>{const e=t();return!!e.user&&Zo({sessionId:e.sessionId,sessionExpiry:e.sessionExpiry,sessionToken:e.sessionToken,userId:e.user.uid,lastActivity:e.lastActivity}).isValid},updateActivity:()=>{const r=t();r.user&&(e((e=>{Xl(e,r.user.uid)})),t().saveToLocalStorage())},startSessionMonitoring:()=>{if("undefined"!=typeof window&&window.authSessionInterval&&clearInterval(window.authSessionInterval),"undefined"!=typeof window&&(window.authSessionInterval=setInterval((async()=>{const e=t();if(e.user&&"authenticated"===e.status)try{await t().refreshSession()}catch(vz){}}),3e5)),"undefined"!=typeof window){const e=["mousedown","mousemove","keypress","scroll","touchstart","click"];let r=0;const n=()=>{const e=Date.now();if(e-r>6e4){r=e;const n=t();n.user&&"authenticated"===n.status&&t().updateActivity()}};e.forEach((e=>{window.removeEventListener(e,n,!0)})),e.forEach((e=>{window.addEventListener(e,n,!0)}))}},stopSessionMonitoring:()=>{"undefined"!=typeof window&&window.authSessionInterval&&(clearInterval(window.authSessionInterval),window.authSessionInterval=null)},updateProfile:async r=>{const n=t();if(!n.user||!n.profile)throw new Error("No authenticated user to update");try{const a={...n.profile,...r};e((e=>{e.profile=a,e.isSyncing=!0})),t().saveToLocalStorage(),await Gl.syncUserProfile(a),e((e=>{e.isSyncing=!1}));const i=ys("profile-updated",n.user,r);Jl.forEach((e=>e(i)))}catch(vz){throw e((e=>{e.isSyncing=!1,e.lastError=ns("profile-update-failed","Failed to update profile",vz)})),vz}},updatePreferences:async r=>{const n=t();if(n.preferences)try{const a=ls({...n.preferences,...r});e((e=>{e.preferences=a,e.isSyncing=!0})),t().saveToLocalStorage(),await Gl.syncUserPreferences(a),e((e=>{e.isSyncing=!1}));const i=ys("preferences-updated",n.user,r);Jl.forEach((e=>e(i)))}catch(vz){throw e((e=>{e.isSyncing=!1,e.lastError=ns("preferences-update-failed","Failed to update preferences",vz)})),vz}},syncUserData:async()=>{if(t().user)try{e((e=>{e.isSyncing=!0}));const r=await Gl.syncAllUserData();r.success?(t().loadFromLocalStorage(),e((e=>{e.lastSyncAt=new Date,e.pendingSyncData=[]}))):e((e=>{e.lastError=ns("sync-partial-failure","Some data failed to sync",r.errors)}))}catch(vz){e((e=>{e.lastError=ns("sync-failed","Failed to sync user data",vz)}))}finally{e((e=>{e.isSyncing=!1}))}},clearError:()=>{e((e=>{e.lastError=null}))},handleAuthError:t=>{const r=as(t);e((e=>{e.lastError=r,"auth/network-request-failed"===r.code&&(e.isOnline=!1)}))},initializeAuth:async()=>{e((e=>{e.isLoading=!0,e.status="loading",e.isFirebaseAvailable=vs.isFirebaseAvailable(),e.canSignIn=vs.isFirebaseAvailable(),e.isOnline=bs()}));try{vs.onAuthStateChanged((async e=>{const r=t();if(!r.isLoading)if(e)if(r.user&&r.user.uid===e.uid)t().updateActivity();else try{await t().restoreSession()}catch(vz){}else r.user&&await t().signOut()})),await new Promise((e=>setTimeout(e,100)));const r=await t().restoreSession();r||e((e=>{e.status="unauthenticated"})),r&&t().startSessionMonitoring()}catch(vz){e((e=>{e.status="error",e.lastError=ns("init-failed","Failed to initialize authentication",vz)}))}finally{e((e=>{e.isLoading=!1}))}},restoreSession:async()=>{try{t().loadFromLocalStorage();const r=t(),n=vs.getCurrentUser(),a=Zo({sessionId:r.sessionId,sessionExpiry:r.sessionExpiry,sessionToken:r.sessionToken,userId:n?.uid,lastActivity:r.lastActivity});if(n&&a.isValid){const a=await vs.getUserProfile();let i=await Gl.loadUserPreferences();i||(i=ls(r.preferences));const o=ts(n,a||void 0,i);e((e=>{e.user=o,e.profile=a,e.preferences=i,e.status="authenticated",e.authMethod=n.isAnonymous?"anonymous":n.providerData.length>0?"google":"email",Xl(e,n.uid)})),t().saveToLocalStorage(),t().startSessionMonitoring(),Ql().catch((e=>{}));const s=ys("session-restored",o);return Jl.forEach((e=>e(s))),o}if(n&&!a.isValid){const a=await vs.getUserProfile();let i=await Gl.loadUserPreferences();i||(i=ls(r.preferences));const o=ts(n,a||void 0,i),s=Kl(n.uid);e((e=>{e.user=o,e.profile=a,e.preferences=i,e.status="authenticated",e.authMethod=n.isAnonymous?"anonymous":n.providerData.length>0?"google":"email",e.sessionId=s.sessionId,e.sessionToken=s.sessionToken,e.sessionExpiry=s.sessionExpiry,e.lastActivity=s.lastActivity})),t().saveToLocalStorage(),t().startSessionMonitoring(),Ql().catch((e=>{}));const l=ys("session-restored",o);return Jl.forEach((e=>e(l))),o}return r.sessionExpiry&&t().clearLocalStorage(),e((e=>{e.status="unauthenticated"})),null}catch(vz){return e((e=>{e.status="unauthenticated",e.lastError=ns("session-restore-failed","Failed to restore session",vz)})),null}},setOnlineStatus:r=>{const n=!t().isOnline;e((e=>{e.isOnline=r})),r&&n&&t().user&&t().syncUserData().catch((e=>{}))},saveToLocalStorage:()=>{const e=t();if(e.localStorageEnabled)try{is(Jo.AUTH_STATE,{sessionId:e.sessionId,sessionToken:e.sessionToken,sessionExpiry:e.sessionExpiry,lastActivity:e.lastActivity,authMethod:e.authMethod,userId:e.user?.uid}),e.profile&&is(Jo.USER_PROFILE,e.profile),e.preferences&&is(Jo.USER_PREFERENCES,e.preferences),is(Jo.LAST_SYNC,e.lastSyncAt)}catch(vz){}},loadFromLocalStorage:()=>{if(t().localStorageEnabled)try{const t=os(Jo.AUTH_STATE),r=os(Jo.USER_PROFILE),n=os(Jo.USER_PREFERENCES),a=os(Jo.LAST_SYNC);e((e=>{t&&(e.sessionId=t.sessionId,e.sessionToken=t.sessionToken,e.sessionExpiry=t.sessionExpiry?new Date(t.sessionExpiry):null,e.lastActivity=t.lastActivity?new Date(t.lastActivity):null,e.authMethod=t.authMethod||"none"),r&&(e.profile=r),n&&(e.preferences=ls(n)),a&&(e.lastSyncAt=new Date(a))}))}catch(vz){}},clearLocalStorage:()=>{ss()},getCurrentUser:()=>t().user,isAuthenticated:()=>{const e=t();return"authenticated"===e.status&&!!e.user},canAccessFeature:e=>((e,t)=>{if(!e)return!1;const r={"community-sharing":e=>!e.isAnonymous,"playlist-sync":e=>!e.isAnonymous,"profile-customization":()=>!0,"advanced-settings":e=>!e.isAnonymous,"data-export":()=>!0,"premium-features":e=>!e.isAnonymous&&!!e.email,"admin-community-management":e=>cs(e),"admin-user-management":e=>cs(e)&&us(e,"canManageUsers"),"admin-content-moderation":e=>cs(e)&&us(e,"canModerateContent"),"admin-analytics":e=>cs(e)&&us(e,"canAccessAnalytics")}[t];return!r||r(e)})(t().user,e),getSyncStatus:()=>Gl.getSyncStatus(),hasPendingSync:()=>Gl.getSyncStatus().pendingChanges,forceSyncNow:async()=>{if(!t().user)throw new Error("No authenticated user to sync");return await t().syncUserData()}})))),{name:"auth-store"}));setTimeout((()=>{Zl.getState().initializeAuth()}),0);const ec=i.createContext(void 0),tc=()=>{const e=i.useContext(ec);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},rc=({children:e})=>{const{status:t,user:r,profile:n,preferences:a,isLoading:o,lastError:l,signInWithGoogle:c,signInAnonymously:u,signInWithEmail:d,createUserWithEmail:h,sendPasswordResetEmail:p,sendEmailVerification:f,updatePassword:m,linkAnonymousToEmail:g,canLinkAccount:y,signOut:b,updateProfile:x,updatePreferences:v,clearError:w,isAuthenticated:S,canAccessFeature:j,isSyncing:C,isOnline:k,lastSyncAt:P,getSyncStatus:A,hasPendingSync:E,forceSyncNow:I}=Zl(),[M,T]=i.useState(!1);i.useEffect((()=>{const e=e=>{e.type};var t;return t=e,Jl.push(t),()=>{(e=>{const t=Jl.indexOf(e);t>-1&&Jl.splice(t,1)})(e)}}),[]),i.useEffect((()=>((async()=>{try{const e=()=>{"loading"!==Zl.getState().status?T(!0):setTimeout(e,100)};e()}catch(vz){T(!0)}})(),()=>{const e=Zl.getState();e.stopSessionMonitoring&&e.stopSessionMonitoring()})),[]),i.useEffect((()=>{const e=()=>{Zl.getState().setOnlineStatus(!0)},t=()=>{Zl.getState().setOnlineStatus(!1)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]),i.useEffect((()=>{if(!S())return;const e=setInterval((()=>{Zl.getState().refreshSession()}),3e5);return()=>{clearInterval(e)}}),[S]);const R={status:t,user:r,profile:n,preferences:a,isLoading:o||!M,isAuthenticated:S(),lastError:l,signInWithGoogle:async()=>{try{return await c()}catch(vz){throw vz}},signInAnonymously:u,signInWithEmail:d,signOut:async()=>{try{await b()}catch(vz){throw vz}},createUserWithEmail:h,sendPasswordResetEmail:p,sendEmailVerification:f,updatePassword:m,linkAnonymousToEmail:g,canLinkAccount:y,updateProfile:async e=>{try{await x(e)}catch(vz){throw vz}},updatePreferences:async e=>{try{await v(e)}catch(vz){throw vz}},clearError:w,canAccessFeature:j,isSyncing:C,isOnline:k,lastSyncAt:P,getSyncStatus:A,hasPendingSync:E,forceSyncNow:I};return s.jsx(ec.Provider,{value:R,children:e})},nc=()=>{const{status:e,isLoading:t,isAuthenticated:r,user:n}=tc();return{status:e,isLoading:t,isAuthenticated:r,isAnonymous:n?.isAnonymous||!1,hasFullAccount:r&&!n?.isAnonymous,canAccessCommunityFeatures:r&&!n?.isAnonymous}},ac=({open:e,onClose:t,playlist:r,onSuccess:n})=>{const a=m(),{user:o,profile:l}=tc(),[p,f]=i.useState(!1),[v,w]=i.useState(""),[S,j]=i.useState([]),[C,E]=i.useState(""),[I,M]=i.useState(""),[R,z]=i.useState(!1),[D,L]=i.useState(""),[O,_]=i.useState(!1),[F,$]=i.useState(null),[N,W]=i.useState(!1),[U,H]=i.useState(!1),[V,Y]=i.useState(!1),{shareOnPlatform:J}=Ws(),K=()=>((e,t)=>t?.displayName?t.displayName:t?.username?t.username:e?.displayName?e.displayName:e?.email?e.email.split("@")[0]:e?.isAnonymous?"Guest User":"User")(o,l);i.useEffect((()=>{e&&r&&(async()=>{if(L(""),_(!1),W(!1),H(!1),vs.isAuthenticated())try{const e=await ks.getSharedVersionOfPlaylist(r.id);$(e),e?(w(e.description),j(e.tags),f(e.isPublic),M(e.shareCode),W(!0)):(w(""),j([]),f(!1),M(""))}catch(e){$(null),w(""),j([]),f(!1),M("")}else $(null),w(""),j([]),f(!1),M("");E("")})()}),[e,r]);const Z=()=>{C.trim()&&!S.includes(C.trim())&&S.length<10&&(j([...S,C.trim()]),E(""))},ee=async e=>{if(!r||!I)return;const t={...r,shareCode:I,isPublic:p,description:v,tags:S,creator:K(),rating:0,downloadCount:0,createdAt:r.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:1,originalPlaylistId:r.id};await J(e,t)},te=()=>{R||t()};return r?s.jsxs(s.Fragment,{children:[s.jsxs(g,{open:e,onClose:te,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"60vh"}},children:[s.jsx(y,{children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(pa,{sx:{mr:1}}),F?"Manage Shared Playlist":"Share Playlist"]}),s.jsx(d,{onClick:te,disabled:R||U,children:s.jsx(An,{})})]})}),s.jsx(b,{children:O?s.jsxs(u,{sx:{textAlign:"center",py:4},children:[s.jsx(x,{severity:"success",sx:{mb:3},children:"Playlist shared successfully!"}),s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Your Share Code"}),s.jsxs(c,{sx:{p:2,backgroundColor:a.palette.grey[100],display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:3},children:[s.jsx(h,{variant:"h4",sx:{fontFamily:"monospace",fontWeight:"bold",letterSpacing:2},children:I}),s.jsx(G,{title:"Copy to clipboard",children:s.jsx(d,{onClick:async()=>{try{await navigator.clipboard.writeText(I)}catch(e){}},children:s.jsx(fa,{})})})]}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Share this code with others so they can import your playlist!"}),s.jsx(k,{sx:{mb:3}}),s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Share on Social Media"}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Spread the word about your awesome playlist!"}),s.jsxs(u,{sx:{display:"flex",justifyContent:"center",gap:2,mb:2},children:[s.jsx(G,{title:"Share on Facebook",children:s.jsx(d,{onClick:()=>ee("facebook"),sx:{color:"#1877F2","&:hover":{backgroundColor:"rgba(24, 119, 242, 0.1)"}},children:s.jsx(Ga,{})})}),s.jsx(G,{title:"Share on Twitter/X",children:s.jsx(d,{onClick:()=>ee("twitter"),sx:{color:"#1DA1F2","&:hover":{backgroundColor:"rgba(29, 161, 242, 0.1)"}},children:s.jsx(Fi,{})})}),s.jsx(G,{title:"Copy for Instagram",children:s.jsx(d,{onClick:()=>ee("instagram"),sx:{color:"#E4405F","&:hover":{backgroundColor:"rgba(228, 64, 95, 0.1)"}},children:s.jsx(ai,{})})}),s.jsx(G,{title:"Share on WhatsApp",children:s.jsx(d,{onClick:()=>ee("whatsapp"),sx:{color:"#25D366","&:hover":{backgroundColor:"rgba(37, 211, 102, 0.1)"}},children:s.jsx(Vi,{})})})]}),s.jsx(A,{variant:"outlined",onClick:()=>Y(!0),startIcon:s.jsx(pa,{}),sx:{mb:2},children:"More Sharing Options"})]}):s.jsxs(s.Fragment,{children:[s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:r.name}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:[r.clips.length," clips  Created ",new Date(r.date).toLocaleDateString()]}),F&&s.jsx(x,{severity:"info",sx:{mt:2},children:s.jsxs(h,{variant:"body2",children:["This playlist is already shared with code: ",s.jsx("strong",{children:F.shareCode}),s.jsx("br",{}),"Status: ",F.isPublic?"Public (visible in community)":"Private (share code only)"]})})]}),s.jsx(k,{sx:{mb:3}}),s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sharing as:"}),s.jsx(h,{variant:"body1",fontWeight:500,children:K()}),s.jsx(h,{variant:"caption",color:"text.secondary",children:"You can change your display name in Settings"})]}),s.jsxs(u,{sx:{mb:3},children:[s.jsx(X,{control:s.jsx(Q,{checked:p,onChange:e=>f(e.target.checked)}),label:s.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[p?s.jsx(ji,{sx:{mr:1}}):s.jsx(si,{sx:{mr:1}}),p?"Public":"Private"]})}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{ml:4},children:p?"Anyone can discover and import this playlist":"Only people with the share code can import this playlist"})]}),s.jsx(T,{fullWidth:!0,label:"Description",multiline:!0,rows:3,value:v,onChange:e=>w(e.target.value),sx:{mb:3},required:p,helperText:p?"Required for public playlists":"Optional description for your playlist"}),s.jsxs(u,{sx:{mb:3},children:[s.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:["Tags ",p&&s.jsx("span",{style:{color:a.palette.error.main},children:"*"})]}),s.jsx(T,{fullWidth:!0,label:"Add tag",value:C,onChange:e=>E(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Z())},InputProps:{endAdornment:s.jsx(B,{position:"end",children:s.jsx(d,{onClick:Z,disabled:!C.trim()||S.length>=10,children:s.jsx(wa,{})})})},helperText:`${S.length}/10 tags ${p?"(at least 1 required)":""}`,sx:{mb:2}}),s.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:S.map(((e,t)=>s.jsx(q,{label:e,onDelete:()=>{return t=e,void j(S.filter((e=>e!==t)));var t},variant:"outlined"},t)))})]}),D&&s.jsx(x,{severity:"error",sx:{mb:2},children:D})]})}),s.jsx(P,{children:O?s.jsx(A,{onClick:te,variant:"contained",children:"Done"}):s.jsxs(s.Fragment,{children:[s.jsx(A,{onClick:te,disabled:R||U,children:"Cancel"}),F&&F.isPublic&&s.jsx(A,{onClick:async()=>{if(F){H(!0),L("");try{if(await ks.removeFromCommunity(F.id)){f(!1),_(!0);const e={...F,isPublic:!1};n?.(e)}else L("Failed to remove playlist from community")}catch(e){L("An error occurred while removing the playlist from community")}finally{H(!1)}}},disabled:R||U,color:"warning",startIcon:s.jsx(si,{}),children:U?"Removing...":"Remove from Community"}),s.jsx(A,{onClick:async()=>{if(r){z(!0),L("");try{if(vs.isAuthenticated()||await vs.autoSignIn(),p&&!v.trim())return L("Description is required for public playlists"),void z(!1);if(p&&0===S.length)return L("At least one tag is required for public playlists"),void z(!1);const e=K();if(!e.trim())return L("User profile is required for sharing"),void z(!1);if(F){const t={name:r.name,description:v.trim(),tags:S,isPublic:p,creator:e.trim(),clips:r.clips};if(await ks.updatePlaylist(F.id,t)){_(!0);const e={...F,...t};n?.(e)}else L("Failed to update shared playlist")}else{const t=((e,t="",r=[],n=!0)=>{const a=Is(),i=(new Date).toISOString();let o=e.drinkingSoundPath;return o&&!o.startsWith("{")&&(o=JSON.stringify({type:"audio",path:o,name:"Drinking Sound"})),{...e,isPublic:n,shareCode:Es(),creator:a.username,description:t,rating:0,downloadCount:0,tags:r,createdAt:e.createdAt||i,updatedAt:i,version:1,originalPlaylistId:e.id,drinkingSoundPath:o}})(r,v.trim(),S,p);t.isPublic=p,t.creator=e.trim(),await Ts(t)?(M(t.shareCode),_(!0),n?.(t)):L("Failed to save shared playlist")}}catch(e){L("An error occurred while sharing the playlist")}finally{z(!1)}}},variant:"contained",disabled:R||U,startIcon:s.jsx(pa,{}),children:R?F?"Updating...":"Sharing...":F?"Update Playlist":"Share Playlist"})]})})]}),O&&s.jsx(Us,{open:V,onClose:()=>Y(!1),playlist:I&&r?{...r,shareCode:I,isPublic:p,description:v,tags:S,creator:K(),rating:0,downloadCount:0,createdAt:r.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:1,originalPlaylistId:r.id}:null})]}):null},ic=({open:e,onClose:t,playlist:r,onSuccess:n})=>{const a=m(),[o,l]=i.useState(""),[c,p]=i.useState(""),[f,v]=i.useState(!0),[w,S]=i.useState([]),[j,C]=i.useState(""),[k,E]=i.useState(!1),[I,M]=i.useState(""),[R,z]=i.useState(!1);i.useEffect((()=>{r&&(l(r.name),p(r.description||""),v(r.isPublic),S(r.tags||[]),C(""),M(""),z(!1))}),[r]),i.useEffect((()=>{e||(M(""),z(!1),E(!1))}),[e]);const D=()=>{const e=j.trim();e&&!w.includes(e)&&(S([...w,e]),C(""))};return r?s.jsxs(g,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"90vh"}},children:[s.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[s.jsx(h,{variant:"h6",component:"div",children:"Edit Playlist"}),s.jsx(d,{onClick:t,size:"small",sx:{color:"text.secondary"},children:s.jsx(An,{})})]}),s.jsxs(b,{dividers:!0,children:[I&&s.jsx(x,{severity:"error",sx:{mb:2},children:I}),R&&s.jsx(x,{severity:"success",sx:{mb:2},children:"Playlist updated successfully!"}),s.jsx(T,{fullWidth:!0,label:"Playlist Name",value:o,onChange:e=>l(e.target.value),margin:"normal",required:!0,disabled:k}),s.jsx(u,{sx:{mt:2,mb:2},children:s.jsx(X,{control:s.jsx(Q,{checked:f,onChange:e=>v(e.target.checked),disabled:k}),label:s.jsxs(u,{children:[s.jsx(h,{variant:"body1",children:f?"Public Playlist":"Private Playlist"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:f?"Visible to all users in the community":"Only visible to you"})]})})}),s.jsx(T,{fullWidth:!0,label:"Description",value:c,onChange:e=>p(e.target.value),margin:"normal",multiline:!0,rows:3,required:f,disabled:k,helperText:f?"Required for public playlists":"Optional"}),s.jsxs(u,{sx:{mt:2},children:[s.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:["Tags ",f&&s.jsx("span",{style:{color:a.palette.error.main},children:"*"})]}),s.jsx(T,{fullWidth:!0,size:"small",placeholder:"Add a tag...",value:j,onChange:e=>C(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),D())},disabled:k,InputProps:{endAdornment:s.jsx(B,{position:"end",children:s.jsx(d,{onClick:D,disabled:!j.trim()||k,size:"small",children:s.jsx(wa,{})})})}}),s.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:w.map(((e,t)=>s.jsx(q,{label:e,onDelete:()=>{return t=e,void S(w.filter((e=>e!==t)));var t},deleteIcon:s.jsx(dn,{}),size:"small",disabled:k},t)))}),f&&0===w.length&&s.jsx(h,{variant:"caption",color:"error",sx:{mt:.5,display:"block"},children:"At least one tag is required for public playlists"})]}),s.jsx(T,{fullWidth:!0,label:"Share Code",value:r.shareCode,margin:"normal",InputProps:{readOnly:!0},helperText:"Share code cannot be changed"})]}),s.jsxs(P,{sx:{px:3,py:2},children:[s.jsx(A,{onClick:t,disabled:k,children:"Cancel"}),s.jsx(A,{onClick:async()=>{if(r){E(!0),M("");try{if(!o.trim())return M("Playlist name is required"),void E(!1);if(f&&!c.trim())return M("Description is required for public playlists"),void E(!1);if(f&&0===w.length)return M("At least one tag is required for public playlists"),void E(!1);const e={name:o.trim(),description:c.trim(),isPublic:f,tags:w};if(await ks.updatePlaylist(r.id,e)){z(!0);const a={...r,...e,updatedAt:(new Date).toISOString()};n&&n(a),setTimeout((()=>{t()}),1500)}else M("Failed to update playlist. Please try again.")}catch(e){M("An error occurred while updating the playlist.")}finally{E(!1)}}},variant:"contained",disabled:k||!o.trim(),startIcon:k?s.jsx(H,{size:16}):null,children:k?"Updating...":"Update Playlist"})]})]}):null};let oc=null;const sc=e=>e?e.toString():"0",lc=async(e,t=25)=>{try{if(!window.electronAPI?.ytDlpSearch)throw new Error("yt-dlp not available: Electron API not found");const r=await window.electronAPI.ytDlpSearch(e,t);if(!r.success)throw new Error(r.error||"yt-dlp search failed");const n=(Array.isArray(r.data)?r.data:[r.data]).filter((e=>e&&(e.id||e.url))).map(((e,t)=>{let r=e.id;if(!r&&e.url){const n=e.url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);r=n?n[1]:`ytdlp_${Date.now()}_${t}`}r||(r=`ytdlp_${Date.now()}_${t}`);const n=e.title||e.fulltitle||`Video ${t+1}`,a=e.uploader||e.channel||e.uploader_id||"Unknown Channel",i=(e=>{if(!e)return"PT0S";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%60);let a="PT";return t>0&&(a+=`${t}H`),r>0&&(a+=`${r}M`),n>0&&(a+=`${n}S`),a||"PT0S"})(e.duration||0);return{id:r,title:n,channelTitle:a,duration:i,thumbnail:e.thumbnail||e.thumbnails?.[0]?.url||`https://img.youtube.com/vi/${r}/mqdefault.jpg`,description:e.description||"",publishedAt:e.upload_date?new Date(e.upload_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")).toISOString():(new Date).toISOString(),viewCount:sc(e.view_count||0),likeCount:sc(e.like_count||0)}}));return{videos:n,totalResults:1e6,resultsPerPage:t,nextPageToken:"ytdlp_page_2",source:"yt-dlp"}}catch(vz){throw vz.message?.includes("not found")||vz.message?.includes("command not found")?new Error("yt-dlp is not installed. Please install yt-dlp: pip install yt-dlp"):vz.message?.includes("network")||vz.message?.includes("connection")?new Error("Network error: Please check your internet connection and try again."):vz.message?.includes("No module named")?new Error("yt-dlp Python module not found. Please install: pip install yt-dlp"):new Error(`yt-dlp search failed: ${vz.message||"Unknown error"}`)}},cc=async(e=!1)=>{try{if(null!==oc&&!e)return oc;if(!window.electronAPI?.ytDlpCheckAvailability)return oc=!1,!1;const t=await window.electronAPI.ytDlpCheckAvailability();return oc=t.available,t.available,oc}catch(vz){return oc=!1,!1}},uc=e=>{const t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);return t?3600*parseInt(t[1]||"0",10)+60*parseInt(t[2]||"0",10)+parseInt(t[3]||"0",10):0},dc=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,hc=(e,t=0,r=60)=>({id:`${e.id}_${t}_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,videoId:e.id,title:e.title,artist:e.channelTitle,startTime:t,duration:r,thumbnail:e.thumbnail}),pc=e=>{try{const t=fc().filter((t=>t.id!==e.id));return t.push(e),localStorage.setItem("youtube_playlists",JSON.stringify(t)),!0}catch(vz){return!1}},fc=()=>{try{const e=localStorage.getItem("youtube_playlists");return e?JSON.parse(e):[]}catch(vz){return[]}},mc=e=>{try{const t=fc().filter((t=>t.id!==e));localStorage.setItem("youtube_playlists",JSON.stringify(t))}catch(vz){}},gc=()=>`youtube_playlist_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,yc=e=>{if(!e.clips||0===e.clips.length)return null;const t=e.clips.filter((e=>e.thumbnail&&""!==e.thumbnail.trim()));return 0===t.length?null:t[Math.floor(Math.random()*t.length)].thumbnail},bc=e=>{try{const t=fc(),r=t.findIndex((t=>t.id===e));if(-1===r)return null;const n=t[r],a=yc(n);if(!a)return null;const i={...n,imagePath:a,thumbnailType:"random",lastThumbnailUpdate:(new Date).toISOString()};return t[r]=i,localStorage.setItem("youtube_playlists",JSON.stringify(t)),i}catch(vz){return null}},xc=(e,t)=>{try{const r=fc(),n=r.findIndex((t=>t.id===e));if(-1===n)return null;const a={...r[n],imagePath:t,thumbnailType:"custom",lastThumbnailUpdate:(new Date).toISOString()};return r[n]=a,localStorage.setItem("youtube_playlists",JSON.stringify(r)),a}catch(vz){return null}},vc=e=>{try{const t=fc(),r=t.findIndex((t=>t.id===e));if(-1===r)return null;const n={...t[r],imagePath:void 0,thumbnailType:void 0,lastThumbnailUpdate:void 0};return Object.keys(n).forEach((e=>{void 0===n[e]&&delete n[e]})),t[r]=n,localStorage.setItem("youtube_playlists",JSON.stringify(t)),n}catch(vz){return null}},wc=(e,t)=>e.map((e=>{const r=t[e.id]||{startTime:0,duration:60};return hc(e,r.startTime,r.duration)})),Sc=(e,t)=>{const r=Math.max(0,e-t);return Math.floor(Math.random()*(r+1))},jc=e=>{const t=new Set,r=e.clips.map(((e,r)=>{if(t.has(e.id)){const n=`${e.videoId}_${e.startTime}_${Date.now()}_${Math.random().toString(36).substr(2,6)}_${r}`;return t.add(n),{...e,id:n}}return t.add(e.id),e}));return{...e,clips:r}},Cc=e=>{if(!e)return"";const t=parseInt(e);return t>=1e9?`${(t/1e9).toFixed(1)}B views`:t>=1e6?`${(t/1e6).toFixed(1)}M views`:t>=1e3?`${(t/1e3).toFixed(1)}K views`:`${t} views`},kc=e=>{if(!e)return"";const t=new Date(e),r=(new Date).getTime()-t.getTime(),n=Math.floor(r/864e5);if(n<1){const e=Math.floor(r/36e5);if(e<1){const e=Math.floor(r/6e4);return`${e} minute${1!==e?"s":""} ago`}return`${e} hour${1!==e?"s":""} ago`}if(n<7)return`${n} day${1!==n?"s":""} ago`;if(n<30){const e=Math.floor(n/7);return`${e} week${1!==e?"s":""} ago`}if(n<365){const e=Math.floor(n/30);return`${e} month${1!==e?"s":""} ago`}{const e=Math.floor(n/365);return`${e} year${1!==e?"s":""} ago`}},Pc=async(e,t=5,r,n="relevance")=>{try{if(!window.electronAPI?.ytDlpChannelSearch)throw new Error("This feature requires the desktop app. Please use the Electron version of PHat5.");const a=await window.electronAPI.ytDlpChannelSearch(e,t,r,n);if(!a.success)throw new Error(a.error||"Channel search failed");const i=(a.data.channels||[]).map((e=>({id:e.id,title:e.title,description:e.description||"",thumbnail:e.thumbnail||"",subscriberCount:e.subscriber_count?.toString()||"",videoCount:e.video_count?.toString()||"",customUrl:e.url||"",channelType:e.channel_type||"Channel",isTopicChannel:e.is_topic_channel||!1,isVevoChannel:e.is_vevo_channel||!1,isMusicChannel:e.is_music_channel||!1,latestVideoTitle:e.latest_video_title||"",latestVideoDate:e.latest_video_date||""})));return{channels:i,pagination:{totalResults:a.data.totalResults||0,currentPage:a.data.currentPage||1,totalPages:a.data.totalPages||1,nextPageToken:a.data.nextPageToken,prevPageToken:a.data.prevPageToken,resultsPerPage:a.data.resultsPerPage||t}}}catch(vz){throw vz}},Ac=async(e,t,r={})=>{const{maxResults:n=5,pageToken:a,sortOrder:i="relevance"}=r;try{return await Pc(e,n,a,i)}catch(vz){let t="Channel search failed";const r=vz.message||"";throw r.includes("yt-dlp is not installed")?t="yt-dlp is not installed. Please install it with: pip install yt-dlp":r.includes("desktop app")||r.includes("Electron")?t="This feature requires the desktop app. Please use the Electron version of PHat5.":r.includes("network")||r.includes("connection")?t="Network error: Please check your internet connection and try again.":r.includes("timeout")?t="Search timed out. Please try again with a more specific search term.":r&&(t=r),new Error(t)}},Ec=async(e,t=25,r)=>{try{if(!window.electronAPI?.ytDlpChannelVideos)throw new Error("yt-dlp channel videos not available: Electron API not found");const n=await window.electronAPI.ytDlpChannelVideos(e,t,r);if(!n.success)throw new Error(n.error||"yt-dlp channel videos failed");const a=(Array.isArray(n.data.videos)?n.data.videos:[]).map((e=>({id:e.id||e.video_id||"",title:e.title||"Unknown Title",channelTitle:e.channel||e.uploader||"Unknown Channel",duration:e.duration_string||Ic(e.duration)||"PT0S",thumbnail:e.thumbnail||e.thumbnails?.[0]?.url||"",description:e.description||"",publishedAt:e.upload_date?Mc(e.upload_date):(new Date).toISOString(),viewCount:e.view_count?.toString()||"0",likeCount:e.like_count?.toString()||"0"})));return{videos:a,nextPageToken:n.data.nextPageToken,prevPageToken:n.data.prevPageToken,totalResults:n.data.totalResults||a.length,resultsPerPage:t,source:"yt-dlp"}}catch(vz){throw vz.message?.includes("not found")||vz.message?.includes("command not found")?new Error("yt-dlp is not installed. Please install yt-dlp: pip install yt-dlp"):vz.message?.includes("network")||vz.message?.includes("connection")?new Error("Network error: Please check your internet connection and try again."):new Error(`Channel videos failed: ${vz.message||"Unknown error"}`)}},Ic=e=>{if(!e||e<=0)return"PT0S";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%60);let a="PT";return t>0&&(a+=`${t}H`),r>0&&(a+=`${r}M`),n>0&&(a+=`${n}S`),"PT"===a?"PT0S":a},Mc=e=>{if(!e)return(new Date).toISOString();if(8===e.length){const t=e.substring(0,4),r=e.substring(4,6),n=e.substring(6,8);return new Date(`${t}-${r}-${n}`).toISOString()}return new Date(e).toISOString()},Tc=async(e,t,r={})=>{const{maxResults:n=25,pageToken:a}=r;try{return await Ec(e,n,a)}catch(vz){try{const a=`site:youtube.com/channel/${e}`;return await zc(a,t,{...r,maxResults:Math.min(n,25),useYtDlp:!0})}catch(i){return{videos:[],totalResults:0,resultsPerPage:n,nextPageToken:null,prevPageToken:null,error:"Unable to load channel videos due to YouTube restrictions. This channel may require sign-in or may be temporarily unavailable."}}}},Rc=async(e,t=25,r=!1)=>{try{if(await cc(r))return await lc(e,t);throw new Error("yt-dlp not available")}catch(vz){throw vz}},zc=async(e,t,r={})=>{const{maxResults:n=25,useYtDlp:a=!0,forceYtDlpCheck:i=!1}=r;if(a)try{return await Rc(e,n,i)}catch(vz){}throw new Error("No authentication credentials provided and yt-dlp is not available. Please configure YouTube API key or sign in with Google OAuth.")},Dc=async(e,t=50)=>{try{if(!window.electronAPI?.ytDlpGetPlaylistVideos)throw new Error("yt-dlp playlist extraction not available: Electron API not found");const r=await window.electronAPI.ytDlpGetPlaylistVideos(e,t);if(!r.success)throw new Error(r.error||"yt-dlp playlist extraction failed");const n=(Array.isArray(r.data)?r.data:[r.data]).filter((e=>e&&e.id)).map(((e,t)=>{const r=e.id||`playlist_video_${Date.now()}_${t}`;return{id:r,title:e.title||e.fulltitle||"Unknown Title",channelTitle:e.uploader||e.channel||e.uploader_id||"Unknown Channel",duration:Ic(e.duration||0),thumbnail:e.thumbnail||e.thumbnails?.[0]?.url||`https://img.youtube.com/vi/${r}/mqdefault.jpg`,description:e.description||"",publishedAt:e.upload_date?new Date(e.upload_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")).toISOString():(new Date).toISOString(),viewCount:Cc(e.view_count||0),likeCount:Cc(e.like_count||0)}}));return{videos:n,totalResults:r.totalVideos||n.length,resultsPerPage:t,nextPageToken:null,source:"yt-dlp-playlist"}}catch(vz){throw vz}},Lc=async(e,t,r={})=>{const{maxResults:n=50}=r;try{return await Dc(e,n)}catch(vz){let t="Playlist extraction failed";const r=vz.message||"";throw r.includes("Electron API not found")?t="This feature requires the desktop app. Please use the Electron version of PHat5.":r.includes("yt-dlp not available")?t="yt-dlp is not installed or not available. Please install yt-dlp to use this feature.":r.includes("playlist extraction failed")&&(t="Failed to extract playlist videos. The playlist may be private or unavailable."),new Error(t)}},Oc=Object.freeze(Object.defineProperty({__proto__:null,cleanupAllPlaylistDuplicateIds:()=>{try{const e=fc();let t=!1;const r=e.map((e=>{const r=e.clips.map((e=>e.id));return r.filter(((e,t)=>r.indexOf(e)!==t)).length>0?(t=!0,jc(e)):e}));t&&localStorage.setItem("youtube_playlists",JSON.stringify(r))}catch(vz){}},clearPlaylistThumbnail:vc,createBulkClipsFromVideos:wc,createClipFromVideo:hc,deleteYouTubePlaylist:mc,fixDuplicateClipIds:jc,formatPublishDate:kc,formatTime:dc,formatViewCount:Cc,generatePlaylistId:gc,generateRandomStartTime:Sc,getChannelVideos:Tc,getChannelVideosWithYtDlp:Ec,getPlaylistVideos:Lc,getPlaylistVideosWithYtDlp:Dc,getRandomPlaylistThumbnail:yc,getYouTubePlaylists:fc,parseDuration:uc,saveYouTubePlaylist:pc,searchYouTubeChannels:Ac,searchYouTubeChannelsWithYtDlp:Pc,searchYouTubeEnhanced:zc,searchYouTubeWithYtDlp:Rc,setCustomImageForPlaylist:xc,setRandomThumbnailForPlaylist:bc},Symbol.toStringTag,{value:"Module"})),_c="user_playlists",Fc="user_youtube_playlists",$c=new class{isAvailable(){return Vo()&&vs.isAuthenticated()}getCurrentUserId(){const e=vs.getCurrentUser();return e?.uid||null}async getRegularPlaylists(){const e=this.getCurrentUserId();if(!this.isAvailable()||!e)return this.getRegularPlaylistsLocal();try{const t=dt(ut(Go,_c),pt("userId","==",e),ft("date","desc")),r=await ht(t);return r.docs.map((e=>({...e.data(),id:e.id,lastSyncAt:(new Date).toISOString()})))}catch(vz){return this.getRegularPlaylistsLocal()}}async saveRegularPlaylist(e){const t=this.getCurrentUserId(),r=this.saveRegularPlaylistLocal(e);if(this.isAvailable()&&t)try{const r={...e,userId:t,lastSyncAt:st()},n=await this.getFirebasePlaylistDoc(e.id,"regular");return n?await gt(n.ref,r):await ct(ut(Go,_c),r),!0}catch(vz){return r}return r}async deleteRegularPlaylist(e){const t=this.deleteRegularPlaylistLocal(e);if(this.isAvailable())try{const t=await this.getFirebasePlaylistDoc(e,"regular");t&&await bt(t.ref)}catch(vz){}return t}async updateRegularPlaylist(e,t){const r=this.getRegularPlaylistsLocal(),n=r.findIndex((t=>t.id===e));if(n>=0&&(Object.assign(r[n],t),this.saveRegularPlaylistsLocal(r)),this.isAvailable())try{const r=await this.getFirebasePlaylistDoc(e,"regular");r&&await gt(r.ref,{...t,lastSyncAt:st()})}catch(vz){}return!0}async getYouTubePlaylists(){const e=this.getCurrentUserId();if(!this.isAvailable()||!e)return fc();try{const t=dt(ut(Go,Fc),pt("userId","==",e),ft("date","desc")),r=await ht(t);return r.docs.map((e=>({...e.data(),id:e.id})))}catch(vz){return fc()}}async saveYouTubePlaylist(e){const t=this.getCurrentUserId(),r=pc(e);if(this.isAvailable()&&t)try{const r={...e,userId:t,lastSyncAt:st()},n=await this.getFirebasePlaylistDoc(e.id,"youtube");return n?await gt(n.ref,r):await ct(ut(Go,Fc),r),!0}catch(vz){return r}return r}async deleteYouTubePlaylist(e){const t=mc(e);if(this.isAvailable())try{const t=await this.getFirebasePlaylistDoc(e,"youtube");t&&await bt(t.ref)}catch(vz){}return t}async updateYouTubePlaylist(e,t){const r=fc(),n=r.findIndex((t=>t.id===e));if(n>=0&&(Object.assign(r[n],t),pc(r[n])),this.isAvailable())try{const r=await this.getFirebasePlaylistDoc(e,"youtube");r&&await gt(r.ref,{...t,lastSyncAt:st()})}catch(vz){}return!0}async syncAllPlaylists(){if(this.isAvailable())try{await this.syncRegularPlaylists(),await this.syncYouTubePlaylists()}catch(vz){throw vz}}async syncPlaylist(e,t){if(!this.isAvailable())return!1;try{if("regular"===t){const t=this.getRegularPlaylistsLocal().find((t=>t.id===e));t&&await this.saveRegularPlaylist(t)}else{const t=fc().find((t=>t.id===e));t&&await this.saveYouTubePlaylist(t)}return!0}catch(vz){return!1}}async migrateLocalPlaylistsToUser(){const e=this.getCurrentUserId();if(!this.isAvailable()||!e)return{success:!1,migratedCount:0,errors:["User must be authenticated to migrate playlists"]};const t=[];let r=0;try{const n=this.getRegularPlaylistsLocal();for(const i of n)try{await this.saveRegularPlaylist({...i,userId:e}),r++}catch(vz){t.push(`Failed to migrate regular playlist "${i.name}": ${vz.message}`)}const a=fc();for(const e of a)try{await this.saveYouTubePlaylist(e),r++}catch(vz){t.push(`Failed to migrate YouTube playlist "${e.name}": ${vz.message}`)}return{success:!0,migratedCount:r,errors:t}}catch(vz){return{success:!1,migratedCount:r,errors:[...t,vz.message]}}}getRegularPlaylistsLocal(){try{return[]}catch(vz){return[]}}saveRegularPlaylistLocal(e){try{return!0}catch(vz){return!1}}saveRegularPlaylistsLocal(e){try{return!0}catch(vz){return!1}}deleteRegularPlaylistLocal(e){try{return!0}catch(vz){return!1}}async getFirebasePlaylistDoc(e,t){const r="regular"===t?_c:Fc,n=this.getCurrentUserId();if(!n)return null;try{const t=dt(ut(Go,r),pt("id","==",e),pt("userId","==",n)),a=await ht(t);return a.empty?null:a.docs[0]}catch(vz){return null}}async syncRegularPlaylists(){const e=this.getRegularPlaylistsLocal();for(const t of e)try{await this.saveRegularPlaylist(t)}catch(vz){}}async syncYouTubePlaylists(){const e=fc();for(const t of e)try{await this.saveYouTubePlaylist(t)}catch(vz){}}},Nc={status:"synced"},Wc=Ys()(Ks(Qs(Ul(((e,t)=>({regularPlaylists:[],youtubePlaylists:[],isLoading:!1,isSyncing:!1,isLoadingRegular:!1,isLoadingYouTube:!1,syncStatus:{},lastSyncAt:null,pendingSyncCount:0,lastError:null,isAuthenticated:vs.isAuthenticated(),currentUserId:vs.getCurrentUser()?.uid||null,loadRegularPlaylists:async()=>{e((e=>{e.isLoadingRegular=!0,e.lastError=null}));try{const t=await $c.getRegularPlaylists();e((e=>{e.regularPlaylists=t,e.isLoadingRegular=!1}))}catch(vz){e((e=>{e.lastError=vz.message||"Failed to load regular playlists",e.isLoadingRegular=!1}))}},saveRegularPlaylist:async t=>{try{const r=await $c.saveRegularPlaylist(t);return r&&e((e=>{const r=e.regularPlaylists.findIndex((e=>e.id===t.id));r>=0?e.regularPlaylists[r]=t:e.regularPlaylists.push(t),e.syncStatus[t.id]={status:"synced",lastSyncAt:(new Date).toISOString()}})),r}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to save playlist",e.syncStatus[t.id]={status:"error",error:vz.message}})),!1}},deleteRegularPlaylist:async t=>{try{const r=await $c.deleteRegularPlaylist(t);return r&&e((e=>{e.regularPlaylists=e.regularPlaylists.filter((e=>e.id!==t)),delete e.syncStatus[t]})),r}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to delete playlist"})),!1}},updateRegularPlaylist:async(t,r)=>{try{const n=await $c.updateRegularPlaylist(t,r);return n&&e((e=>{const n=e.regularPlaylists.findIndex((e=>e.id===t));n>=0&&(Object.assign(e.regularPlaylists[n],r),e.syncStatus[t]={status:"synced",lastSyncAt:(new Date).toISOString()})})),n}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to update playlist"})),!1}},loadYouTubePlaylists:async()=>{e((e=>{e.isLoadingYouTube=!0,e.lastError=null}));try{const t=await $c.getYouTubePlaylists();e((e=>{e.youtubePlaylists=t,e.isLoadingYouTube=!1}))}catch(vz){e((e=>{e.lastError=vz.message||"Failed to load YouTube playlists",e.isLoadingYouTube=!1}))}},saveYouTubePlaylist:async t=>{try{const r=await $c.saveYouTubePlaylist(t);return r&&e((e=>{const r=e.youtubePlaylists.findIndex((e=>e.id===t.id));r>=0?e.youtubePlaylists[r]=t:e.youtubePlaylists.push(t),e.syncStatus[t.id]={status:"synced",lastSyncAt:(new Date).toISOString()}})),r}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to save YouTube playlist",e.syncStatus[t.id]={status:"error",error:vz.message}})),!1}},deleteYouTubePlaylist:async t=>{try{const r=await $c.deleteYouTubePlaylist(t);return r&&e((e=>{e.youtubePlaylists=e.youtubePlaylists.filter((e=>e.id!==t)),delete e.syncStatus[t]})),r}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to delete YouTube playlist"})),!1}},updateYouTubePlaylist:async(t,r)=>{try{const n=await $c.updateYouTubePlaylist(t,r);return n&&e((e=>{const n=e.youtubePlaylists.findIndex((e=>e.id===t));n>=0&&(Object.assign(e.youtubePlaylists[n],r),e.syncStatus[t]={status:"synced",lastSyncAt:(new Date).toISOString()})})),n}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to update YouTube playlist"})),!1}},syncAllPlaylists:async()=>{const r=t();if(!r.isSyncing&&r.isAuthenticated){e((e=>{e.isSyncing=!0,e.lastError=null}));try{await $c.syncAllPlaylists(),await t().loadRegularPlaylists(),await t().loadYouTubePlaylists(),e((e=>{e.isSyncing=!1,e.lastSyncAt=(new Date).toISOString(),e.pendingSyncCount=0}))}catch(vz){e((e=>{e.lastError=vz.message||"Failed to sync playlists",e.isSyncing=!1}))}}},syncPlaylist:async(t,r)=>{try{e((e=>{e.syncStatus[t]={status:"syncing"}}));const n=await $c.syncPlaylist(t,r);return e((e=>{e.syncStatus[t]={status:n?"synced":"error",lastSyncAt:n?(new Date).toISOString():void 0,error:n?void 0:"Sync failed"}})),n}catch(vz){return e((e=>{e.syncStatus[t]={status:"error",error:vz.message}})),!1}},forceSyncNow:async()=>{await t().syncAllPlaylists()},refreshAuthState:()=>{const r=vs.isAuthenticated(),n=vs.getCurrentUser()?.uid||null;e((e=>{e.isAuthenticated=r,e.currentUserId=n})),r&&(t().loadRegularPlaylists(),t().loadYouTubePlaylists())},clearError:()=>{e((e=>{e.lastError=null}))},getPlaylistSyncStatus:e=>t().syncStatus[e]||Nc,getPendingSyncCount:()=>{const e=t();return Object.values(e.syncStatus).filter((e=>"pending"===e.status)).length},migrateLocalPlaylistsToUser:async()=>{if(!t().isAuthenticated)return{success:!1,migratedCount:0,errors:["User must be authenticated to migrate playlists"]};try{const e=await $c.migrateLocalPlaylistsToUser();return e.success&&e.migratedCount>0&&(await t().loadRegularPlaylists(),await t().loadYouTubePlaylists()),e}catch(vz){return{success:!1,migratedCount:0,errors:[vz.message||"Migration failed"]}}}})))),{name:"playlist-store"}));vs.onAuthStateChanged((e=>{Wc.getState().refreshAuthState()})),vs.isAuthenticated()&&setTimeout((()=>{const e=Wc.getState();e.loadRegularPlaylists(),e.loadYouTubePlaylists()}),100);const Uc=e=>{const[t,r,n]=(e=>{const t=parseInt(e.slice(1,3),16)/255,r=parseInt(e.slice(3,5),16)/255,n=parseInt(e.slice(5,7),16)/255,a=Math.max(t,r,n),i=Math.min(t,r,n);let o=0,s=0;const l=(a+i)/2;if(a!==i){const e=a-i;switch(s=l>.5?e/(2-a-i):e/(a+i),a){case t:o=(r-n)/e+(r<n?6:0);break;case r:o=(n-t)/e+2;break;case n:o=(t-r)/e+4}o/=6}return[360*o,100*s,100*l]})(e);return((e,t,r)=>{e/=360,r/=100;const n=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e);let a,i,o;if(0==(t/=100))a=i=o=r;else{const s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;a=n(l,s,e+1/3),i=n(l,s,e),o=n(l,s,e-1/3)}const s=e=>{const t=Math.round(255*e).toString(16);return 1===t.length?"0"+t:t};return`#${s(a)}${s(i)}${s(o)}`})((t+180)%360,r,n)},Bc=[{id:"midnight",name:"Midnight Pro",primary:"#6366f1",secondary:"#8b5cf6",darkBackground:"#0f0f23",darkPaper:"#1a1a2e",lightBackground:"#f8fafc",lightPaper:"#ffffff"},{id:"ocean",name:"Ocean Depth",primary:"#0ea5e9",secondary:"#06b6d4",darkBackground:"#0c1426",darkPaper:"#1e293b",lightBackground:"#f0f9ff",lightPaper:"#ffffff"},{id:"forest",name:"Forest Calm",primary:"#059669",secondary:"#10b981",darkBackground:"#0f1419",darkPaper:"#1f2937",lightBackground:"#f0fdf4",lightPaper:"#ffffff"},{id:"sunset",name:"Warm Sunset",primary:"#ea580c",secondary:"#f97316",darkBackground:"#2d1b0f",darkPaper:"#3d2817",lightBackground:"#fff7ed",lightPaper:"#ffffff"},{id:"rose",name:"Rose Garden",primary:"#e11d48",secondary:"#f43f5e",darkBackground:"#1f1012",darkPaper:"#2d1b20",lightBackground:"#fff1f2",lightPaper:"#ffffff"},{id:"sage",name:"Sage Wisdom",primary:"#0d9488",secondary:"#14b8a6",darkBackground:"#0f1b1a",darkPaper:"#1f2937",lightBackground:"#f0fdfa",lightPaper:"#ffffff"},{id:"lavender",name:"Lavender Dreams",primary:"#8b5cf6",secondary:"#a78bfa",darkBackground:"#1e1b2e",darkPaper:"#2d2438",lightBackground:"#faf5ff",lightPaper:"#ffffff"},{id:"custom",name:"Custom",primary:"#6366f1",secondary:"#8b5cf6",darkBackground:"#0f0f23",darkPaper:"#1a1a2e",lightBackground:"#f8fafc",lightPaper:"#ffffff"}],Hc="powerHour_customThemes",Vc=()=>{const e=localStorage.getItem(Hc);if(e)try{return JSON.parse(e)}catch{return[]}return[]},Yc=()=>[...Bc,...Vc()],Gc=i.createContext(void 0),qc=()=>{const e=i.useContext(Gc);if(!e)throw new Error("useThemeContext must be used within a ThemeContextProvider");return e},Jc="powerHour_selectedTheme",Kc="powerHour_themeMode",Xc=({children:e})=>{const[t,r]=i.useState((()=>Yc())),[n,a]=i.useState((()=>{const e=localStorage.getItem(Jc),t=Yc();return e&&t.find((t=>t.id===e))||Bc[0]})),[o,l]=i.useState((()=>localStorage.getItem(Kc)||"dark"));i.useEffect((()=>{localStorage.setItem(Jc,n.id)}),[n]),i.useEffect((()=>{localStorage.setItem(Kc,o)}),[o]);const c=()=>{r(Yc())},u=((e,t)=>{const r="dark"===t,n=Uc(e.primary),a=Uc(e.secondary);return Z({palette:{mode:t,primary:{main:e.primary,light:r?e.secondary:e.primary,dark:e.primary},secondary:{main:e.secondary},background:{default:r?e.darkBackground:e.lightBackground,paper:r?e.darkPaper:e.lightPaper},text:{primary:r?"#f8fafc":"#1e293b",secondary:r?"#cbd5e1":"#64748b"},divider:r?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.06)",action:{hover:r?"rgba(255, 255, 255, 0.04)":"rgba(0, 0, 0, 0.02)",selected:r?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"},complementary:{primary:n,secondary:a}},shape:{borderRadius:12},typography:{fontFamily:'"Inter", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',h1:{fontSize:"2.5rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.025em"},h2:{fontSize:"2rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.025em"},h3:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4,letterSpacing:"-0.02em"},h4:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4,letterSpacing:"-0.015em"},h5:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.4,letterSpacing:"-0.01em"},h6:{fontSize:"1rem",fontWeight:600,lineHeight:1.5,letterSpacing:"-0.005em"},body1:{fontSize:"1rem",lineHeight:1.6,letterSpacing:"0.00938em"},body2:{fontSize:"0.875rem",lineHeight:1.5,letterSpacing:"0.01071em"},button:{fontWeight:500,letterSpacing:"0.02857em",textTransform:"none"},caption:{fontSize:"0.75rem",lineHeight:1.4,letterSpacing:"0.03333em"}},components:{MuiContainer:{styleOverrides:{root:{paddingLeft:0,paddingRight:0,marginLeft:0,marginRight:0,maxWidth:"100%"}}},MuiButton:{styleOverrides:{root:{borderRadius:10,padding:"10px 20px",fontSize:"0.875rem",fontWeight:500,boxShadow:"none","&:hover":{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},contained:{background:`linear-gradient(135deg, ${e.primary} 0%, ${e.secondary} 100%)`,"&:hover":{background:`linear-gradient(135deg, ${e.primary} 0%, ${e.secondary} 100%)`,filter:"brightness(1.1)"}},outlined:{borderWidth:"1.5px","&:hover":{borderWidth:"1.5px",backgroundColor:r?"rgba(255, 255, 255, 0.04)":"rgba(0, 0, 0, 0.02)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:r?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(0, 0, 0, 0.08)",border:r?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:r?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(0, 0, 0, 0.12)"}}}},MuiPaper:{styleOverrides:{root:{borderRadius:12,border:r?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500,fontSize:"0.8125rem"}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:10,"& fieldset":{borderWidth:"1.5px"},"&:hover fieldset":{borderWidth:"1.5px"},"&.Mui-focused fieldset":{borderWidth:"2px"}}}}},MuiIconButton:{styleOverrides:{root:{borderRadius:10,transition:"all 0.2s ease-in-out","&:hover":{transform:"scale(1.05)",backgroundColor:r?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}}}},MuiTableCell:{styleOverrides:{root:{borderBottom:r?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)",padding:"12px 16px"},head:{fontWeight:600,fontSize:"0.875rem",letterSpacing:"0.02em",textTransform:"uppercase",color:r?"#cbd5e1":"#64748b"}}},MuiDialog:{styleOverrides:{paper:{borderRadius:16,border:r?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)"}}},MuiMenu:{styleOverrides:{paper:{borderRadius:12,border:r?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)",boxShadow:r?"0 8px 30px rgba(0, 0, 0, 0.4)":"0 8px 30px rgba(0, 0, 0, 0.12)"}}}}})})(n,o),d={currentTheme:n,mode:o,setTheme:e=>{const r=t.find((t=>t.id===e))||Bc[0];a(r)},toggleMode:()=>{l((e=>"dark"===e?"light":"dark"))},availableThemes:t,saveCustomTheme:e=>{(e=>{const t=Vc().filter((t=>t.id!==e.id));t.push({...e,isCustom:!0}),localStorage.setItem(Hc,JSON.stringify(t))})(e),c(),a(e)},deleteCustomTheme:e=>{(e=>{const t=Vc().filter((t=>t.id!==e));localStorage.setItem(Hc,JSON.stringify(t))})(e),c(),n.id===e&&a(Bc[0])},refreshThemes:c};return s.jsx(Gc.Provider,{value:d,children:s.jsx(ee,{theme:u,children:e})})};function Qc(e){if(null==e)return null;if(Array.isArray(e))return e.map(Qc);if("object"==typeof e){const t={};for(const[r,n]of Object.entries(e))void 0!==n&&(t[r]=Qc(n));return t}return e}const Zc="collaborative_playlists",eu="collaboration_invitations",tu="playlist_operations",ru="collaboration_events",nu="collaboration_notifications",au="user_presence",iu=new class{constructor(){r(this,"unsubscribeFunctions",new Map)}isAvailable(){return Vo()&&!!Go}getCurrentUser(){return vs.getCurrentUser()}async createCollaborativePlaylist(e){if(!this.isAvailable())return null;const t=this.getCurrentUser();if(!t)return null;try{const r=`collab_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n={userId:t.uid,displayName:t.displayName||"Unknown User",permission:"owner",joinedAt:st(),lastActiveAt:st(),isOnline:!0,presence:"online"};t.email&&(n.email=t.email);const a=Qc({...e,collaborationId:r,ownerId:t.uid,collaborators:{[t.uid]:n},activeUsers:[t.uid],createdAt:st(),updatedAt:st(),lastCollaborativeActivity:st(),version:1,operationHistory:[]});return(await ct(ut(Go,Zc),a)).id}catch(vz){throw vz}}async getCollaborativePlaylist(e){if(!this.isAvailable())return null;try{const t=it(Go,Zc,e),r=await ot(t);return r.exists()?{id:r.id,...r.data()}:null}catch(vz){return null}}async updateCollaborativePlaylist(e,t){if(!this.isAvailable())return!1;if(!this.getCurrentUser())return!1;try{const r=it(Go,Zc,e),n=Qc({...t,updatedAt:st(),lastCollaborativeActivity:st()});return await gt(r,n),!0}catch(vz){return!1}}async deleteCollaborativePlaylist(e){if(!this.isAvailable())return!1;const t=this.getCurrentUser();if(!t)return!1;try{const r=await this.getCollaborativePlaylist(e);if(!r||r.ownerId!==t.uid)return!1;const n=xt(Go),a=it(Go,Zc,e);n.delete(a);const i=dt(ut(Go,tu),pt("playlistId","==",e));(await ht(i)).docs.forEach((e=>{n.delete(e.ref)}));const o=dt(ut(Go,ru),pt("playlistId","==",e));return(await ht(o)).docs.forEach((e=>{n.delete(e.ref)})),await n.commit(),!0}catch(vz){return!1}}subscribeToPlaylist(e,t){if(!this.isAvailable())return()=>{};const r=it(Go,Zc,e),n=vt(r,(e=>{if(e.exists()){const r={id:e.id,...e.data()};t(r)}else t(null)}),(e=>{t(null)})),a=`playlist_${e}`;return this.unsubscribeFunctions.set(a,n),n}subscribeToOperations(e,t){if(!this.isAvailable())return()=>{};const r=dt(ut(Go,tu),pt("playlistId","==",e),ft("timestamp","desc"),mt(100)),n=vt(r,(e=>{const r=e.docs.map((e=>({id:e.id,...e.data()})));t(r)}),(e=>{t([])})),a=`operations_${e}`;return this.unsubscribeFunctions.set(a,n),n}subscribeToPresence(e,t){if(!this.isAvailable())return()=>{};const r=dt(ut(Go,au),pt("playlistId","==",e)),n=vt(r,(e=>{const r={};e.docs.forEach((e=>{const t=e.data();r[t.userId]=t})),t(r)}),(e=>{t({})})),a=`presence_${e}`;return this.unsubscribeFunctions.set(a,n),n}subscribeToNotifications(e){if(!this.isAvailable())return()=>{};const t=this.getCurrentUser();if(!t)return()=>{};const r=dt(ut(Go,nu),pt("toUserId","==",t.uid),ft("createdAt","desc"),mt(50)),n=vt(r,(t=>{const r=t.docs.map((e=>({id:e.id,...e.data()})));e(r)}),(t=>{e([])})),a=`notifications_${t.uid}`;return this.unsubscribeFunctions.set(a,n),n}subscribeToInvitations(e){if(!this.isAvailable())return()=>{};const t=this.getCurrentUser();if(!t)return()=>{};const r=dt(ut(Go,eu),pt("inviteeEmail","==",t.email||""),ft("createdAt","desc")),n=vt(r,(t=>{const r=t.docs.map((e=>({id:e.id,...e.data()})));e(r)}),(t=>{e([])})),a=`invitations_${t.uid}`;return this.unsubscribeFunctions.set(a,n),n}unsubscribeFromPlaylist(e){[`playlist_${e}`,`operations_${e}`,`presence_${e}`].forEach((e=>{const t=this.unsubscribeFunctions.get(e);t&&(t(),this.unsubscribeFunctions.delete(e))}))}unsubscribeAll(){this.unsubscribeFunctions.forEach((e=>e())),this.unsubscribeFunctions.clear()}async applyOperation(e,t){if(!this.isAvailable())return!1;const r=this.getCurrentUser();if(!r)return!1;try{const n={...t,playlistId:e,userId:r.uid,timestamp:st()};return await ct(ut(Go,tu),n),!0}catch(vz){return!1}}async updateUserPresence(e,t){if(!this.isAvailable())return!1;const r=this.getCurrentUser();if(!r)return!1;try{const n={...t,playlistId:e,timestamp:st()},a=it(Go,au,`${e}_${r.uid}`);return await gt(a,n),!0}catch(vz){try{const r={...t,playlistId:e,timestamp:st()};return await ct(ut(Go,au),r),!0}catch(n){return!1}}}async sendInvitation(e){if(!this.isAvailable())return!1;const t=this.getCurrentUser();if(!t)return!1;try{const r={...e,inviterId:t.uid,inviterName:t.displayName||"Unknown User",status:"pending",createdAt:st()};return await ct(ut(Go,eu),r),!0}catch(vz){return!1}}async createInvitationNotification(e){if(!this.isAvailable())return!1;try{const t=dt(ut(Go,"users"),pt("email","==",e.inviteeEmail)),r=await ht(t);if(r.empty)return!0;const n=r.docs[0].id,a={type:"invitation_received",playlistId:e.playlistId,playlistName:e.playlistName,fromUserId:e.inviterUserId,fromUserName:e.inviterName,toUserId:n,message:`${e.inviterName} invited you to collaborate on "${e.playlistName}"`,isRead:!1,createdAt:st(),data:{inviteCode:e.inviteCode,permission:e.permission,personalMessage:e.message}};return await ct(ut(Go,nu),a),!0}catch(vz){return!1}}async respondToInvitation(e,t){if(!this.isAvailable())return!1;const r=this.getCurrentUser();if(!r)return!1;try{const n=it(Go,eu,e),a=await ot(n);if(!a.exists())return!1;const i=a.data();if(await gt(n,{status:"accept"===t?"accepted":"declined",respondedAt:st()}),"accept"===t){const e=it(Go,Zc,i.playlistId);if((await ot(e)).exists()){const t={userId:r.uid,displayName:r.displayName||"Unknown User",email:r.email,permission:i.permission,joinedAt:st(),lastActiveAt:st(),isOnline:!0,presence:"online"};await gt(e,{[`collaborators.${r.uid}`]:t,activeUsers:wt(r.uid),lastCollaborativeActivity:st()})}}return!0}catch(vz){return!1}}async markNotificationAsRead(e){if(!this.isAvailable())return!1;try{const t=it(Go,nu,e);return await gt(t,{isRead:!0}),!0}catch(vz){return!1}}async getUserInvitations(){if(!this.isAvailable())return{sent:[],received:[]};const e=this.getCurrentUser();if(!e)return{sent:[],received:[]};try{const t=dt(ut(Go,eu),pt("inviterId","==",e.uid),ft("createdAt","desc")),r=(await ht(t)).docs.map((e=>({id:e.id,...e.data()}))),n=dt(ut(Go,eu),pt("inviteeEmail","==",e.email||""),ft("createdAt","desc")),a=await ht(n);return{sent:r,received:a.docs.map((e=>({id:e.id,...e.data()})))}}catch(vz){return{sent:[],received:[]}}}async convertToCollaborative(e,t){if(!this.isAvailable())return null;const r=this.getCurrentUser();if(!r)return null;try{const n=Math.random().toString(36).substr(2,8).toUpperCase(),a={userId:r.uid,displayName:r.displayName||"Unknown User",permission:"owner",joinedAt:st(),lastActiveAt:st(),isOnline:!0,presence:"online"};r.email&&(a.email=r.email);const i={name:e.name,description:`Collaborative version of "${e.name}"`,type:"youtube"===t?"youtube":"regular",isCollaborative:!0,status:"active",ownerId:r.uid,collaborators:{[r.uid]:a},defaultPermission:"editor",inviteCode:n,isPublic:!1,version:1,operationHistory:[],activeUsers:[r.uid],clips:e.clips||[],date:e.date||(new Date).toISOString(),lastCollaborativeActivity:st(),createdAt:st(),updatedAt:st(),originalPlaylistId:e.id,originalPlaylistType:t};e.drinkingSoundPath&&(i.drinkingSoundPath=e.drinkingSoundPath),e.imagePath&&(i.imagePath=e.imagePath);const o=await this.createCollaborativePlaylist(i);if(o)return o;throw new Error("Failed to create collaborative playlist")}catch(vz){return null}}async joinWithInviteCode(e){if(!this.isAvailable())return null;const t=this.getCurrentUser();if(!t)return null;try{const r=dt(ut(Go,Zc),pt("inviteCode","==",e.toUpperCase()),pt("status","==","active")),n=await ht(r);if(n.empty)return null;const a=n.docs[0],i={id:a.id,...a.data()};if(i.collaborators&&i.collaborators[t.uid])return i.id;const o={userId:t.uid,displayName:t.displayName||"Unknown User",permission:i.defaultPermission||"editor",joinedAt:st(),lastActiveAt:st(),isOnline:!0,presence:"online"};t.email&&(o.email=t.email);const s=it(Go,Zc,i.id);return await gt(s,{[`collaborators.${t.uid}`]:o,activeUsers:wt(t.uid),lastCollaborativeActivity:st(),updatedAt:st()}),i.id}catch(vz){return null}}async getUserCollaborations(){if(!this.isAvailable())return[];const e=this.getCurrentUser();if(!e)return[];try{const t=[],r=dt(ut(Go,Zc),pt("ownerId","==",e.uid),pt("status","==","active"));(await ht(r)).docs.forEach((e=>{t.push({id:e.id,...e.data()})}));const n=dt(ut(Go,Zc),pt("status","==","active"));return(await ht(n)).docs.forEach((r=>{const n={id:r.id,...r.data()};n.ownerId!==e.uid&&n.collaborators&&n.collaborators[e.uid]&&t.push(n)})),t}catch(vz){return[]}}async addCollaborator(e,t,r){if(!this.isAvailable())return!1;try{const n=it(Go,Zc,e),a={userId:t,displayName:"New Collaborator",permission:r,joinedAt:st(),lastActiveAt:st(),isOnline:!0,presence:"online"};return await gt(n,{[`collaborators.${t}`]:a,activeUsers:wt(t),updatedAt:st(),lastCollaborativeActivity:st()}),!0}catch(vz){return!1}}async removeCollaborator(e,t){if(!this.isAvailable())return!1;const r=this.getCurrentUser();if(!r)return!1;try{const n=it(Go,Zc,e),a=await this.getCollaborativePlaylist(e);return!(!a||a.ownerId!==r.uid&&t!==r.uid||(await gt(n,{[`collaborators.${t}`]:jt(),activeUsers:St(t),updatedAt:st(),lastCollaborativeActivity:st()}),0))}catch(vz){return!1}}},ou={activeCollaborations:{},userPresence:{},sentInvitations:[],receivedInvitations:[],notifications:[],unreadNotificationCount:0,connectionStatus:"disconnected",isLoading:!1,isJoiningCollaboration:!1,isSendingInvitation:!1,lastError:null,currentUserId:vs.getCurrentUser()?.uid||null,currentUserDisplayName:vs.getCurrentUser()?.displayName||null},su=e=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];let r=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n)+((r<<5)-r);return t[Math.abs(r)%t.length]},lu=Ys()(Ks(Qs(Ul(((e,t)=>({...ou,convertToCollaborative:async(r,n)=>{if(!vs.getCurrentUser())return e((e=>{e.lastError="User must be authenticated to convert playlists"})),null;if(!iu.isAvailable())return e((e=>{e.lastError="Firebase not available for collaboration features"})),null;e((e=>{e.isLoading=!0,e.lastError=null}));try{const a=await iu.convertToCollaborative(r,n);if(a)return t().subscribeToCollaborativePlaylist(a),e((e=>{e.isLoading=!1})),a;throw new Error("Failed to convert playlist to collaborative")}catch(vz){return e((e=>{e.isLoading=!1,e.lastError=vz.message||"Failed to convert playlist to collaborative"})),null}},createCollaborativePlaylist:async r=>{const n=vs.getCurrentUser();if(!n)return e((e=>{e.lastError="User must be authenticated to create collaborative playlists"})),"";e((e=>{e.isLoading=!0,e.lastError=null}));try{const a=Math.random().toString(36).substr(2,8).toUpperCase(),i={name:r.name,description:r.description,type:r.type,isCollaborative:!0,status:"active",ownerId:n.uid,collaborators:{},defaultPermission:r.defaultPermission,inviteCode:a,isPublic:r.isPublic,version:1,operationHistory:[],activeUsers:[],clips:r.initialClips||[],date:(new Date).toISOString(),lastCollaborativeActivity:Ct.now(),...r.drinkingSoundPath&&{drinkingSoundPath:r.drinkingSoundPath},...r.imagePath&&{imagePath:r.imagePath}},o=await iu.createCollaborativePlaylist(i);if(o)return t().subscribeToCollaborativePlaylist(o),e((e=>{e.isLoading=!1})),o;throw new Error("Failed to create collaborative playlist")}catch(vz){return e((e=>{e.isLoading=!1,e.lastError=vz.message||"Failed to create collaborative playlist"})),""}},joinCollaboration:async r=>{if(!vs.getCurrentUser())return e((e=>{e.lastError="User must be authenticated to join collaborations"})),!1;if(!iu.isAvailable())return e((e=>{e.lastError="Firebase not available for collaboration features"})),!1;e((e=>{e.isJoiningCollaboration=!0,e.lastError=null}));try{const n=await iu.joinWithInviteCode(r);if(n)return t().subscribeToCollaborativePlaylist(n),await t().refreshCollaborations(),e((e=>{e.isJoiningCollaboration=!1})),!0;throw new Error("Invalid invite code or playlist not found")}catch(vz){return e((e=>{e.isJoiningCollaboration=!1,e.lastError=vz.message||"Failed to join collaboration"})),!1}},leaveCollaboration:async t=>{const r=vs.getCurrentUser();if(!r)return!1;try{return await iu.removeCollaborator(t,r.uid),iu.unsubscribeFromPlaylist(t),e((e=>{delete e.activeCollaborations[t],delete e.userPresence[t]})),!0}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to leave collaboration"})),!1}},deleteCollaborativePlaylist:async t=>{if(!vs.getCurrentUser())return e((e=>{e.lastError="User must be authenticated to delete collaborative playlists"})),!1;try{const r=await iu.deleteCollaborativePlaylist(t);return r&&(iu.unsubscribeFromPlaylist(t),e((e=>{delete e.activeCollaborations[t],delete e.userPresence[t]}))),r}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to delete collaborative playlist"})),!1}},applyOperation:async(t,r)=>{const n=vs.getCurrentUser();if(!n)return!1;try{const a={...r,id:`op_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:n.uid,vectorClock:{[n.uid]:Date.now()},dependencies:[],timestamp:new Date},i=await iu.applyOperation(t,a);return i&&e((e=>{const r=e.activeCollaborations[t];r&&(r.operationHistory.push(a),r.version+=1)})),i}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to apply operation"})),!1}},resolveConflict:async(t,r)=>{try{return!0}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to resolve conflict"})),!1}},sendInvitation:async r=>{const n=vs.getCurrentUser();if(!n)return e((e=>{e.lastError="User must be authenticated to send invitations"})),!1;e((e=>{e.isSendingInvitation=!0,e.lastError=null}));try{const a=await iu.sendInvitation(r);return a&&(await iu.createInvitationNotification({playlistId:r.playlistId,playlistName:r.playlistName,inviterUserId:n.uid,inviterName:n.displayName||n.email||"A collaborator",inviteeEmail:r.inviteeEmail||"",permission:"owner"===r.permission?"editor":r.permission,inviteCode:r.inviteCode,message:r.message}),t().refreshInvitations()),e((e=>{e.isSendingInvitation=!1})),a}catch(vz){return e((e=>{e.isSendingInvitation=!1,e.lastError=vz.message||"Failed to send invitation"})),!1}},respondToInvitation:async(r,n)=>{try{const a=await iu.respondToInvitation(r,n);return a&&(e((e=>{const t=e.receivedInvitations.find((e=>e.id===r));t&&(t.status="accept"===n?"accepted":"declined",t.respondedAt=new Date)})),"accept"===n&&t().refreshCollaborations()),a}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to respond to invitation"})),!1}},updateUserPresence:(t,r)=>{const n=vs.getCurrentUser();if(!n)return;const a={userId:n.uid,displayName:n.displayName||"Unknown User",color:su(n.uid),position:{action:"viewing"},...r};iu.updateUserPresence(t,a),e((e=>{e.userPresence[t]||(e.userPresence[t]={}),e.userPresence[t][n.uid]={...a,timestamp:new Date}}))},setUserStatus:e=>{if(!vs.getCurrentUser())return;const r=t();Object.keys(r.activeCollaborations).forEach((r=>{t().updateUserPresence(r,{position:{action:"online"===e?"viewing":"selecting"}})}))},updateCollaborativePlaylistMetadata:async(t,r)=>{if(!vs.getCurrentUser())return e((e=>{e.lastError="User must be authenticated to update playlists"})),!1;try{const n=await iu.updateCollaborativePlaylist(t,r);return n&&e((e=>{const n=e.activeCollaborations[t];n&&(r.name&&(n.name=r.name),void 0!==r.description&&(n.description=r.description))})),n}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to update playlist metadata"})),!1}},updateCollaboratorPermission:async(t,r,n)=>{try{return!0}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to update collaborator permission"})),!1}},removeCollaborator:async(t,r)=>{try{const n=await iu.removeCollaborator(t,r);return n&&e((e=>{const n=e.activeCollaborations[t];n&&n.collaborators[r]&&(delete n.collaborators[r],n.activeUsers=n.activeUsers.filter((e=>e!==r))),e.userPresence[t]&&e.userPresence[t][r]&&delete e.userPresence[t][r]})),n}catch(vz){return e((e=>{e.lastError=vz.message||"Failed to remove collaborator"})),!1}},markNotificationAsRead:t=>{iu.markNotificationAsRead(t),e((e=>{const r=e.notifications.find((e=>e.id===t));r&&!r.isRead&&(r.isRead=!0,e.unreadNotificationCount=Math.max(0,e.unreadNotificationCount-1))}))},markAllNotificationsAsRead:()=>{e((e=>{e.notifications.forEach((e=>{e.isRead=!0})),e.unreadNotificationCount=0}))},clearNotifications:()=>{e((e=>{e.notifications=[],e.unreadNotificationCount=0}))},refreshCollaborations:async()=>{if(iu.isAvailable()&&vs.getCurrentUser()){e((e=>{e.isLoading=!0,e.lastError=null}));try{(await iu.getUserCollaborations()).forEach((e=>{try{t().subscribeToCollaborativePlaylist(e.id)}catch(r){}})),e((e=>{e.isLoading=!1}))}catch(vz){e((e=>{e.isLoading=!1,e.lastError=vz.message||"Failed to refresh collaborations"}))}}},clearError:()=>{e((e=>{e.lastError=null}))},unsubscribeFromPlaylist:t=>{iu.unsubscribeFromPlaylist(t),e((e=>{delete e.activeCollaborations[t],delete e.userPresence[t]}))},initialize:async()=>{const r=vs.getCurrentUser();if(r&&iu.isAvailable()){e((e=>{e.currentUserId=r.uid,e.currentUserDisplayName=r.displayName||null,e.connectionStatus="connecting"}));try{await t().refreshCollaborations(),await t().refreshInvitations(),iu.subscribeToNotifications((t=>{e((e=>{e.notifications=t,e.unreadNotificationCount=t.filter((e=>!e.isRead)).length}))})),iu.subscribeToInvitations((t=>{e((e=>{e.receivedInvitations=t;const r=e.notifications.filter((e=>!e.isRead)).length,n=t.filter((e=>"pending"===e.status)).length;e.unreadNotificationCount=r+n}))})),e((e=>{e.connectionStatus="connected"}))}catch(vz){e((e=>{e.connectionStatus="error",e.lastError=vz.message||"Failed to initialize collaboration features"}))}}},subscribeToCollaborativePlaylist:e=>{t().subscribeToPlaylist(e)},subscribeToPlaylist:t=>{if(iu.isAvailable())try{iu.subscribeToPlaylist(t,(r=>{e((e=>{r?(e.activeCollaborations[t]=r,e.connectionStatus="connected"):delete e.activeCollaborations[t]}))})),iu.subscribeToOperations(t,(r=>{e((e=>{const n=e.activeCollaborations[t];n&&(n.operationHistory=r)}))})),iu.subscribeToPresence(t,(r=>{e((e=>{e.userPresence[t]=r}))}))}catch(vz){}},refreshInvitations:async()=>{try{const{sent:t,received:r}=await iu.getUserInvitations();e((e=>{e.sentInvitations=t,e.receivedInvitations=r,e.unreadNotificationCount=r.filter((e=>"pending"===e.status)).length}))}catch(vz){e((e=>{e.lastError=vz.message||"Failed to refresh invitations"}))}},cleanup:()=>{iu.unsubscribeAll(),e((e=>{e.activeCollaborations={},e.userPresence={},e.connectionStatus="disconnected"}))}})))),{name:"collaboration-store"})),cu=()=>{const e=lu();return{sentInvitations:e.sentInvitations,receivedInvitations:e.receivedInvitations,unreadCount:e.unreadNotificationCount,isSending:e.isSendingInvitation,sendInvitation:e.sendInvitation,respondToInvitation:e.respondToInvitation,refreshInvitations:e.refreshInvitations}},uu=()=>{const e=lu();return{notifications:e.notifications,unreadCount:e.unreadNotificationCount,markAsRead:e.markNotificationAsRead,markAllAsRead:e.markAllNotificationsAsRead,clearAll:e.clearNotifications}},du=Object.freeze(Object.defineProperty({__proto__:null,useCollaborationInvitations:cu,useCollaborationNotifications:uu,useCollaborationStore:lu},Symbol.toStringTag,{value:"Module"})),hu=({open:e,onClose:t,initialData:r})=>{const[n,a]=i.useState({name:r?.name||"",description:r?.description||"",type:r?.type||"regular",defaultPermission:"editor",isPublic:!1}),{createCollaborativePlaylist:o,isLoading:l,lastError:c,clearError:d}=lu(),p=()=>{d(),t()};return s.jsxs(g,{open:e,onClose:p,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},children:[s.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:1,color:"white",fontWeight:"bold"},children:[s.jsx(ma,{}),"Create Collaborative Playlist"]}),s.jsxs(b,{sx:{color:"white"},children:[c&&s.jsx(x,{severity:"error",sx:{mb:2},onClose:d,children:c}),s.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[s.jsx(T,{label:"Playlist Name",value:n.name,onChange:e=>a((t=>({...t,name:e.target.value}))),fullWidth:!0,required:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}}),s.jsx(T,{label:"Description (Optional)",value:n.description,onChange:e=>a((t=>({...t,description:e.target.value}))),fullWidth:!0,multiline:!0,rows:2,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}}),s.jsxs(R,{fullWidth:!0,children:[s.jsx(z,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Playlist Type"}),s.jsxs(D,{value:n.type,onChange:e=>a((t=>({...t,type:e.target.value}))),sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}},children:[s.jsx(L,{value:"regular",children:"Regular (Audio Files)"}),s.jsx(L,{value:"youtube",children:"YouTube"})]})]}),s.jsxs(R,{fullWidth:!0,children:[s.jsx(z,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Default Permission"}),s.jsxs(D,{value:n.defaultPermission,onChange:e=>a((t=>({...t,defaultPermission:e.target.value}))),sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}},children:[s.jsx(L,{value:"viewer",children:"Viewer (Read Only)"}),s.jsx(L,{value:"editor",children:"Editor (Can Edit)"})]})]}),s.jsx(k,{sx:{borderColor:"rgba(255, 255, 255, 0.2)"}}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.isPublic?s.jsx(ji,{}):s.jsx(si,{}),s.jsx(X,{control:s.jsx(Q,{checked:n.isPublic,onChange:e=>a((t=>({...t,isPublic:e.target.checked}))),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"white"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"rgba(255, 255, 255, 0.5)"}}}),label:s.jsxs(u,{children:[s.jsx(h,{variant:"body2",sx:{fontWeight:"bold"},children:n.isPublic?"Public Playlist":"Private Playlist"}),s.jsx(h,{variant:"caption",sx:{opacity:.8},children:n.isPublic?"Anyone with the invite code can join":"Only invited users can join"})]}),sx:{color:"white",alignItems:"flex-start"}})]}),s.jsxs(u,{sx:{p:2,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:1,border:"1px solid rgba(255, 255, 255, 0.2)"},children:[s.jsxs(h,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:[s.jsx(pa,{sx:{fontSize:16,mr:1}}),"Collaboration Features:"]}),s.jsxs(u,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[s.jsx(q,{label:"Real-time editing",size:"small",sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white"}}),s.jsx(q,{label:"Live cursors",size:"small",sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white"}}),s.jsx(q,{label:"Conflict resolution",size:"small",sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white"}}),s.jsx(q,{label:"Version history",size:"small",sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white"}})]})]})]})]}),s.jsxs(P,{sx:{p:2},children:[s.jsx(A,{onClick:p,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Cancel"}),s.jsx(A,{onClick:async()=>{if(n.name.trim())try{await o({name:n.name.trim(),description:n.description.trim()||void 0,type:n.type,defaultPermission:n.defaultPermission,isPublic:n.isPublic,initialClips:[]})&&(t(),a({name:"",description:"",type:"regular",defaultPermission:"editor",isPublic:!1}))}catch(vz){}},variant:"contained",disabled:!n.name.trim()||l,startIcon:l?s.jsx(H,{size:16}):s.jsx(ma,{}),sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"},"&:disabled":{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.5)"}},children:l?"Creating...":"Create Collaborative Playlist"})]})]})},pu=({open:e,onClose:t,playlistId:r,playlistName:n,inviteCode:a})=>{const[o,l]=i.useState("email"),[c,p]=i.useState(""),[f,m]=i.useState("editor"),[v,w]=i.useState(""),[S,j]=i.useState(!1),{sendInvitation:C,isSendingInvitation:E,lastError:I,clearError:M}=lu(),O=()=>{M(),j(!1),t()};return s.jsxs(g,{open:e,onClose:O,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},children:[s.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:1,color:"white",fontWeight:"bold"},children:[s.jsx(ga,{}),"Invite Collaborators"]}),s.jsxs(b,{sx:{color:"white"},children:[I&&s.jsx(x,{severity:"error",sx:{mb:2},onClose:M,children:I}),s.jsxs(h,{variant:"body2",sx:{mb:2,opacity:.9},children:['Invite others to collaborate on "',n,'"']}),s.jsxs(u,{sx:{display:"flex",gap:1,mb:3},children:[s.jsx(q,{label:"Email Invitation",icon:s.jsx(Ba,{}),onClick:()=>l("email"),variant:"email"===o?"filled":"outlined",sx:{backgroundColor:"email"===o?"rgba(255, 255, 255, 0.3)":"transparent",color:"white",borderColor:"rgba(255, 255, 255, 0.5)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}}}),s.jsx(q,{label:"Share Code",icon:s.jsx(oi,{}),onClick:()=>l("code"),variant:"code"===o?"filled":"outlined",sx:{backgroundColor:"code"===o?"rgba(255, 255, 255, 0.3)":"transparent",color:"white",borderColor:"rgba(255, 255, 255, 0.5)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}}})]}),"email"===o?s.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s.jsx(T,{label:"Email Address",type:"email",value:c,onChange:e=>p(e.target.value),fullWidth:!0,required:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}}),s.jsxs(R,{fullWidth:!0,children:[s.jsx(z,{sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Permission Level"}),s.jsxs(D,{value:f,onChange:e=>m(e.target.value),sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}},children:[s.jsx(L,{value:"viewer",children:"Viewer (Read Only)"}),s.jsx(L,{value:"editor",children:"Editor (Can Edit)"})]})]}),s.jsx(T,{label:"Personal Message (Optional)",value:v,onChange:e=>w(e.target.value),fullWidth:!0,multiline:!0,rows:2,variant:"outlined",placeholder:"Add a personal message to your invitation...",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}})]}):s.jsxs(u,{children:[s.jsx(h,{variant:"body2",sx:{mb:2,opacity:.9},children:"Share this code with others to let them join the collaboration:"}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,p:2,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:1,border:"1px solid rgba(255, 255, 255, 0.2)"},children:[s.jsx(h,{variant:"h6",sx:{fontFamily:"monospace",letterSpacing:2,flex:1,textAlign:"center"},children:a||"LOADING..."}),s.jsx(G,{title:S?"Copied!":"Copy code",children:s.jsx(d,{onClick:async()=>{if(a)try{await navigator.clipboard.writeText(a),j(!0),setTimeout((()=>j(!1)),2e3)}catch(vz){}},disabled:!a,sx:{color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:S?s.jsx(za,{}):s.jsx(fa,{})})})]}),s.jsxs(h,{variant:"caption",sx:{mt:1,opacity:.7,display:"block"},children:["Anyone with this code can join as an ",f.toLowerCase()]})]}),s.jsx(k,{sx:{my:2,borderColor:"rgba(255, 255, 255, 0.2)"}}),s.jsxs(u,{sx:{p:2,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:1,border:"1px solid rgba(255, 255, 255, 0.2)"},children:[s.jsx(h,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:"Permission Levels:"}),s.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:1},children:[s.jsxs(h,{variant:"caption",sx:{opacity:.8},children:[" ",s.jsx("strong",{children:"Viewer:"})," Can view playlist and see real-time changes"]}),s.jsxs(h,{variant:"caption",sx:{opacity:.8},children:[" ",s.jsx("strong",{children:"Editor:"})," Can add, remove, and reorder clips"]}),s.jsxs(h,{variant:"caption",sx:{opacity:.8},children:[" ",s.jsx("strong",{children:"Owner:"})," Full control including managing collaborators"]})]})]})]}),s.jsxs(P,{sx:{p:2},children:[s.jsx(A,{onClick:O,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Cancel"}),"email"===o&&s.jsx(A,{onClick:async()=>{if(c.trim())try{await C({playlistId:r,playlistName:n,inviteeEmail:c.trim(),permission:f,inviteCode:a||"",message:v.trim()||void 0})&&(p(""),w(""),t())}catch(vz){}},variant:"contained",disabled:!c.trim()||E,startIcon:E?s.jsx(H,{size:16}):s.jsx(ga,{}),sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"},"&:disabled":{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.5)"}},children:E?"Sending...":"Send Invitation"})]})]})},fu=({presence:e,playlistId:t,clipId:r,compact:n=!1})=>{const[a,o]=i.useState([]),l=vs.getCurrentUser();i.useEffect((()=>{const t=Object.values(e).filter((e=>e.userId!==l?.uid&&((!r||e.position.clipId===r)&&(new Date).getTime()-(e.timestamp instanceof Date?e.timestamp.getTime():e.timestamp.toMillis())<3e4)));o(t)}),[e,l?.uid,r]);const c=e=>{switch(e){case"editing":return s.jsx(Jn,{sx:{fontSize:12}});case"dragging":return s.jsx(Ua,{sx:{fontSize:12}});case"selecting":return s.jsx(Li,{sx:{fontSize:12}});default:return s.jsx(Ui,{sx:{fontSize:12}})}},d=e=>{switch(e){case"editing":return"editing";case"dragging":return"reordering";case"selecting":return"selecting";default:return"viewing"}},p=e=>{switch(e){case"editing":return"#4CAF50";case"dragging":return"#FF9800";case"selecting":return"#2196F3";default:return"#757575"}};return 0===a.length?null:n?s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:.5},children:[a.slice(0,3).map((e=>s.jsx(G,{title:`${e.displayName} is ${d(e.position.action)}`,children:s.jsx(te,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:s.jsx(u,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:p(e.position.action),border:"1px solid white"}}),children:s.jsx(re,{sx:{width:20,height:20,fontSize:10,backgroundColor:e.color,border:`1px solid ${e.color}`,animation:"pulse 2s infinite"},children:e.displayName.charAt(0).toUpperCase()})})},e.userId))),a.length>3&&s.jsx(q,{label:"+"+(a.length-3),size:"small",sx:{height:20,fontSize:8,backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white"}})]}):s.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:1},children:[a.map((e=>s.jsx(ne,{in:!0,timeout:300,children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,p:1,backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:1,border:`1px solid ${e.color}`,animation:"fadeInOut 3s ease-in-out infinite"},children:[s.jsx(re,{sx:{width:24,height:24,fontSize:12,backgroundColor:e.color,animation:"pulse 2s infinite"},children:e.displayName.charAt(0).toUpperCase()}),s.jsxs(u,{sx:{flex:1},children:[s.jsx(h,{variant:"caption",sx:{color:"white",fontWeight:"bold",display:"block"},children:e.displayName}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:.5},children:[c(e.position.action),s.jsx(h,{variant:"caption",sx:{color:p(e.position.action),fontSize:10},children:d(e.position.action)})]})]}),s.jsx(u,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:e.color,animation:"blink 1s infinite"}})]})},e.userId))),s.jsx("style",{children:"\n          @keyframes pulse {\n            0% { transform: scale(1); opacity: 1; }\n            50% { transform: scale(1.05); opacity: 0.8; }\n            100% { transform: scale(1); opacity: 1; }\n          }\n          \n          @keyframes blink {\n            0%, 50% { opacity: 1; }\n            51%, 100% { opacity: 0.3; }\n          }\n          \n          @keyframes fadeInOut {\n            0%, 100% { opacity: 0.7; }\n            50% { opacity: 1; }\n          }\n        "})]})},mu=43200,gu=Symbol.for("constructDateFrom");function yu(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&gu in e?e[gu](t):e instanceof Date?new e.constructor(t):new Date(t)}function bu(e,t){return yu(e,e)}let xu={};function vu(e){const t=bu(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function wu(e,...t){const r=yu.bind(null,e||t.find((e=>"object"==typeof e)));return t.map(r)}function Su(e,t){const r=+bu(e)-+bu(t);return r<0?-1:r>0?1:r}function ju(e,t){const r=bu(e);return+function(e){const t=bu(e);return t.setHours(23,59,59,999),t}(r)===+function(e){const t=bu(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}(r)}function Cu(e,t,r){const[n,a,i]=wu(r?.in,e,e,t),o=Su(a,i),s=Math.abs(function(e,t,r){const[n,a]=wu(r?.in,e,t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}(a,i));if(s<1)return 0;1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*s);let l=Su(a,i)===-o;ju(n)&&1===s&&1===Su(n,i)&&(l=!1);const c=o*(s-+l);return 0===c?0:c}function ku(e,t,r){const n=function(e,t){return+bu(e)-+bu(t)}(e,t)/1e3;return(a=r?.roundingMethod,e=>{const t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})(n);var a}const Pu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Au(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Eu={date:Au({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Au({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Au({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Iu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Mu(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=r?.width?String(r.width):t;n=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=r?.width?String(r.width):e.defaultWidth;n=e.values[a]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function Tu(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(s,(e=>e.test(o))):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(s,(e=>e.test(o)));let c;return c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c,{value:c,rest:t.slice(o.length)}}}var Ru;const zu={code:"en-US",formatDistance:(e,t,r)=>{let n;const a=Pu[e];return n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:Eu,formatRelative:(e,t,r,n)=>Iu[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Mu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Mu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Mu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Mu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Mu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Ru={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const r=e.match(Ru.matchPattern);if(!r)return null;const n=r[0],a=e.match(Ru.parsePattern);if(!a)return null;let i=Ru.valueCallback?Ru.valueCallback(a[0]):a[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(n.length)}}),era:Tu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Tu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Tu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Tu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Tu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Du(e,t,r){const n=xu,a=r?.locale??n.locale??zu,i=Su(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:i}),[s,l]=wu(r?.in,...i>0?[t,e]:[e,t]),c=ku(l,s),u=(vu(l)-vu(s))/1e3,d=Math.round((c-u)/60);let h;if(d<2)return r?.includeSeconds?c<5?a.formatDistance("lessThanXSeconds",5,o):c<10?a.formatDistance("lessThanXSeconds",10,o):c<20?a.formatDistance("lessThanXSeconds",20,o):c<40?a.formatDistance("halfAMinute",0,o):c<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):0===d?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",d,o);if(d<45)return a.formatDistance("xMinutes",d,o);if(d<90)return a.formatDistance("aboutXHours",1,o);if(d<1440){const e=Math.round(d/60);return a.formatDistance("aboutXHours",e,o)}if(d<2520)return a.formatDistance("xDays",1,o);if(d<mu){const e=Math.round(d/1440);return a.formatDistance("xDays",e,o)}if(d<86400)return h=Math.round(d/mu),a.formatDistance("aboutXMonths",h,o);if(h=Cu(l,s),h<12){const e=Math.round(d/mu);return a.formatDistance("xMonths",e,o)}{const e=h%12,t=Math.trunc(h/12);return e<3?a.formatDistance("aboutXYears",t,o):e<9?a.formatDistance("overXYears",t,o):a.formatDistance("almostXYears",t+1,o)}}function Lu(e,t){return Du(e,function(e){return yu(e,Date.now())}(e),t)}const Ou=({onInvitationResponse:e})=>{const[t,r]=i.useState(null),{receivedInvitations:n,unreadCount:a,respondToInvitation:o}=cu(),{notifications:l,unreadCount:c,markAsRead:p,markAllAsRead:f,clearAll:m}=uu(),g=a+c,y=n.filter((e=>"pending"===e.status)),b=async(t,r)=>{await o(t,r),e&&e(t,r)},x=e=>{switch(e){case"invitation_received":return s.jsx(ga,{sx:{fontSize:16,color:"#2196F3"}});case"invitation_accepted":return s.jsx(za,{sx:{fontSize:16,color:"#4CAF50"}});case"user_joined":return s.jsx(ma,{sx:{fontSize:16,color:"#4CAF50"}});case"user_left":return s.jsx(ma,{sx:{fontSize:16,color:"#FF9800"}});case"playlist_updated":return s.jsx(Jn,{sx:{fontSize:16,color:"#9C27B0"}});default:return s.jsx(yi,{sx:{fontSize:16,color:"#757575"}})}},v=e=>Lu(e instanceof Date?e:e.toDate(),{addSuffix:!0});return s.jsxs(u,{children:[s.jsx(G,{title:"Collaboration notifications",children:s.jsx(d,{onClick:e=>{r(e.currentTarget)},sx:{color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:s.jsx(te,{badgeContent:g,color:"error",max:99,children:s.jsx(yi,{})})})}),s.jsxs(ae,{anchorEl:t,open:Boolean(t),onClose:()=>{r(null)},PaperProps:{sx:{width:400,maxHeight:500,backgroundColor:"rgba(0, 0, 0, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[s.jsx(u,{sx:{p:2,borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx(h,{variant:"h6",sx:{color:"white",fontWeight:"bold"},children:"Notifications"}),g>0&&s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(A,{size:"small",onClick:f,startIcon:s.jsx(di,{}),sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:10},children:"Mark all read"}),s.jsx(A,{size:"small",onClick:m,startIcon:s.jsx(Mn,{}),sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:10},children:"Clear"})]})]})}),y.length>0&&s.jsxs(u,{sx:{p:1},children:[s.jsx(h,{variant:"subtitle2",sx:{color:"rgba(255, 255, 255, 0.8)",px:1,py:.5,fontWeight:"bold"},children:"Pending Invitations"}),y.map((e=>s.jsx(u,{sx:{p:1.5,m:.5,backgroundColor:"rgba(33, 150, 243, 0.1)",borderRadius:1,border:"1px solid rgba(33, 150, 243, 0.3)"},children:s.jsxs(u,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[s.jsx(re,{sx:{width:32,height:32,fontSize:14},children:e.inviterName.charAt(0).toUpperCase()}),s.jsxs(u,{sx:{flex:1},children:[s.jsx(h,{variant:"body2",sx:{color:"white",fontWeight:"bold"},children:e.inviterName}),s.jsxs(h,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)"},children:['invited you to collaborate on "',e.playlistName,'"']}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[s.jsx(q,{label:e.permission,size:"small",sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white",fontSize:10}}),s.jsx(h,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.6)"},children:v(e.createdAt)})]}),s.jsxs(u,{sx:{display:"flex",gap:1,mt:1},children:[s.jsx(A,{size:"small",variant:"contained",onClick:()=>b(e.id,"accept"),startIcon:s.jsx(za,{}),sx:{backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"},fontSize:10},children:"Accept"}),s.jsx(A,{size:"small",variant:"outlined",onClick:()=>b(e.id,"decline"),startIcon:s.jsx(An,{}),sx:{borderColor:"rgba(255, 255, 255, 0.3)",color:"rgba(255, 255, 255, 0.8)",fontSize:10,"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.5)"}},children:"Decline"})]})]})]})},e.id))),s.jsx(k,{sx:{borderColor:"rgba(255, 255, 255, 0.1)",my:1}})]}),s.jsx(u,{sx:{maxHeight:300,overflow:"auto"},children:0===l.length&&0===y.length?s.jsxs(u,{sx:{p:3,textAlign:"center"},children:[s.jsx(yi,{sx:{fontSize:48,color:"rgba(255, 255, 255, 0.3)",mb:1}}),s.jsx(h,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.6)"},children:"No notifications yet"})]}):l.map((e=>s.jsxs(L,{onClick:()=>p(e.id),sx:{backgroundColor:e.isRead?"transparent":"rgba(255, 255, 255, 0.05)",borderLeft:e.isRead?"none":"3px solid #2196F3","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:[s.jsx(F,{children:x(e.type)}),s.jsx(j,{primary:s.jsx(h,{variant:"body2",sx:{color:"white",fontWeight:e.isRead?"normal":"bold"},children:e.message}),secondary:s.jsx(h,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.6)"},children:v(e.createdAt)})})]},e.id)))})]})]})},_u=({open:e,onClose:t,playlist:r,playlistType:n,onSuccess:a})=>{const[o,l]=i.useState(!1),[c,d]=i.useState(!1),[p,f]=i.useState(null),[m,w]=i.useState(null),{convertToCollaborative:C,lastError:E}=lu(),I=()=>{l(!1),d(!1),f(null),w(null),t()};return r?s.jsxs(g,{open:e,onClose:I,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[s.jsxs(y,{sx:{color:"white",fontWeight:"bold",display:"flex",alignItems:"center",gap:2},children:[s.jsx(ma,{sx:{color:"#4CAF50"}}),c?"Conversion Complete!":"Make Playlist Collaborative"]}),s.jsx(b,{sx:{color:"white"},children:c?s.jsxs(s.Fragment,{children:[s.jsxs(x,{severity:"success",sx:{mb:3,backgroundColor:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)","& .MuiAlert-message":{color:"white"}},children:[s.jsx(h,{variant:"body1",sx:{fontWeight:"bold",mb:1},children:" Playlist successfully converted to collaborative!"}),s.jsx(h,{variant:"body2",children:"Your new collaborative playlist is ready. You can now invite others to collaborate and enjoy real-time editing features."})]}),s.jsxs(u,{sx:{p:2,backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[s.jsx(h,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)",mb:1},children:"New Collaborative Playlist ID:"}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(h,{variant:"body2",sx:{fontFamily:"monospace",color:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",px:1,py:.5,borderRadius:1,flex:1},children:p}),s.jsx(A,{size:"small",startIcon:s.jsx(fa,{}),onClick:()=>{p&&navigator.clipboard.writeText(p)},sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Copy"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(u,{sx:{mb:3},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[s.jsx(wi,{sx:{color:"rgba(255, 255, 255, 0.7)"}}),s.jsx(h,{variant:"h6",sx:{color:"white"},children:r.name}),s.jsx(q,{label:"youtube"===n?"YouTube Playlist":"Regular Playlist",color:"youtube"===n?"error":"primary",size:"small"})]}),s.jsxs(h,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)",mb:1},children:[r.clips?.length||0," clips"]})]}),s.jsx(k,{sx:{borderColor:"rgba(255, 255, 255, 0.1)",mb:3}}),s.jsxs(x,{severity:"info",sx:{mb:3,backgroundColor:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)","& .MuiAlert-message":{color:"white"}},icon:s.jsx(jn,{sx:{color:"#2196F3"}}),children:[s.jsx(h,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:"What happens when you convert:"}),s.jsxs(v,{dense:!0,sx:{pl:0},children:[s.jsxs(S,{sx:{py:.5,pl:0},children:[s.jsx(F,{sx:{minWidth:32},children:s.jsx(za,{sx:{fontSize:16,color:"#4CAF50"}})}),s.jsx(j,{primary:"Your original playlist will be preserved unchanged",primaryTypographyProps:{variant:"body2",color:"white"}})]}),s.jsxs(S,{sx:{py:.5,pl:0},children:[s.jsx(F,{sx:{minWidth:32},children:s.jsx(za,{sx:{fontSize:16,color:"#4CAF50"}})}),s.jsx(j,{primary:"A new collaborative version will be created with all clips and settings",primaryTypographyProps:{variant:"body2",color:"white"}})]}),s.jsxs(S,{sx:{py:.5,pl:0},children:[s.jsx(F,{sx:{minWidth:32},children:s.jsx(za,{sx:{fontSize:16,color:"#4CAF50"}})}),s.jsx(j,{primary:"You'll be able to invite others to collaborate on the new version",primaryTypographyProps:{variant:"body2",color:"white"}})]}),s.jsxs(S,{sx:{py:.5,pl:0},children:[s.jsx(F,{sx:{minWidth:32},children:s.jsx(za,{sx:{fontSize:16,color:"#4CAF50"}})}),s.jsx(j,{primary:"Real-time collaboration features will be enabled",primaryTypographyProps:{variant:"body2",color:"white"}})]})]})]}),s.jsxs(h,{variant:"h6",sx:{color:"white",mb:2,display:"flex",alignItems:"center",gap:1},children:[s.jsx(pa,{sx:{color:"#4CAF50"}}),"Collaboration Features"]}),s.jsxs(u,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3},children:[s.jsx(q,{label:"Real-time editing",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}}),s.jsx(q,{label:"Email invitations",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}}),s.jsx(q,{label:"Permission management",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}}),s.jsx(q,{label:"Live cursors",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}}),s.jsx(q,{label:"Version history",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}})]}),m&&s.jsx(x,{severity:"error",sx:{mb:2},children:m})]})}),s.jsx(P,{sx:{p:3,pt:0},children:c?s.jsx(A,{variant:"contained",onClick:I,sx:{backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"}},children:"Done"}):s.jsxs(s.Fragment,{children:[s.jsx(A,{onClick:I,sx:{color:"rgba(255, 255, 255, 0.7)"},disabled:o,children:"Cancel"}),s.jsx(A,{variant:"contained",onClick:async()=>{if(r){l(!0),w(null);try{const e=await C(r,n);e?(f(e),d(!0),a&&a(e)):w(E||"Failed to convert playlist to collaborative")}catch(e){w(e.message||"An error occurred during conversion")}finally{l(!1)}}},disabled:o,startIcon:o?s.jsx(H,{size:16}):s.jsx(ma,{}),sx:{backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"},"&:disabled":{backgroundColor:"rgba(76, 175, 80, 0.3)"}},children:o?"Converting...":"Make Collaborative"})]})})]}):null},Fu=({open:e,onClose:t,initialInviteCode:r="",onSuccess:n})=>{const[a,o]=i.useState(r),[l,c]=i.useState(!1),[p,f]=i.useState(!1),[m,v]=i.useState(null),[w,S]=i.useState(null),{joinCollaboration:j,lastError:C}=lu(),E=()=>{o(""),c(!1),f(!1),v(null),S(null),t()};return s.jsxs(g,{open:e,onClose:E,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",border:"1px solid rgba(255, 255, 255, 0.1)"}},children:[s.jsxs(y,{sx:{color:"white",fontWeight:"bold",display:"flex",alignItems:"center",gap:2},children:[s.jsx(ma,{sx:{color:"#4CAF50"}}),p?"Successfully Joined!":"Join Collaborative Playlist"]}),s.jsx(b,{sx:{color:"white"},children:p?s.jsxs(s.Fragment,{children:[s.jsxs(x,{severity:"success",sx:{mb:3,backgroundColor:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)","& .MuiAlert-message":{color:"white"}},children:[s.jsx(h,{variant:"body1",sx:{fontWeight:"bold",mb:1},children:" Successfully joined collaborative playlist!"}),s.jsxs(h,{variant:"body2",children:['You can now collaborate in real-time with other members of "',m,'".']})]}),s.jsxs(u,{sx:{p:2,backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:[s.jsx(za,{sx:{fontSize:48,color:"#4CAF50",mb:1}}),s.jsx(h,{variant:"h6",sx:{color:"white",mb:1},children:"Welcome to the team!"}),s.jsx(h,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)"},children:"The collaborative playlist has been added to your playlists. You can find it in the main playlists view."})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(x,{severity:"info",sx:{mb:3,backgroundColor:"rgba(33, 150, 243, 0.1)",border:"1px solid rgba(33, 150, 243, 0.3)","& .MuiAlert-message":{color:"white"}},icon:s.jsx(jn,{sx:{color:"#2196F3"}}),children:s.jsx(h,{variant:"body2",children:"Enter the invite code you received to join a collaborative playlist. You can get invite codes from email invitations or directly from playlist owners."})}),s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"body1",sx:{mb:2,fontWeight:"bold"},children:"Invite Code"}),s.jsx(T,{fullWidth:!0,value:a,onChange:e=>{const t=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,12);o(t),S(null)},placeholder:"Enter invite code (e.g., ABC123XYZ)",variant:"outlined",disabled:l,InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(ya,{sx:{color:"rgba(255, 255, 255, 0.7)"}})}),endAdornment:s.jsx(B,{position:"end",children:s.jsx(d,{onClick:async()=>{try{const e=await navigator.clipboard.readText();e&&o(e.trim().toUpperCase())}catch(e){}},disabled:l,sx:{color:"rgba(255, 255, 255, 0.7)"},children:s.jsx($a,{})})}),sx:{backgroundColor:"rgba(255, 255, 255, 0.05)","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.3)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#4CAF50"},"& input":{color:"white",fontFamily:"monospace",fontSize:"1.1rem",letterSpacing:"0.1em"}}}}),s.jsx(h,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.6)",mt:1,display:"block"},children:"Invite codes are usually 6-12 characters long and contain letters and numbers"})]}),s.jsx(k,{sx:{borderColor:"rgba(255, 255, 255, 0.1)",mb:3}}),s.jsx(h,{variant:"h6",sx:{color:"white",mb:2},children:"What you'll get access to:"}),s.jsxs(u,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[s.jsx(q,{label:"Real-time collaboration",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}}),s.jsx(q,{label:"Edit playlist together",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}}),s.jsx(q,{label:"Live cursors",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}}),s.jsx(q,{label:"Shared changes",size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}})]}),w&&s.jsx(x,{severity:"error",sx:{mb:2},children:w})]})}),s.jsx(P,{sx:{p:3,pt:0},children:p?s.jsx(A,{variant:"contained",onClick:E,sx:{backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"}},children:"Done"}):s.jsxs(s.Fragment,{children:[s.jsx(A,{onClick:E,sx:{color:"rgba(255, 255, 255, 0.7)"},disabled:l,children:"Cancel"}),s.jsx(A,{variant:"contained",onClick:async()=>{if(a.trim()){c(!0),S(null);try{const e=await j(a.trim().toUpperCase());if(!e)throw new Error(C||"Invalid invite code or playlist not found");v("Collaborative Playlist"),f(!0),n&&n(e)}catch(e){S(e.message||"Failed to join collaborative playlist")}finally{c(!1)}}else S("Please enter an invite code")},disabled:l||!a.trim(),startIcon:l?s.jsx(H,{size:16}):s.jsx(ma,{}),sx:{backgroundColor:"#4CAF50","&:hover":{backgroundColor:"#45a049"},"&:disabled":{backgroundColor:"rgba(76, 175, 80, 0.3)"}},children:l?"Joining...":"Join Playlist"})]})})]})},$u="power_hour_ui_preferences",Nu={playlistCardSize:320,musicLibraryWidth:80},Wu=class e{constructor(){r(this,"preferences",Nu),this.loadFromStorage()}static getInstance(){return e.instance||(e.instance=new e),e.instance}loadFromStorage(){try{const e=localStorage.getItem($u);if(e){const t=JSON.parse(e);this.preferences={...Nu,...t}}}catch(vz){this.preferences=Nu}}saveToStorage(){try{localStorage.setItem($u,JSON.stringify(this.preferences))}catch(vz){}}getPreferences(){return{...this.preferences}}getPlaylistCardSize(){return this.preferences.playlistCardSize}setPlaylistCardSize(e){this.preferences.playlistCardSize=Math.max(180,Math.min(500,e)),this.saveToStorage()}getMusicLibraryWidth(){return this.preferences.musicLibraryWidth}setMusicLibraryWidth(e){this.preferences.musicLibraryWidth=Math.max(50,Math.min(98,e)),this.saveToStorage()}updatePreferences(e){this.preferences={...this.preferences,...e},this.saveToStorage()}resetToDefaults(){this.preferences={...Nu},this.saveToStorage()}};r(Wu,"instance");let Uu=Wu;const Bu=e=>{const t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r<10?`0${r}`:`${r}`}`},Hu=({onPlayMix:e})=>{const t=m(),r=Sr(),[n,a]=i.useState([]),[o,l]=i.useState(!1),[p,f]=i.useState(null),[C,k]=i.useState(null),[E,I]=i.useState(!1),[M,R]=i.useState(""),[z,D]=i.useState(null),[L,O]=i.useState(null),[_,F]=i.useState(!1),[$,N]=i.useState(!1),[W,U]=i.useState(!1),B=Bn(),{imageUrls:V}=ba(n),[Y,J]=i.useState(!1),[X,Q]=i.useState("date"),[Z,ee]=i.useState("desc"),[te,re]=i.useState("grid"),[ne,ae]=i.useState(!1),[oe,se]=i.useState(!1),[le,ce]=i.useState(null),ue=Uu.getInstance(),[de,he]=i.useState((()=>ue.getPlaylistCardSize())),[pe,fe]=i.useState(!1),[me,ge]=i.useState({x:0,y:0}),[ye,be]=i.useState((()=>ue.getPlaylistCardSize())),[xe,ve]=i.useState(!1),[we,Se]=i.useState(null),[je,Ce]=i.useState(!1),[ke,Pe]=i.useState(""),[Ae,Ee]=i.useState([]),[Ie,Me]=i.useState(""),[Te,Re]=i.useState(!1),[ze,De]=i.useState(null),[Le,Oe]=i.useState(!1),[Ne,We]=i.useState(null),[Ue,Be]=i.useState({}),[He,Ve]=i.useState(!1),[Ye,Ge]=i.useState(!1),[qe,Je]=i.useState(null),[Ke,Xe]=i.useState(!1),[Qe,Ze]=i.useState(null),[et,tt]=i.useState(!1),rt=lu(),{activeCollaborations:nt,connectionStatus:at}=rt;i.useCallback((()=>{B.stopPlaylist()}),[B]);const it=e=>{Je(e),Ge(!0)},ot=i.useCallback((async e=>{if(void 0!==Ue[e.id])return Ue[e.id];try{const t=await Ls(e.id,e.name);return Be((r=>({...r,[e.id]:t}))),t}catch(t){return Be((t=>({...t,[e.id]:null}))),null}}),[Ue]);i.useEffect((()=>(ct(),rt.initialize(),()=>{rt.cleanup()})),[]);const st=e=>{const t=e.clips.length;return"youtube"===e.type?`${t} video${1!==t?"s":""}`:`${t} clip${1!==t?"s":""}`},lt=(e,t,r)=>[...e].sort(((e,n)=>{let a=0;return"name"===t?a=e.name.toLowerCase().localeCompare(n.name.toLowerCase()):"date"===t&&(a=new Date(e.date).getTime()-new Date(n.date).getTime()),"asc"===r?a:-a})),ct=async()=>{l(!0),f(null);try{let t=[];if(window.electronAPI){const e=await window.electronAPI.listPlaylists();Array.isArray(e)&&(t=e.map((e=>({...e,type:"regular"}))))}const{cleanupAllPlaylistDuplicateIds:r}=await qn((async()=>{const{cleanupAllPlaylistDuplicateIds:e}=await Promise.resolve().then((()=>Oc));return{cleanupAllPlaylistDuplicateIds:e}}),void 0);r();const n=fc().map((e=>({...e,type:"youtube"})));let i=[];try{i=Object.values(nt).filter((e=>!(!e||"object"!=typeof e||!e.id||!e.name))).map((e=>{let t;try{t=e.createdAt instanceof Date?e.createdAt.toISOString():e.createdAt&&"object"==typeof e.createdAt&&"toDate"in e.createdAt?e.createdAt.toDate().toISOString():"string"==typeof e.createdAt?e.createdAt:(new Date).toISOString()}catch(r){t=(new Date).toISOString()}try{return{id:e.id,name:e.name||"Untitled Collaborative Playlist",date:t,clips:Array.isArray(e.clips)?e.clips:[],drinkingSoundPath:e.drinkingSoundPath||void 0,imagePath:e.imagePath||void 0,type:e.type||"youtube",isCollaborative:!0,collaborationId:e.collaborationId||e.id}}catch(r){return{id:e.id||`error_${Date.now()}`,name:"Error Loading Playlist",date:(new Date).toISOString(),clips:[],type:"youtube",isCollaborative:!0,collaborationId:e.id||`error_${Date.now()}`}}}))}catch(e){i=[]}const o=[...t,...n,...i];o.forEach((e=>{const t=e.clips.map((e=>e.id));t.filter(((e,r)=>t.indexOf(e)!==r)).length}));const s=lt(o,X,Z);a(s)}catch(t){f("Failed to fetch playlists. Ensure the application has permissions to access its data directory."),a([])}finally{l(!1)}},ut=e=>{e===X?ee("asc"===Z?"desc":"asc"):(Q(e),ee("date"===e?"desc":"asc"))};i.useEffect((()=>{if(n.length>0){const e=lt(n,X,Z);a(e)}}),[X,Z]),i.useEffect((()=>{ct()}),[nt]);const dt=e=>{e.preventDefault(),e.stopPropagation(),fe(!0),ge({x:e.clientX,y:e.clientY}),be(de),document.body.style.cursor="nw-resize",document.body.style.userSelect="none"},ht=i.useCallback((e=>{if(!pe)return;const t=(e.clientX-me.x-(e.clientY-me.y))/2,r=Math.max(180,Math.min(500,ye+t));he(r)}),[pe,me,ye]),pt=i.useCallback((()=>{fe(!1),document.body.style.cursor="",document.body.style.userSelect="",ue.setPlaylistCardSize(de)}),[de,ue]);i.useEffect((()=>{if(pe)return document.addEventListener("mousemove",ht),document.addEventListener("mouseup",pt),()=>{document.removeEventListener("mousemove",ht),document.removeEventListener("mouseup",pt)}}),[pe,ht,pt]);const ft=()=>{R(""),D(null),I(!0),N(!1),U(!1)},mt=e=>{if(Se(e),"youtube"===e.type){const t=e;Ce(t.isPublic||!1),Pe(t.description||""),Ee(t.tags||[])}else Ce(!1),Pe(""),Ee([]);ve(!0)},gt=async e=>{if(window.confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{let r=!1;if(e.isCollaborative)try{const t=Object.values(nt).filter((e=>e&&"object"==typeof e&&e.id)).find((t=>t.id===e.id));if(t){const n=vs.getCurrentUser();r=n&&t.ownerId===n.uid?await rt.deleteCollaborativePlaylist(e.id):await rt.leaveCollaboration(e.id)}else r=await rt.leaveCollaboration(e.id)}catch(t){r=!1}else if("youtube"===e.type)mc(e.id),r=!0;else{if(!window.electronAPI)throw new Error("Electron API not available");r=await window.electronAPI.deletePlaylist(e.id)}if(r){const t=e.isCollaborative&&Object.values(nt).filter((e=>e&&"object"==typeof e&&e.id)).find((t=>t.id===e.id))?.ownerId!==vs.getCurrentUser()?.uid?"left":"deleted";k(`Playlist "${e.name}" ${t}.`),a((t=>t.filter((t=>t.id!==e.id)))),I(!1),N(!1),D(null),R(""),U(!1)}else f("Failed to delete playlist.")}catch(r){f(`Failed to delete playlist: ${r.message}`)}},yt=async()=>{if(window.electronAPI)try{l(!0);const e=await window.electronAPI.importPlaylist();e&&e.success&&e.playlist?(k(`Playlist "${e.playlist.name}" imported successfully.`),ct()):f(e.message||"Failed to import playlist.")}catch(e){f(`Failed to import playlist: ${e.message}`)}finally{l(!1)}else f("Electron API not available")},bt=async e=>{"youtube"!==e.type?(B.playPlaylist(e),J(!0)):r(`/youtube-player/${e.id}`)};i.useCallback((()=>{B.nextClip()}),[B]),i.useCallback((()=>{B.previousClip()}),[B]);const xt=e=>{ce(e),"youtube"===e.type?se(!0):ae(!0)},vt=async e=>{if(le){try{const t={...le,drinkingSoundPath:e};if("youtube"===le.type){const{saveYouTubePlaylist:e}=await qn((async()=>{const{saveYouTubePlaylist:e}=await Promise.resolve().then((()=>Oc));return{saveYouTubePlaylist:e}}),void 0);await e(t)?(k(`Drinking sound updated for YouTube playlist "${le.name}"`),ct()):f("Failed to update drinking sound for YouTube playlist")}else{if(!window.electronAPI)throw new Error("Electron API not available");await window.electronAPI.savePlaylist(t)?(k(`Drinking sound updated for "${le.name}"`),ct()):f("Failed to update drinking sound")}}catch(t){f(`Error setting drinking sound: ${t.message}`)}ce(null)}};return s.jsxs(u,{sx:{width:"100%",minHeight:"100vh",bgcolor:"background.default",transition:"margin-right 0.3s ease",marginRight:Y&&B.currentPlaylist?"320px":0},children:[s.jsxs(u,{className:"playlists-main-content",sx:{px:{xs:2,sm:3,md:4},py:3,pb:8,maxWidth:"100%",mx:"auto"},children:[s.jsx(u,{sx:{maxWidth:1400,mx:"auto",mb:3},children:s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[s.jsxs(u,{sx:{display:"flex",gap:1.5,alignItems:"center",flexWrap:"wrap"},children:[s.jsx(A,{variant:"contained",color:"primary",startIcon:s.jsx(Qn,{}),onClick:ft,sx:{borderRadius:2,px:2.5,py:.75,fontWeight:600,boxShadow:2,fontSize:"0.875rem","&:hover":{boxShadow:4,transform:"translateY(-1px)"},transition:"all 0.2s ease"},children:"Create Playlist"}),s.jsx(A,{variant:"contained",color:"secondary",startIcon:s.jsx(ma,{}),onClick:()=>{Ve(!0)},sx:{borderRadius:2,px:2.5,py:.75,fontWeight:600,boxShadow:2,fontSize:"0.875rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{boxShadow:4,transform:"translateY(-1px)",background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)"},transition:"all 0.2s ease"},children:"Collaborate"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(ya,{}),onClick:()=>{tt(!0)},sx:{borderRadius:2,px:2.5,py:.75,fontWeight:600,borderWidth:2,fontSize:"0.875rem",color:"#4CAF50",borderColor:"#4CAF50","&:hover":{borderWidth:2,transform:"translateY(-1px)",bgcolor:"#4CAF50",color:"white"},transition:"all 0.2s ease"},children:"Join with Code"}),s.jsx(A,{variant:"outlined",color:"primary",startIcon:s.jsx(Kn,{}),onClick:yt,sx:{borderRadius:2,px:2.5,py:.75,fontWeight:600,borderWidth:2,fontSize:"0.875rem","&:hover":{borderWidth:2,transform:"translateY(-1px)"},transition:"all 0.2s ease"},children:"Import Playlist"})]}),s.jsxs(u,{sx:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",flex:1,mx:3},children:[s.jsx(h,{variant:"h5",component:"h1",sx:{fontWeight:700,background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.secondary.main} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:.25,lineHeight:1.2},children:"Playlists"}),s.jsx(h,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"Manage and play your Power Hour collections"})]}),s.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:.25,p:.25,borderRadius:1.5,bgcolor:"background.paper",border:1,borderColor:"divider"},children:[s.jsx(G,{title:"Grid View",children:s.jsx(d,{size:"small",onClick:()=>re("grid"),sx:{bgcolor:"grid"===te?"primary.main":"transparent",color:"grid"===te?"white":"text.secondary",width:28,height:28,"&:hover":{bgcolor:"grid"===te?"primary.dark":"action.hover"},transition:"all 0.2s ease"},children:s.jsx(Zn,{sx:{fontSize:16}})})}),s.jsx(G,{title:"List View",children:s.jsx(d,{size:"small",onClick:()=>re("list"),sx:{bgcolor:"list"===te?"primary.main":"transparent",color:"list"===te?"white":"text.secondary",width:28,height:28,"&:hover":{bgcolor:"list"===te?"primary.dark":"action.hover"},transition:"all 0.2s ease"},children:s.jsx(ea,{sx:{fontSize:16}})})})]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:.5,p:.5,borderRadius:1.5,bgcolor:"background.paper",border:1,borderColor:"divider"},children:[s.jsx(ia,{sx:{fontSize:16,color:"text.secondary"}}),s.jsx(A,{variant:"name"===X?"contained":"text",size:"small",onClick:()=>ut("name"),endIcon:"name"===X?"asc"===Z?s.jsx(oa,{sx:{fontSize:12}}):s.jsx(sa,{sx:{fontSize:12}}):null,sx:{minWidth:"auto",px:1,py:.25,fontSize:"0.7rem",fontWeight:600,borderRadius:1,textTransform:"none"},children:"Name"}),s.jsx(A,{variant:"date"===X?"contained":"text",size:"small",onClick:()=>ut("date"),endIcon:"date"===X?"asc"===Z?s.jsx(oa,{sx:{fontSize:12}}):s.jsx(sa,{sx:{fontSize:12}}):null,sx:{minWidth:"auto",px:1,py:.25,fontSize:"0.7rem",fontWeight:600,borderRadius:1,textTransform:"none"},children:"Date"})]})]})]})}),o&&0===n.length?s.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:s.jsxs(u,{sx:{textAlign:"center"},children:[s.jsx(H,{size:48,sx:{mb:2}}),s.jsx(h,{variant:"body1",color:"text.secondary",children:"Loading playlists..."})]})}):o||0!==n.length?"list"===te?s.jsx(u,{sx:{py:2},children:n.map((e=>s.jsx(c,{elevation:1,sx:{mb:2,borderRadius:3,overflow:"hidden",border:`1px solid ${t.palette.divider}`,bgcolor:"background.paper",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer","&:hover":{transform:"translateY(-2px)",boxShadow:`0 8px 24px ${t.palette.primary.main}20`,borderColor:t.palette.primary.main}},onClick:()=>bt(e),children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",p:2},children:[s.jsx(u,{sx:{width:80,height:80,borderRadius:2,overflow:"hidden",mr:3,flexShrink:0,background:V[e.id]?"transparent":`linear-gradient(135deg, ${t.palette.primary.main}20 0%, ${t.palette.secondary.main}20 100%)`},children:V[e.id]?s.jsx(u,{component:"img",src:V[e.id],alt:e.name,sx:{width:"100%",height:"100%",objectFit:"cover"}}):s.jsx(u,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(aa,{sx:{fontSize:32,color:t.palette.primary.main,opacity:.6}})})}),s.jsxs(u,{sx:{flex:1,minWidth:0},children:[s.jsx(h,{variant:"h6",sx:{fontWeight:600,mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.name,children:e.name}),s.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:.5,display:"flex",alignItems:"center",gap:1},children:[new Date(e.date).toLocaleDateString(),"  ",st(e),"youtube"===e.type&&s.jsx(q,{label:"YouTube",size:"small",sx:{height:18,fontSize:"0.65rem",backgroundColor:"#FF0000",color:"white","& .MuiChip-label":{px:1}}}),e.isCollaborative&&s.jsx(q,{label:"Collaborative",size:"small",icon:s.jsx(ma,{sx:{fontSize:12}}),sx:{height:18,fontSize:"0.65rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white","& .MuiChip-label":{px:1}}})]}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem"},children:e.drinkingSoundPath?"Custom drinking sound":"Default drinking sound"}),e.isCollaborative&&s.jsx(u,{sx:{mt:1},children:s.jsx(fu,{presence:rt.userPresence[e.id]||{},playlistId:e.id,compact:!0})})]}),s.jsxs(u,{sx:{display:"flex",gap:1,ml:2},children:[s.jsx(G,{title:e.drinkingSoundPath?"Custom drinking sound set":"Set drinking sound",children:s.jsx(d,{onClick:t=>{t.stopPropagation(),xt(e)},sx:{bgcolor:e.drinkingSoundPath?"primary.main":"action.hover",color:e.drinkingSoundPath?"white":"text.secondary","&:hover":{bgcolor:"primary.main",color:"white"}},children:s.jsx(na,{sx:{fontSize:20}})})}),e.isCollaborative&&s.jsx(G,{title:"Invite Collaborators",children:s.jsx(d,{onClick:t=>{t.stopPropagation();const r=nt[e.id];r&&it(r)},sx:{bgcolor:"action.hover",color:"text.secondary","&:hover":{bgcolor:"secondary.main",color:"white"}},children:s.jsx(ga,{sx:{fontSize:20}})})}),s.jsx(G,{title:"View Details & Edit",children:s.jsx(d,{onClick:t=>{t.stopPropagation(),mt(e)},sx:{bgcolor:"action.hover",color:"text.secondary","&:hover":{bgcolor:"primary.main",color:"white"}},children:s.jsx(jn,{sx:{fontSize:20}})})}),s.jsx(G,{title:"Play Playlist",children:s.jsx(d,{onClick:t=>{t.stopPropagation(),bt(e)},sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark",transform:"scale(1.05)"}},children:s.jsx(hn,{sx:{fontSize:20}})})})]})]})},e.id)))}):s.jsx(u,{className:"playlist-grid-container",sx:{display:"grid",gridTemplateColumns:"list"===te?"1fr":`repeat(auto-fill, minmax(${Math.max(de,180)}px, 1fr))`,gap:{xs:2,sm:3,md:4},justifyContent:"center",py:2,width:"100%",boxSizing:"border-box"},children:n.map((e=>s.jsxs(c,{elevation:2,sx:{position:"relative",borderRadius:4,overflow:"hidden",width:"100%",maxWidth:`${de}px`,height:1.1875*de,display:"flex",flexDirection:"column",transition:pe?"none":"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:`1px solid ${t.palette.divider}`,bgcolor:"background.paper","&:hover":{transform:pe?"none":"translateY(-8px)",boxShadow:`0 12px 32px ${t.palette.primary.main}25`,borderColor:t.palette.primary.main,"& .playlist-image":{transform:pe?"none":"scale(1.05)"},"& .playlist-play-overlay":{opacity:pe?0:1},"& .playlist-corner-button":{opacity:pe?0:1,visibility:pe?"hidden":"visible"},"& .resize-handle":{opacity:1,visibility:"visible"}}},children:[s.jsx(u,{className:"resize-handle",onMouseDown:dt,sx:{position:"absolute",top:0,right:0,width:48,height:40,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0, 0, 0, 0.04)",color:"text.secondary",borderRadius:"0 4px 0 12px",cursor:"nw-resize",opacity:0,visibility:"hidden",transition:"all 0.3s ease",zIndex:10,"&:hover":{bgcolor:"rgba(0, 0, 0, 0.1)",color:"text.primary",transform:"scale(1.02)"}},title:"Drag to resize all playlist cards",children:s.jsx(la,{sx:{fontSize:18}})}),s.jsxs(u,{sx:{width:"100%",height:.9375*de,position:"relative",overflow:"hidden",background:V[e.id]?"transparent":`linear-gradient(135deg, ${t.palette.primary.main}20 0%, ${t.palette.secondary.main}20 100%)`},onClick:()=>bt(e),children:[V[e.id]?s.jsx(u,{className:"playlist-image",component:"img",src:V[e.id],alt:e.name,sx:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",transition:"transform 0.3s ease"}}):s.jsxs(u,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:2},children:[s.jsx(aa,{sx:{fontSize:72,color:t.palette.primary.main,opacity:.6}}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontWeight:500},children:st(e)})]}),s.jsx(u,{className:"playlist-play-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0, 0, 0, 0.5)",opacity:0,transition:"opacity 0.3s ease",backdropFilter:"blur(4px)"},children:s.jsx(d,{onClick:t=>{t.stopPropagation(),bt(e)},sx:{bgcolor:"rgba(255, 255, 255, 0.95)",color:t.palette.primary.main,width:72,height:72,"&:hover":{bgcolor:"white",transform:"scale(1.1)"},transition:"all 0.2s ease",boxShadow:4},children:s.jsx(hn,{sx:{fontSize:36}})})})]}),s.jsxs(u,{className:"playlist-info",sx:{position:"relative",p:de<200?1:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",flex:1},children:[s.jsxs(u,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:.5},children:[s.jsx(h,{variant:"h6",sx:{fontWeight:600,fontSize:de<200?"0.7rem":de<250?"0.8rem":de<300?"0.9rem":"1rem",lineHeight:1.2,mb:0,maxWidth:"100%",wordBreak:"break-word",hyphens:"auto",whiteSpace:"normal",textAlign:"center"},title:e.name,children:e.name}),s.jsxs(u,{sx:{display:"flex",gap:.5,flexWrap:"wrap",justifyContent:"center"},children:["youtube"===e.type&&s.jsx(q,{label:"YouTube",size:"small",sx:{height:de<250?16:20,fontSize:de<250?"0.6rem":"0.7rem",backgroundColor:"#FF0000",color:"white","& .MuiChip-label":{px:de<250?.5:1}}}),e.isCollaborative&&s.jsx(q,{label:"Collaborative",size:"small",icon:s.jsx(ma,{sx:{fontSize:de<250?10:12}}),sx:{height:de<250?16:20,fontSize:de<250?"0.6rem":"0.7rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white","& .MuiChip-label":{px:de<250?.5:1}}})]})]}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontSize:de<250?"0.7rem":"0.8rem",mb:.25,whiteSpace:"nowrap"},children:new Date(e.date).toLocaleDateString()}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontSize:de<250?"0.7rem":"0.8rem",whiteSpace:"nowrap"},children:st(e)}),e.isCollaborative&&s.jsx(u,{sx:{mt:1},children:s.jsx(fu,{presence:rt.userPresence[e.id]||{},playlistId:e.id,compact:!0})}),s.jsx(d,{className:"playlist-corner-button",onClick:t=>{t.stopPropagation(),xt(e)},sx:{position:"absolute",bottom:0,left:0,bgcolor:e.drinkingSoundPath?"primary.main":"rgba(0, 0, 0, 0.04)",color:e.drinkingSoundPath?"white":"text.secondary",width:64,height:48,borderRadius:"0 16px 0 0",opacity:0,visibility:"hidden","&:hover":{bgcolor:"primary.main",color:"white",transform:"scale(1.02)"},transition:"all 0.3s ease",boxShadow:2},title:e.drinkingSoundPath?"Custom drinking sound set":"Set drinking sound",children:s.jsx(na,{sx:{fontSize:22}})}),s.jsx(d,{className:"playlist-corner-button",onClick:t=>{t.stopPropagation(),mt(e)},sx:{position:"absolute",bottom:0,right:0,bgcolor:"rgba(0, 0, 0, 0.04)",color:"text.secondary",width:64,height:48,borderRadius:"16px 0 0 0",opacity:0,visibility:"hidden","&:hover":{bgcolor:"primary.main",color:"white",transform:"scale(1.02)"},transition:"all 0.3s ease",boxShadow:2},title:"View Details & Edit",children:s.jsx(jn,{sx:{fontSize:22}})})]})]},e.id)))}):s.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:s.jsxs(c,{sx:{p:6,textAlign:"center",maxWidth:400,borderRadius:3,border:1,borderColor:"divider",bgcolor:"background.paper"},children:[s.jsx(aa,{sx:{fontSize:64,color:"text.secondary",mb:2,opacity:.5}}),s.jsx(h,{variant:"h6",color:"text.primary",gutterBottom:!0,sx:{fontWeight:600},children:"No playlists found"}),s.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,sx:{mb:3},children:"Create your first Power Hour playlist or import an existing one to get started."}),s.jsxs(u,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[s.jsx(A,{variant:"contained",startIcon:s.jsx(Qn,{}),onClick:ft,size:"small",children:"Create Playlist"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(Kn,{}),onClick:yt,size:"small",children:"Import"})]})]})})]}),s.jsxs(g,{open:E,onClose:()=>{I(!1),N(!1),D(null),R("")},fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:3,boxShadow:"0 24px 48px rgba(0, 0, 0, 0.2)",bgcolor:"background.paper",backgroundImage:"none"}},children:[s.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid",borderColor:"divider",pb:3,pt:3,px:3,bgcolor:"background.default"},children:[s.jsx(h,{variant:"h5",fontWeight:"bold",color:"text.primary",children:$?"Edit Playlist":"Create New Playlist"}),s.jsx(d,{onClick:()=>{I(!1),N(!1),D(null),R(""),U(!1)},sx:{color:"text.secondary","&:hover":{bgcolor:"action.hover",color:"text.primary"}},children:s.jsx(An,{})})]}),s.jsxs(b,{sx:{pt:3},children:[$&&z&&s.jsxs(u,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[s.jsxs(u,{sx:{flex:1},children:[s.jsx(u,{sx:{mb:3},children:W?s.jsx(T,{fullWidth:!0,value:M,onChange:e=>R(e.target.value),variant:"outlined",autoFocus:!0,onBlur:()=>U(!1),onKeyDown:e=>{"Enter"===e.key&&U(!1),"Escape"===e.key&&(R(n.find((e=>e.id===z))?.name||""),U(!1))},InputProps:{sx:{fontSize:"1.5rem",fontWeight:600}}}):s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(h,{variant:"h4",sx:{fontWeight:600,color:"text.primary",flex:1},children:M}),s.jsx(d,{onClick:()=>U(!0),sx:{color:"text.secondary","&:hover":{color:"primary.main",bgcolor:"action.hover"}},title:"Edit playlist name",children:s.jsx(Jn,{sx:{fontSize:20}})})]})}),(()=>{const e=n.find((e=>e.id===z));return e?s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Playlist Information"}),s.jsxs(c,{variant:"outlined",sx:{p:2,borderRadius:2,bgcolor:"background.paper"},children:[s.jsxs(h,{variant:"body2",color:"text.secondary",children:["ID: ",e.id]}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:["Date Created: ",new Date(e.date).toLocaleString()]}),e.drinkingSoundPath&&s.jsxs(h,{variant:"body2",color:"text.secondary",children:["Drinking Sound: ",e.drinkingSoundPath]}),s.jsxs(h,{variant:"body2",color:"text.secondary",mt:1,children:["Total Clips: ",e.clips.length]}),(()=>{const[t,r]=w.useState(Ue[e.id]||null),[n,a]=w.useState(!1);return w.useEffect((()=>{(async()=>{if(void 0===Ue[e.id]){a(!0);const t=await ot(e);r(t),a(!1)}else r(Ue[e.id])})()}),[e.id]),n?s.jsxs(u,{sx:{display:"flex",alignItems:"center",mt:1},children:[s.jsx(H,{size:16,sx:{mr:1}}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"Checking for share code..."})]}):t?s.jsxs(u,{sx:{mt:2,pt:2,borderTop:"1px solid",borderColor:"divider"},children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:"bold"},children:"Import Code"}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(c,{variant:"outlined",sx:{px:2,py:1,bgcolor:"action.hover",fontFamily:"monospace",fontSize:"1.1rem",fontWeight:"bold",letterSpacing:"0.1em",flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:t}),s.jsx(G,{title:"Copy share code",children:s.jsx(d,{size:"small",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),k("Share code copied to clipboard!")}catch(t){f("Failed to copy share code to clipboard")}})(t),sx:{color:"primary.main","&:hover":{bgcolor:"primary.main",color:"white"}},children:s.jsx(fa,{fontSize:"small"})})})]}),s.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"Share this code with others so they can import your playlist"})]}):null})()]})]}):null})(),(()=>{const e=n.find((e=>e.id===z));return e&&0!==e.clips.length?s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Clips"}),s.jsx(c,{variant:"outlined",sx:{maxHeight:250,overflow:"auto",borderRadius:2},children:s.jsx(v,{dense:!0,disablePadding:!0,children:e.clips.map(((n,a)=>{const i=n.id?`${n.id}-${a}`:`clip-${a}-${e.id}`;return s.jsx(S,{divider:a<e.clips.length-1,sx:{bgcolor:a%2==0?`${t.palette.primary.main}08`:"transparent",transition:"background-color 0.2s",cursor:"pointer","&:hover":{bgcolor:`${t.palette.primary.main}15`}},onClick:()=>{"youtube"!==e.type?(B.currentPlaylist?.id!==e.id?(B.playPlaylist(e),setTimeout((()=>B.playClipAtIndex(a)),100)):B.playClipAtIndex(a),J(!0)):r(`/youtube-player/${e.id}?clip=${a}`)},children:s.jsx(j,{primary:s.jsxs(h,{variant:"body2",noWrap:!0,title:n.name,children:[a+1,". ",n.name]}),secondary:s.jsxs(h,{variant:"caption",noWrap:!0,title:`Song: ${n.songName||"N/A"} | Duration: ${Bu(n.duration)}`,children:[n.songName||"N/A","  ",Bu(n.duration)]})})},i)}))})})]}):s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic",mt:2},children:"This playlist has no clips."})})()]}),s.jsxs(u,{sx:{width:{xs:"100%",md:260},display:"flex",flexDirection:"column",gap:1.5,p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"},children:[s.jsx(A,{variant:"contained",color:"primary",fullWidth:!0,size:"large",startIcon:s.jsx(Jn,{}),onClick:()=>{const e=n.find((e=>e.id===z));e&&(localStorage.setItem("edit_playlist",JSON.stringify(e)),r("/"),I(!1))},sx:{py:1.5,fontWeight:600,boxShadow:2,"&:hover":{boxShadow:4,transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},children:"Edit in Mix Creator"}),s.jsx(A,{variant:"contained",color:"secondary",fullWidth:!0,startIcon:s.jsx(Xn,{}),onClick:()=>(async e=>{if("youtube"!==e.type)if(window.electronAPI)try{l(!0);const t=await window.electronAPI.exportPlaylist(e.id);t&&t.success?k(`Playlist "${e.name}" exported to ${t.path}`):f(t.message||"Failed to export playlist.")}catch(t){f(`Failed to export playlist: ${t.message}`)}finally{l(!1)}else f("Electron API not available");else f("YouTube playlists cannot be exported as regular playlists.")})(n.find((e=>e.id===z))),sx:{bgcolor:"secondary.main",color:"secondary.contrastText","&:hover":{bgcolor:"secondary.dark",transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},children:"Export Playlist"}),s.jsx(A,{variant:"contained",fullWidth:!0,startIcon:s.jsx(Xn,{}),onClick:()=>(async e=>{if("youtube"!==e.type)if(window.electronAPI)if(e.clips.length)if(e.drinkingSoundPath)try{l(!0);const t=await window.electronAPI.exportPlaylistAsAudio(e.id);t&&t.success?k(`Playlist "${e.name}" exported to audio file: ${t.path}`):f(t.message||"Failed to export playlist as audio.")}catch(t){f(`Failed to export playlist as audio: ${t.message}`)}finally{l(!1)}else f("Playlist needs a drinking sound set before exporting as audio");else f("Cannot export empty playlist as audio");else f("Electron API not available");else f("YouTube playlists cannot be exported as audio files.")})(n.find((e=>e.id===z))),sx:{bgcolor:"info.main",color:"info.contrastText","&:hover":{bgcolor:"info.dark",transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},children:"Export as Audio"}),s.jsx(A,{variant:"contained",fullWidth:!0,startIcon:s.jsx(na,{}),onClick:()=>xt(n.find((e=>e.id===z))),sx:{bgcolor:"success.main",color:"success.contrastText","&:hover":{bgcolor:"success.dark",transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},children:"Manage Drinking Sounds"}),s.jsx(A,{variant:"contained",fullWidth:!0,startIcon:s.jsx(ra,{}),onClick:()=>(async e=>{try{if(!window.electronAPI)throw new Error("Electron API not available");const t=await window.electronAPI.selectPlaylistImage();if(t&&t.success&&t.path){const r=t.path,n={...e,imagePath:r};await window.electronAPI.savePlaylist(n)?(k(`Playlist image updated for "${e.name}"`),ct()):f("Failed to update playlist image")}}catch(t){f(`Error setting playlist image: ${t.message}`)}})(n.find((e=>e.id===z))),sx:{bgcolor:"warning.main",color:"warning.contrastText","&:hover":{bgcolor:"warning.dark",transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},children:"Set Playlist Image"})]})]}),(!$||!z)&&s.jsx(T,{autoFocus:!0,margin:"dense",id:"name",label:"Playlist Name",type:"text",fullWidth:!0,variant:"outlined",value:M,onChange:e=>R(e.target.value),error:null!==p,helperText:p,sx:{mt:2,mb:2}})]}),s.jsxs(P,{sx:{borderTop:"1px solid",borderColor:"divider",p:3,display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"background.default"},children:[s.jsx(u,{children:$&&z&&s.jsx(A,{variant:"contained",color:"error",size:"large",startIcon:s.jsx(dn,{}),onClick:()=>gt(n.find((e=>e.id===z))),sx:{minWidth:120,fontWeight:600,"&:hover":{transform:"translateY(-1px)",boxShadow:4},transition:"all 0.2s ease-in-out"},children:"Delete"})}),s.jsxs(u,{sx:{display:"flex",gap:2},children:[s.jsx(A,{onClick:()=>{I(!1),N(!1),D(null),R(""),U(!1)},variant:"outlined",color:"inherit",size:"large",sx:{minWidth:100,fontWeight:500,borderColor:"divider","&:hover":{borderColor:"text.secondary",bgcolor:"action.hover"}},children:"Cancel"}),s.jsx(A,{onClick:async()=>{if(M.trim())try{let e=!1,t="";if($&&z){const r=n.find((e=>e.id===z));if(!r)throw new Error("Playlist not found for update");if(r.isCollaborative)e=await rt.updateCollaborativePlaylistMetadata(r.id,{name:M.trim()}),t=e?`Collaborative playlist "${M}" updated.`:"Failed to update collaborative playlist.";else if("youtube"===r.type){const n={id:r.id,name:M.trim(),date:r.date,clips:r.clips,drinkingSoundPath:r.drinkingSoundPath,imagePath:r.imagePath};pc(n),e=!0,t=`YouTube playlist "${M}" updated.`}else{if(!window.electronAPI)throw new Error("Electron API not available");const n={...r,name:M.trim()};e=await window.electronAPI.savePlaylist(n),t=e?`Playlist "${M}" updated.`:"Failed to update playlist."}}else{if(!window.electronAPI)throw new Error("Electron API not available");const r={id:`pl_${Date.now()}`,name:M.trim(),date:(new Date).toISOString(),clips:[]};e=await window.electronAPI.savePlaylist(r),t=e?`Playlist "${M}" created.`:"Failed to create playlist."}e?(k(t),ct(),I(!1),N(!1),D(null),R(""),U(!1)):f(t)}catch(e){f(`Failed to save playlist: ${e.message}`)}else f("Playlist name is required")},variant:"contained",color:"primary",size:"large",sx:{minWidth:100,fontWeight:600,boxShadow:2,"&:hover":{boxShadow:4,transform:"translateY(-1px)"},transition:"all 0.2s ease-in-out"},children:$?"Save":"Create"})]})]})]}),s.jsx(K,{open:!!C,autoHideDuration:4e3,onClose:()=>k(null),children:s.jsx(x,{onClose:()=>k(null),severity:"success",sx:{width:"100%"},children:C})}),s.jsx(K,{open:!!p,autoHideDuration:4e3,onClose:()=>f(null),children:s.jsx(x,{onClose:()=>f(null),severity:"error",sx:{width:"100%"},children:p})}),s.jsxs("div",{style:{position:"fixed",top:"80px",right:0,height:"calc(100% - 80px)",zIndex:1250},children:[B.currentPlaylist&&s.jsxs("div",{style:{position:"absolute",top:"50%",right:Y?"320px":"20px",transform:"translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:t.palette.primary.dark,color:"white",padding:"16px 8px",borderRadius:"8px 0 0 8px",cursor:"pointer",boxShadow:"0 3px 5px rgba(0,0,0,0.3)",border:`1px solid ${t.palette.secondary.main}`,borderRight:"none",transition:"right 0.3s ease",zIndex:1251},onClick:()=>J(!Y),children:[Y?s.jsx(xn,{}):s.jsx(vn,{}),s.jsx("div",{style:{writingMode:"vertical-rl",transform:"rotate(180deg)",marginTop:"8px",fontWeight:"bold",letterSpacing:"1px",fontSize:"12px"},children:"PLAYLIST"})]}),s.jsx(ie,{variant:"persistent",anchor:"right",open:Y&&!!B.currentPlaylist,PaperProps:{sx:{width:320,bgcolor:t.palette.primary.dark,color:"#fff",p:2,display:"flex",flexDirection:"column",overflowY:"hidden",boxShadow:"-2px 0 10px rgba(0,0,0,0.3)",zIndex:1250,top:"80px !important",height:"calc(100vh - 80px) !important"}},children:B.currentPlaylist&&s.jsxs(s.Fragment,{children:[s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,borderBottom:"1px solid rgba(255,255,255,0.2)",pb:2},children:[s.jsx(h,{variant:"h6",sx:{fontWeight:"bold",color:"#fff"},children:B.currentPlaylist.name}),s.jsx(d,{onClick:()=>{J(!1)},sx:{color:"#fff",p:.5},children:s.jsx(An,{fontSize:"small"})})]}),s.jsxs(u,{sx:{flex:1,overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"8px","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.2) rgba(255, 255, 255, 0.05)",paddingRight:"4px"},children:[s.jsxs(h,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold",color:"#fff"},children:["Clips (",B.currentPlaylist.clips.length,")"]}),s.jsx(_e,{onDragEnd:async e=>{const{destination:t,source:r}=e;if(t&&B.currentPlaylist&&(t.droppableId!==r.droppableId||t.index!==r.index))try{const e={...B.currentPlaylist},[n]=e.clips.splice(r.index,1);e.clips.splice(t.index,0,n),window.electronAPI&&(await window.electronAPI.savePlaylist(e),k("Playlist clips reordered successfully."),ct())}catch(n){f(`Failed to save reordered playlist: ${n.message}`)}},children:s.jsx(Fe,{droppableId:"playlist-clips",children:e=>s.jsxs("div",{...e.droppableProps,ref:e.innerRef,children:[B.currentPlaylist?.clips.map(((e,r)=>{const n=e.id?`${e.id}-${r}`:`clip-${r}-${B.currentPlaylist?.id}`,a=e.id?`${e.id}-drag-${r}`:`drag-${r}-${B.currentPlaylist?.id}`;return s.jsx($e,{draggableId:a,index:r,children:(n,a)=>s.jsxs("div",{ref:n.innerRef,style:{...n.draggableProps.style,marginBottom:"8px",backgroundColor:r===B.currentClipIndex?"rgba(0,0,0,0.6)":a.isDragging?"rgba(0,0,0,0.5)":"rgba(0,0,0,0.4)",borderRadius:"4px",border:r===B.currentClipIndex?`1px solid ${t.palette.secondary.main}`:"1px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{style:{flex:1,minWidth:0,cursor:"pointer",padding:"8px",borderRadius:"4px 0 0 4px"},onClick:e=>{e.preventDefault(),e.stopPropagation(),B.currentPlaylist&&(B.playClipAtIndex(r),J(!0))},children:[s.jsxs("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[r+1,". ",e.songName||"Unknown"]}),s.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.artist||"Unknown Artist","  ",Bu(e.start)," - ",Bu(e.start+e.duration)]})]}),s.jsx("div",{...n.draggableProps,...n.dragHandleProps,style:{marginLeft:"8px",color:"rgba(255,255,255,0.5)",cursor:"grab",padding:"8px",borderRadius:"0 4px 4px 0",minWidth:"32px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:e=>{e.stopPropagation(),e.preventDefault()},children:s.jsx(ta,{fontSize:"small"})})]})},n)})),e.placeholder]})})})]})]})})]}),s.jsx(Yi,{open:ne,onClose:()=>{ae(!1),ce(null)},onSoundSelected:vt,currentSoundPath:le?.drinkingSoundPath,title:`Manage Drinking Sounds - ${le?.name||""}`}),s.jsx(Bo,{open:oe,onClose:()=>{se(!1),ce(null)},onSoundSelected:vt,currentSoundPath:le?.drinkingSoundPath,title:`Manage Drinking Sounds - ${le?.name||""}`}),s.jsxs(g,{open:xe,onClose:()=>{ve(!1),Se(null),Ce(!1),Pe(""),Ee([]),Me("")},maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 24px 48px rgba(0, 0, 0, 0.2)",bgcolor:"background.paper",backgroundImage:"none"}},children:[s.jsxs(y,{sx:{pb:1,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${t.palette.divider}`},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(u,{sx:{width:48,height:48,borderRadius:2,bgcolor:"youtube"===we?.type?"#FF0000":"primary.main",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:"youtube"===we?.type?s.jsx(da,{sx:{fontSize:24}}):s.jsx(aa,{sx:{fontSize:24}})}),s.jsxs(u,{children:[s.jsx(h,{variant:"h5",sx:{fontWeight:600,color:"text.primary"},children:"Manage Playlist"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:we?.name})]})]}),s.jsx(d,{onClick:()=>{ve(!1),Se(null),Ce(!1),Pe(""),Ee([]),Me("")},sx:{color:"text.secondary"},children:s.jsx(An,{})})]}),s.jsx(b,{sx:{pt:3},children:we&&s.jsxs(u,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:4},children:[s.jsxs(u,{sx:{flex:1},children:[s.jsxs(c,{sx:{p:3,mb:3,border:`1px solid ${t.palette.divider}`},children:[s.jsxs(h,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[s.jsx(jn,{sx:{color:"primary.main"}}),"Playlist Information"]}),s.jsxs(u,{sx:{display:"grid",gap:2},children:[s.jsxs(u,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Name"}),s.jsx(h,{variant:"body1",sx:{fontWeight:500},children:we.name})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Type"}),s.jsx(q,{label:"youtube"===we.type?"YouTube Playlist":"Audio Playlist",size:"small",sx:{bgcolor:"youtube"===we.type?"#FF0000":"primary.main",color:"white"}})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Clips"}),s.jsxs(h,{variant:"body1",children:[we.clips?.length||0," clips"]})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Created"}),s.jsx(h,{variant:"body1",children:new Date(we.date).toLocaleDateString()})]})]})]}),"youtube"===we.type&&s.jsxs(c,{sx:{p:3,mb:3,border:`1px solid ${t.palette.divider}`},children:[s.jsxs(h,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[s.jsx(ra,{sx:{color:"secondary.main"}}),"Thumbnail Management"]}),s.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s.jsx(A,{variant:"outlined",startIcon:s.jsx(ca,{}),onClick:async()=>{if(we&&"youtube"===we.type)try{if(!window.electronAPI)throw new Error("Electron API not available");const e=await window.electronAPI.selectPlaylistImage();e&&e.success&&e.path&&(xc(we.id,e.path)?(k(`Custom image set for "${we.name}"`),ct()):f("Failed to set custom image"))}catch(e){f(`Error setting custom image: ${e.message}`)}},fullWidth:!0,sx:{justifyContent:"flex-start"},children:"Set Custom Image"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(ua,{}),onClick:()=>{if(we&&"youtube"===we.type)try{bc(we.id)?(k(`Random thumbnail set for "${we.name}"`),ct()):f("Failed to set random thumbnail. Make sure the playlist has videos with thumbnails.")}catch(e){f(`Error setting random thumbnail: ${e.message}`)}},disabled:!we.clips?.length,fullWidth:!0,sx:{justifyContent:"flex-start"},children:"Use Random Video Thumbnail"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(Mn,{}),onClick:()=>{if(we&&"youtube"===we.type)try{vc(we.id)?(k(`Thumbnail cleared for "${we.name}"`),ct()):f("Failed to clear thumbnail")}catch(e){f(`Error clearing thumbnail: ${e.message}`)}},fullWidth:!0,sx:{justifyContent:"flex-start"},children:"Clear Thumbnail"})]})]})]}),s.jsxs(u,{sx:{flex:1},children:[s.jsxs(c,{sx:{p:3,mb:3,border:`1px solid ${t.palette.divider}`},children:[s.jsxs(h,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[s.jsx(ha,{sx:{color:"primary.main"}}),"Actions"]}),s.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s.jsx(A,{variant:"contained",startIcon:s.jsx(hn,{}),onClick:()=>{bt(we),ve(!1)},fullWidth:!0,size:"large",children:"Play Playlist"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(Jn,{}),onClick:()=>{if("youtube"===we.type){const e={playlistId:we.id,clipIndex:0,timestamp:Date.now()};localStorage.setItem("youtube_edit_context",JSON.stringify(e)),r("/youtube")}else localStorage.setItem("edit_playlist",JSON.stringify(we)),r("/");ve(!1)},fullWidth:!0,children:"Edit Playlist"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(na,{}),onClick:()=>{xt(we),ve(!1)},fullWidth:!0,children:"Set Drinking Sound"}),"youtube"===we?.type&&s.jsx(A,{variant:"outlined",startIcon:s.jsx(pa,{}),onClick:()=>{(async e=>{if("youtube"===e.type){try{if(vs.isAuthenticated()||await vs.autoSignIn(),vs.isAuthenticated()){const t=await ks.getSharedVersionOfPlaylist(e.id);if(t)return We(t),void Oe(!0)}}catch(t){}De(e),Re(!0)}else f("Only YouTube playlists can be shared to the community")})(we),ve(!1)},fullWidth:!0,sx:{color:"secondary.main",borderColor:"secondary.main","&:hover":{bgcolor:"secondary.main",color:"white"}},children:"Share to Community"}),!we?.isCollaborative&&s.jsx(A,{variant:"outlined",startIcon:s.jsx(ma,{}),onClick:()=>{Ze(we),Xe(!0),ve(!1)},fullWidth:!0,sx:{color:"#4CAF50",borderColor:"#4CAF50","&:hover":{bgcolor:"#4CAF50",color:"white"}},children:"Make Collaborative"}),we?.isCollaborative&&s.jsx(A,{variant:"outlined",startIcon:s.jsx(ga,{}),onClick:()=>{const e=Object.values(nt).find((e=>e.id===we.id));e&&(it(e),ve(!1))},fullWidth:!0,sx:{color:"info.main",borderColor:"info.main","&:hover":{bgcolor:"info.main",color:"white"}},children:"Invite Collaborators"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(dn,{}),onClick:()=>{window.confirm(`Are you sure you want to delete "${we.name}"? This action cannot be undone.`)&&(gt(we),ve(!1))},fullWidth:!0,sx:{color:"error.main",borderColor:"error.main","&:hover":{bgcolor:"error.main",color:"white"}},children:"Delete Playlist"})]})]}),we.clips&&we.clips.length>0&&s.jsxs(c,{sx:{p:3,border:`1px solid ${t.palette.divider}`},children:[s.jsxs(h,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[s.jsx(aa,{sx:{color:"primary.main"}}),"Clips (",we.clips.length,")"]}),s.jsx(u,{sx:{maxHeight:300,overflow:"auto"},children:we.clips.map(((e,n)=>s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,mb:1,bgcolor:"background.default",borderRadius:1,border:`1px solid ${t.palette.divider}`},children:[s.jsxs(u,{sx:{flex:1,minWidth:0},children:[s.jsxs(h,{variant:"body2",sx:{fontWeight:500},noWrap:!0,children:[n+1,". ",e.name||e.title||"Untitled"]}),s.jsxs(h,{variant:"caption",color:"text.secondary",noWrap:!0,children:[e.artist||"Unknown Artist","  ",Bu(e.start||0)," - ",Bu((e.start||0)+(e.duration||60))]})]}),"youtube"===we.type&&s.jsx(d,{size:"small",onClick:()=>((e,t)=>{if("youtube"!==e.type)return;const n={playlistId:e.id,clipIndex:t,timestamp:Date.now()};localStorage.setItem("youtube_edit_context",JSON.stringify(n)),r("/youtube")})(we,n),sx:{ml:1,color:"primary.main","&:hover":{bgcolor:"primary.main",color:"white"}},title:"Edit this clip",children:s.jsx(Jn,{sx:{fontSize:16}})})]},e.id||n)))})]})]})]})})]}),s.jsx(ac,{open:Te,onClose:()=>{Re(!1),De(null)},playlist:"youtube"===ze?.type?ze:null,onSuccess:e=>{k(`Playlist "${e.name}" shared successfully! Share code: ${e.shareCode}`),Re(!1),De(null),window.dispatchEvent(new CustomEvent("playlistShared",{detail:e}))}}),s.jsx(ic,{open:Le,onClose:()=>{Oe(!1),We(null)},playlist:Ne,onSuccess:e=>{k(`Playlist "${e.name}" updated successfully!`),Oe(!1),We(null),window.dispatchEvent(new CustomEvent("playlistShared",{detail:e}))}}),s.jsx(hu,{open:He,onClose:()=>{Ve(!1)}}),qe&&s.jsx(pu,{open:Ye,onClose:()=>{Ge(!1),Je(null)},playlistId:qe.id,playlistName:qe.name,inviteCode:qe.inviteCode}),Qe&&s.jsx(_u,{open:Ke,onClose:()=>{Xe(!1),Ze(null)},playlist:Qe,playlistType:"youtube"===Qe.type?"youtube":"regular",onSuccess:e=>{k(`Playlist "${Qe?.name}" successfully converted to collaborative!`),ct()}}),s.jsx(Fu,{open:et,onClose:()=>{tt(!1)},onSuccess:e=>{k("Successfully joined collaborative playlist!"),ct()}})]})};let Vu=!1,Yu=null;const Gu=(e=2048)=>{const t=Bn(),[r,n]=i.useState({frequencyData:new Uint8Array(e/2),waveformData:new Uint8Array(e),volume:0,isActive:!1,bassLevel:0,midLevel:0,trebleLevel:0,beatDetected:!1,beatStrength:0,peakFrequency:0,spectralCentroid:0,spectralRolloff:0,frequencyBands:new Array(8).fill(0)}),a=i.useRef(null),o=i.useRef(null),s=i.useRef(null),l=i.useRef(null),c=i.useRef(null),[u,d]=i.useState(!1);i.useRef([]);const h=i.useRef(0),p=i.useRef([]),f=t=>{try{if(c.current===t&&s.current&&a.current)return!0;o.current||(o.current=new(window.AudioContext||window.webkitAudioContext));const n=o.current;if("suspended"===n.state&&n.resume(),a.current||(a.current=n.createAnalyser(),a.current.fftSize=e,a.current.smoothingTimeConstant=.8),s.current){try{s.current.disconnect()}catch(xz){}s.current=null}try{if(t.audioSourceNode)return!1;const e=n.createMediaElementSource(t);return e.connect(a.current),a.current.connect(n.destination),s.current=e,c.current=t,!0}catch(r){return!1}}catch(vz){if(s.current){try{s.current.disconnect()}catch(xz){}s.current=null}return!1}},m=()=>{let t,r,i;if(u||!a.current){const n=(()=>{const t=new Uint8Array(e/2),r=new Uint8Array(e);for(let e=0;e<t.length;e++){const r=Math.max(0,100-.5*e),n=50*Math.random();t[e]=Math.min(255,r+n)}const n=.001*Date.now();for(let e=0;e<r.length;e++){const t=60*Math.sin(3*n+.05*e)+128;r[e]=Math.max(0,Math.min(255,t))}return{frequencyData:t,waveformData:r,volume:.6*Math.random()+.3,bassLevel:.8*Math.random(),midLevel:.6*Math.random(),trebleLevel:.7*Math.random(),beatDetected:Math.random()>.9,beatStrength:2*Math.random(),peakFrequency:Math.random(),spectralCentroid:.5*Math.random(),spectralRolloff:.8*Math.random()+.2,frequencyBands:new Array(8).fill(0).map((()=>.8*Math.random()))}})();t=n.frequencyData,r=n.waveformData,i=n.volume}else{const e=a.current;t=new Uint8Array(e.frequencyBinCount),r=new Uint8Array(e.fftSize),e.getByteFrequencyData(t),e.getByteTimeDomainData(r),i=t.reduce(((e,t)=>e+t),0)/(255*t.length)}const o=Math.floor(.2*t.length),s=Math.floor(.6*t.length),l=t.slice(0,o).reduce(((e,t)=>e+t),0)/(255*o),c=t.slice(o,s).reduce(((e,t)=>e+t),0)/(255*(s-o)),d=t.slice(s).reduce(((e,t)=>e+t),0)/(255*(t.length-s)),f=(e=>{const t=Math.floor(.1*e.length);let r=0;for(let o=0;o<t;o++)r+=(e[o]/255)**2;p.current.push(r),p.current.length>43&&p.current.shift();const n=p.current.reduce(((e,t)=>e+t),0)/p.current.length,a=Date.now(),i=r>1.3*n&&a-h.current>100;return i&&(h.current=a),{detected:i,strength:Math.min(r/(n||1),3)}})(t);let m=0,g=0;for(let e=0;e<t.length;e++)t[e]>g&&(g=t[e],m=e);const y=(e=>{let t=0,r=0;for(let n=0;n<e.length;n++){const a=e[n]/255;t+=n*a,r+=a}return r>0?t/r:0})(t),b=((e,t=.85)=>{const r=e.reduce(((e,t)=>e+(t/255)**2),0)*t;let n=0;for(let a=0;a<e.length;a++)if(n+=(e[a]/255)**2,n>=r)return a/e.length;return 1})(t),x=(e=>{const t=Math.floor(e.length/8),r=[];for(let n=0;n<8;n++){let a=0;const i=n*t,o=Math.min(i+t,e.length);for(let t=i;t<o;t++)a+=e[t]/255;r.push(a/(o-i))}return r})(t);n({frequencyData:t,waveformData:r,volume:i,isActive:!0,bassLevel:l,midLevel:c,trebleLevel:d,beatDetected:f.detected,beatStrength:f.strength,peakFrequency:m/t.length,spectralCentroid:y,spectralRolloff:b,frequencyBands:x})},g=()=>{if(l.current)return;const e=()=>{m(),l.current=requestAnimationFrame(e)};e()},y=()=>{l.current&&(cancelAnimationFrame(l.current),l.current=null),n((e=>({...e,isActive:!1,volume:0,bassLevel:0,midLevel:0,trebleLevel:0,beatDetected:!1,beatStrength:0})))};return i.useEffect((()=>{const r=t.mixAudio,n=t.mixPlaying,i=t.playlistSound,l=t.playlistPlaying;if(r&&n)f(r)?(d(!1),g()):(d(!0),g());else if(i&&l){if(Vu)return d(!0),void g();if((()=>{try{if(window.Howler&&window.Howler.ctx){const n=window.Howler.ctx;if(window.Howler._howls&&window.Howler._howls.length>0){const i=window.Howler._howls.find((e=>e.playing()));if(i&&i._sounds&&i._sounds.length>0){const l=i._sounds[0];if(l._node){if(a.current)try{a.current.disconnect()}catch(xz){}if(s.current){try{s.current.disconnect()}catch(xz){}s.current=null}const i=n.createAnalyser();if(i.fftSize=e,i.smoothingTimeConstant=.8,l._node instanceof HTMLAudioElement)try{if(c.current===l._node&&s.current&&a.current)return!0;if(Vu&&Yu===l._node)return!1;if(l._node.audioSourceNode)return!1;if(s.current&&c.current!==l._node){try{s.current.disconnect()}catch(xz){}s.current=null,c.current=null,Vu=!1,Yu=null}const e=n.createMediaElementSource(l._node);return e.connect(i),i.connect(n.destination),s.current=e,a.current=i,o.current=n,c.current=l._node,Vu=!0,Yu=l._node,!0}catch(t){return!1}else try{return l._node.connect(i),i.connect(n.destination),a.current=i,o.current=n,!0}catch(r){return!1}}}}}}catch(vz){}return!1})())return d(!1),void g();d(!0),g()}else d(!1),y();return()=>{y(),c.current===Yu&&(Vu=!1,Yu=null)}}),[t.mixAudio,t.mixPlaying,t.playlistSound,t.playlistPlaying,t.audioSource,e]),{...r,startAnalysis:g,stopAnalysis:y,forceConnection:()=>{if(window.Howler&&window.Howler.ctx)try{const t=window.Howler.ctx;if(window.Howler._howls&&window.Howler._howls.length>0){const n=window.Howler._howls.find((e=>e.playing()));if(n&&n._sounds&&n._sounds.length>0){const i=n._sounds[0];if(i._node){if(a.current)try{a.current.disconnect()}catch(xz){}if(s.current){try{s.current.disconnect()}catch(xz){}s.current=null}const n=t.createAnalyser();if(n.fftSize=e,n.smoothingTimeConstant=.8,!(i._node instanceof HTMLAudioElement))return i._node.connect(n),n.connect(t.destination),a.current=n,o.current=t,d(!1),g(),!0;try{const e=t.createMediaElementSource(i._node);return e.connect(n),n.connect(t.destination),s.current=e,a.current=n,o.current=t,c.current=i._node,d(!1),g(),!0}catch(r){return!1}}}}}catch(vz){}const t=document.querySelectorAll("audio");for(const e of t)if(!e.paused&&f(e))return d(!1),g(),!0;return!1}}},qu={type:"bars",showSongInfo:!0,showAnalysis:!1,fullScreen:!1,triviaMode:!1,sensitivity:1,colorMode:"theme",customColor:"#ff6b6b",barCount:64,smoothing:.8,particleCount:100,backgroundOpacity:.1,bloomIntensity:.5,motionBlur:!1,beatReactive:!0,glowEffect:!0,gradientColors:["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57"],colorCycleSpeed:1,frequencyColorMapping:!1,renderQuality:"high",showAlbumArt:!1,albumArtSize:"medium",albumArtPosition:"center",albumArtOpacity:.8,enableOnlineAlbumArt:!0},Ju=i.createContext(void 0),Ku=()=>{const e=i.useContext(Ju);if(!e)throw new Error("useVisualizer must be used within a VisualizerProvider");return e},Xu="powerHour_visualizerSettings",Qu=({children:e})=>{const[t,r]=i.useState((()=>{try{const e=localStorage.getItem(Xu);if(e){const t=JSON.parse(e);return{...qu,...t}}}catch(vz){}return qu}));i.useEffect((()=>{try{localStorage.setItem(Xu,JSON.stringify(t))}catch(vz){}}),[t]);const n={settings:t,updateSettings:e=>{r((t=>({...t,...e})))},resetSettings:()=>{r(qu)}};return s.jsx(Ju.Provider,{value:n,children:e})},Zu=({analysisData:e,width:t,height:r,settings:n})=>{const a=i.useRef(null),{currentTheme:o}=qc();return i.useEffect((()=>{const i=a.current;if(!i)return;const s=i.getContext("2d");if(!s)return;i.width=t,i.height=r;const l=(e,t,r,a,i,s)=>{const l=e/t;switch(n.colorMode){case"gradient":const e=n.gradientColors,t=l*(e.length-1),c=Math.floor(t),u=e[Math.min(c,e.length-1)];return`rgba(${parseInt(u.slice(1,3),16)}, ${parseInt(u.slice(3,5),16)}, ${parseInt(u.slice(5,7),16)}, ${.4+.6*r})`;case"reactive":return`rgba(${Math.floor(255*a)}, ${Math.floor(255*i)}, ${Math.floor(255*s)}, ${.4+.6*r})`;case"frequency":let d;return d=l<.33?0:l<.66?120:240,`hsla(${d}, ${70+30*r}%, ${40+40*r}%, ${.4+.6*r})`;case"rainbow":return`hsla(${360*l%360}, 70%, ${50+30*r}%, ${.7+.3*r})`;case"custom":return n.customColor;default:const h=Math.min(2*r,1);return`rgba(${parseInt(o.primary.slice(1,3),16)}, ${parseInt(o.primary.slice(3,5),16)}, ${parseInt(o.primary.slice(5,7),16)}, ${.3+.7*h})`}};(()=>{if(!e.isActive)return s.fillStyle=`rgba(0, 0, 0, ${n.backgroundOpacity})`,void s.fillRect(0,0,t,r);n.motionBlur?(s.fillStyle=`rgba(0, 0, 0, ${.1+.1*n.backgroundOpacity})`,s.fillRect(0,0,t,r)):(s.fillStyle=`rgba(0, 0, 0, ${n.backgroundOpacity})`,s.fillRect(0,0,t,r));const{frequencyData:a,beatDetected:i,beatStrength:o,bassLevel:c,midLevel:u,trebleLevel:d}=e,h=Math.min(n.barCount,a.length),p=t/h,f=.8*r,m=n.beatReactive&&i?1+.2*o:1;for(let e=0;e<h;e++){let t=a[Math.floor(e/h*a.length)]/255*n.sensitivity*m;const i=t*f,o=e*p,g=r-i,y=l(e,h,t,c||0,u||0,d||0);if(n.glowEffect&&t>.3){const e=t*n.bloomIntensity;s.shadowColor=y,s.shadowBlur=15*e,s.shadowOffsetX=0,s.shadowOffsetY=0}const b=s.createLinearGradient(0,g,0,r);if(b.addColorStop(0,y),b.addColorStop(.7,y.replace(/[\d.]+\)$/g,"0.8)")),b.addColorStop(1,y.replace(/[\d.]+\)$/g,"0.2)")),s.fillStyle=b,s.fillRect(o,g,p-1,i),"low"!==n.renderQuality&&t>.2){const e=s.createLinearGradient(0,r,0,r+.3*i);e.addColorStop(0,y.replace(/[\d.]+\)$/g,"0.3)")),e.addColorStop(1,y.replace(/[\d.]+\)$/g,"0.0)")),s.save(),s.scale(1,-1),s.translate(0,2*-r),s.fillStyle=e,s.fillRect(o,g,p-1,.3*i),s.restore()}s.shadowBlur=0}})()}),[e,t,r,o,n]),s.jsx("canvas",{ref:a,style:{width:"100%",height:"100%",display:"block"}})},ed=({analysisData:e,width:t,height:r})=>{const n=i.useRef(null),{currentTheme:a}=qc(),{settings:o}=Ku();return i.useEffect((()=>{const i=n.current;if(!i)return;const s=i.getContext("2d");s&&(i.width=t,i.height=r,(()=>{if(!e.isActive)return s.fillStyle=`rgba(0, 0, 0, ${o.backgroundOpacity})`,void s.fillRect(0,0,t,r);s.fillStyle=`rgba(0, 0, 0, ${o.backgroundOpacity})`,s.fillRect(0,0,t,r);const{frequencyData:n}=e,i=t/2,l=r/2,c=.4*Math.min(t,r),u=.2*c,d=Math.min(o.barCount,n.length),h=2*Math.PI/d;for(let e=0;e<d;e++){const p=n[Math.floor(e/d*n.length)]/255*o.sensitivity,f=p*(c-u),m=e*h-Math.PI/2,g=i+Math.cos(m)*u,y=l+Math.sin(m)*u,b=i+Math.cos(m)*(u+f),x=l+Math.sin(m)*(u+f);let v;switch(o.colorMode){case"rainbow":v=`hsl(${e/d*360}, 70%, 60%)`;break;case"custom":v=o.customColor;break;default:const t=Math.min(2*p,1);v=`rgba(${parseInt(a.primary.slice(1,3),16)}, ${parseInt(a.primary.slice(3,5),16)}, ${parseInt(a.primary.slice(5,7),16)}, ${.3+.7*t})`}s.strokeStyle=v,s.lineWidth=Math.max(1,(t+r)/400),s.beginPath(),s.moveTo(g,y),s.lineTo(b,x),s.stroke(),p>.7&&(s.shadowColor=v,s.shadowBlur=15,s.lineWidth=Math.max(2,(t+r)/300),s.beginPath(),s.moveTo(g,y),s.lineTo(b,x),s.stroke(),s.shadowBlur=0)}s.fillStyle=a.primary,s.beginPath(),s.arc(i,l,.3*u,0,2*Math.PI),s.fill(),s.strokeStyle=a.primary,s.lineWidth=2,s.beginPath(),s.arc(i,l,u,0,2*Math.PI),s.stroke()})())}),[e,t,r,a,o]),s.jsx("canvas",{ref:n,style:{width:"100%",height:"100%",display:"block"}})},td=({analysisData:e,width:t,height:r})=>{const n=i.useRef(null),{currentTheme:a}=qc(),{settings:o}=Ku();return i.useEffect((()=>{const i=n.current;if(!i)return;const s=i.getContext("2d");s&&(i.width=t,i.height=r,(()=>{if(!e.isActive)return s.fillStyle=`rgba(0, 0, 0, ${o.backgroundOpacity})`,s.fillRect(0,0,t,r),s.strokeStyle=a.primary,s.lineWidth=1,s.beginPath(),s.moveTo(0,r/2),s.lineTo(t,r/2),void s.stroke();s.fillStyle=`rgba(0, 0, 0, ${o.backgroundOpacity})`,s.fillRect(0,0,t,r);const{waveformData:n,frequencyData:i}=e,l=r/2,c=.4*r*o.sensitivity;s.strokeStyle=a.primary,s.lineWidth=2,s.beginPath();const u=t/n.length;for(let e=0;e<n.length;e++){const t=e*u,r=l+(n[e]-128)/128*c;0===e?s.moveTo(t,r):s.lineTo(t,r)}if(s.stroke(),"rainbow"===o.colorMode){const e=s.createLinearGradient(0,0,t,0),r=Math.min(10,i.length/10);for(let t=0;t<r;t++){const n=t/(r-1),a=i[Math.floor(t/r*i.length)]/255,o=360*n;e.addColorStop(n,`hsla(${o}, 70%, 60%, ${a})`)}s.strokeStyle=e,s.lineWidth=4,s.beginPath();for(let t=0;t<n.length;t++){const e=t*u,r=l+(n[t]-128)/128*c;0===t?s.moveTo(e,r):s.lineTo(e,r)}s.stroke()}if(e.volume>.3){s.shadowColor=a.primary,s.shadowBlur=20*e.volume,s.strokeStyle=a.primary,s.lineWidth=3,s.beginPath();for(let e=0;e<n.length;e++){const t=e*u,r=l+(n[e]-128)/128*c;0===e?s.moveTo(t,r):s.lineTo(t,r)}s.stroke(),s.shadowBlur=0}s.strokeStyle=`${a.primary}40`,s.lineWidth=1,s.beginPath(),s.moveTo(0,l),s.lineTo(t,l),s.stroke()})())}),[e,t,r,a,o]),s.jsx("canvas",{ref:n,style:{width:"100%",height:"100%",display:"block"}})},rd=({analysisData:e,width:t,height:r,settings:n})=>{const a=i.useRef(null),o=i.useRef([]),{currentTheme:l}=qc(),c=i.useRef(0),u=i.useRef([]);return i.useEffect((()=>{const i=a.current;if(!i)return;const s=i.getContext("2d");if(!s)return;i.width=t,i.height=r;const d=(e,t,r,n)=>{const a=Math.random()*Math.PI*2,i=8*r+2,o=120+60*r,s=h(n,r);return{x:e+20*(Math.random()-.5),y:t+20*(Math.random()-.5),vx:Math.cos(a)*i,vy:Math.sin(a)*i-3*Math.random(),size:12*r+3,life:o,maxLife:o,color:s,frequency:n,energy:r,trail:[]}},h=(t,r)=>{switch(n.colorMode){case"gradient":const a=n.gradientColors,i=Math.floor(t*(a.length-1));return a[Math.min(i,a.length-1)];case"reactive":return`rgb(${Math.floor(255*(e.bassLevel||0))}, ${Math.floor(255*(e.midLevel||0))}, ${Math.floor(255*(e.trebleLevel||0))})`;case"frequency":let o;return o=t<.33?0:t<.66?120:240,`hsl(${o}, 80%, ${50+30*r}%)`;case"rainbow":return`hsl(${(360*t+c.current*n.colorCycleSpeed*50)%360}, 70%, ${50+30*r}%)`;case"custom":return n.customColor;default:return l.primary}},p=(e,t)=>e.startsWith("#")?`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${t})`:e.startsWith("hsl")?e.replace("hsl","hsla").replace(")",`, ${t})`):e.startsWith("rgb")?e.replace("rgb","rgba").replace(")",`, ${t})`):e;(()=>{if(c.current+=.016,n.motionBlur?(s.fillStyle=`rgba(0, 0, 0, ${.05+.1*n.backgroundOpacity})`,s.fillRect(0,0,t,r)):(s.fillStyle=`rgba(0, 0, 0, ${n.backgroundOpacity})`,s.fillRect(0,0,t,r)),(()=>{if(!e.isActive)return void(u.current=[{x:.2*t,y:.5*r,intensity:.3},{x:.5*t,y:.3*r,intensity:.4},{x:.8*t,y:.6*r,intensity:.3}]);const{frequencyBands:a,beatDetected:i,beatStrength:o}=e,s=[],l=Math.min(a?.length||8,8);for(let e=0;e<l;e++){const c=(a?.[e]||0)*n.sensitivity;if(c>.1){const a=e/l*Math.PI*2,u=.3*Math.min(t,r),d=r/2,h=t/2+Math.cos(a)*u,p=d+Math.sin(a)*u,f=i&&n.beatReactive?20*o:0;s.push({x:h+(Math.random()-.5)*f,y:p+(Math.random()-.5)*f,intensity:c*(i&&n.beatReactive?1+.5*o:1)})}}u.current=s})(),(()=>{const e=o.current;for(let a=e.length-1;a>=0;a--){const i=e[a];n.motionBlur&&(i.trail.push({x:i.x,y:i.y}),i.trail.length>5&&i.trail.shift()),i.x+=i.vx,i.y+=i.vy,i.vy+=.05,i.vx*=.995,i.vy*=.995;for(const t of e)if(t!==i){const e=t.x-i.x,r=t.y-i.y,n=Math.sqrt(e*e+r*r);if(n<50&&n>0){const t=1e-4*(50-n);i.vx+=e/n*t,i.vy+=r/n*t}}(i.x<0||i.x>t)&&(i.vx*=-.8,i.x=Math.max(0,Math.min(t,i.x))),(i.y<0||i.y>r)&&(i.vy*=-.8,i.y=Math.max(0,Math.min(r,i.y))),i.life--,i.life<=0&&e.splice(a,1)}})(),(()=>{const e=u.current,t=Math.min(n.particleCount/30,8);for(const r of e)if(r.intensity>.1){const e=Math.floor(t*r.intensity);for(let t=0;t<e;t++){const e=Math.random();o.current.push(d(r.x,r.y,r.intensity,e))}}o.current.length>n.particleCount&&o.current.splice(0,o.current.length-n.particleCount)})(),"low"!==n.renderQuality)for(const e of u.current)if(e.intensity>.2){const t=30*e.intensity,r=s.createRadialGradient(e.x,e.y,0,e.x,e.y,t);r.addColorStop(0,`rgba(255, 255, 255, ${.3*e.intensity})`),r.addColorStop(1,"rgba(255, 255, 255, 0)"),s.fillStyle=r,s.beginPath(),s.arc(e.x,e.y,t,0,2*Math.PI),s.fill()}const a=o.current;for(const e of a){const t=e.life/e.maxLife,r=e.size*t;if(n.motionBlur&&e.trail.length>1){s.strokeStyle=p(e.color,.3*t),s.lineWidth=.3*r,s.beginPath(),s.moveTo(e.trail[0].x,e.trail[0].y);for(let t=1;t<e.trail.length;t++)s.lineTo(e.trail[t].x,e.trail[t].y);s.stroke()}if(n.glowEffect&&e.energy>.3){const t=e.energy*n.bloomIntensity;s.shadowColor=e.color,s.shadowBlur=20*t}const a=s.createRadialGradient(e.x,e.y,0,e.x,e.y,r);a.addColorStop(0,p(e.color,t)),a.addColorStop(.7,p(e.color,.6*t)),a.addColorStop(1,p(e.color,0)),s.fillStyle=a,s.beginPath(),s.arc(e.x,e.y,r,0,2*Math.PI),s.fill(),s.fillStyle=p(e.color,.8*t),s.beginPath(),s.arc(e.x,e.y,.3*r,0,2*Math.PI),s.fill(),s.shadowBlur=0}})()}),[e,t,r,l,n]),s.jsx("canvas",{ref:a,style:{width:"100%",height:"100%",display:"block"}})},nd=({analysisData:e,width:t,height:r,settings:n})=>{const a=i.useRef(null),{currentTheme:o}=qc(),l=i.useRef(new Uint8Array(1024)),c=i.useRef(0);return i.useEffect((()=>{const i=a.current;if(!i)return;const s=i.getContext("2d");if(!s)return;i.width=t,i.height=r;const u=e=>{const a=r/2,i=n.barCount,s=t/i;for(let t=0;t<i;t++){const r=t*s,n=20*Math.sin(2*c.current+.1*t)+30;e.fillStyle=`${o.primary}40`,e.fillRect(r,a-n/2,s-1,n)}},d=(e,a,i,o,s,l,c)=>{const u=n.barCount,d=t/u,p=.8*r,f=n.beatReactive&&i?1+.3*o:1;for(let t=0;t<u;t++){let i=a[Math.floor(t/u*a.length)]/255*n.sensitivity*f;i=Math.pow(i,.7);const o=i*p,m=t*d,g=r-o;let y=h(t,u,i,s,l,c);if(n.glowEffect&&i>.3){const t=i*n.bloomIntensity;e.shadowColor=y,e.shadowBlur=20*t,e.shadowOffsetX=0,e.shadowOffsetY=0}const b=e.createLinearGradient(0,g,0,r);if(b.addColorStop(0,y),b.addColorStop(.7,y.replace(/[\d.]+\)$/g,"0.8)")),b.addColorStop(1,y.replace(/[\d.]+\)$/g,"0.2)")),e.fillStyle=b,e.fillRect(m,g,d-1,o),"low"!==n.renderQuality){const t=e.createLinearGradient(0,r,0,r+.3*o);t.addColorStop(0,y.replace(/[\d.]+\)$/g,"0.3)")),t.addColorStop(1,y.replace(/[\d.]+\)$/g,"0.0)")),e.save(),e.scale(1,-1),e.translate(0,2*-r),e.fillStyle=t,e.fillRect(m,g,d-1,.3*o),e.restore()}i>.8&&"ultra"===n.renderQuality&&(e.fillStyle=y,e.beginPath(),e.arc(m+d/2,g-5,3,0,2*Math.PI),e.fill()),e.shadowBlur=0}n.frequencyColorMapping&&g(e,s,l,c)},h=(e,t,r,a,i,s)=>{const l=e/t;switch(n.colorMode){case"gradient":return p(l,r);case"reactive":return f(r,a,i,s);case"frequency":return m(l,r);case"rainbow":return`hsla(${(360*l+c.current*n.colorCycleSpeed*50)%360}, 70%, ${50+30*r}%, ${.7+.3*r})`;case"custom":return n.customColor;default:const e=Math.min(2*r,1);return`rgba(${parseInt(o.primary.slice(1,3),16)}, ${parseInt(o.primary.slice(3,5),16)}, ${parseInt(o.primary.slice(5,7),16)}, ${.4+.6*e})`}},p=(e,t)=>{const r=n.gradientColors,a=e*(r.length-1),i=Math.floor(a),o=a-i;if(i>=r.length-1)return r[r.length-1];const s=r[i],l=r[i+1],c=o<.5?s:l,u=.4+.6*t;return`rgba(${parseInt(c.slice(1,3),16)}, ${parseInt(c.slice(3,5),16)}, ${parseInt(c.slice(5,7),16)}, ${u})`},f=(e,t,r,n)=>`rgba(${Math.floor(255*t)}, ${Math.floor(255*r)}, ${Math.floor(255*n)}, ${.4+.6*e})`,m=(e,t)=>{let r;return r=e<.33?0:e<.66?120:240,`hsla(${r}, ${70+30*t}%, ${40+40*t}%, ${.4+.6*t})`},g=(e,t,n,a)=>{const i=r-10-5;e.fillStyle=`rgba(255, 0, 0, ${t})`,e.fillRect(10,i,50,10),e.fillStyle=`rgba(0, 255, 0, ${n})`,e.fillRect(70,i,50,10),e.fillStyle=`rgba(0, 0, 255, ${a})`,e.fillRect(130,i,50,10)};(()=>{if(c.current+=.016,n.motionBlur?(s.fillStyle=`rgba(0, 0, 0, ${.1+n.backgroundOpacity})`,s.fillRect(0,0,t,r)):(s.fillStyle=`rgba(0, 0, 0, ${n.backgroundOpacity})`,s.fillRect(0,0,t,r)),!e.isActive)return void u(s);const{frequencyData:a,beatDetected:i,beatStrength:o,bassLevel:h,midLevel:p,trebleLevel:f}=e;for(let e=0;e<a.length;e++)l.current[e]=l.current[e]*n.smoothing+a[e]*(1-n.smoothing);d(s,l.current,i,o,h,p,f)})()}),[e,t,r,o,n]),s.jsx("canvas",{ref:a,style:{width:"100%",height:"100%",display:"block"}})},ad=({analysisData:e,width:t,height:r,settings:n})=>{const a=i.useRef(null),{currentTheme:o}=qc(),l=i.useRef(0),c=i.useRef(0);return i.useEffect((()=>{const i=a.current;if(!i)return;const s=i.getContext("2d");if(!s)return;i.width=t,i.height=r;const u=(e,t,r,n)=>{e.save(),e.translate(t,r),e.rotate(.5*l.current);for(let a=0;a<6;a++){const t=n/6*(a+1),r=8+4*a;for(let n=0;n<r;n++){const a=n/r*Math.PI*2,i=Math.cos(a)*t,s=Math.sin(a)*t;e.fillStyle=`${o.primary}20`,e.beginPath(),e.arc(i,s,3,0,2*Math.PI),e.fill()}}e.restore()},d=(e,t,r,a,i,o,s,l,u,d)=>{e.save(),e.translate(t,r);const g=Math.min(o.length,8);for(let p=0;p<g;p++){const t=o[p]*n.sensitivity,r=a/g*(p+1)*(.5+.5*t),i=6+3*p;e.save(),e.rotate(c.current+.1*p),h(e,r,i,t,p),e.restore()}const y=30*s+10,b=m(0,s);n.glowEffect&&(e.shadowColor=b,e.shadowBlur=s*n.bloomIntensity*30),e.fillStyle=b,e.beginPath(),e.arc(0,0,y,0,2*Math.PI),e.fill(),e.shadowBlur=0,u>.2&&p(e,a,u),n.beatReactive&&d>1.5&&f(e,a,d),e.restore()},h=(e,t,r,a,i)=>{const o=m(i,a);e.strokeStyle=o,e.lineWidth=Math.max(1,3*a),n.glowEffect&&a>.3&&(e.shadowColor=o,e.shadowBlur=a*n.bloomIntensity*10);for(let n=0;n<r;n++){const s=n/r*Math.PI*2,l=(n+1)/r*Math.PI*2,c=Math.cos(s)*t,u=Math.sin(s)*t,d=Math.cos(l)*t,h=Math.sin(l)*t;e.beginPath(),e.moveTo(c,u),e.lineTo(d,h),e.stroke();const p=5*a+2;if(e.fillStyle=o,e.beginPath(),e.arc(c,u,p,0,2*Math.PI),e.fill(),i%2==0&&a>.4){const r=.6*t,n=Math.cos(s)*r,a=Math.sin(s)*r;e.beginPath(),e.moveTo(c,u),e.lineTo(n,a),e.stroke()}}e.shadowBlur=0},p=(e,t,r)=>{const a=m(7,r);e.strokeStyle=a,e.lineWidth=1,n.glowEffect&&(e.shadowColor=a,e.shadowBlur=r*n.bloomIntensity*15);for(let n=0;n<3;n++){const i=t+20*(n+1)*r,o=r*(1-.3*n);e.strokeStyle=a.replace(/[\d.]+\)$/g,`${o})`),e.beginPath(),e.arc(0,0,i,0,2*Math.PI),e.stroke()}e.shadowBlur=0},f=(e,t,r)=>{const a=1.2*t*(r/3),i=m(0,r/3);e.strokeStyle=i,e.lineWidth=2,n.glowEffect&&(e.shadowColor=i,e.shadowBlur=r*n.bloomIntensity*20);for(let n=0;n<12;n++){const t=n/12*Math.PI*2,r=Math.cos(t)*a,i=Math.sin(t)*a;e.beginPath(),e.moveTo(0,0),e.lineTo(r,i),e.stroke()}e.shadowBlur=0},m=(e,t)=>{switch(n.colorMode){case"gradient":return g(e/8,t);case"reactive":return y(t);case"frequency":return b(e/8,t);case"rainbow":return`hsla(${(45*e+l.current*n.colorCycleSpeed*30)%360}, 70%, ${50+30*t}%, ${.5+.5*t})`;case"custom":return n.customColor;default:return`rgba(${parseInt(o.primary.slice(1,3),16)}, ${parseInt(o.primary.slice(3,5),16)}, ${parseInt(o.primary.slice(5,7),16)}, ${.3+.7*t})`}},g=(e,t)=>{const r=n.gradientColors,a=Math.floor(e*(r.length-1)),i=r[Math.min(a,r.length-1)];return`rgba(${parseInt(i.slice(1,3),16)}, ${parseInt(i.slice(3,5),16)}, ${parseInt(i.slice(5,7),16)}, ${.3+.7*t})`},y=e=>`rgba(${Math.floor(255*e)}, ${Math.floor(128+127*e)}, ${Math.floor(255*(1-e))}, ${.3+.7*e})`,b=(e,t)=>`hsla(${300*e}, 70%, ${40+40*t}%, ${.3+.7*t})`;(()=>{l.current+=.016,n.motionBlur?(s.fillStyle=`rgba(0, 0, 0, ${.05+.1*n.backgroundOpacity})`,s.fillRect(0,0,t,r)):(s.fillStyle=`rgba(0, 0, 0, ${n.backgroundOpacity})`,s.fillRect(0,0,t,r));const a=t/2,i=r/2,o=.4*Math.min(t,r);if(!e.isActive)return void u(s,a,i,o);const{frequencyData:h,beatDetected:p,beatStrength:f,bassLevel:m,midLevel:g,trebleLevel:y,frequencyBands:b}=e;p&&n.beatReactive?c.current+=.1*f:c.current+=.005,d(s,a,i,o,h,b,m,g,y,f)})()}),[e,t,r,o,n]),s.jsx("canvas",{ref:a,style:{width:"100%",height:"100%",display:"block"}})},id=({analysisData:e,width:t,height:r,settings:n})=>{const a=i.useRef(null),{currentTheme:o}=qc(),l=i.useRef([]),c=i.useRef(0),u=i.useRef(0),d=i.useRef(null),h=20;return i.useEffect((()=>{const e=Math.ceil(t/h),n=Math.ceil(r/h);d.current={velocityX:Array(n).fill(null).map((()=>Array(e).fill(0))),velocityY:Array(n).fill(null).map((()=>Array(e).fill(0))),density:Array(n).fill(null).map((()=>Array(e).fill(0))),pressure:Array(n).fill(null).map((()=>Array(e).fill(0)))}}),[t,r]),i.useEffect((()=>{const i=a.current;if(!i)return;const s=i.getContext("2d");if(!s)return;i.width=t,i.height=r;const p=e=>{if(!d.current)return;const a=Math.ceil(t/h),i=Math.ceil(r/h);for(let t=0;t<i;t++)for(let r=0;r<a;r++){const a=d.current.density[t][r];if(a>.01){const i=r*h,o=t*h,s=f(a),l=Math.min(2*a,.8);n.glowEffect&&(e.shadowColor=s,e.shadowBlur=a*n.bloomIntensity*10),e.fillStyle=s.replace(/[\d.]+\)$/g,`${l})`),e.fillRect(i,o,h,h),e.shadowBlur=0}}if("ultra"===n.renderQuality){e.strokeStyle=`${o.primary}30`,e.lineWidth=1;for(let t=0;t<i;t+=2)for(let r=0;r<a;r+=2){const n=d.current.velocityX[t][r],a=d.current.velocityY[t][r];if(Math.sqrt(n*n+a*a)>.1){const i=r*h+10,o=t*h+10,s=i+20*n,l=o+20*a;e.beginPath(),e.moveTo(i,o),e.lineTo(s,l),e.stroke()}}}},f=t=>{switch(n.colorMode){case"gradient":const r=n.gradientColors,a=Math.floor(t*(r.length-1));return r[Math.min(a,r.length-1)];case"reactive":return`rgba(${Math.floor(255*(e.bassLevel||0))}, ${Math.floor(255*(e.midLevel||0))}, ${Math.floor(255*(e.trebleLevel||0))}`;case"frequency":return`hsla(${240*t}, 70%, ${40+40*t}%`;case"rainbow":return`hsla(${(360*t+c.current*n.colorCycleSpeed*30)%360}, 70%, ${50+30*t}%`;case"custom":return n.customColor.replace(")","");default:return`rgba(${parseInt(o.primary.slice(1,3),16)}, ${parseInt(o.primary.slice(3,5),16)}, ${parseInt(o.primary.slice(5,7),16)}`}},m=e=>{for(let n=0;n<5;n++){const a=r*(.3+.15*n),i=Math.max(.1,.6-.1*n),s=`${o.primary}${Math.floor(255*i).toString(16).padStart(2,"0")}`;e.strokeStyle=s,e.lineWidth=3-.3*n,e.beginPath();for(let r=0;r<=t;r+=3){const t=a+40*Math.sin(.008*r+c.current*(1+.3*n)+.7*n);0===r?e.moveTo(r,t):e.lineTo(r,t)}e.stroke()}},g=(e,a,i)=>{const o=Math.min(n.particleCount/40,6),s=a&&n.beatReactive?i:1,c=[{x:.2*t,y:.8*r},{x:.5*t,y:.9*r},{x:.8*t,y:.8*r},{x:.1*t,y:.6*r},{x:.9*t,y:.6*r}];for(let t=0;t<o*s;t++){const t=Math.floor(Math.random()*e.length),r=e[t]/255*n.sensitivity;if(r>.1){const n=c[Math.floor(Math.random()*c.length)],a={x:n.x+40*(Math.random()-.5),y:n.y+20*(Math.random()-.5),vx:6*(Math.random()-.5),vy:4*-Math.random()-3*r,size:12*r+4,life:150+80*r,maxLife:150+80*r,color:w(t/e.length,r),frequency:t/e.length,density:r,pressure:0,viscosity:.98};l.current.push(a)}}l.current.length>1.5*n.particleCount&&(l.current=l.current.slice(-n.particleCount))},y=(e,a,i,o,s)=>{const l=Math.min(a?.length||6,6);for(let c=0;c<l;c++){const i=(a?.[c]||0)*n.sensitivity,o=r*(.2+.12*c),s=60*i+15,l=.003+.001*c,d=.8+.3*c,h=S(c,i);e.strokeStyle=h,e.lineWidth=Math.max(1,5*i),n.glowEffect&&i>.3&&(e.shadowColor=h,e.shadowBlur=i*n.bloomIntensity*12),e.beginPath();for(let r=0;r<=t;r+=2){const t=o+Math.sin(r*l+u.current*d)*s;0===r?e.moveTo(r,t):e.lineTo(r,t)}e.stroke(),e.shadowBlur=0}},b=(e,a)=>{const i=.75*r,o=[],s=Math.min(a.length/3,80);for(let r=0;r<s;r++){const e=r/s*t,l=i-a[Math.floor(r/s*a.length)]/255*n.sensitivity*40+10*Math.sin(u.current+.1*r);o.push({x:e,y:l})}if(o.length>2){const a=j(),s=e.createLinearGradient(0,i,0,r);s.addColorStop(0,a),s.addColorStop(.6,a.replace(/[\d.]+\)$/g,"0.4)")),s.addColorStop(1,a.replace(/[\d.]+\)$/g,"0.1)")),e.fillStyle=s,e.beginPath(),e.moveTo(0,r),e.lineTo(0,o[0].y);for(let t=0;t<o.length-1;t++){const r=o[t],n=o[t+1],a=(r.x+n.x)/2,i=(r.y+n.y)/2;e.quadraticCurveTo(r.x,r.y,a,i)}e.lineTo(t,o[o.length-1].y),e.lineTo(t,r),e.closePath(),e.fill(),n.glowEffect&&(e.shadowColor=a,e.shadowBlur=8),e.strokeStyle=a,e.lineWidth=3,e.beginPath(),e.moveTo(0,o[0].y);for(let t=0;t<o.length-1;t++){const r=o[t],n=o[t+1],a=(r.x+n.x)/2,i=(r.y+n.y)/2;e.quadraticCurveTo(r.x,r.y,a,i)}e.stroke(),e.shadowBlur=0}},x=()=>{l.current=l.current.filter((e=>(e.x+=e.vx,e.y+=e.vy,e.vy+=.1,e.vx*=.99,e.vy*=.99,l.current.forEach((t=>{if(t!==e){const r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(r*r+n*n);if(a<50&&a>0){const t=.001*(50-a);e.vx+=r/a*t,e.vy+=n/a*t}}})),(e.x<0||e.x>t)&&(e.vx*=-.8,e.x=Math.max(0,Math.min(t,e.x))),e.life--,e.life>0&&e.y<r+50)))},v=e=>{l.current.forEach((t=>{const r=t.life/t.maxLife,a=t.size*r,i=e.createRadialGradient(t.x,t.y,0,t.x,t.y,a),o=t.color;i.addColorStop(0,o),i.addColorStop(.7,o.replace(/[\d.]+\)$/g,.6*r+")")),i.addColorStop(1,o.replace(/[\d.]+\)$/g,"0)")),n.glowEffect&&r>.5&&(e.shadowColor=o,e.shadowBlur=a*n.bloomIntensity),e.fillStyle=i,e.beginPath(),e.arc(t.x,t.y,a,0,2*Math.PI),e.fill(),e.shadowBlur=0}))},w=(e,t)=>{switch(n.colorMode){case"gradient":return C(e,t);case"reactive":return k(t);case"frequency":return P(e,t);case"rainbow":return`hsla(${(360*e+c.current*n.colorCycleSpeed*50)%360}, 70%, ${50+30*t}%, ${.6+.4*t})`;case"custom":return n.customColor;default:return`rgba(${parseInt(o.primary.slice(1,3),16)}, ${parseInt(o.primary.slice(3,5),16)}, ${parseInt(o.primary.slice(5,7),16)}, ${.4+.6*t})`}},S=(e,t)=>w(e/8,t).replace(/[\d.]+\)$/g,.3+.5*t+")"),j=()=>`rgba(${parseInt(o.primary.slice(1,3),16)}, ${parseInt(o.primary.slice(3,5),16)}, ${parseInt(o.primary.slice(5,7),16)}, 0.6)`,C=(e,t)=>{const r=n.gradientColors,a=Math.floor(e*(r.length-1)),i=r[Math.min(a,r.length-1)];return`rgba(${parseInt(i.slice(1,3),16)}, ${parseInt(i.slice(3,5),16)}, ${parseInt(i.slice(5,7),16)}, ${.4+.6*t})`},k=e=>`rgba(${Math.floor(100+155*e)}, ${Math.floor(150+105*e)}, ${Math.floor(255*(1-.5*e))}, ${.4+.6*e})`,P=(e,t)=>`hsla(${240*e}, 70%, ${40+40*t}%, ${.4+.6*t})`;(()=>{if(c.current+=.016,u.current+=.02,n.motionBlur?(s.fillStyle=`rgba(0, 0, 0, ${.03+.05*n.backgroundOpacity})`,s.fillRect(0,0,t,r)):(s.fillStyle=`rgba(0, 0, 0, ${n.backgroundOpacity})`,s.fillRect(0,0,t,r)),!e.isActive)return void m(s);(()=>{if(!d.current||!e.isActive)return;const{frequencyBands:n,bassLevel:a,midLevel:i,trebleLevel:o}=e,s=Math.ceil(t/h),l=Math.ceil(r/h),c=Math.floor(s/2),u=Math.floor(l/2);if(a&&a>.2){const e=Math.floor(5*a);for(let t=-e;t<=e;t++)for(let r=-e;r<=e;r++){const n=c+r,i=u+t;if(n>=0&&n<s&&i>=0&&i<l){const o=Math.sqrt(r*r+t*t);if(o<=e){const s=(1-o/e)*a*.5;d.current.velocityX[i][n]+=r*s,d.current.velocityY[i][n]+=t*s,d.current.density[i][n]+=s}}}}if(n)for(let e=0;e<Math.min(n.length,8);e++){const t=n[e];if(t>.1){const r=e/8*Math.PI*2,n=Math.cos(r)*t*.3,a=Math.sin(r)*t*.3,i=Math.floor(c+3*Math.cos(r)),o=Math.floor(u+3*Math.sin(r));i>=0&&i<s&&o>=0&&o<l&&(d.current.velocityX[o][i]+=n,d.current.velocityY[o][i]+=a,d.current.density[o][i]+=.5*t)}}for(let e=1;e<l-1;e++)for(let t=1;t<s-1;t++){const r=(d.current.velocityX[e-1][t]+d.current.velocityX[e+1][t]+d.current.velocityX[e][t-1]+d.current.velocityX[e][t+1])/4,n=(d.current.velocityY[e-1][t]+d.current.velocityY[e+1][t]+d.current.velocityY[e][t-1]+d.current.velocityY[e][t+1])/4;d.current.velocityX[e][t]=.99*d.current.velocityX[e][t]+.01*r,d.current.velocityY[e][t]=.99*d.current.velocityY[e][t]+.01*n;const a=(d.current.density[e-1][t]+d.current.density[e+1][t]+d.current.density[e][t-1]+d.current.density[e][t+1])/4;d.current.density[e][t]=.98*d.current.density[e][t]+.02*a}})(),p(s);const{frequencyData:a,beatDetected:i,beatStrength:o,bassLevel:l,midLevel:f,trebleLevel:w,frequencyBands:S}=e;g(a,i,o),x(),v(s),y(s,S),b(s,a)})()}),[e,t,r,o,n]),s.jsx("canvas",{ref:a,style:{width:"100%",height:"100%",display:"block"}})},od=({analysisData:e,width:t,height:r,settings:n})=>{const a=i.useRef(null),{currentTheme:o}=qc(),l=i.useRef([]),c=i.useRef([]),u=i.useRef(0),d=i.useRef(0),h=()=>{const e=["#ffffff","#ffffcc","#ffcc99","#ff9999","#99ccff","#ccccff"];return e[Math.floor(Math.random()*e.length)]},p=e=>{const t=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd"];return t[e%t.length]};return i.useEffect((()=>{const e=Math.min(2*n.particleCount,500);l.current=[];for(let n=0;n<e;n++)l.current.push({x:Math.random()*t,y:Math.random()*r,z:1e3*Math.random(),size:3*Math.random()+1,brightness:Math.random(),color:h(),twinkle:Math.random()*Math.PI*2});c.current=[];for(let t=0;t<8;t++)c.current.push({angle:t/8*Math.PI*2,radius:100+50*t,speed:.01+.005*t,size:10+3*t,color:p(t),intensity:0})}),[t,r,n.particleCount]),i.useEffect((()=>{const i=a.current;if(!i)return;const s=i.getContext("2d");if(!s)return;i.width=t,i.height=r;const p=(e,n,a)=>{d.current+=.001,f(e,.3);const i=.3*Math.min(t,r);for(let t=0;t<4;t++){const r=t/4*Math.PI*2+d.current;e.strokeStyle=`${o.primary}30`,e.lineWidth=2,e.beginPath();for(let t=0;t<i;t+=5){const i=r+.01*t,o=n+Math.cos(i)*t,s=a+Math.sin(i)*t;0===t?e.moveTo(o,s):e.lineTo(o,s)}e.stroke()}},f=(e,t=1)=>{l.current.forEach((r=>{r.twinkle+=.1;const a=(Math.sin(r.twinkle)+1)/2,i=r.brightness*a*t;if(i>.1){const t=.8*i,a=r.size*(.5+.5*i);n.glowEffect&&i>.7&&(e.shadowColor=r.color,e.shadowBlur=a*n.bloomIntensity*3),e.fillStyle=r.color.replace(/[\d.]+\)$/g,`${t})`),e.beginPath(),e.arc(r.x,r.y,a,0,2*Math.PI),e.fill(),e.shadowBlur=0}}))},m=(e,a,i,o)=>{const s=.4*Math.min(t,r);for(let t=0;t<4;t++){const r=t/4*Math.PI*2+d.current;for(let t=20;t<s;t+=10){const l=o[Math.floor(t/s*o.length)]/255*n.sensitivity;if(l>.1){const o=r+.008*t,c=a+Math.cos(o)*t,u=i+Math.sin(o)*t,d=v(t/s,l),h=8*l+2;n.glowEffect&&l>.5&&(e.shadowColor=d,e.shadowBlur=h*n.bloomIntensity),e.fillStyle=d,e.beginPath(),e.arc(c,u,h,0,2*Math.PI),e.fill(),e.shadowBlur=0}}}},g=(e,t,r)=>{c.current.forEach(((a,i)=>{a.angle+=a.speed,i<e.length&&(a.intensity=e[i]*n.sensitivity),t&&n.beatReactive&&(a.intensity+=.3*r)}))},y=(e,t,r)=>{c.current.forEach((a=>{const i=t+Math.cos(a.angle)*a.radius,o=r+Math.sin(a.angle)*a.radius,s=a.size*(.5+.5*a.intensity),l=.6+.4*a.intensity;n.glowEffect&&a.intensity>.3&&(e.shadowColor=a.color,e.shadowBlur=s*n.bloomIntensity*2);const c=e.createRadialGradient(i,o,0,i,o,s);c.addColorStop(0,a.color),c.addColorStop(1,a.color.replace(/[\d.]+\)$/g,"0)")),e.fillStyle=c,e.beginPath(),e.arc(i,o,s,0,2*Math.PI),e.fill(),"low"!==n.renderQuality&&(e.strokeStyle=a.color.replace(/[\d.]+\)$/g,.2*l+")"),e.lineWidth=1,e.beginPath(),e.arc(t,r,a.radius,0,2*Math.PI),e.stroke()),e.shadowBlur=0}))},b=(e,t,r,n,a,i)=>{if(n<.2)return;const o=200*n+50,s=w(n,a,i),l=e.createRadialGradient(t,r,0,t,r,o);l.addColorStop(0,s),l.addColorStop(.5,s.replace(/[\d.]+\)$/g,.3*n+")")),l.addColorStop(1,s.replace(/[\d.]+\)$/g,"0)")),e.fillStyle=l,e.beginPath(),e.arc(t,r,o,0,2*Math.PI),e.fill()},x=(e,t,r,a)=>{const i=100*a,o=h();e.strokeStyle=o,e.lineWidth=3,n.glowEffect&&(e.shadowColor=o,e.shadowBlur=a*n.bloomIntensity*20);for(let n=0;n<12;n++){const a=n/12*Math.PI*2,o=i*(.5+.5*Math.random()),s=t+20*Math.cos(a),l=r+20*Math.sin(a),c=t+Math.cos(a)*o,u=r+Math.sin(a)*o;e.beginPath(),e.moveTo(s,l),e.lineTo(c,u),e.stroke()}e.shadowBlur=0},v=(e,t)=>{switch(n.colorMode){case"gradient":return S(e,t);case"reactive":return j(t);case"frequency":return C(e,t);case"rainbow":return`hsla(${(360*e+u.current*n.colorCycleSpeed*30)%360}, 70%, ${50+30*t}%, ${.5+.5*t})`;case"custom":return n.customColor;default:return`rgba(${parseInt(o.primary.slice(1,3),16)}, ${parseInt(o.primary.slice(3,5),16)}, ${parseInt(o.primary.slice(5,7),16)}, ${.4+.6*t})`}},w=(e,t,r)=>`rgba(${Math.floor(255*e)}, ${Math.floor(255*t)}, ${Math.floor(255*r)}, ${.4*e})`,S=(e,t)=>{const r=n.gradientColors,a=Math.floor(e*(r.length-1)),i=r[Math.min(a,r.length-1)];return`rgba(${parseInt(i.slice(1,3),16)}, ${parseInt(i.slice(3,5),16)}, ${parseInt(i.slice(5,7),16)}, ${.4+.6*t})`},j=e=>`rgba(${Math.floor(100+155*e)}, ${Math.floor(50+205*e)}, ${Math.floor(255)}, ${.4+.6*e})`,C=(e,t)=>`hsla(${300*e}, 80%, ${40+40*t}%, ${.4+.6*t})`;(()=>{u.current+=.016,s.fillStyle=`rgba(5, 5, 15, ${n.backgroundOpacity})`,s.fillRect(0,0,t,r);const a=t/2,i=r/2;if(!e.isActive)return void p(s,a,i);const{frequencyData:o,beatDetected:l,beatStrength:c,bassLevel:h,midLevel:v,trebleLevel:w,frequencyBands:S}=e;d.current+=.002+.01*h,g(S,l,c),f(s),m(s,a,i,o),y(s,a,i),b(s,a,i,h,v,w),l&&n.beatReactive&&x(s,a,i,c)})()}),[e,t,r,o,n]),s.jsx("canvas",{ref:a,style:{width:"100%",height:"100%",display:"block"}})},sd=({open:e,onClose:t})=>{const r=Bn(),[n,a]=i.useState([]),[o,l]=i.useState(!1),[c,d]=i.useState(null),{imageUrls:p}=ba(n);i.useEffect((()=>{e&&f()}),[e]);const f=async()=>{l(!0),d(null);try{if(!window.electronAPI)throw new Error("Electron API not available");const e=await window.electronAPI.listPlaylists();if(Array.isArray(e)){const t=e.sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()));a(t)}else a([])}catch(e){d("Failed to load playlists. Please try again."),a([])}finally{l(!1)}},m=e=>{try{return new Date(e).toLocaleDateString()}catch{return"Unknown date"}};return s.jsxs(g,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{minHeight:500,maxHeight:"85vh",width:"100%",maxWidth:600}},children:[s.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(wi,{}),"Select Playlist"]}),s.jsxs(b,{sx:{p:0},children:[o&&s.jsx(u,{sx:{display:"flex",justifyContent:"center",p:4},children:s.jsx(H,{})}),c&&s.jsx(u,{sx:{p:2},children:s.jsx(x,{severity:"error",children:c})}),!o&&!c&&0===n.length&&s.jsx(u,{sx:{p:4,textAlign:"center"},children:s.jsx(h,{variant:"body1",color:"text.secondary",children:"No playlists found. Create a playlist first to see it here."})}),!o&&!c&&n.length>0&&s.jsx(v,{sx:{pt:0},children:n.map((e=>{const n=r.currentPlaylist?.id===e.id;return s.jsx(S,{disablePadding:!0,children:s.jsxs(oe,{onClick:()=>(e=>{r.playPlaylist(e),t()})(e),selected:n,sx:{py:1.5,px:2,"&.Mui-selected":{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"}}},children:[s.jsx(F,{sx:{color:n?"inherit":"text.secondary",minWidth:72},children:s.jsx(u,{sx:{width:56,height:56,borderRadius:2,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:p[e.id]?"transparent":"rgba(255, 255, 255, 0.1)"},children:p[e.id]?s.jsx(u,{component:"img",src:p[e.id],alt:e.name,sx:{width:"100%",height:"100%",objectFit:"cover"}}):s.jsx(aa,{sx:{fontSize:28,opacity:.7}})})}),s.jsx(j,{primary:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(h,{variant:"subtitle1",component:"span",children:e.name}),n&&s.jsx(q,{label:"Playing",size:"small",color:"secondary",sx:{fontSize:"0.7rem",height:20}})]}),secondary:s.jsxs(u,{sx:{mt:.5},children:[s.jsxs(h,{variant:"caption",display:"block",children:[e.clips.length," clip",1!==e.clips.length?"s":""]}),s.jsxs(h,{variant:"caption",color:"text.secondary",children:["Created: ",m(e.date)]})]})})]})},e.id)}))})]}),s.jsxs(P,{sx:{p:2},children:[s.jsx(A,{onClick:t,variant:"outlined",children:"Cancel"}),!o&&!c&&s.jsx(A,{onClick:f,variant:"text",children:"Refresh"})]})]})},ld=()=>{const e=Bn(),{settings:t,updateSettings:r}=Ku(),{imageUrl:n}=(e=>{const[t,r]=i.useState(null),[n,a]=i.useState(!1),[o,s]=i.useState(null);return i.useEffect((()=>{let t=!0,n=null;return(async()=>{if(!e)return r(null),a(!1),void s(null);if(e.startsWith("blob:")||e.startsWith("http"))return r(e),a(!1),void s(null);if(window.electronAPI){a(!0),s(null);try{const i=await window.electronAPI.getFileBlob(e);if(!t)return;const o=e.toLowerCase().split(".").pop();let s="image/jpeg";switch(o){case"png":s="image/png";break;case"gif":s="image/gif";break;case"webp":s="image/webp";break;default:s="image/jpeg"}const l=new Blob([i],{type:s}),c=URL.createObjectURL(l);n=c,r(c),a(!1)}catch(i){if(!t)return;s(`Failed to load image: ${i.message}`),r(null),a(!1)}}else r(e),a(!1),s(null)})(),()=>{t=!1,n&&URL.revokeObjectURL(n)}}),[e]),{imageUrl:t,loading:n,error:o}})(e.currentPlaylist?.imagePath),a=(()=>{if(e.currentPlaylist&&e.currentClipIndex>=0){const t=e.currentPlaylist.clips[e.currentClipIndex];return{songPath:t?.clipPath,artist:t?.artist,album:t?.album,songName:t?.songName}}return{songPath:void 0,artist:void 0,album:void 0,songName:void 0}})(),{albumArtUrl:o}=((e,t,r,n=!0)=>{const[a,o]=i.useState(null),[s,l]=i.useState(!1),[c,u]=i.useState(null);return i.useEffect((()=>{let a=!0,i=null;return(async()=>{if(!(e||t&&r))return o(null),l(!1),void u(null);if(window.electronAPI){l(!0),u(null);try{if(e){const t=await window.electronAPI.extractAlbumArt(e);if(!a)return;if(t&&t.success&&t.imageBuffer){const e=new Blob([t.imageBuffer],{type:t.mimeType||"image/jpeg"}),r=URL.createObjectURL(e);return i=r,o(r),void l(!1)}}if(n&&t&&r){const e=await window.electronAPI.lookupAlbumArt(t,r);if(!a)return;if(e&&e.success&&e.imageUrl)return o(e.imageUrl),void l(!1)}o(null),l(!1)}catch(s){if(!a)return;u(`Failed to load album art: ${s.message}`),o(null),l(!1)}}else o(null),l(!1),u(null)})(),()=>{a=!1,i&&URL.revokeObjectURL(i)}}),[e,t,r,n]),{albumArtUrl:a,loading:s,error:c}})(a.songPath,a.artist,a.album,t.enableOnlineAlbumArt);w.useEffect((()=>{const e=document.createElement("style");return e.textContent="\n      @keyframes pulse {\n        0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }\n        50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.6; }\n      }\n      @keyframes sparkle {\n        0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) rotate(var(--rotation)) translateY(-80px) scale(1); }\n        50% { opacity: 1; transform: translate(-50%, -50%) rotate(var(--rotation)) translateY(-80px) scale(1.2); }\n      }\n      @keyframes bounce {\n        0%, 100% { transform: translateY(0); }\n        50% { transform: translateY(-10px); }\n      }\n      @keyframes glow {\n        0%, 100% { box-shadow: 0 0 30px rgba(255,215,0,0.5); }\n        50% { box-shadow: 0 0 50px rgba(255,215,0,0.8); }\n      }\n    ",document.head.appendChild(e),()=>document.head.removeChild(e)}),[]);const l=Wn.getInstance(),[c,f]=i.useState(!1),[m,g]=i.useState({width:800,height:600}),[y,b]=i.useState(!1),[x,v]=i.useState(!1),[S,j]=i.useState((()=>l.getVisualizerVolume())),C=i.useRef(null),[P,E]=i.useState(!1),I=i.useRef(null),[M,T]=i.useState(!1),[O,_]=i.useState(0),[F,$]=i.useState(!1),[N,W]=i.useState(!0),[U,B]=i.useState(!0),H=i.useRef(null),[V,Y]=i.useState(!1),[G,J]=i.useState(null),[K,Z]=i.useState(!1),[ee,te]=i.useState(void 0),[re,ae]=i.useState("entering"),oe=i.useRef(null),ue=i.useRef(null),de=i.useRef(null),he=Gu(2048),[pe,fe]=i.useState({frequencyData:new Uint8Array(1024),waveformData:new Uint8Array(2048),volume:0,isActive:!1,bassLevel:0,midLevel:0,trebleLevel:0,beatDetected:!1,beatStrength:0,peakFrequency:0,spectralCentroid:0,spectralRolloff:0,frequencyBands:new Array(8).fill(0)});i.useEffect((()=>{if(!y)return;const e=setInterval((()=>{const e=new Uint8Array(1024),t=new Uint8Array(2048);for(let u=0;u<e.length;u++){const t=Math.max(0,150-.3*u),r=80*Math.random();e[u]=Math.min(255,t+r)}const r=.002*Date.now();for(let u=0;u<t.length;u++){const e=60*Math.sin(3*r+.05*u)+128;t[u]=Math.max(0,Math.min(255,e))}const n=.6*Math.random()+.3,a=.8*Math.random(),i=.6*Math.random(),o=.7*Math.random(),s=Math.random()>.9,l=s?2*Math.random()+1:0,c=new Array(8).fill(0).map((()=>.8*Math.random()));fe({frequencyData:e,waveformData:t,volume:n,isActive:!0,bassLevel:a,midLevel:i,trebleLevel:o,beatDetected:s,beatStrength:l,peakFrequency:Math.random(),spectralCentroid:.5*Math.random(),spectralRolloff:.8*Math.random()+.2,frequencyBands:c})}),50);return()=>clearInterval(e)}),[y]);const me=y?pe:he;i.useEffect((()=>{const e=()=>{t.fullScreen?g({width:window.innerWidth,height:window.innerHeight}):g({width:window.innerWidth,height:window.innerHeight-80})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[t.fullScreen]),i.useEffect((()=>()=>{C.current&&clearTimeout(C.current),H.current&&clearTimeout(H.current)}),[]);const ge=()=>{r({fullScreen:!t.fullScreen})},ye=()=>{W(!0),B(!0),v(!0),C.current&&clearTimeout(C.current),H.current&&clearTimeout(H.current)};i.useEffect((()=>{t.fullScreen||(B(!0),W(!0))}),[t.fullScreen]);const be=()=>{C.current&&clearTimeout(C.current),H.current&&clearTimeout(H.current);const r="mix"===e.audioSource?e.mixPlaying:e.playlistPlaying,n=e.currentMix||e.currentPlaylist;!r&&n||(C.current=setTimeout((()=>{v(!1)}),2e3)),t.fullScreen&&(H.current=setTimeout((()=>{W(!1),B(!1)}),2e3))},xe=()=>{ye()},ve=()=>{ye(),be()},we=()=>{be()},Se=()=>{"mix"===e.audioSource?e.mixPlaying?e.pauseMix():e.resumeMix():"playlist"===e.audioSource&&(e.playlistPlaying?e.pausePlaylist():e.resumePlaylist())},je=()=>{"mix"===e.audioSource?e.stopMix():"playlist"===e.audioSource&&e.stopPlaylist()},Ce=()=>{"playlist"===e.audioSource&&e.previousClip()},ke=()=>{"playlist"===e.audioSource&&e.nextClip()},Pe=t=>{"mix"===e.audioSource?(j(t),l.setVisualizerVolume(t),e.setMixVolume(t)):"playlist"===e.audioSource&&e.setPlaylistVolume(t)},Ae=t=>{"mix"===e.audioSource?e.seekMix(t):"playlist"===e.audioSource&&e.seekPlaylist(t)},Ee=(e,t)=>{const r=Array.isArray(t)?t[0]:t;M&&_(r),Ae(r)},Ie=t=>{T(!0);const r="mix"===e.audioSource?e.mixCurrentTime:e.playlistProgress;_(r)};i.useEffect((()=>{const e=e=>{I.current&&!I.current.contains(e.target)&&E(!1)};return P&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[P]);const Me=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,Te=()=>{const t=e.currentPlaylist,r=n;return s.jsx(d,{onClick:()=>$(!0),sx:{color:"white",backgroundColor:"rgba(0,0,0,0.5)",width:48,height:48,padding:r?0:1,overflow:"hidden","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:r?s.jsx(u,{component:"img",src:n,alt:t?.name||"Playlist",sx:{width:"100%",height:"100%",objectFit:"cover",borderRadius:1}}):s.jsx(wi,{})})},Re=()=>{const e={analysisData:me,width:m.width,height:m.height,settings:t};switch(t.type){case"bars":default:return s.jsx(Zu,{...e});case"circular":return s.jsx(ed,{...e});case"waveform":return s.jsx(td,{...e});case"particles":return s.jsx(rd,{...e});case"spectrum":return s.jsx(nd,{...e});case"mandala":return s.jsx(ad,{...e});case"liquid":return s.jsx(id,{...e});case"galaxy":return s.jsx(od,{...e})}},ze=()=>{if(!Le)return null;const t="mix"===e.audioSource?e.mixPlaying:e.playlistPlaying,r="mix"===e.audioSource?e.mixCurrentTime:e.playlistProgress,n="mix"===e.audioSource?e.mixDuration:e.playlistDuration,a="playlist"===e.audioSource?e.playlistVolume:S,i="playlist"===e.audioSource&&e.playlistMuted;return s.jsx(ne,{in:x,timeout:300,children:s.jsxs(u,{sx:{position:"absolute",bottom:20,left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:3,padding:2,display:"flex",flexDirection:"column",alignItems:"center",gap:1,minWidth:400,maxWidth:500,zIndex:1e4,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",cursor:"default"},children:[s.jsxs(u,{sx:{width:"100%",display:"flex",alignItems:"center",gap:1},children:[s.jsx(h,{variant:"caption",sx:{color:"white",minWidth:40},children:Me(M?O:r)}),s.jsx(p,{value:M?O:r,max:n||100,onChange:Ee,onChangeCommitted:(e,t)=>((e,t)=>{const r=Array.isArray(t)?t[0]:t;T(!1),Ae(r)})(0,t),onMouseDown:Ie,sx:{flex:1,color:"white","& .MuiSlider-thumb":{backgroundColor:"white"},"& .MuiSlider-track":{backgroundColor:"white"},"& .MuiSlider-rail":{backgroundColor:"rgba(255, 255, 255, 0.3)"}}}),s.jsx(h,{variant:"caption",sx:{color:"white",minWidth:40},children:Me(n||0)})]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:["playlist"===e.audioSource&&s.jsx(d,{onClick:Ce,disabled:0===e.currentClipIndex,sx:{color:"white"},children:s.jsx(kn,{})}),s.jsx(d,{onClick:Se,sx:{color:"white",backgroundColor:"rgba(255, 255, 255, 0.2)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:t?s.jsx(pn,{}):s.jsx(hn,{})}),"playlist"===e.audioSource&&s.jsx(d,{onClick:ke,disabled:e.currentClipIndex>=(e.currentPlaylist?.clips.length||1)-1,sx:{color:"white"},children:s.jsx(Pn,{})}),s.jsx(d,{onClick:je,sx:{color:"white"},children:s.jsx(fn,{})}),s.jsxs(u,{ref:I,sx:{display:"flex",alignItems:"center",gap:1,ml:2},children:[s.jsx(d,{onClick:()=>{P?"playlist"===e.audioSource?e.togglePlaylistMute():Pe(a>0?0:1):E(!0)},sx:{color:"white"},children:i||0===a?s.jsx(yn,{}):s.jsx(gn,{})}),P&&s.jsx(p,{value:i?0:a,onChange:(e,t)=>{const r=Array.isArray(t)?t[0]:t;Pe(r)},onMouseDown:()=>{},onMouseUp:()=>{},min:0,max:1,step:.01,sx:{width:80,color:"white",pointerEvents:"auto","& .MuiSlider-thumb":{backgroundColor:"white"},"& .MuiSlider-track":{backgroundColor:"white"},"& .MuiSlider-rail":{backgroundColor:"rgba(255, 255, 255, 0.3)"}}}),s.jsx(p,{value:i?0:a,onChange:(e,t)=>{const r=Array.isArray(t)?t[0]:t;Pe(r)},min:0,max:1,step:.01,sx:{width:80,color:"white",ml:1,"& .MuiSlider-thumb":{backgroundColor:"white"},"& .MuiSlider-track":{backgroundColor:"white"},"& .MuiSlider-rail":{backgroundColor:"rgba(255, 255, 255, 0.3)"}}})]})]})]})})},De=(()=>{if(e.currentMix){const r={title:e.currentMix.name,type:"Mix",duration:e.mixDuration,currentTime:e.mixCurrentTime};return t.triviaMode&&e.mixCurrentTime<45?{...r,title:"???",showTrivia:!0,timeUntilReveal:45-e.mixCurrentTime}:r}if(e.currentPlaylist){const r=e.currentPlaylist.clips[e.currentClipIndex],n=`${r?.id}-${e.currentClipIndex}`;n!==oe.current&&(oe.current=n);let a=r?.songName||r?.name||"Unknown",i=r?.artist||"";if(a===r?.name&&a.includes("[")&&a.includes("]")){const e=a.match(/^(.+?)\s*\[[\d:]+\s*-\s*[\d:]+\]$/);e&&(a=e[1].trim())}const o=`${a}-${i}-${t.triviaMode}`;o!==ue.current&&(ue.current=o);const s={title:a,artist:i&&i.trim()?i:void 0,type:"Playlist",playlist:e.currentPlaylist.name,clipIndex:e.currentClipIndex+1,totalClips:e.currentPlaylist.clips.length};if(t.triviaMode&&e.playlistProgress<45){const t=`hiding-${Math.floor(e.playlistProgress/5)}`;return t!==de.current&&(de.current=t),{...s,title:"???",artist:i&&i.trim()?"???":void 0,showTrivia:!0,timeUntilReveal:45-e.playlistProgress}}const l=`revealing-${t.triviaMode}-${Math.floor(e.playlistProgress/10)}`;return l!==de.current&&(de.current=l),s}return null})(),Le=e.currentMix||e.currentPlaylist;return i.useEffect((()=>{if(!De||!t.triviaMode)return Y(!1),Z(!1),J(null),te(void 0),void ae("entering");const e=`${De.title}-${De.artist||"no-artist"}`;!0!==ee||De.showTrivia||"???"===De.title||G===e||(Y(!0),Z(!0),J(e),ae("entering"),setTimeout((()=>{ae("staying")}),3e3)),te(De.showTrivia)}),[De?.showTrivia,De?.title,De?.artist,t.triviaMode,G,ee]),i.useEffect((()=>{if(!K||!De||"leaving"===re)return;const t="mix"===e.audioSource?e.mixCurrentTime:e.playlistProgress,r="mix"===e.audioSource?e.mixDuration:e.playlistDuration;r&&t&&r-t<=5&&"staying"===re&&(ae("leaving"),setTimeout((()=>{Z(!1),Y(!1),ae("entering")}),3e3))}),[e.playlistProgress,e.mixCurrentTime,e.playlistDuration,e.mixDuration,K,De,re,e.audioSource]),i.useEffect((()=>{if(K&&De){const e=`${De.title}-${De.artist||"no-artist"}`;G&&e!==G&&"???"!==De.title&&(Z(!1),Y(!1),ae("entering"),J(null))}}),[De?.title,De?.artist,K,G]),t.fullScreen?s.jsxs(u,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"black",zIndex:9999,display:"flex",flexDirection:"column"},children:[s.jsx(ne,{in:U,timeout:300,children:s.jsxs(u,{sx:{position:"absolute",top:16,right:16,zIndex:1e4,display:"flex",gap:1},children:[Te(),s.jsx(d,{onClick:()=>f(!0),sx:{color:"white",backgroundColor:"rgba(0,0,0,0.5)"},children:s.jsx(ha,{})}),s.jsx(d,{onClick:ge,sx:{color:"white",backgroundColor:"rgba(0,0,0,0.5)"},children:s.jsx(ei,{})})]})}),t.showAlbumArt&&(o||n)&&s.jsx(ne,{in:!0,timeout:500,children:s.jsx(u,{sx:{position:"absolute",..."center"===t.albumArtPosition&&{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},..."top-left"===t.albumArtPosition&&{top:20,left:20},..."top-right"===t.albumArtPosition&&{top:20,right:20},..."bottom-left"===t.albumArtPosition&&{bottom:20,left:20},..."bottom-right"===t.albumArtPosition&&{bottom:20,right:20},zIndex:5e3,opacity:t.albumArtOpacity,borderRadius:2,overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.1)"},children:s.jsx("img",{src:o||n||"",alt:o?"Album Art":"Playlist Image",style:{width:"small"===t.albumArtSize?"120px":"medium"===t.albumArtSize?"200px":"300px",height:"small"===t.albumArtSize?"120px":"medium"===t.albumArtSize?"200px":"300px",objectFit:"cover",display:"block"},onError:e=>{e.target.style.display="none"}})})}),t.showSongInfo&&De&&s.jsxs(s.Fragment,{children:[s.jsx(ne,{in:!K,timeout:300,children:s.jsxs(u,{sx:{position:"absolute",bottom:16,left:16,color:"white",backgroundColor:"rgba(0,0,0,0.7)",padding:2,borderRadius:2,zIndex:1e4,backdropFilter:"blur(10px)",border:De.showTrivia?"2px solid rgba(255,255,0,0.5)":"1px solid rgba(255,255,255,0.1)"},children:[s.jsxs(h,{variant:"h6",children:[De.title,De.artist&&` - ${De.artist}`]}),s.jsxs(h,{variant:"body2",color:"rgba(255,255,255,0.7)",children:[De.type,De.playlist&&` - ${De.playlist}`,De.clipIndex&&` (${De.clipIndex}/${De.totalClips})`]}),De.showTrivia&&s.jsxs(u,{sx:{mt:1,display:"flex",alignItems:"center",gap:1},children:[s.jsx(pi,{sx:{color:"rgba(255,255,0,0.9)",fontSize:16}}),s.jsxs(h,{variant:"caption",color:"rgba(255,255,0,0.9)",children:["Song details revealed in ",Math.ceil(De.timeUntilReveal??0),"s"]})]})]})}),K&&s.jsx(ne,{in:"leaving"!==re,timeout:"leaving"===re?2e3:300,children:s.jsxs(u,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10001,textAlign:"center"},children:[s.jsx(se,{in:"entering"===re,timeout:500,children:s.jsx(u,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"staying"===re?200:300,height:"staying"===re?200:300,borderRadius:"50%",background:"staying"===re?"radial-gradient(circle, rgba(255,215,0,0.1) 0%, rgba(255,165,0,0.05) 50%, transparent 70%)":"radial-gradient(circle, rgba(255,215,0,0.3) 0%, rgba(255,165,0,0.2) 50%, transparent 70%)",transition:"all 1s ease-in-out"}})}),("entering"===re||"leaving"===re)&&[...Array(8)].map(((e,t)=>s.jsx(se,{in:"leaving"!==re,timeout:300+100*t,children:s.jsx(Mi,{sx:{position:"absolute",color:"#FFD700",fontSize:"leaving"===re?32:24,top:"50%",left:"50%","--rotation":45*t+"deg",transform:`translate(-50%, -50%) rotate(${45*t}deg) translateY(-80px)`,animation:"leaving"===re?"sparkle 0.5s ease-in-out infinite":"sparkle 2s ease-in-out infinite",animationDelay:.1*t+"s",transition:"all 0.5s ease-in-out"}})},t))),s.jsx(le,{direction:"up",in:K,timeout:800,children:s.jsxs(u,{sx:{backgroundColor:"rgba(0,0,0,0.9)",borderRadius:3,padding:"staying"===re?2:3,border:"3px solid #FFD700",boxShadow:"0 0 30px rgba(255,215,0,0.5)",backdropFilter:"blur(15px)",minWidth:"staying"===re?250:300,animation:"staying"===re?"glow 4s ease-in-out infinite":"leaving"===re?"glow 0.5s ease-in-out infinite":"glow 2s ease-in-out infinite",transition:"all 1s ease-in-out",transform:"leaving"===re?"scale(1.1)":"scale(1)"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[s.jsx(Xa,{sx:{color:"#FFD700",fontSize:"staying"===re?24:32,mr:1,transition:"all 1s ease-in-out"}}),s.jsx(h,{variant:"staying"===re?"h6":"h5",sx:{color:"#FFD700",fontWeight:"bold",transition:"all 1s ease-in-out"},children:"leaving"===re?"FAREWELL!":"REVEALED!"}),s.jsx(Xa,{sx:{color:"#FFD700",fontSize:"staying"===re?24:32,ml:1,transition:"all 1s ease-in-out"}})]}),s.jsx(ce,{in:K,timeout:1200,children:s.jsxs(u,{children:[s.jsx(h,{variant:"staying"===re?"h5":"h4",sx:{color:"white",fontWeight:"bold",mb:1,transition:"all 1s ease-in-out"},children:De.title}),De.artist&&s.jsxs(h,{variant:"h6",sx:{color:"#FFD700",fontStyle:"italic",transition:"all 1s ease-in-out"},children:["by ",De.artist]})]})}),s.jsx(u,{sx:{mt:2,display:"flex",justifyContent:"center",gap:1},children:[...Array(3)].map(((e,t)=>s.jsx(q,{icon:s.jsx(pi,{}),label:"",sx:{backgroundColor:"rgba(255,215,0,0.2)",color:"#FFD700",animation:"staying"===re?"bounce 2s ease-in-out infinite":"leaving"===re?"bounce 0.3s ease-in-out infinite":"bounce 1s ease-in-out infinite",animationDelay:.2*t+"s",transition:"all 1s ease-in-out"}},t)))})]})})]})})]}),s.jsxs(u,{sx:{flex:1,width:"100%",height:"100%",position:"relative",cursor:N?"default":"none"},onMouseEnter:xe,onMouseMove:ve,onMouseLeave:we,children:[Re(),ze()]})]}):s.jsxs(u,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative"},children:[s.jsx(ne,{in:U,timeout:300,children:s.jsxs(u,{sx:{position:"absolute",top:16,right:16,zIndex:1e4,display:"flex",gap:1},children:[Te(),s.jsx(d,{onClick:()=>f(!0),sx:{color:"white",backgroundColor:"rgba(0,0,0,0.5)"},children:s.jsx(ha,{})}),s.jsx(d,{onClick:ge,sx:{color:"white",backgroundColor:"rgba(0,0,0,0.5)"},children:s.jsx(Za,{})})]})}),s.jsxs(u,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"black",overflow:"hidden",position:"relative",cursor:N?"default":"none"},onMouseEnter:xe,onMouseMove:ve,onMouseLeave:we,children:[Re(),ze(),t.showAlbumArt&&(o||n)&&s.jsx(ne,{in:!0,timeout:500,children:s.jsx(u,{sx:{position:"absolute",..."center"===t.albumArtPosition&&{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},..."top-left"===t.albumArtPosition&&{top:20,left:20},..."top-right"===t.albumArtPosition&&{top:20,right:20},..."bottom-left"===t.albumArtPosition&&{bottom:20,left:20},..."bottom-right"===t.albumArtPosition&&{bottom:20,right:20},zIndex:5e3,opacity:t.albumArtOpacity,borderRadius:2,overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.1)"},children:s.jsx("img",{src:o||n||"",alt:o?"Album Art":"Playlist Image",style:{width:"small"===t.albumArtSize?"120px":"medium"===t.albumArtSize?"200px":"300px",height:"small"===t.albumArtSize?"120px":"medium"===t.albumArtSize?"200px":"300px",objectFit:"cover",display:"block"},onError:e=>{e.target.style.display="none"}})})}),t.showSongInfo&&De&&s.jsxs(s.Fragment,{children:[s.jsx(ne,{in:!K,timeout:300,children:s.jsxs(u,{sx:{position:"absolute",bottom:16,left:16,color:"white",backgroundColor:"rgba(0,0,0,0.7)",padding:2,borderRadius:2,zIndex:1e4,backdropFilter:"blur(10px)",border:De.showTrivia?"2px solid rgba(255,255,0,0.5)":"1px solid rgba(255,255,255,0.1)"},children:[s.jsxs(h,{variant:"h6",children:[De.title,De.artist&&` - ${De.artist}`]}),s.jsxs(h,{variant:"body2",color:"rgba(255,255,255,0.7)",children:[De.type,De.playlist&&` - ${De.playlist}`,De.clipIndex&&` (${De.clipIndex}/${De.totalClips})`]}),De.showTrivia&&s.jsxs(u,{sx:{mt:1,display:"flex",alignItems:"center",gap:1},children:[s.jsx(pi,{sx:{color:"rgba(255,255,0,0.9)",fontSize:16}}),s.jsxs(h,{variant:"caption",color:"rgba(255,255,0,0.9)",children:["Song details revealed in ",Math.ceil(De.timeUntilReveal??0),"s"]})]})]})}),K&&s.jsx(ne,{in:"leaving"!==re,timeout:"leaving"===re?2e3:300,children:s.jsxs(u,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10001,textAlign:"center"},children:[s.jsx(se,{in:"entering"===re,timeout:500,children:s.jsx(u,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"staying"===re?200:300,height:"staying"===re?200:300,borderRadius:"50%",background:"staying"===re?"radial-gradient(circle, rgba(255,215,0,0.1) 0%, rgba(255,165,0,0.05) 50%, transparent 70%)":"radial-gradient(circle, rgba(255,215,0,0.3) 0%, rgba(255,165,0,0.2) 50%, transparent 70%)",transition:"all 1s ease-in-out"}})}),("entering"===re||"leaving"===re)&&[...Array(8)].map(((e,t)=>s.jsx(se,{in:"leaving"!==re,timeout:300+100*t,children:s.jsx(Mi,{sx:{position:"absolute",color:"#FFD700",fontSize:"leaving"===re?32:24,top:"50%",left:"50%","--rotation":45*t+"deg",transform:`translate(-50%, -50%) rotate(${45*t}deg) translateY(-80px)`,animation:"leaving"===re?"sparkle 0.5s ease-in-out infinite":"sparkle 2s ease-in-out infinite",animationDelay:.1*t+"s",transition:"all 0.5s ease-in-out"}})},t))),s.jsx(le,{direction:"up",in:K,timeout:800,children:s.jsxs(u,{sx:{backgroundColor:"rgba(0,0,0,0.9)",borderRadius:3,padding:"staying"===re?2:3,border:"3px solid #FFD700",boxShadow:"0 0 30px rgba(255,215,0,0.5)",backdropFilter:"blur(15px)",minWidth:"staying"===re?250:300,animation:"staying"===re?"glow 4s ease-in-out infinite":"leaving"===re?"glow 0.5s ease-in-out infinite":"glow 2s ease-in-out infinite",transition:"all 1s ease-in-out",transform:"leaving"===re?"scale(1.1)":"scale(1)"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[s.jsx(Xa,{sx:{color:"#FFD700",fontSize:"staying"===re?24:32,mr:1,transition:"all 1s ease-in-out"}}),s.jsx(h,{variant:"staying"===re?"h6":"h5",sx:{color:"#FFD700",fontWeight:"bold",transition:"all 1s ease-in-out"},children:"leaving"===re?"FAREWELL!":"REVEALED!"}),s.jsx(Xa,{sx:{color:"#FFD700",fontSize:"staying"===re?24:32,ml:1,transition:"all 1s ease-in-out"}})]}),s.jsx(ce,{in:K,timeout:1200,children:s.jsxs(u,{children:[s.jsx(h,{variant:"staying"===re?"h5":"h4",sx:{color:"white",fontWeight:"bold",mb:1,transition:"all 1s ease-in-out"},children:De.title}),De.artist&&s.jsxs(h,{variant:"h6",sx:{color:"#FFD700",fontStyle:"italic",transition:"all 1s ease-in-out"},children:["by ",De.artist]})]})}),s.jsx(u,{sx:{mt:2,display:"flex",justifyContent:"center",gap:1},children:[...Array(3)].map(((e,t)=>s.jsx(q,{icon:s.jsx(pi,{}),label:"",sx:{backgroundColor:"rgba(255,215,0,0.2)",color:"#FFD700",animation:"staying"===re?"bounce 2s ease-in-out infinite":"leaving"===re?"bounce 0.3s ease-in-out infinite":"bounce 1s ease-in-out infinite",animationDelay:.2*t+"s",transition:"all 1s ease-in-out"}},t)))})]})})]})})]})]}),s.jsxs(ie,{anchor:"right",open:c,onClose:()=>f(!1),sx:{zIndex:t.fullScreen?10003:1300,"& .MuiDrawer-paper":{zIndex:t.fullScreen?10003:1300,top:t.fullScreen?"0px":"80px",height:t.fullScreen?"100vh":"calc(100vh - 80px)"},"& .MuiBackdrop-root":{zIndex:t.fullScreen?10002:1299,top:t.fullScreen?"0px":"80px",height:t.fullScreen?"100vh":"calc(100vh - 80px)"}},PaperProps:{sx:{width:320,p:2,top:t.fullScreen?"0px !important":"80px !important",height:t.fullScreen?"100vh !important":"calc(100vh - 80px) !important"}},ModalProps:{style:{zIndex:t.fullScreen?10003:1300},container:document.body},children:[s.jsx(h,{variant:"h6",sx:{mb:2},children:"Visualizer Settings"}),s.jsxs(R,{fullWidth:!0,sx:{mb:2},children:[s.jsx(z,{children:"Visualizer Type"}),s.jsxs(D,{value:t.type,label:"Visualizer Type",onChange:e=>r({type:e.target.value}),children:[s.jsx(L,{value:"bars",children:"Frequency Bars"}),s.jsx(L,{value:"circular",children:"Circular"}),s.jsx(L,{value:"waveform",children:"Waveform"}),s.jsx(L,{value:"particles",children:"Particles"}),s.jsx(L,{value:"spectrum",children:"Enhanced Spectrum"}),s.jsx(L,{value:"mandala",children:"Mandala"}),s.jsx(L,{value:"liquid",children:"Liquid Motion"}),s.jsx(L,{value:"galaxy",children:"Galaxy"})]})]}),s.jsx(X,{control:s.jsx(Q,{checked:t.showSongInfo,onChange:e=>r({showSongInfo:e.target.checked})}),label:"Show Song Info",sx:{mb:2}}),s.jsx(X,{control:s.jsx(Q,{checked:t.showAnalysis,onChange:e=>r({showAnalysis:e.target.checked})}),label:"Show Analysis Data",sx:{mb:2}}),s.jsx(X,{control:s.jsx(Q,{checked:t.triviaMode,onChange:e=>r({triviaMode:e.target.checked})}),label:"Trivia Mode",sx:{mb:2}}),t.triviaMode&&De&&s.jsx(A,{variant:"outlined",size:"small",onClick:()=>{Z(!0),setTimeout((()=>{Z(!1)}),3e3)},sx:{mb:2,width:"100%"},children:"Test Reveal Animation"}),s.jsx(X,{control:s.jsx(Q,{checked:y,onChange:e=>b(e.target.checked)}),label:"Demo Mode",sx:{mb:2}}),s.jsx(h,{gutterBottom:!0,children:"Sensitivity"}),s.jsx(p,{value:t.sensitivity,onChange:(e,t)=>r({sensitivity:t}),min:.1,max:3,step:.1,valueLabelDisplay:"auto",sx:{mb:2}}),s.jsxs(R,{fullWidth:!0,sx:{mb:2},children:[s.jsx(z,{children:"Color Mode"}),s.jsxs(D,{value:t.colorMode,label:"Color Mode",onChange:e=>r({colorMode:e.target.value}),children:[s.jsx(L,{value:"theme",children:"Theme Colors"}),s.jsx(L,{value:"rainbow",children:"Rainbow"}),s.jsx(L,{value:"custom",children:"Custom Color"}),s.jsx(L,{value:"gradient",children:"Gradient"}),s.jsx(L,{value:"reactive",children:"Audio Reactive"}),s.jsx(L,{value:"frequency",children:"Frequency Mapped"})]})]}),"custom"===t.colorMode&&s.jsxs(u,{sx:{mb:2},children:[s.jsx(h,{gutterBottom:!0,children:"Custom Color"}),s.jsx("input",{type:"color",value:t.customColor,onChange:e=>r({customColor:e.target.value}),style:{width:"100%",height:40,border:"none",borderRadius:4}})]}),s.jsx(h,{gutterBottom:!0,children:"Bar Count"}),s.jsx(p,{value:t.barCount,onChange:(e,t)=>r({barCount:t}),min:16,max:256,step:16,valueLabelDisplay:"auto",sx:{mb:2}}),s.jsx(h,{gutterBottom:!0,children:"Background Opacity"}),s.jsx(p,{value:t.backgroundOpacity,onChange:(e,t)=>r({backgroundOpacity:t}),min:.05,max:.5,step:.05,valueLabelDisplay:"auto",sx:{mb:2}}),("particles"===t.type||"liquid"===t.type||"galaxy"===t.type)&&s.jsxs(s.Fragment,{children:[s.jsx(h,{gutterBottom:!0,children:"Particle Count"}),s.jsx(p,{value:t.particleCount,onChange:(e,t)=>r({particleCount:t}),min:50,max:500,step:25,valueLabelDisplay:"auto",sx:{mb:2}})]}),s.jsx(k,{sx:{my:2}}),s.jsx(h,{variant:"h6",sx:{mb:2},children:"Enhanced Effects"}),s.jsx(X,{control:s.jsx(Q,{checked:t.glowEffect,onChange:e=>r({glowEffect:e.target.checked})}),label:"Glow Effect",sx:{mb:1}}),s.jsx(X,{control:s.jsx(Q,{checked:t.motionBlur,onChange:e=>r({motionBlur:e.target.checked})}),label:"Motion Blur",sx:{mb:1}}),s.jsx(X,{control:s.jsx(Q,{checked:t.beatReactive,onChange:e=>r({beatReactive:e.target.checked})}),label:"Beat Reactive",sx:{mb:2}}),s.jsx(h,{gutterBottom:!0,children:"Bloom Intensity"}),s.jsx(p,{value:t.bloomIntensity,onChange:(e,t)=>r({bloomIntensity:t}),min:0,max:2,step:.1,valueLabelDisplay:"auto",sx:{mb:2}}),s.jsx(h,{gutterBottom:!0,children:"Color Cycle Speed"}),s.jsx(p,{value:t.colorCycleSpeed,onChange:(e,t)=>r({colorCycleSpeed:t}),min:.1,max:3,step:.1,valueLabelDisplay:"auto",sx:{mb:2}}),s.jsxs(R,{fullWidth:!0,sx:{mb:2},children:[s.jsx(z,{children:"Render Quality"}),s.jsxs(D,{value:t.renderQuality,label:"Render Quality",onChange:e=>r({renderQuality:e.target.value}),children:[s.jsx(L,{value:"low",children:"Low"}),s.jsx(L,{value:"medium",children:"Medium"}),s.jsx(L,{value:"high",children:"High"}),s.jsx(L,{value:"ultra",children:"Ultra"})]})]}),s.jsx(k,{sx:{my:2}}),s.jsx(h,{variant:"h6",sx:{mb:2},children:"Album Art Display"}),s.jsx(X,{control:s.jsx(Q,{checked:t.showAlbumArt,onChange:e=>r({showAlbumArt:e.target.checked})}),label:"Show Album Art",sx:{mb:2}}),s.jsx(X,{control:s.jsx(Q,{checked:t.enableOnlineAlbumArt,onChange:e=>r({enableOnlineAlbumArt:e.target.checked})}),label:"Download Album Art Online",sx:{mb:2}}),t.showAlbumArt&&s.jsxs(s.Fragment,{children:[s.jsxs(R,{fullWidth:!0,sx:{mb:2},children:[s.jsx(z,{children:"Album Art Size"}),s.jsxs(D,{value:t.albumArtSize,label:"Album Art Size",onChange:e=>r({albumArtSize:e.target.value}),children:[s.jsx(L,{value:"small",children:"Small"}),s.jsx(L,{value:"medium",children:"Medium"}),s.jsx(L,{value:"large",children:"Large"})]})]}),s.jsxs(R,{fullWidth:!0,sx:{mb:2},children:[s.jsx(z,{children:"Album Art Position"}),s.jsxs(D,{value:t.albumArtPosition,label:"Album Art Position",onChange:e=>r({albumArtPosition:e.target.value}),children:[s.jsx(L,{value:"center",children:"Center"}),s.jsx(L,{value:"top-left",children:"Top Left"}),s.jsx(L,{value:"top-right",children:"Top Right"}),s.jsx(L,{value:"bottom-left",children:"Bottom Left"}),s.jsx(L,{value:"bottom-right",children:"Bottom Right"})]})]}),s.jsx(h,{gutterBottom:!0,children:"Album Art Opacity"}),s.jsx(p,{value:t.albumArtOpacity,onChange:(e,t)=>r({albumArtOpacity:t}),min:.1,max:1,step:.1,valueLabelDisplay:"auto",valueLabelFormat:e=>`${Math.round(100*e)}%`,sx:{mb:2}})]}),s.jsx(k,{sx:{my:2}}),s.jsx(A,{variant:"outlined",fullWidth:!0,onClick:()=>{r({type:"bars",showSongInfo:!0,showAnalysis:!1,triviaMode:!1,sensitivity:1,colorMode:"theme",customColor:"#ff6b6b",barCount:64,backgroundOpacity:.1,particleCount:100,bloomIntensity:.5,motionBlur:!1,beatReactive:!0,glowEffect:!0,gradientColors:["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57"],colorCycleSpeed:1,frequencyColorMapping:!1,renderQuality:"high",showAlbumArt:!1,albumArtSize:"medium",albumArtPosition:"center",albumArtOpacity:.8,enableOnlineAlbumArt:!0})},children:"Reset to Defaults"})]}),s.jsx(sd,{open:F,onClose:()=>$(!1)})]})},cd=()=>s.jsx(ld,{}),ud=({open:e,onClose:t})=>{const r=[{category:"Media Controls",items:[{keys:["Space"],description:"Play/Pause current song"},{keys:["Esc"],description:"Stop playback"},{keys:[""],description:"Next song"},{keys:[""],description:"Previous song"},{keys:[""],description:"Volume up"},{keys:[""],description:"Volume down"},{keys:["M"],description:"Mute/Unmute"}]},{category:"Search & Navigation",items:[{keys:["Ctrl","F"],description:"Focus search bar"},{keys:["Ctrl","Shift","F"],description:"Open advanced search"},{keys:["Ctrl","P"],description:"Toggle smart playlists"},{keys:["Ctrl","B"],description:"Toggle clips sidebar"}]},{category:"Selection & Actions",items:[{keys:["Ctrl","A"],description:"Select all songs"},{keys:["Del"],description:"Clear selection"},{keys:["Ctrl","E"],description:"Extract selected clips"},{keys:["Ctrl","R"],description:"Wild card (random clips)"}]},{category:"Library Management",items:[{keys:["F5"],description:"Refresh library"},{keys:["Ctrl","S"],description:"Save playlist"},{keys:["Ctrl","Z"],description:"Undo"},{keys:["Ctrl","Y"],description:"Redo"}]}];return s.jsxs(g,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,children:[s.jsx(y,{children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(ii,{}),"Keyboard Shortcuts"]})}),s.jsxs(b,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Use these keyboard shortcuts to navigate and control the Power Hour app efficiently."}),r.map(((e,t)=>s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"h6",sx:{mb:2,color:"primary.main"},children:e.category}),s.jsx(u,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:e.items.map(((e,t)=>{return s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,px:2,borderRadius:1,backgroundColor:"action.hover"},children:[s.jsx(h,{variant:"body2",sx:{flex:1},children:e.description}),(r=e.keys,s.jsx(u,{sx:{display:"flex",gap:.5,alignItems:"center"},children:r.map(((e,t)=>s.jsxs(w.Fragment,{children:[t>0&&s.jsx(h,{variant:"body2",children:"+"}),s.jsx(q,{label:e,size:"small",variant:"outlined",sx:{fontFamily:"monospace",fontSize:"0.75rem",height:"24px",minWidth:"32px"}})]},e)))}))]},t);var r}))}),t<r.length-1&&s.jsx(k,{sx:{mt:2}})]},e.category))),s.jsxs(u,{sx:{mt:3,p:2,backgroundColor:"info.main",borderRadius:1,color:"info.contrastText"},children:[s.jsx(h,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:" Pro Tips:"}),s.jsx(h,{variant:"body2",sx:{mb:.5},children:" Shortcuts work when not typing in input fields"}),s.jsx(h,{variant:"body2",sx:{mb:.5},children:" Use arrow keys for quick navigation through songs"}),s.jsx(h,{variant:"body2",children:" Combine Ctrl+A and Ctrl+E for bulk clip extraction"})]})]}),s.jsx(P,{children:s.jsx(A,{onClick:t,children:"Close"})})]})};var dd,hd,pd,fd,md,gd,yd,bd,xd,vd,wd,Sd,jd,Cd,kd,Pd,Ad,Ed,Id,Md,Td,Rd,zd,Dd,Ld,Od,_d,Fd,$d={},Nd={};function Wd(){if(hd)return dd;hd=1;var e="object"==typeof ue&&ue&&ue.Object===Object&&ue;return dd=e}function Ud(){if(fd)return pd;fd=1;var e=Wd(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return pd=r}function Bd(){if(gd)return md;gd=1;var e=Ud().Symbol;return md=e}function Hd(){if(Sd)return wd;Sd=1;var e=Bd(),t=function(){if(bd)return yd;bd=1;var e=Bd(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,a=e?e.toStringTag:void 0;return yd=function(e){var t=r.call(e,a),i=e[a];try{e[a]=void 0;var o=!0}catch(xz){}var s=n.call(e);return o&&(t?e[a]=i:delete e[a]),s}}(),r=function(){if(vd)return xd;vd=1;var e=Object.prototype.toString;return xd=function(t){return e.call(t)}}(),n=e?e.toStringTag:void 0;return wd=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n&&n in Object(e)?t(e):r(e)}}function Vd(){if(Cd)return jd;Cd=1;var e=Array.isArray;return jd=e}function Yd(){return Pd?kd:(Pd=1,kd=function(e){return null!=e&&"object"==typeof e})}function Gd(){if(Rd)return Td;Rd=1;var e=(Md?Id:(Md=1,Id=function(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++a];if(!1===r(i[l],l,i))break}return t}}))();return Td=e}function qd(){if(Fd)return _d;Fd=1;var e=function(){if(Od)return Ld;Od=1;var e=Hd(),t=Yd();return Ld=function(r){return t(r)&&"[object Arguments]"==e(r)}}(),t=Yd(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(e){return t(e)&&n.call(e,"callee")&&!a.call(e,"callee")};return _d=i}var Jd,Kd,Xd,Qd,Zd,eh,th,rh,nh,ah,ih,oh={exports:{}};function sh(){return Xd||(Xd=1,e=oh,t=oh.exports,r=Ud(),n=Kd?Jd:(Kd=1,Jd=function(){return!1}),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,o=i&&i.exports===a?r.Buffer:void 0,s=(o?o.isBuffer:void 0)||n,e.exports=s),oh.exports;var e,t,r,n,a,i,o,s}function lh(){if(Zd)return Qd;Zd=1;var e=/^(?:0|[1-9]\d*)$/;return Qd=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}}function ch(){return th?eh:(th=1,eh=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991})}function uh(){return ih?ah:(ih=1,ah=function(e){return function(t){return e(t)}})}var dh,hh,ph,fh,mh,gh,yh,bh,xh,vh,wh,Sh,jh,Ch,kh,Ph,Ah,Eh,Ih,Mh,Th,Rh,zh,Dh,Lh,Oh,_h,Fh,$h,Nh,Wh,Uh,Bh,Hh,Vh,Yh,Gh,qh,Jh,Kh,Xh,Qh,Zh,ep,tp,rp,np,ap,ip,op,sp,lp,cp,up,dp,hp,pp,fp,mp,gp,yp,bp,xp,vp,wp,Sp,jp,Cp,kp,Pp,Ap,Ep,Ip,Mp,Tp,Rp,zp,Dp,Lp,Op,_p,Fp,$p,Np,Wp,Up,Bp,Hp,Vp,Yp,Gp,qp,Jp,Kp,Xp,Qp,Zp,ef,tf,rf,nf,af,of,sf,lf,cf,uf,df,hf,pf,ff,mf,gf,yf,bf,xf,vf,wf,Sf,jf,Cf,kf,Pf,Af,Ef,If,Mf,Tf,Rf,zf,Df,Lf,Of,_f,Ff,$f,Nf,Wf,Uf,Bf,Hf,Vf,Yf,Gf,qf,Jf,Kf,Xf,Qf,Zf,em,tm,rm,nm,am,im,om,sm,lm,cm,um,dm,hm,pm,fm,mm,gm,ym,bm,xm,vm,wm,Sm,jm,Cm,km,Pm,Am,Em,Im,Mm,Tm,Rm,zm,Dm,Lm,Om,_m,Fm,$m,Nm,Wm,Um,Bm,Hm,Vm,Ym,Gm,qm,Jm,Km,Xm,Qm,Zm,eg,tg,rg,ng,ag,ig,og,sg,lg={exports:{}};function cg(){return dh||(dh=1,e=lg,t=lg.exports,r=Wd(),n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,i=a&&a.exports===n&&r.process,o=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(xz){}}(),e.exports=o),lg.exports;var e,t,r,n,a,i,o}function ug(){if(ph)return hh;ph=1;var e=function(){if(nh)return rh;nh=1;var e=Hd(),t=ch(),r=Yd(),n={};return n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object DataView]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1,rh=function(a){return r(a)&&t(a.length)&&!!n[e(a)]}}(),t=uh(),r=cg(),n=r&&r.isTypedArray,a=n?t(n):e;return hh=a}function dg(){if(mh)return fh;mh=1;var e=Dd?zd:(Dd=1,zd=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}),t=qd(),r=Vd(),n=sh(),a=lh(),i=ug(),o=Object.prototype.hasOwnProperty;return fh=function(s,l){var c=r(s),u=!c&&t(s),d=!c&&!u&&n(s),h=!c&&!u&&!d&&i(s),p=c||u||d||h,f=p?e(s.length,String):[],m=f.length;for(var g in s)!l&&!o.call(s,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||f.push(g);return f}}function hg(){if(yh)return gh;yh=1;var e=Object.prototype;return gh=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}}function pg(){return xh?bh:(xh=1,bh=function(e,t){return function(r){return e(t(r))}})}function fg(){if(jh)return Sh;jh=1;var e=hg(),t=function(){if(wh)return vh;wh=1;var e=pg()(Object.keys,Object);return vh=e}(),r=Object.prototype.hasOwnProperty;return Sh=function(n){if(!e(n))return t(n);var a=[];for(var i in Object(n))r.call(n,i)&&"constructor"!=i&&a.push(i);return a}}function mg(){return kh?Ch:(kh=1,Ch=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)})}function gg(){if(Ah)return Ph;Ah=1;var e=Hd(),t=mg();return Ph=function(r){if(!t(r))return!1;var n=e(r);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}}function yg(){if(Ih)return Eh;Ih=1;var e=gg(),t=ch();return Eh=function(r){return null!=r&&t(r.length)&&!e(r)}}function bg(){if(Th)return Mh;Th=1;var e=dg(),t=fg(),r=yg();return Mh=function(n){return r(n)?e(n):t(n)}}function xg(){if(zh)return Rh;zh=1;var e=Gd(),t=bg();return Rh=function(r,n){return r&&e(r,n,t)}}function vg(){return Lh?Dh:(Lh=1,Dh=function(e){return e})}function wg(){if($h)return Fh;$h=1;var e=xg(),t=function(){if(_h)return Oh;_h=1;var e=vg();return Oh=function(t){return"function"==typeof t?t:e}}();return Fh=function(r,n){return r&&e(r,t(n))}}function Sg(){if(Wh)return Nh;Wh=1;var e=pg()(Object.getPrototypeOf,Object);return Nh=e}function jg(){return Vh?Hh:(Vh=1,Hh=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a})}function Cg(){return Jh?qh:(Jh=1,qh=function(e,t){return e===t||e!=e&&t!=t})}function kg(){if(Xh)return Kh;Xh=1;var e=Cg();return Kh=function(t,r){for(var n=t.length;n--;)if(e(t[n][0],r))return n;return-1}}function Pg(){if(sp)return op;sp=1;var e=Gh?Yh:(Gh=1,Yh=function(){this.__data__=[],this.size=0}),t=function(){if(Zh)return Qh;Zh=1;var e=kg(),t=Array.prototype.splice;return Qh=function(r){var n=this.__data__,a=e(n,r);return!(a<0||(a==n.length-1?n.pop():t.call(n,a,1),--this.size,0))}}(),r=function(){if(tp)return ep;tp=1;var e=kg();return ep=function(t){var r=this.__data__,n=e(r,t);return n<0?void 0:r[n][1]}}(),n=function(){if(np)return rp;np=1;var e=kg();return rp=function(t){return e(this.__data__,t)>-1}}(),a=function(){if(ip)return ap;ip=1;var e=kg();return ap=function(t,r){var n=this.__data__,a=e(n,t);return a<0?(++this.size,n.push([t,r])):n[a][1]=r,this}}();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,op=i}function Ag(){if(xp)return bp;xp=1;var e,t=function(){if(yp)return gp;yp=1;var e=Ud()["__core-js_shared__"];return gp=e}(),r=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return bp=function(e){return!!r&&r in e}}function Eg(){if(wp)return vp;wp=1;var e=Function.prototype.toString;return vp=function(t){if(null!=t){try{return e.call(t)}catch(xz){}try{return t+""}catch(xz){}}return""}}function Ig(){if(Ap)return Pp;Ap=1;var e=function(){if(jp)return Sp;jp=1;var e=gg(),t=Ag(),r=mg(),n=Eg(),a=/^\[object .+?Constructor\]$/,i=Function.prototype,o=Object.prototype,s=i.toString,l=o.hasOwnProperty,c=RegExp("^"+s.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return Sp=function(i){return!(!r(i)||t(i))&&(e(i)?c:a).test(n(i))}}(),t=kp?Cp:(kp=1,Cp=function(e,t){return null==e?void 0:e[t]});return Pp=function(r,n){var a=t(r,n);return e(a)?a:void 0}}function Mg(){if(Ip)return Ep;Ip=1;var e=Ig()(Ud(),"Map");return Ep=e}function Tg(){if(Tp)return Mp;Tp=1;var e=Ig()(Object,"create");return Mp=e}function Rg(){if(Bp)return Up;Bp=1;var e=function(){if(zp)return Rp;zp=1;var e=Tg();return Rp=function(){this.__data__=e?e(null):{},this.size=0}}(),t=Lp?Dp:(Lp=1,Dp=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}),r=function(){if(_p)return Op;_p=1;var e=Tg(),t=Object.prototype.hasOwnProperty;return Op=function(r){var n=this.__data__;if(e){var a=n[r];return"__lodash_hash_undefined__"===a?void 0:a}return t.call(n,r)?n[r]:void 0}}(),n=function(){if($p)return Fp;$p=1;var e=Tg(),t=Object.prototype.hasOwnProperty;return Fp=function(r){var n=this.__data__;return e?void 0!==n[r]:t.call(n,r)}}(),a=function(){if(Wp)return Np;Wp=1;var e=Tg();return Np=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=e&&void 0===r?"__lodash_hash_undefined__":r,this}}();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Up=i}function zg(){if(Jp)return qp;Jp=1;var e=Gp?Yp:(Gp=1,Yp=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return qp=function(t,r){var n=t.__data__;return e(r)?n["string"==typeof r?"string":"hash"]:n.map}}function Dg(){if(of)return af;of=1;var e=function(){if(Vp)return Hp;Vp=1;var e=Rg(),t=Pg(),r=Mg();return Hp=function(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}(),t=function(){if(Xp)return Kp;Xp=1;var e=zg();return Kp=function(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}}(),r=function(){if(Zp)return Qp;Zp=1;var e=zg();return Qp=function(t){return e(this,t).get(t)}}(),n=function(){if(tf)return ef;tf=1;var e=zg();return ef=function(t){return e(this,t).has(t)}}(),a=function(){if(nf)return rf;nf=1;var e=zg();return rf=function(t,r){var n=e(this,t),a=n.size;return n.set(t,r),this.size+=n.size==a?0:1,this}}();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,af=i}function Lg(){if(uf)return cf;uf=1;var e=Pg(),t=function(){if(cp)return lp;cp=1;var e=Pg();return lp=function(){this.__data__=new e,this.size=0}}(),r=dp?up:(dp=1,up=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}),n=pp?hp:(pp=1,hp=function(e){return this.__data__.get(e)}),a=mp?fp:(mp=1,fp=function(e){return this.__data__.has(e)}),i=function(){if(lf)return sf;lf=1;var e=Pg(),t=Mg(),r=Dg();return sf=function(n,a){var i=this.__data__;if(i instanceof e){var o=i.__data__;if(!t||o.length<199)return o.push([n,a]),this.size=++i.size,this;i=this.__data__=new r(o)}return i.set(n,a),this.size=i.size,this}}();function o(t){var r=this.__data__=new e(t);this.size=r.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,cf=o}function Og(){if(gf)return mf;gf=1;var e=Dg(),t=hf?df:(hf=1,df=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}),r=ff?pf:(ff=1,pf=function(e){return this.__data__.has(e)});function n(t){var r=-1,n=null==t?0:t.length;for(this.__data__=new e;++r<n;)this.add(t[r])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,mf=n}function _g(){if(Sf)return wf;Sf=1;var e=Og(),t=bf?yf:(bf=1,yf=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}),r=vf?xf:(vf=1,xf=function(e,t){return e.has(t)});return wf=function(n,a,i,o,s,l){var c=1&i,u=n.length,d=a.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(n),p=l.get(a);if(h&&p)return h==a&&p==n;var f=-1,m=!0,g=2&i?new e:void 0;for(l.set(n,a),l.set(a,n);++f<u;){var y=n[f],b=a[f];if(o)var x=c?o(b,y,f,a,n,l):o(y,b,f,n,a,l);if(void 0!==x){if(x)continue;m=!1;break}if(g){if(!t(a,(function(e,t){if(!r(g,t)&&(y===e||s(y,e,i,o,l)))return g.push(t)}))){m=!1;break}}else if(y!==b&&!s(y,b,i,o,l)){m=!1;break}}return l.delete(n),l.delete(a),m}}function Fg(){if(Cf)return jf;Cf=1;var e=Ud().Uint8Array;return jf=e}function $g(){if(Mf)return If;Mf=1;var e=Bd(),t=Fg(),r=Cg(),n=_g(),a=Pf?kf:(Pf=1,kf=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}),i=Ef?Af:(Ef=1,Af=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}),o=e?e.prototype:void 0,s=o?o.valueOf:void 0;return If=function(e,o,l,c,u,d,h){switch(l){case"[object DataView]":if(e.byteLength!=o.byteLength||e.byteOffset!=o.byteOffset)return!1;e=e.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=o.byteLength||!d(new t(e),new t(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+e,+o);case"[object Error]":return e.name==o.name&&e.message==o.message;case"[object RegExp]":case"[object String]":return e==o+"";case"[object Map]":var p=a;case"[object Set]":var f=1&c;if(p||(p=i),e.size!=o.size&&!f)return!1;var m=h.get(e);if(m)return m==o;c|=2,h.set(e,o);var g=n(p(e),p(o),c,u,d,h);return h.delete(e),g;case"[object Symbol]":if(s)return s.call(e)==s.call(o)}return!1}}function Ng(){return Rf?Tf:(Rf=1,Tf=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e})}function Wg(){if(Df)return zf;Df=1;var e=Ng(),t=Vd();return zf=function(r,n,a){var i=n(r);return t(r)?i:e(i,a(r))}}function Ug(){return Ff?_f:(Ff=1,_f=function(){return[]})}function Bg(){if(Nf)return $f;Nf=1;var e=Of?Lf:(Of=1,Lf=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}),t=Ug(),r=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;return $f=n?function(t){return null==t?[]:(t=Object(t),e(n(t),(function(e){return r.call(t,e)})))}:t}function Hg(){if(Uf)return Wf;Uf=1;var e=Wg(),t=Bg(),r=bg();return Wf=function(n){return e(n,r,t)}}function Vg(){if(em)return Zf;em=1;var e=function(){if(Yf)return Vf;Yf=1;var e=Ig()(Ud(),"DataView");return Vf=e}(),t=Mg(),r=function(){if(qf)return Gf;qf=1;var e=Ig()(Ud(),"Promise");return Gf=e}(),n=function(){if(Kf)return Jf;Kf=1;var e=Ig()(Ud(),"Set");return Jf=e}(),a=function(){if(Qf)return Xf;Qf=1;var e=Ig()(Ud(),"WeakMap");return Xf=e}(),i=Hd(),o=Eg(),s="[object Map]",l="[object Promise]",c="[object Set]",u="[object WeakMap]",d="[object DataView]",h=o(e),p=o(t),f=o(r),m=o(n),g=o(a),y=i;return(e&&y(new e(new ArrayBuffer(1)))!=d||t&&y(new t)!=s||r&&y(r.resolve())!=l||n&&y(new n)!=c||a&&y(new a)!=u)&&(y=function(e){var t=i(e),r="[object Object]"==t?e.constructor:void 0,n=r?o(r):"";if(n)switch(n){case h:return d;case p:return s;case f:return l;case m:return c;case g:return u}return t}),Zf=y}function Yg(){if(rm)return tm;rm=1;var e=Lg(),t=_g(),r=$g(),n=function(){if(Hf)return Bf;Hf=1;var e=Hg(),t=Object.prototype.hasOwnProperty;return Bf=function(r,n,a,i,o,s){var l=1&a,c=e(r),u=c.length;if(u!=e(n).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in n:t.call(n,h)))return!1}var p=s.get(r),f=s.get(n);if(p&&f)return p==n&&f==r;var m=!0;s.set(r,n),s.set(n,r);for(var g=l;++d<u;){var y=r[h=c[d]],b=n[h];if(i)var x=l?i(b,y,h,n,r,s):i(y,b,h,r,n,s);if(!(void 0===x?y===b||o(y,b,a,i,s):x)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var v=r.constructor,w=n.constructor;v==w||!("constructor"in r)||!("constructor"in n)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(r),s.delete(n),m}}(),a=Vg(),i=Vd(),o=sh(),s=ug(),l="[object Arguments]",c="[object Array]",u="[object Object]",d=Object.prototype.hasOwnProperty;return tm=function(h,p,f,m,g,y){var b=i(h),x=i(p),v=b?c:a(h),w=x?c:a(p),S=(v=v==l?u:v)==u,j=(w=w==l?u:w)==u,C=v==w;if(C&&o(h)){if(!o(p))return!1;b=!0,S=!1}if(C&&!S)return y||(y=new e),b||s(h)?t(h,p,f,m,g,y):r(h,p,v,f,m,g,y);if(!(1&f)){var k=S&&d.call(h,"__wrapped__"),P=j&&d.call(p,"__wrapped__");if(k||P){var A=k?h.value():h,E=P?p.value():p;return y||(y=new e),g(A,E,f,m,y)}}return!!C&&(y||(y=new e),n(h,p,f,m,g,y))}}function Gg(){if(am)return nm;am=1;var e=Yg(),t=Yd();return nm=function r(n,a,i,o,s){return n===a||(null==n||null==a||!t(n)&&!t(a)?n!=n&&a!=a:e(n,a,i,o,r,s))},nm}function qg(){if(lm)return sm;lm=1;var e=mg();return sm=function(t){return t==t&&!e(t)}}function Jg(){return hm?dm:(hm=1,dm=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}})}function Kg(){if(fm)return pm;fm=1;var e=function(){if(om)return im;om=1;var e=Lg(),t=Gg();return im=function(r,n,a,i){var o=a.length,s=o,l=!i;if(null==r)return!s;for(r=Object(r);o--;){var c=a[o];if(l&&c[2]?c[1]!==r[c[0]]:!(c[0]in r))return!1}for(;++o<s;){var u=(c=a[o])[0],d=r[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in r))return!1}else{var p=new e;if(i)var f=i(d,h,u,r,n,p);if(!(void 0===f?t(h,d,3,i,p):f))return!1}}return!0}}(),t=function(){if(um)return cm;um=1;var e=qg(),t=bg();return cm=function(r){for(var n=t(r),a=n.length;a--;){var i=n[a],o=r[i];n[a]=[i,o,e(o)]}return n}}(),r=Jg();return pm=function(n){var a=t(n);return 1==a.length&&a[0][2]?r(a[0][0],a[0][1]):function(t){return t===n||e(t,n,a)}}}function Xg(){if(gm)return mm;gm=1;var e=Hd(),t=Yd();return mm=function(r){return"symbol"==typeof r||t(r)&&"[object Symbol]"==e(r)}}function Qg(){if(bm)return ym;bm=1;var e=Vd(),t=Xg(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;return ym=function(a,i){if(e(a))return!1;var o=typeof a;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=a&&!t(a))||n.test(a)||!r.test(a)||null!=i&&a in Object(i)}}function Zg(){if(Sm)return wm;Sm=1;var e=function(){if(vm)return xm;vm=1;var e=Dg();function t(r,n){if("function"!=typeof r||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var a=function(){var e=arguments,t=n?n.apply(this,e):e[0],i=a.cache;if(i.has(t))return i.get(t);var o=r.apply(this,e);return a.cache=i.set(t,o)||i,o};return a.cache=new(t.Cache||e),a}return t.Cache=e,xm=t}();return wm=function(t){var r=e(t,(function(e){return 500===n.size&&n.clear(),e})),n=r.cache;return r}}function ey(){if(Em)return Am;Em=1;var e=function(){if(Pm)return km;Pm=1;var e=Bd(),t=jg(),r=Vd(),n=Xg(),a=e?e.prototype:void 0,i=a?a.toString:void 0;return km=function e(a){if("string"==typeof a)return a;if(r(a))return t(a,e)+"";if(n(a))return i?i.call(a):"";var o=a+"";return"0"==o&&1/a==-1/0?"-0":o},km}();return Am=function(t){return null==t?"":e(t)}}function ty(){if(Mm)return Im;Mm=1;var e=Vd(),t=Qg(),r=function(){if(Cm)return jm;Cm=1;var e=Zg(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(t,(function(e,t,a,i){n.push(a?i.replace(r,"$1"):t||e)})),n}));return jm=n}(),n=ey();return Im=function(a,i){return e(a)?a:t(a,i)?[a]:r(n(a))}}function ry(){if(Rm)return Tm;Rm=1;var e=Xg();return Tm=function(t){if("string"==typeof t||e(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}}function ny(){if(Dm)return zm;Dm=1;var e=ty(),t=ry();return zm=function(r,n){for(var a=0,i=(n=e(n,r)).length;null!=r&&a<i;)r=r[t(n[a++])];return a&&a==i?r:void 0}}function ay(){if(Um)return Wm;Um=1;var e=Fm?_m:(Fm=1,_m=function(e,t){return null!=e&&t in Object(e)}),t=function(){if(Nm)return $m;Nm=1;var e=ty(),t=qd(),r=Vd(),n=lh(),a=ch(),i=ry();return $m=function(o,s,l){for(var c=-1,u=(s=e(s,o)).length,d=!1;++c<u;){var h=i(s[c]);if(!(d=null!=o&&l(o,h)))break;o=o[h]}return d||++c!=u?d:!!(u=null==o?0:o.length)&&a(u)&&n(h,u)&&(r(o)||t(o))}}();return Wm=function(r,n){return null!=r&&t(r,n,e)}}function iy(){if(Hm)return Bm;Hm=1;var e=Gg(),t=function(){if(Om)return Lm;Om=1;var e=ny();return Lm=function(t,r,n){var a=null==t?void 0:e(t,r);return void 0===a?n:a}}(),r=ay(),n=Qg(),a=qg(),i=Jg(),o=ry();return Bm=function(s,l){return n(s)&&a(l)?i(o(s),l):function(n){var a=t(n,s);return void 0===a&&a===l?r(n,s):e(l,a,3)}}}function oy(){if(Km)return Jm;Km=1;var e=Ym?Vm:(Ym=1,Vm=function(e){return function(t){return null==t?void 0:t[e]}}),t=function(){if(qm)return Gm;qm=1;var e=ny();return Gm=function(t){return function(r){return e(r,t)}}}(),r=Qg(),n=ry();return Jm=function(a){return r(a)?e(n(a)):t(a)}}function sy(){if(rg)return tg;rg=1;var e=xg(),t=function(){if(eg)return Zm;eg=1;var e=yg();return Zm=function(t,r){return function(n,a){if(null==n)return n;if(!e(n))return t(n,a);for(var i=n.length,o=r?i:-1,s=Object(n);(r?o--:++o<i)&&!1!==a(s[o],o,s););return n}}}()(e);return tg=t}function ly(){if(og)return ig;og=1;var e=jg(),t=function(){if(Qm)return Xm;Qm=1;var e=Kg(),t=iy(),r=vg(),n=Vd(),a=oy();return Xm=function(i){return"function"==typeof i?i:null==i?r:"object"==typeof i?n(i)?t(i[0],i[1]):e(i):a(i)}}(),r=function(){if(ag)return ng;ag=1;var e=sy(),t=yg();return ng=function(r,n){var a=-1,i=t(r)?Array(r.length):[];return e(r,(function(e,t,r){i[++a]=n(e,t,r)})),i}}(),n=Vd();return ig=function(a,i){return(n(a)?e:r)(a,t(i,3))}}function cy(){if(sg)return Nd;sg=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.flattenNames=void 0;var e=a(function(){if(Ed)return Ad;Ed=1;var e=Hd(),t=Vd(),r=Yd();return Ad=function(n){return"string"==typeof n||!t(n)&&r(n)&&"[object String]"==e(n)}}()),t=a(wg()),r=a(function(){if(Bh)return Uh;Bh=1;var e=Hd(),t=Sg(),r=Yd(),n=Function.prototype,a=Object.prototype,i=n.toString,o=a.hasOwnProperty,s=i.call(Object);return Uh=function(n){if(!r(n)||"[object Object]"!=e(n))return!1;var a=t(n);if(null===a)return!0;var l=o.call(a,"constructor")&&a.constructor;return"function"==typeof l&&l instanceof l&&i.call(l)==s}}()),n=a(ly());function a(e){return e&&e.__esModule?e:{default:e}}var i=Nd.flattenNames=function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=[];return(0,n.default)(i,(function(n){Array.isArray(n)?a(n).map((function(e){return o.push(e)})):(0,r.default)(n)?(0,t.default)(n,(function(e,t){!0===e&&o.push(t),o.push(t+"-"+e)})):(0,e.default)(n)&&o.push(n)})),o};return Nd.default=i,Nd}var uy,dy,hy,py,fy,my,gy,yy,by,xy,vy,wy,Sy,jy,Cy,ky,Py,Ay,Ey,Iy,My={};function Ty(){if(my)return fy;my=1;var e=function(){if(py)return hy;py=1;var e=Ig(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(xz){}}();return hy=t}();return fy=function(t,r,n){"__proto__"==r&&e?e(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}}function Ry(){if(yy)return gy;yy=1;var e=Ty(),t=Cg(),r=Object.prototype.hasOwnProperty;return gy=function(n,a,i){var o=n[a];r.call(n,a)&&t(o,i)&&(void 0!==i||a in n)||e(n,a,i)}}function zy(){if(xy)return by;xy=1;var e=Ry(),t=Ty();return by=function(r,n,a,i){var o=!a;a||(a={});for(var s=-1,l=n.length;++s<l;){var c=n[s],u=i?i(a[c],r[c],c,a,r):void 0;void 0===u&&(u=r[c]),o?t(a,c,u):e(a,c,u)}return a}}function Dy(){if(ky)return Cy;ky=1;var e=mg(),t=hg(),r=jy?Sy:(jy=1,Sy=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}),n=Object.prototype.hasOwnProperty;return Cy=function(a){if(!e(a))return r(a);var i=t(a),o=[];for(var s in a)("constructor"!=s||!i&&n.call(a,s))&&o.push(s);return o}}function Ly(){if(Ay)return Py;Ay=1;var e=dg(),t=Dy(),r=yg();return Py=function(n){return r(n)?e(n,!0):t(n)}}var Oy,_y,Fy,$y,Ny,Wy,Uy,By,Hy,Vy,Yy,Gy,qy,Jy,Ky,Xy,Qy,Zy,eb,tb,rb,nb,ab,ib,ob,sb,lb,cb,ub,db,hb,pb,fb,mb,gb,yb,bb,xb,vb,wb,Sb,jb,Cb={exports:{}};function kb(){if(Uy)return Wy;Uy=1;var e=Ng(),t=Sg(),r=Bg(),n=Ug(),a=Object.getOwnPropertySymbols;return Wy=a?function(n){for(var a=[];n;)e(a,r(n)),n=t(n);return a}:n}function Pb(){if(Ky)return Jy;Ky=1;var e=Fg();return Jy=function(t){var r=new t.constructor(t.byteLength);return new e(r).set(new e(t)),r}}function Ab(){if(ob)return ib;ob=1;var e=Pb(),t=function(){if(Qy)return Xy;Qy=1;var e=Pb();return Xy=function(t,r){var n=r?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}}(),r=function(){if(eb)return Zy;eb=1;var e=/\w*$/;return Zy=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}}(),n=function(){if(rb)return tb;rb=1;var e=Bd(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;return tb=function(e){return r?Object(r.call(e)):{}}}(),a=function(){if(ab)return nb;ab=1;var e=Pb();return nb=function(t,r){var n=r?e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}}();return ib=function(i,o,s){var l=i.constructor;switch(o){case"[object ArrayBuffer]":return e(i);case"[object Boolean]":case"[object Date]":return new l(+i);case"[object DataView]":return t(i,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(i,s);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(i);case"[object RegExp]":return r(i);case"[object Symbol]":return n(i)}}}function Eb(){if(ub)return cb;ub=1;var e=function(){if(lb)return sb;lb=1;var e=mg(),t=Object.create;return sb=function(){function r(){}return function(n){if(!e(n))return{};if(t)return t(n);r.prototype=n;var a=new r;return r.prototype=void 0,a}}()}(),t=Sg(),r=hg();return cb=function(n){return"function"!=typeof n.constructor||r(n)?{}:e(t(n))}}function Ib(){if(fb)return pb;fb=1;var e=function(){if(hb)return db;hb=1;var e=Vg(),t=Yd();return db=function(r){return t(r)&&"[object Map]"==e(r)}}(),t=uh(),r=cg(),n=r&&r.isMap,a=n?t(n):e;return pb=a}function Mb(){if(bb)return yb;bb=1;var e=function(){if(gb)return mb;gb=1;var e=Vg(),t=Yd();return mb=function(r){return t(r)&&"[object Set]"==e(r)}}(),t=uh(),r=cg(),n=r&&r.isSet,a=n?t(n):e;return yb=a}function Tb(){if(vb)return xb;vb=1;var e,t,r,n,a,i,o,s=Lg(),l=dy?uy:(dy=1,uy=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}),c=Ry(),u=function(){if(wy)return vy;wy=1;var e=zy(),t=bg();return vy=function(r,n){return r&&e(n,t(n),r)}}(),d=function(){if(Iy)return Ey;Iy=1;var e=zy(),t=Ly();return Ey=function(r,n){return r&&e(n,t(n),r)}}(),h=(Oy||(Oy=1,e=Cb,t=Cb.exports,r=Ud(),n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,i=a&&a.exports===n?r.Buffer:void 0,o=i?i.allocUnsafe:void 0,e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}),Cb.exports),p=Fy?_y:(Fy=1,_y=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}),f=function(){if(Ny)return $y;Ny=1;var e=zy(),t=Bg();return $y=function(r,n){return e(r,t(r),n)}}(),m=function(){if(Hy)return By;Hy=1;var e=zy(),t=kb();return By=function(r,n){return e(r,t(r),n)}}(),g=Hg(),y=function(){if(Yy)return Vy;Yy=1;var e=Wg(),t=kb(),r=Ly();return Vy=function(n){return e(n,r,t)}}(),b=Vg(),x=function(){if(qy)return Gy;qy=1;var e=Object.prototype.hasOwnProperty;return Gy=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}}(),v=Ab(),w=Eb(),S=Vd(),j=sh(),C=Ib(),k=mg(),P=Mb(),A=bg(),E=Ly(),I="[object Arguments]",M="[object Function]",T="[object Object]",R={};return R[I]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[T]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[M]=R["[object WeakMap]"]=!1,xb=function e(t,r,n,a,i,o){var z,D=1&r,L=2&r,O=4&r;if(n&&(z=i?n(t,a,i,o):n(t)),void 0!==z)return z;if(!k(t))return t;var _=S(t);if(_){if(z=x(t),!D)return p(t,z)}else{var F=b(t),$=F==M||"[object GeneratorFunction]"==F;if(j(t))return h(t,D);if(F==T||F==I||$&&!i){if(z=L||$?{}:w(t),!D)return L?m(t,d(z,t)):f(t,u(z,t))}else{if(!R[F])return i?t:{};z=v(t,F,D)}}o||(o=new s);var N=o.get(t);if(N)return N;o.set(t,z),P(t)?t.forEach((function(a){z.add(e(a,r,n,a,t,o))})):C(t)&&t.forEach((function(a,i){z.set(i,e(a,r,n,i,t,o))}));var W=_?void 0:(O?L?y:g:L?E:A)(t);return l(W||t,(function(a,i){W&&(a=t[i=a]),c(z,i,e(a,r,n,i,t,o))})),z},xb}function Rb(){if(jb)return My;jb=1,Object.defineProperty(My,"__esModule",{value:!0}),My.mergeClasses=void 0;var e=n(wg()),t=n(function(){if(Sb)return wb;Sb=1;var e=Tb();return wb=function(t){return e(t,5)}}()),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function n(e){return e&&e.__esModule?e:{default:e}}var a=My.mergeClasses=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=n.default&&(0,t.default)(n.default)||{};return a.map((function(t){var a=n[t];return a&&(0,e.default)(a,(function(e,t){i[t]||(i[t]={}),i[t]=r({},i[t],a[t])})),t})),i};return My.default=a,My}var zb,Db,Lb={},Ob={};function _b(){if(Db)return Ob;Db=1,Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.hover=void 0;var e,t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=n(),a=(e=r)&&e.__esModule?e:{default:e};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=Ob.hover=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function o(){var n,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return s=l=i(this,(n=o.__proto__||Object.getPrototypeOf(o)).call.apply(n,[this].concat(u))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return a.default.createElement(r,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},a.default.createElement(e,t({},l.props,l.state)))},i(l,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o}(a.default.Component)};return Ob.default=o,Ob}var Fb,$b={};function Nb(){if(Fb)return $b;Fb=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.active=void 0;var e,t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=n(),a=(e=r)&&e.__esModule?e:{default:e};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=$b.active=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function o(){var n,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var c=arguments.length,u=Array(c),d=0;d<c;d++)u[d]=arguments[d];return s=l=i(this,(n=o.__proto__||Object.getPrototypeOf(o)).call.apply(n,[this].concat(u))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return a.default.createElement(r,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},a.default.createElement(e,t({},l.props,l.state)))},i(l,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o}(a.default.Component)};return $b.default=o,$b}var Wb,Ub,Bb={},Hb=function(){if(Ub)return $d;Ub=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.ReactCSS=$d.loop=$d.handleActive=$d.handleHover=$d.hover=void 0;var e=l(cy()),t=l(Rb()),r=function(){if(zb)return Lb;zb=1,Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.autoprefix=void 0;var e,t=wg(),r=(e=t)&&e.__esModule?e:{default:e},n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},i=Lb.autoprefix=function(e){var t={};return(0,r.default)(e,(function(e,i){var o={};(0,r.default)(e,(function(e,t){var r=a[t];r?o=n({},o,r(e)):o[t]=e})),t[i]=o})),t};return Lb.default=i,Lb}(),n=l(r),a=l(_b()),i=l(Nb()),o=(Wb||(Wb=1,Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.default=function(e,t){var r={},n=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r[e]=t};return 0===e&&n("first-child"),e===t-1&&n("last-child"),(0===e||e%2==0)&&n("even"),1===Math.abs(e%2)&&n("odd"),n("nth-child",e),r}),Bb),s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}$d.hover=a.default,$d.handleHover=a.default,$d.handleActive=i.default,$d.loop=s.default;var c=$d.ReactCSS=function(r){for(var a=arguments.length,i=Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var s=(0,e.default)(i),l=(0,t.default)(r,s);return(0,n.default)(l)};return $d.default=c,$d}();const Vb=l(Hb);var Yb={},Gb=function(e,t,r,n){var a=e+"-"+t+"-"+r+(n?"-server":"");if(Yb[a])return Yb[a];var i=function(e,t,r,n){if("undefined"==typeof document&&!n)return null;var a=n?new n:document.createElement("canvas");a.width=2*r,a.height=2*r;var i=a.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,a.width,a.height),i.fillStyle=t,i.fillRect(0,0,r,r),i.translate(r,r),i.fillRect(0,0,r,r),a.toDataURL()):null}(e,t,r,n);return Yb[a]=i,i},qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jb=function(e){var t=e.white,r=e.grey,n=e.size,a=e.renderers,o=e.borderRadius,s=e.boxShadow,l=e.children,c=Vb({default:{grid:{borderRadius:o,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+Gb(t,r,n,a.canvas)+") center left"}}});return i.isValidElement(l)?w.cloneElement(l,qb({},l.props,{style:qb({},l.props.style,c.grid)})):w.createElement("div",{style:c.grid})};Jb.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var Kb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xb=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Qb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Zb=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=n=Qb(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),n.handleChange=function(e){var t=function(e,t,r,n,a){var i=a.clientWidth,o=a.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(a.getBoundingClientRect().left+window.pageXOffset),u=l-(a.getBoundingClientRect().top+window.pageYOffset);if("vertical"===r){var d=void 0;if(d=u<0?0:u>o?1:Math.round(100*u/o)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var h=void 0;if(n!==(h=c<0?0:c>i?1:Math.round(100*c/i)/100))return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}return null}(e,n.props.hsl,n.props.direction,n.props.a,n.container);t&&"function"==typeof n.props.onChange&&n.props.onChange(t,e)},n.handleMouseDown=function(e){n.handleChange(e),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleChange),window.removeEventListener("mouseup",n.handleMouseUp)},Qb(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,i.PureComponent||i.Component),Xb(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,r=Vb({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:Kb({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return w.createElement("div",{style:r.alpha},w.createElement("div",{style:r.checkboard},w.createElement(Jb,{renderers:this.props.renderers})),w.createElement("div",{style:r.gradient}),w.createElement("div",{style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.createElement("div",{style:r.pointer},this.props.pointer?w.createElement(this.props.pointer,this.props):w.createElement("div",{style:r.slider}))))}}]),e}(),ex=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),tx=[38,40],rx=1,nx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(e){r.setUpdatedValue(e.target.value,e)},r.handleKeyDown=function(e){var t,n=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(n)&&(t=e.keyCode,tx.indexOf(t)>-1)){var a=r.getArrowOffset(),i=38===e.keyCode?n+a:n-a;r.setUpdatedValue(i,e)}},r.handleDrag=function(e){if(r.props.dragLabel){var t=Math.round(r.props.value+e.movementX);t>=0&&t<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(t),e)}},r.handleMouseDown=function(e){r.props.dragLabel&&(e.preventDefault(),r.handleDrag(e),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},r.inputId="rc-editable-input-"+rx++,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,i.PureComponent||i.Component),ex(e,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var r=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(r,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=Vb({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return w.createElement("div",{style:t.wrap},w.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?w.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(),ax=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function ix(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ox=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=n=ix(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),n.handleChange=function(e){var t=function(e,t,r,n){var a=n.clientWidth,i=n.clientHeight,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(u=c<0?359:c>i?0:360*(-100*c/i+100)/100,r.h!==u)return{h:u,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var d=void 0;if(d=l<0?0:l>a?359:100*l/a*360/100,r.h!==d)return{h:d,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}(e,n.props.direction,n.props.hsl,n.container);t&&"function"==typeof n.props.onChange&&n.props.onChange(t,e)},n.handleMouseDown=function(e){n.handleChange(e),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},ix(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,i.PureComponent||i.Component),ax(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,r=void 0===t?"horizontal":t,n=Vb({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===r});return w.createElement("div",{style:n.hue},w.createElement("div",{className:"hue-"+r,style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),w.createElement("div",{style:n.pointer},this.props.pointer?w.createElement(this.props.pointer,this.props):w.createElement("div",{style:n.slider}))))}}]),e}();function sx(e,t){return e===t||e!=e&&t!=t}function lx(e,t){for(var r=e.length;r--;)if(sx(e[r][0],t))return r;return-1}var cx=Array.prototype.splice;function ux(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ux.prototype.clear=function(){this.__data__=[],this.size=0},ux.prototype.delete=function(e){var t=this.__data__,r=lx(t,e);return!(r<0||(r==t.length-1?t.pop():cx.call(t,r,1),--this.size,0))},ux.prototype.get=function(e){var t=this.__data__,r=lx(t,e);return r<0?void 0:t[r][1]},ux.prototype.has=function(e){return lx(this.__data__,e)>-1},ux.prototype.set=function(e,t){var r=this.__data__,n=lx(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var dx="object"==typeof global&&global&&global.Object===Object&&global,hx="object"==typeof self&&self&&self.Object===Object&&self,px=dx||hx||Function("return this")(),fx=px.Symbol,mx=Object.prototype,gx=mx.hasOwnProperty,yx=mx.toString,bx=fx?fx.toStringTag:void 0,xx=Object.prototype.toString,vx=fx?fx.toStringTag:void 0;function wx(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":vx&&vx in Object(e)?function(e){var t=gx.call(e,bx),r=e[bx];try{e[bx]=void 0;var n=!0}catch(xz){}var a=yx.call(e);return n&&(t?e[bx]=r:delete e[bx]),a}(e):function(e){return xx.call(e)}(e)}function Sx(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function jx(e){if(!Sx(e))return!1;var t=wx(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Cx,kx=px["__core-js_shared__"],Px=(Cx=/[^.]+$/.exec(kx&&kx.keys&&kx.keys.IE_PROTO||""))?"Symbol(src)_1."+Cx:"",Ax=Function.prototype.toString;function Ex(e){if(null!=e){try{return Ax.call(e)}catch(xz){}try{return e+""}catch(xz){}}return""}var Ix=/^\[object .+?Constructor\]$/,Mx=Function.prototype,Tx=Object.prototype,Rx=Mx.toString,zx=Tx.hasOwnProperty,Dx=RegExp("^"+Rx.call(zx).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lx(e){return!(!Sx(e)||(t=e,Px&&Px in t))&&(jx(e)?Dx:Ix).test(Ex(e));var t}function Ox(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Lx(r)?r:void 0}var _x=Ox(px,"Map"),Fx=Ox(Object,"create"),$x=Object.prototype.hasOwnProperty,Nx=Object.prototype.hasOwnProperty;function Wx(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ux(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function Bx(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Hx(e){var t=this.__data__=new ux(e);this.size=t.size}Wx.prototype.clear=function(){this.__data__=Fx?Fx(null):{},this.size=0},Wx.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wx.prototype.get=function(e){var t=this.__data__;if(Fx){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return $x.call(t,e)?t[e]:void 0},Wx.prototype.has=function(e){var t=this.__data__;return Fx?void 0!==t[e]:Nx.call(t,e)},Wx.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Fx&&void 0===t?"__lodash_hash_undefined__":t,this},Bx.prototype.clear=function(){this.size=0,this.__data__={hash:new Wx,map:new(_x||ux),string:new Wx}},Bx.prototype.delete=function(e){var t=Ux(this,e).delete(e);return this.size-=t?1:0,t},Bx.prototype.get=function(e){return Ux(this,e).get(e)},Bx.prototype.has=function(e){return Ux(this,e).has(e)},Bx.prototype.set=function(e,t){var r=Ux(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Hx.prototype.clear=function(){this.__data__=new ux,this.size=0},Hx.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Hx.prototype.get=function(e){return this.__data__.get(e)},Hx.prototype.has=function(e){return this.__data__.has(e)},Hx.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ux){var n=r.__data__;if(!_x||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Bx(n)}return r.set(e,t),this.size=r.size,this};var Vx=function(){try{var e=Ox(Object,"defineProperty");return e({},"",{}),e}catch(xz){}}();function Yx(e,t,r){"__proto__"==t&&Vx?Vx(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Gx(e,t,r){(void 0!==r&&!sx(e[t],r)||void 0===r&&!(t in e))&&Yx(e,t,r)}var qx=function(e,t,r){for(var n=-1,a=Object(e),i=r(e),o=i.length;o--;){var s=i[++n];if(!1===t(a[s],s,a))break}return e},Jx="object"==typeof e&&e&&!e.nodeType&&e,Kx=Jx&&"object"==typeof t&&t&&!t.nodeType&&t,Xx=Kx&&Kx.exports===Jx?px.Buffer:void 0;Xx&&Xx.allocUnsafe;var Qx=px.Uint8Array;function Zx(e,t){var r,n,a=(r=e.buffer,n=new r.constructor(r.byteLength),new Qx(n).set(new Qx(r)),n);return new e.constructor(a,e.byteOffset,e.length)}var ev=Object.create,tv=function(){function e(){}return function(t){if(!Sx(t))return{};if(ev)return ev(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function rv(e,t){return function(r){return e(t(r))}}var nv=rv(Object.getPrototypeOf,Object),av=Object.prototype;function iv(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||av)}function ov(e){return null!=e&&"object"==typeof e}function sv(e){return ov(e)&&"[object Arguments]"==wx(e)}var lv=Object.prototype,cv=lv.hasOwnProperty,uv=lv.propertyIsEnumerable,dv=sv(function(){return arguments}())?sv:function(e){return ov(e)&&cv.call(e,"callee")&&!uv.call(e,"callee")},hv=Array.isArray;function pv(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function fv(e){return null!=e&&pv(e.length)&&!jx(e)}var mv="object"==typeof e&&e&&!e.nodeType&&e,gv=mv&&"object"==typeof t&&t&&!t.nodeType&&t,yv=gv&&gv.exports===mv?px.Buffer:void 0,bv=(yv?yv.isBuffer:void 0)||function(){return!1},xv=Function.prototype,vv=Object.prototype,wv=xv.toString,Sv=vv.hasOwnProperty,jv=wv.call(Object),Cv={};Cv["[object Float32Array]"]=Cv["[object Float64Array]"]=Cv["[object Int8Array]"]=Cv["[object Int16Array]"]=Cv["[object Int32Array]"]=Cv["[object Uint8Array]"]=Cv["[object Uint8ClampedArray]"]=Cv["[object Uint16Array]"]=Cv["[object Uint32Array]"]=!0,Cv["[object Arguments]"]=Cv["[object Array]"]=Cv["[object ArrayBuffer]"]=Cv["[object Boolean]"]=Cv["[object DataView]"]=Cv["[object Date]"]=Cv["[object Error]"]=Cv["[object Function]"]=Cv["[object Map]"]=Cv["[object Number]"]=Cv["[object Object]"]=Cv["[object RegExp]"]=Cv["[object Set]"]=Cv["[object String]"]=Cv["[object WeakMap]"]=!1;var kv,Pv="object"==typeof e&&e&&!e.nodeType&&e,Av=Pv&&"object"==typeof t&&t&&!t.nodeType&&t,Ev=Av&&Av.exports===Pv&&dx.process,Iv=function(){try{var e=Av&&Av.require&&Av.require("util").types;return e||Ev&&Ev.binding&&Ev.binding("util")}catch(xz){}}(),Mv=Iv&&Iv.isTypedArray,Tv=Mv?(kv=Mv,function(e){return kv(e)}):function(e){return ov(e)&&pv(e.length)&&!!Cv[wx(e)]};function Rv(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var zv=Object.prototype.hasOwnProperty;function Dv(e,t,r){var n=e[t];zv.call(e,t)&&sx(n,r)&&(void 0!==r||t in e)||Yx(e,t,r)}var Lv=/^(?:0|[1-9]\d*)$/;function Ov(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Lv.test(e))&&e>-1&&e%1==0&&e<t}var _v=Object.prototype.hasOwnProperty;function Fv(e,t){var r=hv(e),n=!r&&dv(e),a=!r&&!n&&bv(e),i=!r&&!n&&!a&&Tv(e),o=r||n||a||i,s=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var c in e)!t&&!_v.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ov(c,l))||s.push(c);return s}var $v=Object.prototype.hasOwnProperty;function Nv(e){if(!Sx(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=iv(e),r=[];for(var n in e)("constructor"!=n||!t&&$v.call(e,n))&&r.push(n);return r}function Wv(e){return fv(e)?Fv(e,!0):Nv(e)}function Uv(e){return function(e,t,r){var n=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var o=t[a],s=void 0;void 0===s&&(s=e[o]),n?Yx(r,o,s):Dv(r,o,s)}return r}(e,Wv(e))}function Bv(e,t,r,n,a,i,o){var s=Rv(e,r),l=Rv(t,r),c=o.get(l);if(c)Gx(e,r,c);else{var u,d=i?i(s,l,r+"",e,t,o):void 0,h=void 0===d;if(h){var p=hv(l),f=!p&&bv(l),m=!p&&!f&&Tv(l);d=l,p||f||m?hv(s)?d=s:ov(u=s)&&fv(u)?d=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(s):f?(h=!1,d=l.slice()):m?(h=!1,d=Zx(l)):d=[]:function(e){if(!ov(e)||"[object Object]"!=wx(e))return!1;var t=nv(e);if(null===t)return!0;var r=Sv.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&wv.call(r)==jv}(l)||dv(l)?(d=s,dv(s)?d=Uv(s):Sx(s)&&!jx(s)||(d=function(e){return"function"!=typeof e.constructor||iv(e)?{}:tv(nv(e))}(l))):h=!1}h&&(o.set(l,d),a(d,l,n,i,o),o.delete(l)),Gx(e,r,d)}}function Hv(e,t,r,n,a){e!==t&&qx(t,(function(i,o){if(a||(a=new Hx),Sx(i))Bv(e,t,o,r,Hv,n,a);else{var s=n?n(Rv(e,o),i,o+"",e,t,a):void 0;void 0===s&&(s=i),Gx(e,o,s)}}),Wv)}function Vv(e){return e}var Yv=Math.max,Gv=Vx?function(e,t){return Vx(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Vv,qv=Date.now,Jv=function(e){var t=0,r=0;return function(){var n=qv(),a=16-(n-r);if(r=n,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Gv);function Kv(e,t){return Jv(function(e,t,r){return t=Yv(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Yv(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,Vv),e+"")}var Xv,Qv=(Xv=function(e,t,r){Hv(e,t,r)},Kv((function(e,t){var r=-1,n=t.length,a=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(a=Xv.length>3&&"function"==typeof a?(n--,a):void 0,i&&function(e,t,r){if(!Sx(r))return!1;var n=typeof t;return!!("number"==n?fv(r)&&Ov(t,r.length):"string"==n&&t in r)&&sx(r[t],e)}(t[0],t[1],i)&&(a=n<3?void 0:a,n=1),e=Object(e);++r<n;){var o=t[r];o&&Xv(e,o,r,a)}return e}))),Zv=function(e){var t=e.zDepth,r=e.radius,n=e.background,a=e.children,i=e.styles,o=Vb(Qv({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:r,background:n}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},void 0===i?{}:i),{"zDepth-1":1===t});return w.createElement("div",{style:o.wrap},w.createElement("div",{style:o.bg}),w.createElement("div",{style:o.content},a))};Zv.propTypes={background:E.string,zDepth:E.oneOf([0,1,2,3,4,5]),radius:E.number,styles:E.object},Zv.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var ew=function(){return px.Date.now()},tw=/\s/,rw=/^\s+/;function nw(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&tw.test(e.charAt(t)););return t}(e)+1).replace(rw,""):e}function aw(e){return"symbol"==typeof e||ov(e)&&"[object Symbol]"==wx(e)}var iw=/^[-+]0x[0-9a-f]+$/i,ow=/^0b[01]+$/i,sw=/^0o[0-7]+$/i,lw=parseInt;function cw(e){if("number"==typeof e)return e;if(aw(e))return NaN;if(Sx(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Sx(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=nw(e);var r=ow.test(e);return r||sw.test(e)?lw(e.slice(2),r?2:8):iw.test(e)?NaN:+e}var uw=Math.max,dw=Math.min;function hw(e,t,r){var n,a,i,o,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var r=n,i=a;return n=a=void 0,c=t,o=e.apply(i,r)}function f(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-c>=i}function m(){var e=ew();if(f(e))return g(e);s=setTimeout(m,function(e){var r=t-(e-l);return d?dw(r,i-(e-c)):r}(e))}function g(e){return s=void 0,h&&n?p(e):(n=a=void 0,o)}function y(){var e=ew(),r=f(e);if(n=arguments,a=this,l=e,r){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?p(e):o}(l);if(d)return clearTimeout(s),s=setTimeout(m,t),p(l)}return void 0===s&&(s=setTimeout(m,t)),o}return t=cw(t)||0,Sx(r)&&(u=!!r.leading,i=(d="maxWait"in r)?uw(cw(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=a=s=void 0},y.flush=function(){return void 0===s?o:g(ew())},y}var pw=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),fw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.handleChange=function(e){"function"==typeof r.props.onChange&&r.throttle(r.props.onChange,function(e,t,r){var n=r.getBoundingClientRect(),a=n.width,i=n.height,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>a&&(l=a),c<0?c=0:c>i&&(c=i);var u=l/a,d=1-c/i;return{h:t.h,s:u,v:d,a:t.a,source:"hsv"}}(e,r.props.hsl,r.container),e)},r.handleMouseDown=function(e){r.handleChange(e);var t=r.getContainerRenderWindow();t.addEventListener("mousemove",r.handleChange),t.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Sx(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),hw(e,t,{leading:n,maxWait:t,trailing:a})}((function(e,t,r){e(t,r)}),50),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,i.PureComponent||i.Component),pw(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},r=t.color,n=t.white,a=t.black,i=t.pointer,o=t.circle,s=Vb({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:r,white:n,black:a,pointer:i,circle:o}},{custom:!!this.props.style});return w.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},w.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),w.createElement("div",{style:s.white,className:"saturation-white"},w.createElement("div",{style:s.black,className:"saturation-black"}),w.createElement("div",{style:s.pointer},this.props.pointer?w.createElement(this.props.pointer,this.props):w.createElement("div",{style:s.circle}))))}}]),e}();function mw(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var gw=rv(Object.keys,Object),yw=Object.prototype.hasOwnProperty;function bw(e){return fv(e)?Fv(e):function(e){if(!iv(e))return gw(e);var t=[];for(var r in Object(e))yw.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}var xw,vw=(xw=function(e,t){return e&&qx(e,t,bw)},function(e,t){if(null==e)return e;if(!fv(e))return xw(e,t);for(var r=e.length,n=-1,a=Object(e);++n<r&&!1!==t(a[n],n,a););return e});function ww(e,t){var r;return(hv(e)?mw:vw)(e,"function"==typeof(r=t)?r:Vv)}function Sw(e){return(Sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jw=/^\s+/,Cw=/\s+$/;function kw(e,t){if(t=t||{},(e=e||"")instanceof kw)return e;if(!(this instanceof kw))return new kw(e,t);var r=function(e){var t,r,n,a={r:0,g:0,b:0},i=1,o=null,s=null,l=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){e=e.replace(jw,"").replace(Cw,"").toLowerCase();var t,r=!1;if(Uw[e])e=Uw[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=tS.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=tS.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=tS.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=tS.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=tS.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=tS.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=tS.hex8.exec(e))?{r:Gw(t[1]),g:Gw(t[2]),b:Gw(t[3]),a:Xw(t[4]),format:r?"name":"hex8"}:(t=tS.hex6.exec(e))?{r:Gw(t[1]),g:Gw(t[2]),b:Gw(t[3]),format:r?"name":"hex"}:(t=tS.hex4.exec(e))?{r:Gw(t[1]+""+t[1]),g:Gw(t[2]+""+t[2]),b:Gw(t[3]+""+t[3]),a:Xw(t[4]+""+t[4]),format:r?"name":"hex8"}:!!(t=tS.hex3.exec(e))&&{r:Gw(t[1]+""+t[1]),g:Gw(t[2]+""+t[2]),b:Gw(t[3]+""+t[3]),format:r?"name":"hex"}}(e)),"object"==Sw(e)&&(rS(e.r)&&rS(e.g)&&rS(e.b)?(t=e.r,r=e.g,n=e.b,a={r:255*Vw(t,255),g:255*Vw(r,255),b:255*Vw(n,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):rS(e.h)&&rS(e.s)&&rS(e.v)?(o=Jw(e.s),s=Jw(e.v),a=function(e,t,r){e=6*Vw(e,360),t=Vw(t,100),r=Vw(r,100);var n=Math.floor(e),a=e-n,i=r*(1-t),o=r*(1-a*t),s=r*(1-(1-a)*t),l=n%6,c=[r,o,i,i,s,r][l],u=[s,r,r,o,i,i][l],d=[i,i,s,r,r,o][l];return{r:255*c,g:255*u,b:255*d}}(e.h,o,s),c=!0,u="hsv"):rS(e.h)&&rS(e.s)&&rS(e.l)&&(o=Jw(e.s),l=Jw(e.l),a=function(e,t,r){var n,a,i;function o(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(e=Vw(e,360),t=Vw(t,100),r=Vw(r,100),0===t)n=a=i=r;else{var s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;n=o(l,s,e+1/3),a=o(l,s,e),i=o(l,s,e-1/3)}return{r:255*n,g:255*a,b:255*i}}(e.h,o,l),c=!0,u="hsl"),e.hasOwnProperty("a")&&(i=e.a)),i=Hw(i),{ok:c,format:e.format||u,r:Math.min(255,Math.max(a.r,0)),g:Math.min(255,Math.max(a.g,0)),b:Math.min(255,Math.max(a.b,0)),a:i}}(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}function Pw(e,t,r){e=Vw(e,255),t=Vw(t,255),r=Vw(r,255);var n,a,i=Math.max(e,t,r),o=Math.min(e,t,r),s=(i+o)/2;if(i==o)n=a=0;else{var l=i-o;switch(a=s>.5?l/(2-i-o):l/(i+o),i){case e:n=(t-r)/l+(t<r?6:0);break;case t:n=(r-e)/l+2;break;case r:n=(e-t)/l+4}n/=6}return{h:n,s:a,l:s}}function Aw(e,t,r){e=Vw(e,255),t=Vw(t,255),r=Vw(r,255);var n,a,i=Math.max(e,t,r),o=Math.min(e,t,r),s=i,l=i-o;if(a=0===i?0:l/i,i==o)n=0;else{switch(i){case e:n=(t-r)/l+(t<r?6:0);break;case t:n=(r-e)/l+2;break;case r:n=(e-t)/l+4}n/=6}return{h:n,s:a,v:s}}function Ew(e,t,r,n){var a=[qw(Math.round(e).toString(16)),qw(Math.round(t).toString(16)),qw(Math.round(r).toString(16))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function Iw(e,t,r,n){return[qw(Kw(n)),qw(Math.round(e).toString(16)),qw(Math.round(t).toString(16)),qw(Math.round(r).toString(16))].join("")}function Mw(e,t){t=0===t?0:t||10;var r=kw(e).toHsl();return r.s-=t/100,r.s=Yw(r.s),kw(r)}function Tw(e,t){t=0===t?0:t||10;var r=kw(e).toHsl();return r.s+=t/100,r.s=Yw(r.s),kw(r)}function Rw(e){return kw(e).desaturate(100)}function zw(e,t){t=0===t?0:t||10;var r=kw(e).toHsl();return r.l+=t/100,r.l=Yw(r.l),kw(r)}function Dw(e,t){t=0===t?0:t||10;var r=kw(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-t/100*255))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-t/100*255))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-t/100*255))),kw(r)}function Lw(e,t){t=0===t?0:t||10;var r=kw(e).toHsl();return r.l-=t/100,r.l=Yw(r.l),kw(r)}function Ow(e,t){var r=kw(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,kw(r)}function _w(e){var t=kw(e).toHsl();return t.h=(t.h+180)%360,kw(t)}function Fw(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=kw(e).toHsl(),n=[kw(e)],a=360/t,i=1;i<t;i++)n.push(kw({h:(r.h+i*a)%360,s:r.s,l:r.l}));return n}function $w(e){var t=kw(e).toHsl(),r=t.h;return[kw(e),kw({h:(r+72)%360,s:t.s,l:t.l}),kw({h:(r+216)%360,s:t.s,l:t.l})]}function Nw(e,t,r){t=t||6,r=r||30;var n=kw(e).toHsl(),a=360/r,i=[kw(e)];for(n.h=(n.h-(a*t>>1)+720)%360;--t;)n.h=(n.h+a)%360,i.push(kw(n));return i}function Ww(e,t){t=t||6;for(var r=kw(e).toHsv(),n=r.h,a=r.s,i=r.v,o=[],s=1/t;t--;)o.push(kw({h:n,s:a,v:i})),i=(i+s)%1;return o}kw.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,r,n=this.toRgb();return e=n.r/255,t=n.g/255,r=n.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=Hw(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Aw(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Aw(this._r,this._g,this._b),t=Math.round(360*e.h),r=Math.round(100*e.s),n=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=Pw(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Pw(this._r,this._g,this._b),t=Math.round(360*e.h),r=Math.round(100*e.s),n=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return Ew(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,r,n,a){var i=[qw(Math.round(e).toString(16)),qw(Math.round(t).toString(16)),qw(Math.round(r).toString(16)),qw(Kw(n))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Vw(this._r,255))+"%",g:Math.round(100*Vw(this._g,255))+"%",b:Math.round(100*Vw(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Vw(this._r,255))+"%, "+Math.round(100*Vw(this._g,255))+"%, "+Math.round(100*Vw(this._b,255))+"%)":"rgba("+Math.round(100*Vw(this._r,255))+"%, "+Math.round(100*Vw(this._g,255))+"%, "+Math.round(100*Vw(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Bw[Ew(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+Iw(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=kw(e);r="#"+Iw(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return kw(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(zw,arguments)},brighten:function(){return this._applyModification(Dw,arguments)},darken:function(){return this._applyModification(Lw,arguments)},desaturate:function(){return this._applyModification(Mw,arguments)},saturate:function(){return this._applyModification(Tw,arguments)},greyscale:function(){return this._applyModification(Rw,arguments)},spin:function(){return this._applyModification(Ow,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Nw,arguments)},complement:function(){return this._applyCombination(_w,arguments)},monochromatic:function(){return this._applyCombination(Ww,arguments)},splitcomplement:function(){return this._applyCombination($w,arguments)},triad:function(){return this._applyCombination(Fw,[3])},tetrad:function(){return this._applyCombination(Fw,[4])}},kw.fromRatio=function(e,t){if("object"==Sw(e)){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:Jw(e[n]));e=r}return kw(e,t)},kw.equals=function(e,t){return!(!e||!t)&&kw(e).toRgbString()==kw(t).toRgbString()},kw.random=function(){return kw.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},kw.mix=function(e,t,r){r=0===r?0:r||50;var n=kw(e).toRgb(),a=kw(t).toRgb(),i=r/100;return kw({r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a})},kw.readability=function(e,t){var r=kw(e),n=kw(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)},kw.isReadable=function(e,t,r){var n,a,i,o,s,l=kw.readability(e,t);switch(a=!1,(i=r,o=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase(),s=(i.size||"small").toLowerCase(),"AA"!==o&&"AAA"!==o&&(o="AA"),"small"!==s&&"large"!==s&&(s="small"),n={level:o,size:s}).level+n.size){case"AAsmall":case"AAAlarge":a=l>=4.5;break;case"AAlarge":a=l>=3;break;case"AAAsmall":a=l>=7}return a},kw.mostReadable=function(e,t,r){var n,a,i,o,s=null,l=0;a=(r=r||{}).includeFallbackColors,i=r.level,o=r.size;for(var c=0;c<t.length;c++)(n=kw.readability(e,t[c]))>l&&(l=n,s=kw(t[c]));return kw.isReadable(e,s,{level:i,size:o})||!a?s:(r.includeFallbackColors=!1,kw.mostReadable(e,["#fff","#000"],r))};var Uw=kw.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Bw=kw.hexNames=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}(Uw);function Hw(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Vw(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Yw(e){return Math.min(1,Math.max(0,e))}function Gw(e){return parseInt(e,16)}function qw(e){return 1==e.length?"0"+e:""+e}function Jw(e){return e<=1&&(e=100*e+"%"),e}function Kw(e){return Math.round(255*parseFloat(e)).toString(16)}function Xw(e){return Gw(e)/255}var Qw,Zw,eS,tS=(Zw="[\\s|\\(]+("+(Qw="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Qw+")[,|\\s]+("+Qw+")\\s*\\)?",eS="[\\s|\\(]+("+Qw+")[,|\\s]+("+Qw+")[,|\\s]+("+Qw+")[,|\\s]+("+Qw+")\\s*\\)?",{CSS_UNIT:new RegExp(Qw),rgb:new RegExp("rgb"+Zw),rgba:new RegExp("rgba"+eS),hsl:new RegExp("hsl"+Zw),hsla:new RegExp("hsla"+eS),hsv:new RegExp("hsv"+Zw),hsva:new RegExp("hsva"+eS),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function rS(e){return!!tS.CSS_UNIT.exec(e)}var nS=function(e){var t=0,r=0;return ww(["r","g","b","a","h","s","l","v"],(function(n){e[n]&&(t+=1,isNaN(e[n])||(r+=1),"s"===n||"l"===n)&&/^\d+%$/.test(e[n])&&(r+=1)})),t===r&&e},aS=function(e,t){var r=e.hex?kw(e.hex):kw(e),n=r.toHsl(),a=r.toHsv(),i=r.toRgb(),o=r.toHex();return 0===n.s&&(n.h=t||0,a.h=t||0),{hsl:n,hex:"000000"===o&&0===i.a?"transparent":"#"+o,rgb:i,hsv:a,oldHue:e.h||t||n.h,source:e.source}},iS=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&kw(e).isValid()},oS=function(e){if(!e)return"#fff";var t=aS(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},sS=function(e,t){return kw(t+" ("+e.replace("","")+")")._ok},lS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cS=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),uS=function(e){var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleChange=function(e,t){if(nS(e)){var n=aS(e,e.h||r.state.oldHue);r.setState(n),r.props.onChangeComplete&&r.debounce(r.props.onChangeComplete,n,t),r.props.onChange&&r.props.onChange(n,t)}},r.handleSwatchHover=function(e,t){if(nS(e)){var n=aS(e,e.h||r.state.oldHue);r.props.onSwatchHover&&r.props.onSwatchHover(n,t)}},r.state=lS({},aS(e.color,0)),r.debounce=hw((function(e,t,r){e(t,r)}),100),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent||i.Component),cS(t,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),w.createElement(e,lS({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return lS({},aS(e.color,t.oldHue))}}]),t}();return t.propTypes=lS({},e.propTypes),t.defaultProps=lS({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},dS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hS=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function pS(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var fS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};const mS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n=pS(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},pS(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,w.Component),hS(r,[{key:"render",value:function(){return w.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},w.createElement(e,dS({},this.props,this.state)))}}]),r}()}((function(e){var t=e.color,r=e.style,n=e.onClick,a=void 0===n?function(){}:n,i=e.onHover,o=e.title,s=void 0===o?t:o,l=e.children,c=e.focus,u=e.focusStyle,d="transparent"===t,h=Vb({default:{swatch:fS({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,c?void 0===u?{}:u:{})}}),p={};return i&&(p.onMouseOver=function(e){return i(t,e)}),w.createElement("div",fS({style:h.swatch,onClick:function(e){return a(t,e)},title:s,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&a(t,e)}},p),l,d&&w.createElement(Jb,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))}));var gS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yS=function(e){var t=e.rgb,r=e.hsl,n=e.width,a=e.height,i=e.onChange,o=e.direction,s=e.style,l=e.renderers,c=e.pointer,u=e.className,d=void 0===u?"":u,h=Vb({default:{picker:{position:"relative",width:n,height:a},alpha:{radius:"2px",style:s}}});return w.createElement("div",{style:h.picker,className:"alpha-picker "+d},w.createElement(Zb,gS({},h.alpha,{rgb:t,hsl:r,pointer:c,renderers:l,onChange:i,direction:o})))};function bS(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function xS(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Bx;++t<r;)this.add(e[t])}function vS(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function wS(e,t,r,n,a,i){var o=1&r,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&r?new xS:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],m=t[d];if(n)var g=o?n(m,f,d,t,e,i):n(f,m,d,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!vS(t,(function(e,t){if(o=t,!p.has(o)&&(f===e||a(f,e,r,n,i)))return p.push(t);var o}))){h=!1;break}}else if(f!==m&&!a(f,m,r,n,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function SS(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function jS(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}yS.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,r=Vb({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return w.createElement("div",{style:r.picker})}},uS(yS),xS.prototype.add=xS.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},xS.prototype.has=function(e){return this.__data__.has(e)};var CS=fx?fx.prototype:void 0,kS=CS?CS.valueOf:void 0,PS=Object.prototype.propertyIsEnumerable,AS=Object.getOwnPropertySymbols,ES=AS?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}(AS(e),(function(t){return PS.call(e,t)})))}:function(){return[]};function IS(e){return function(e,t,r){var n=t(e);return hv(e)?n:function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}(n,r(e))}(e,bw,ES)}var MS=Object.prototype.hasOwnProperty,TS=Ox(px,"DataView"),RS=Ox(px,"Promise"),zS=Ox(px,"Set"),DS=Ox(px,"WeakMap"),LS="[object Map]",OS="[object Promise]",_S="[object Set]",FS="[object WeakMap]",$S="[object DataView]",NS=Ex(TS),WS=Ex(_x),US=Ex(RS),BS=Ex(zS),HS=Ex(DS),VS=wx;(TS&&VS(new TS(new ArrayBuffer(1)))!=$S||_x&&VS(new _x)!=LS||RS&&VS(RS.resolve())!=OS||zS&&VS(new zS)!=_S||DS&&VS(new DS)!=FS)&&(VS=function(e){var t=wx(e),r="[object Object]"==t?e.constructor:void 0,n=r?Ex(r):"";if(n)switch(n){case NS:return $S;case WS:return LS;case US:return OS;case BS:return _S;case HS:return FS}return t});var YS="[object Arguments]",GS="[object Array]",qS="[object Object]",JS=Object.prototype.hasOwnProperty;function KS(e,t,r,n,a,i){var o=hv(e),s=hv(t),l=o?GS:VS(e),c=s?GS:VS(t),u=(l=l==YS?qS:l)==qS,d=(c=c==YS?qS:c)==qS,h=l==c;if(h&&bv(e)){if(!bv(t))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new Hx),o||Tv(e)?wS(e,t,r,n,a,i):function(e,t,r,n,a,i,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Qx(e),new Qx(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return sx(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=SS;case"[object Set]":var l=1&n;if(s||(s=jS),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;n|=2,o.set(e,t);var u=wS(s(e),s(t),n,a,i,o);return o.delete(e),u;case"[object Symbol]":if(kS)return kS.call(e)==kS.call(t)}return!1}(e,t,l,r,n,a,i);if(!(1&r)){var p=u&&JS.call(e,"__wrapped__"),f=d&&JS.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return i||(i=new Hx),a(m,g,r,n,i)}}return!!h&&(i||(i=new Hx),function(e,t,r,n,a,i){var o=1&r,s=IS(e),l=s.length;if(l!=IS(t).length&&!o)return!1;for(var c=l;c--;){var u=s[c];if(!(o?u in t:MS.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=o;++c<l;){var m=e[u=s[c]],g=t[u];if(n)var y=o?n(g,m,u,t,e,i):n(m,g,u,e,t,i);if(!(void 0===y?m===g||a(m,g,r,n,i):y)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var b=e.constructor,x=t.constructor;b==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,r,n,a,i))}function XS(e,t,r,n,a){return e===t||(null==e||null==t||!ov(e)&&!ov(t)?e!=e&&t!=t:KS(e,t,r,n,XS,a))}function QS(e){return e==e&&!Sx(e)}function ZS(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}function ej(e){var t=function(e){for(var t=bw(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,QS(a)]}return t}(e);return 1==t.length&&t[0][2]?ZS(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,n){var a=r.length,i=a;if(null==e)return!i;for(e=Object(e);a--;){var o=r[a];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){var s=(o=r[a])[0],l=e[s],c=o[1];if(o[2]){if(void 0===l&&!(s in e))return!1}else if(!XS(c,l,3,n,new Hx))return!1}return!0}(r,0,t)}}var tj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rj=/^\w*$/;function nj(e,t){if(hv(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!aw(e))||rj.test(e)||!tj.test(e)||null!=t&&e in Object(t)}function aj(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(aj.Cache||Bx),r}aj.Cache=Bx;var ij=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oj=/\\(\\)?/g,sj=function(e){var t=aj(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ij,(function(e,r,n,a){t.push(n?a.replace(oj,"$1"):r||e)})),t})),lj=fx?fx.prototype:void 0,cj=lj?lj.toString:void 0;function uj(e){if("string"==typeof e)return e;if(hv(e))return bS(e,uj)+"";if(aw(e))return cj?cj.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function dj(e,t){return hv(e)?e:nj(e,t)?[e]:sj(function(e){return null==e?"":uj(e)}(e))}function hj(e){if("string"==typeof e||aw(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function pj(e,t){for(var r=0,n=(t=dj(t,e)).length;null!=e&&r<n;)e=e[hj(t[r++])];return r&&r==n?e:void 0}function fj(e,t){return null!=e&&t in Object(e)}function mj(e,t){return null!=e&&function(e,t,r){for(var n=-1,a=(t=dj(t,e)).length,i=!1;++n<a;){var o=hj(t[n]);if(!(i=null!=e&&r(e,o)))break;e=e[o]}return i||++n!=a?i:!!(a=null==e?0:e.length)&&pv(a)&&Ov(o,a)&&(hv(e)||dv(e))}(e,t,fj)}function gj(e,t){return nj(e)&&QS(t)?ZS(hj(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:pj(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?mj(r,e):XS(t,n,3)}}function yj(e){return nj(e)?(t=hj(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return pj(t,e)}}(e);var t}function bj(e,t){var r=-1,n=fv(e)?Array(e.length):[];return vw(e,(function(e,a,i){n[++r]=t(e,a,i)})),n}function xj(e,t){var r;return(hv(e)?bS:bj)(e,"function"==typeof(r=t)?r:null==r?Vv:"object"==typeof r?hv(r)?gj(r[0],r[1]):ej(r):yj(r))}var vj=function(e){var t=e.colors,r=e.onClick,n=e.onSwatchHover,a=Vb({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return w.createElement("div",{style:a.swatches},xj(t,(function(e){return w.createElement(mS,{key:e,color:e,style:a.swatch,onClick:r,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),w.createElement("div",{style:a.clear}))},wj=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.hex,a=e.colors,i=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d="transparent"===n,h=function(e,r){iS(e)&&t({hex:e,source:"hex"},r)},p=Vb(Qv({default:{card:{width:i,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:n,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:oS(n),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+n+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":"hide"===o});return w.createElement("div",{style:p.card,className:"block-picker "+u},w.createElement("div",{style:p.triangle}),w.createElement("div",{style:p.head},d&&w.createElement(Jb,{borderRadius:"6px 6px 0 0"}),w.createElement("div",{style:p.label},n)),w.createElement("div",{style:p.body},w.createElement(vj,{colors:a,onClick:h,onSwatchHover:r}),w.createElement(nx,{style:{input:p.input},value:n,onChange:h})))};wj.propTypes={width:E.oneOfType([E.string,E.number]),colors:E.arrayOf(E.string),triangle:E.oneOf(["top","hide"]),styles:E.object},wj.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},uS(wj);var Sj="#ffcdd2",jj="#e57373",Cj="#f44336",kj="#d32f2f",Pj="#b71c1c",Aj="#f8bbd0",Ej="#f06292",Ij="#e91e63",Mj="#c2185b",Tj="#880e4f",Rj="#e1bee7",zj="#ba68c8",Dj="#9c27b0",Lj="#7b1fa2",Oj="#4a148c",_j="#d1c4e9",Fj="#9575cd",$j="#673ab7",Nj="#512da8",Wj="#311b92",Uj="#c5cae9",Bj="#7986cb",Hj="#3f51b5",Vj="#303f9f",Yj="#1a237e",Gj="#bbdefb",qj="#64b5f6",Jj="#2196f3",Kj="#1976d2",Xj="#0d47a1",Qj="#b3e5fc",Zj="#4fc3f7",eC="#03a9f4",tC="#0288d1",rC="#01579b",nC="#b2ebf2",aC="#4dd0e1",iC="#00bcd4",oC="#0097a7",sC="#006064",lC="#b2dfdb",cC="#4db6ac",uC="#009688",dC="#00796b",hC="#004d40",pC="#c8e6c9",fC="#81c784",mC="#4caf50",gC="#388e3c",yC="#dcedc8",bC="#aed581",xC="#8bc34a",vC="#689f38",wC="#33691e",SC="#f0f4c3",jC="#dce775",CC="#cddc39",kC="#afb42b",PC="#827717",AC="#fff9c4",EC="#fff176",IC="#ffeb3b",MC="#fbc02d",TC="#f57f17",RC="#ffecb3",zC="#ffd54f",DC="#ffc107",LC="#ffa000",OC="#ff6f00",_C="#ffe0b2",FC="#ffb74d",$C="#ff9800",NC="#f57c00",WC="#e65100",UC="#ffccbc",BC="#ff8a65",HC="#ff5722",VC="#e64a19",YC="#bf360c",GC="#d7ccc8",qC="#a1887f",JC="#795548",KC="#5d4037",XC="#3e2723",QC="#cfd8dc",ZC="#90a4ae",ek="#607d8b",tk="#455a64",rk="#263238",nk=function(e){var t=e.color,r=e.onClick,n=e.onSwatchHover,a=e.hover,i=e.active,o=e.circleSize,s=e.circleSpacing,l=Vb({default:{swatch:{width:o,height:o,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:a,active:i});return w.createElement("div",{style:l.swatch},w.createElement(mS,{style:l.Swatch,color:t,onClick:r,onHover:n,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};nk.defaultProps={circleSize:28,circleSpacing:14};const ak=Hb.handleHover(nk);var ik=function(e){var t=e.width,r=e.onChange,n=e.onSwatchHover,a=e.colors,i=e.hex,o=e.circleSize,s=e.styles,l=void 0===s?{}:s,c=e.circleSpacing,u=e.className,d=void 0===u?"":u,h=Vb(Qv({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},l)),p=function(e,t){return r({hex:e,source:"hex"},t)};return w.createElement("div",{style:h.card,className:"circle-picker "+d},xj(a,(function(e){return w.createElement(ak,{key:e,color:e,onClick:p,onSwatchHover:n,active:i===e.toLowerCase(),circleSize:o,circleSpacing:c})})))};function ok(e){return void 0===e}ik.propTypes={width:E.oneOfType([E.string,E.number]),circleSize:E.number,circleSpacing:E.number,styles:E.object},ik.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Cj,Ij,Dj,$j,Hj,Jj,eC,iC,uC,mC,xC,CC,IC,DC,$C,HC,JC,ek],styles:{}},uS(ik);var sk,lk={},ck=function(){if(sk)return lk;sk=1,Object.defineProperty(lk,"__esModule",{value:!0});var e,t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=n(),a=(e=r)&&e.__esModule?e:{default:e};return lk.default=function(e){var r=e.fill,n=void 0===r?"currentColor":r,i=e.width,o=void 0===i?24:i,s=e.height,l=void 0===s?24:s,c=e.style,u=void 0===c?{}:c,d=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["fill","width","height","style"]);return a.default.createElement("svg",t({viewBox:"0 0 24 24",style:t({fill:n,width:o,height:l},u)},d),a.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},lk}();const uk=l(ck);var dk=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),hk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){"hex"===r.state.view?r.setState({view:"rgb"}):"rgb"===r.state.view?r.setState({view:"hsl"}):"hsl"===r.state.view&&(1===r.props.hsl.a?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(e,t){e.hex?iS(e.hex)&&r.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?r.props.onChange({r:e.r||r.props.rgb.r,g:e.g||r.props.rgb.g,b:e.b||r.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),r.props.onChange({h:e.h||r.props.hsl.h,s:Number(ok(e.s)?r.props.hsl.s:e.s),l:Number(ok(e.l)?r.props.hsl.l:e.l),source:"hsl"},t))},r.showHighlight=function(e){e.currentTarget.style.background="#eee"},r.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==t.hsl.a&&"hex"===t.view?r.state={view:"rgb"}:r.state={view:t.view},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,w.Component),dk(e,[{key:"render",value:function(){var e=this,t=Vb({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),r=void 0;return"hex"===this.state.view?r=w.createElement("div",{style:t.fields,className:"flexbox-fix"},w.createElement("div",{style:t.field},w.createElement(nx,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?r=w.createElement("div",{style:t.fields,className:"flexbox-fix"},w.createElement("div",{style:t.field},w.createElement(nx,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),w.createElement("div",{style:t.field},w.createElement(nx,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),w.createElement("div",{style:t.field},w.createElement(nx,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),w.createElement("div",{style:t.alpha},w.createElement(nx,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(r=w.createElement("div",{style:t.fields,className:"flexbox-fix"},w.createElement("div",{style:t.field},w.createElement(nx,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),w.createElement("div",{style:t.field},w.createElement(nx,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),w.createElement("div",{style:t.field},w.createElement(nx,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),w.createElement("div",{style:t.alpha},w.createElement(nx,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),w.createElement("div",{style:t.wrap,className:"flexbox-fix"},r,w.createElement("div",{style:t.toggle},w.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},w.createElement(uk,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),e}();hk.defaultProps={view:"hex"};var pk=function(){var e=Vb({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return w.createElement("div",{style:e.picker})},fk=function(){var e=Vb({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return w.createElement("div",{style:e.picker})},mk=function(e){var t=e.width,r=e.onChange,n=e.disableAlpha,a=e.rgb,i=e.hsl,o=e.hsv,s=e.hex,l=e.renderers,c=e.styles,u=void 0===c?{}:c,d=e.className,h=void 0===d?"":d,p=e.defaultView,f=Vb(Qv({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+a.r+", "+a.g+", "+a.b+", "+a.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:n});return w.createElement("div",{style:f.picker,className:"chrome-picker "+h},w.createElement("div",{style:f.saturation},w.createElement(fw,{style:f.Saturation,hsl:i,hsv:o,pointer:fk,onChange:r})),w.createElement("div",{style:f.body},w.createElement("div",{style:f.controls,className:"flexbox-fix"},w.createElement("div",{style:f.color},w.createElement("div",{style:f.swatch},w.createElement("div",{style:f.active}),w.createElement(Jb,{renderers:l}))),w.createElement("div",{style:f.toggles},w.createElement("div",{style:f.hue},w.createElement(ox,{style:f.Hue,hsl:i,pointer:pk,onChange:r})),w.createElement("div",{style:f.alpha},w.createElement(Zb,{style:f.Alpha,rgb:a,hsl:i,pointer:pk,renderers:l,onChange:r})))),w.createElement(hk,{rgb:a,hsl:i,hex:s,view:p,onChange:r,disableAlpha:n})))};mk.propTypes={width:E.oneOfType([E.string,E.number]),disableAlpha:E.bool,styles:E.object,defaultView:E.oneOf(["hex","rgb","hsl"])},mk.defaultProps={width:225,disableAlpha:!1,styles:{}},uS(mk);var gk=function(e){var t=e.color,r=e.onClick,n=void 0===r?function(){}:r,a=e.onSwatchHover,i=e.active,o=Vb({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:oS(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:i,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return w.createElement(mS,{style:o.color,color:t,onClick:n,onHover:a,focusStyle:{boxShadow:"0 0 4px "+t}},w.createElement("div",{style:o.dot}))},yk=function(e){var t=e.hex,r=e.rgb,n=e.onChange,a=Vb({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),i=function(e,t){e.r||e.g||e.b?n({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t):n({hex:e.hex,source:"hex"},t)};return w.createElement("div",{style:a.fields,className:"flexbox-fix"},w.createElement("div",{style:a.active}),w.createElement(nx,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"hex",value:t,onChange:i}),w.createElement(nx,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:r.r,onChange:i}),w.createElement(nx,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:r.g,onChange:i}),w.createElement(nx,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:r.b,onChange:i}))},bk=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.colors,a=e.hex,i=e.rgb,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=Vb(Qv({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),d=function(e,r){e.hex?iS(e.hex)&&t({hex:e.hex,source:"hex"},r):t(e,r)};return w.createElement(Zv,{style:u.Compact,styles:s},w.createElement("div",{style:u.compact,className:"compact-picker "+c},w.createElement("div",null,xj(n,(function(e){return w.createElement(gk,{key:e,color:e,active:e.toLowerCase()===a,onClick:d,onSwatchHover:r})})),w.createElement("div",{style:u.clear})),w.createElement(yk,{hex:a,rgb:i,onChange:d})))};bk.propTypes={colors:E.arrayOf(E.string),styles:E.object},bk.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},uS(bk);const xk=Hb.handleHover((function(e){var t=e.hover,r=e.color,n=e.onClick,a=e.onSwatchHover,i={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=Vb({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:i}},{hover:t});return w.createElement("div",{style:o.swatch},w.createElement(mS,{color:r,onClick:n,onHover:a,focusStyle:i}))}));var vk=function(e){var t=e.width,r=e.colors,n=e.onChange,a=e.onSwatchHover,i=e.triangle,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=Vb(Qv({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":"hide"===i,"top-left-triangle":"top-left"===i,"top-right-triangle":"top-right"===i,"bottom-left-triangle":"bottom-left"===i,"bottom-right-triangle":"bottom-right"===i}),d=function(e,t){return n({hex:e,source:"hex"},t)};return w.createElement("div",{style:u.card,className:"github-picker "+c},w.createElement("div",{style:u.triangleShadow}),w.createElement("div",{style:u.triangle}),xj(r,(function(e){return w.createElement(xk,{color:e,key:e,onClick:d,onSwatchHover:a})})))};vk.propTypes={width:E.oneOfType([E.string,E.number]),colors:E.arrayOf(E.string),triangle:E.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:E.object},vk.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},uS(vk);var wk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sk=function(e){var t=e.width,r=e.height,n=e.onChange,a=e.hsl,i=e.direction,o=e.pointer,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=Vb(Qv({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},l));return w.createElement("div",{style:d.picker,className:"hue-picker "+u},w.createElement(ox,wk({},d.hue,{hsl:a,pointer:o,onChange:function(e){return n({a:1,h:e.h,l:.5,s:1})},direction:i})))};Sk.propTypes={styles:E.object},Sk.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,r=Vb({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return w.createElement("div",{style:r.picker})},styles:{}},uS(Sk),uS((function(e){var t=e.onChange,r=e.hex,n=e.rgb,a=e.styles,i=void 0===a?{}:a,o=e.className,s=void 0===o?"":o,l=Vb(Qv({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},i)),c=function(e,r){e.hex?iS(e.hex)&&t({hex:e.hex,source:"hex"},r):(e.r||e.g||e.b)&&t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},r)};return w.createElement(Zv,{styles:i},w.createElement("div",{style:l.material,className:"material-picker "+s},w.createElement(nx,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:r,onChange:c}),w.createElement("div",{style:l.split,className:"flexbox-fix"},w.createElement("div",{style:l.third},w.createElement(nx,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:c})),w.createElement("div",{style:l.third},w.createElement(nx,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:c})),w.createElement("div",{style:l.third},w.createElement(nx,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:c})))))}));var jk=function(e){var t=e.onChange,r=e.rgb,n=e.hsv,a=e.hex,i=Vb({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(e,a){e["#"]?iS(e["#"])&&t({hex:e["#"],source:"hex"},a):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},a):(e.h||e.s||e.v)&&t({h:e.h||n.h,s:e.s||n.s,v:e.v||n.v,source:"hsv"},a)};return w.createElement("div",{style:i.fields},w.createElement(nx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"h",value:Math.round(n.h),onChange:o}),w.createElement(nx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"s",value:Math.round(100*n.s),onChange:o}),w.createElement(nx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"v",value:Math.round(100*n.v),onChange:o}),w.createElement("div",{style:i.divider}),w.createElement(nx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:r.r,onChange:o}),w.createElement(nx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:r.g,onChange:o}),w.createElement(nx,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:r.b,onChange:o}),w.createElement("div",{style:i.divider}),w.createElement(nx,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"#",value:a.replace("#",""),onChange:o}),w.createElement("div",{style:i.fieldSymbols},w.createElement("div",{style:i.symbol},""),w.createElement("div",{style:i.symbol},"%"),w.createElement("div",{style:i.symbol},"%")))},Ck=function(e){var t=e.hsl,r=Vb({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return w.createElement("div",{style:r.picker})},kk=function(){var e=Vb({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return w.createElement("div",{style:e.pointer},w.createElement("div",{style:e.left},w.createElement("div",{style:e.leftInside})),w.createElement("div",{style:e.right},w.createElement("div",{style:e.rightInside})))},Pk=function(e){var t=e.onClick,r=e.label,n=e.children,a=e.active,i=Vb({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:a});return w.createElement("div",{style:i.button,onClick:t},r||n)},Ak=function(e){var t=e.rgb,r=e.currentColor,n=Vb({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return w.createElement("div",null,w.createElement("div",{style:n.label},"new"),w.createElement("div",{style:n.swatches},w.createElement("div",{style:n.new}),w.createElement("div",{style:n.current})),w.createElement("div",{style:n.label},"current"))},Ek=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Ik=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:t.hex},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,w.Component),Ek(e,[{key:"render",value:function(){var e=this.props,t=e.styles,r=void 0===t?{}:t,n=e.className,a=void 0===n?"":n,i=Vb(Qv({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},r));return w.createElement("div",{style:i.picker,className:"photoshop-picker "+a},w.createElement("div",{style:i.head},this.props.header),w.createElement("div",{style:i.body,className:"flexbox-fix"},w.createElement("div",{style:i.saturation},w.createElement(fw,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Ck,onChange:this.props.onChange})),w.createElement("div",{style:i.hue},w.createElement(ox,{direction:"vertical",hsl:this.props.hsl,pointer:kk,onChange:this.props.onChange})),w.createElement("div",{style:i.controls},w.createElement("div",{style:i.top,className:"flexbox-fix"},w.createElement("div",{style:i.previews},w.createElement(Ak,{rgb:this.props.rgb,currentColor:this.state.currentColor})),w.createElement("div",{style:i.actions},w.createElement(Pk,{label:"OK",onClick:this.props.onAccept,active:!0}),w.createElement(Pk,{label:"Cancel",onClick:this.props.onCancel}),w.createElement(jk,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}();Ik.propTypes={header:E.string,styles:E.object},Ik.defaultProps={header:"Color Picker",styles:{}},uS(Ik);var Mk=function(e){var t=e.onChange,r=e.rgb,n=e.hsl,a=e.hex,i=e.disableAlpha,o=Vb({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:i}),s=function(e,a){e.hex?iS(e.hex)&&t({hex:e.hex,source:"hex"},a):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,a:r.a,source:"rgb"},a):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:n.h,s:n.s,l:n.l,a:e.a,source:"rgb"},a))};return w.createElement("div",{style:o.fields,className:"flexbox-fix"},w.createElement("div",{style:o.double},w.createElement(nx,{style:{input:o.input,label:o.label},label:"hex",value:a.replace("#",""),onChange:s})),w.createElement("div",{style:o.single},w.createElement(nx,{style:{input:o.input,label:o.label},label:"r",value:r.r,onChange:s,dragLabel:"true",dragMax:"255"})),w.createElement("div",{style:o.single},w.createElement(nx,{style:{input:o.input,label:o.label},label:"g",value:r.g,onChange:s,dragLabel:"true",dragMax:"255"})),w.createElement("div",{style:o.single},w.createElement(nx,{style:{input:o.input,label:o.label},label:"b",value:r.b,onChange:s,dragLabel:"true",dragMax:"255"})),w.createElement("div",{style:o.alpha},w.createElement(nx,{style:{input:o.input,label:o.label},label:"a",value:Math.round(100*r.a),onChange:s,dragLabel:"true",dragMax:"100"})))},Tk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rk=function(e){var t=e.colors,r=e.onClick,n=void 0===r?function(){}:r,a=e.onSwatchHover,i=Vb({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),o=function(e,t){n({hex:e,source:"hex"},t)};return w.createElement("div",{style:i.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,r=""+t.color+(t.title||"");return w.createElement("div",{key:r,style:i.swatchWrap},w.createElement(mS,Tk({},t,{style:i.swatch,onClick:o,onHover:a,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};Rk.propTypes={colors:E.arrayOf(E.oneOfType([E.string,E.shape({color:E.string,title:E.string})])).isRequired};var zk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dk=function(e){var t=e.width,r=e.rgb,n=e.hex,a=e.hsv,i=e.hsl,o=e.onChange,s=e.onSwatchHover,l=e.disableAlpha,c=e.presetColors,u=e.renderers,d=e.styles,h=void 0===d?{}:d,p=e.className,f=void 0===p?"":p,m=Vb(Qv({default:zk({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},h),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},h),{disableAlpha:l});return w.createElement("div",{style:m.picker,className:"sketch-picker "+f},w.createElement("div",{style:m.saturation},w.createElement(fw,{style:m.Saturation,hsl:i,hsv:a,onChange:o})),w.createElement("div",{style:m.controls,className:"flexbox-fix"},w.createElement("div",{style:m.sliders},w.createElement("div",{style:m.hue},w.createElement(ox,{style:m.Hue,hsl:i,onChange:o})),w.createElement("div",{style:m.alpha},w.createElement(Zb,{style:m.Alpha,rgb:r,hsl:i,renderers:u,onChange:o}))),w.createElement("div",{style:m.color},w.createElement(Jb,null),w.createElement("div",{style:m.activeColor}))),w.createElement(Mk,{rgb:r,hsl:i,hex:n,onChange:o,disableAlpha:l}),w.createElement(Rk,{colors:c,onClick:o,onSwatchHover:s}))};Dk.propTypes={disableAlpha:E.bool,width:E.oneOfType([E.string,E.number]),styles:E.object},Dk.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const Lk=uS(Dk);var Ok=function(e){var t=e.hsl,r=e.offset,n=e.onClick,a=void 0===n?function(){}:n,i=e.active,o=e.first,s=e.last,l=Vb({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*r+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:i,first:o,last:s});return w.createElement("div",{style:l.swatch,onClick:function(e){return a({h:t.h,s:.5,l:r,source:"hsl"},e)}})},_k=function(e){var t=e.onClick,r=e.hsl,n=Vb({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),a=.1;return w.createElement("div",{style:n.swatches},w.createElement("div",{style:n.swatch},w.createElement(Ok,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<a&&Math.abs(r.s-.5)<a,onClick:t,first:!0})),w.createElement("div",{style:n.swatch},w.createElement(Ok,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<a&&Math.abs(r.s-.5)<a,onClick:t})),w.createElement("div",{style:n.swatch},w.createElement(Ok,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<a&&Math.abs(r.s-.5)<a,onClick:t})),w.createElement("div",{style:n.swatch},w.createElement(Ok,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<a&&Math.abs(r.s-.5)<a,onClick:t})),w.createElement("div",{style:n.swatch},w.createElement(Ok,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<a&&Math.abs(r.s-.5)<a,onClick:t,last:!0})),w.createElement("div",{style:n.clear}))},Fk=function(e){var t=e.hsl,r=e.onChange,n=e.pointer,a=e.styles,i=void 0===a?{}:a,o=e.className,s=void 0===o?"":o,l=Vb(Qv({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},i));return w.createElement("div",{style:l.wrap||{},className:"slider-picker "+s},w.createElement("div",{style:l.hue},w.createElement(ox,{style:l.Hue,hsl:t,pointer:n,onChange:r})),w.createElement("div",{style:l.swatches},w.createElement(_k,{hsl:t,onClick:r})))};Fk.propTypes={styles:E.object},Fk.defaultProps={pointer:function(){var e=Vb({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return w.createElement("div",{style:e.picker})},styles:{}},uS(Fk);var $k,Nk={},Wk=function(){if($k)return Nk;$k=1,Object.defineProperty(Nk,"__esModule",{value:!0});var e,t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=n(),a=(e=r)&&e.__esModule?e:{default:e};return Nk.default=function(e){var r=e.fill,n=void 0===r?"currentColor":r,i=e.width,o=void 0===i?24:i,s=e.height,l=void 0===s?24:s,c=e.style,u=void 0===c?{}:c,d=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["fill","width","height","style"]);return a.default.createElement("svg",t({viewBox:"0 0 24 24",style:t({fill:n,width:o,height:l},u)},d),a.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Nk}();const Uk=l(Wk);var Bk=function(e){var t=e.color,r=e.onClick,n=void 0===r?function(){}:r,a=e.onSwatchHover,i=e.first,o=e.last,s=e.active,l=Vb({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:oS(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:i,last:o,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return w.createElement(mS,{color:t,style:l.color,onClick:n,onHover:a,focusStyle:{boxShadow:"0 0 4px "+t}},w.createElement("div",{style:l.check},w.createElement(Uk,null)))},Hk=function(e){var t=e.onClick,r=e.onSwatchHover,n=e.group,a=e.active,i=Vb({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return w.createElement("div",{style:i.group},xj(n,(function(e,i){return w.createElement(Bk,{key:e,color:e,active:e.toLowerCase()===a,first:0===i,last:i===n.length-1,onClick:t,onSwatchHover:r})})))},Vk=function(e){var t=e.width,r=e.height,n=e.onChange,a=e.onSwatchHover,i=e.colors,o=e.hex,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=Vb(Qv({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),h=function(e,t){return n({hex:e,source:"hex"},t)};return w.createElement("div",{style:d.picker,className:"swatches-picker "+u},w.createElement(Zv,null,w.createElement("div",{style:d.overflow},w.createElement("div",{style:d.body},xj(i,(function(e){return w.createElement(Hk,{key:e.toString(),group:e,active:o,onClick:h,onSwatchHover:a})})),w.createElement("div",{style:d.clear})))))};Vk.propTypes={width:E.oneOfType([E.string,E.number]),height:E.oneOfType([E.string,E.number]),colors:E.arrayOf(E.arrayOf(E.string)),styles:E.object},Vk.defaultProps={width:320,height:240,colors:[[Pj,kj,Cj,jj,Sj],[Tj,Mj,Ij,Ej,Aj],[Oj,Lj,Dj,zj,Rj],[Wj,Nj,$j,Fj,_j],[Yj,Vj,Hj,Bj,Uj],[Xj,Kj,Jj,qj,Gj],[rC,tC,eC,Zj,Qj],[sC,oC,iC,aC,nC],[hC,dC,uC,cC,lC],["#194D33",gC,mC,fC,pC],[wC,vC,xC,bC,yC],[PC,kC,CC,jC,SC],[TC,MC,IC,EC,AC],[OC,LC,DC,zC,RC],[WC,NC,$C,FC,_C],[YC,VC,HC,BC,UC],[XC,KC,JC,qC,GC],[rk,tk,ek,ZC,QC],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},uS(Vk);var Yk=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.hex,a=e.colors,i=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=Vb(Qv({default:{card:{width:i,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o}),h=function(e,r){iS(e)&&t({hex:e,source:"hex"},r)};return w.createElement("div",{style:d.card,className:"twitter-picker "+u},w.createElement("div",{style:d.triangleShadow}),w.createElement("div",{style:d.triangle}),w.createElement("div",{style:d.body},xj(a,(function(e,t){return w.createElement(mS,{key:t,color:e,hex:e,style:d.swatch,onClick:h,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),w.createElement("div",{style:d.hash},"#"),w.createElement(nx,{label:null,style:{input:d.input},value:n.replace("#",""),onChange:h}),w.createElement("div",{style:d.clear})))};Yk.propTypes={width:E.oneOfType([E.string,E.number]),triangle:E.oneOf(["hide","top-left","top-right"]),colors:E.arrayOf(E.string),styles:E.object},Yk.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},uS(Yk);var Gk=function(e){var t=Vb({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return w.createElement("div",{style:t.picker})};Gk.propTypes={hsl:E.shape({h:E.number,s:E.number,l:E.number,a:E.number})},Gk.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var qk=function(e){var t=Vb({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return w.createElement("div",{style:t.picker})};qk.propTypes={hsl:E.shape({h:E.number,s:E.number,l:E.number,a:E.number})},qk.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Jk=function(e){var t=e.onChange,r=e.rgb,n=e.hsl,a=e.hex,i=e.hsv,o=function(e,r){if(e.hex)iS(e.hex)&&t({hex:e.hex,source:"hex"},r);else if(e.rgb){var n=e.rgb.split(",");sS(e.rgb,"rgb")&&t({r:n[0],g:n[1],b:n[2],a:1,source:"rgb"},r)}else if(e.hsv){var a=e.hsv.split(",");sS(e.hsv,"hsv")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("",""),1==a[1]?a[1]=.01:1==a[2]&&(a[2]=.01),t({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsv"},r))}else if(e.hsl){var i=e.hsl.split(",");sS(e.hsl,"hsl")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("",""),1==u[1]?u[1]=.01:1==u[2]&&(u[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsl"},r))}},s=Vb({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=r.r+", "+r.g+", "+r.b,c=Math.round(n.h)+", "+Math.round(100*n.s)+"%, "+Math.round(100*n.l)+"%",u=Math.round(i.h)+", "+Math.round(100*i.s)+"%, "+Math.round(100*i.v)+"%";return w.createElement("div",{style:s.wrap,className:"flexbox-fix"},w.createElement("div",{style:s.fields},w.createElement("div",{style:s.double},w.createElement(nx,{style:{input:s.input,label:s.label},label:"hex",value:a,onChange:o})),w.createElement("div",{style:s.column},w.createElement("div",{style:s.single},w.createElement(nx,{style:{input:s.input2,label:s.label2},label:"rgb",value:l,onChange:o})),w.createElement("div",{style:s.single},w.createElement(nx,{style:{input:s.input2,label:s.label2},label:"hsv",value:u,onChange:o})),w.createElement("div",{style:s.single},w.createElement(nx,{style:{input:s.input2,label:s.label2},label:"hsl",value:c,onChange:o})))))},Kk=function(e){var t=e.width,r=e.onChange,n=e.rgb,a=e.hsl,i=e.hsv,o=e.hex,s=e.header,l=e.styles,c=void 0===l?{}:l,u=e.className,d=void 0===u?"":u,h=Vb(Qv({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+n.r+", "+n.g+", "+n.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return w.createElement("div",{style:h.picker,className:"google-picker "+d},w.createElement("div",{style:h.head},s),w.createElement("div",{style:h.swatch}),w.createElement("div",{style:h.saturation},w.createElement(fw,{hsl:a,hsv:i,pointer:Gk,onChange:r})),w.createElement("div",{style:h.body},w.createElement("div",{style:h.controls,className:"flexbox-fix"},w.createElement("div",{style:h.hue},w.createElement(ox,{style:h.Hue,hsl:a,radius:"4px",pointer:qk,onChange:r}))),w.createElement(Jk,{rgb:n,hsl:a,hex:o,hsv:i,onChange:r})))};Kk.propTypes={width:E.oneOfType([E.string,E.number]),styles:E.object,header:E.string},Kk.defaultProps={width:652,styles:{},header:"Color picker"},uS(Kk);const Xk=({open:e,onClose:t,editingTheme:r})=>{const{saveCustomTheme:n}=qc(),[a,o]=i.useState((()=>r?.name||"My Custom Theme")),[l,c]=i.useState((()=>r?{primary:r.primary,secondary:r.secondary,darkBackground:r.darkBackground,darkPaper:r.darkPaper,lightBackground:r.lightBackground,lightPaper:r.lightPaper}:{primary:"#9c27b0",secondary:"#7c4dff",darkBackground:"#18122B",darkPaper:"#231942",lightBackground:"#f3eaff",lightPaper:"#fff"})),[p,m]=i.useState({open:!1,field:null,anchorEl:null}),x=(e,t)=>{c((r=>({...r,[e]:t})))};return s.jsxs(s.Fragment,{children:[s.jsxs(g,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,children:[s.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx(h,{variant:"h6",children:r?"Edit Custom Theme":"Create Custom Theme"}),s.jsx(d,{onClick:t,size:"small",children:s.jsx(An,{})})]}),s.jsxs(b,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Create your own custom color theme. Click on color boxes to open the color picker."}),s.jsx(T,{label:"Theme Name",value:a,onChange:e=>o(e.target.value),fullWidth:!0,sx:{mb:3},placeholder:"Enter a name for your theme"}),s.jsx(U,{container:!0,spacing:3,children:[{key:"primary",label:"Primary Color",description:"Main brand color for buttons, app bar, etc."},{key:"secondary",label:"Secondary Color",description:"Accent color for highlights and secondary elements"},{key:"darkBackground",label:"Dark Background",description:"Background color for dark mode"},{key:"darkPaper",label:"Dark Paper",description:"Card/paper background for dark mode"},{key:"lightBackground",label:"Light Background",description:"Background color for light mode"},{key:"lightPaper",label:"Light Paper",description:"Card/paper background for light mode"}].map((({key:e,label:t,description:r})=>s.jsx(U,{size:{xs:12,sm:6},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(u,{onClick:t=>{m({open:!0,field:e,anchorEl:t.currentTarget})},sx:{width:40,height:40,backgroundColor:l[e],border:1,borderColor:"divider",borderRadius:1,flexShrink:0,cursor:"pointer","&:hover":{borderColor:"primary.main",borderWidth:2}}}),s.jsx(u,{sx:{flex:1},children:s.jsx(T,{label:t,value:l[e],onChange:t=>x(e,t.target.value),size:"small",fullWidth:!0,placeholder:"#000000",helperText:r})})]})},e)))}),s.jsxs(u,{sx:{mt:3,p:2,bgcolor:"background.paper",borderRadius:1,border:1,borderColor:"divider"},children:[s.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Preview"}),s.jsxs(u,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[s.jsx(u,{sx:{width:60,height:40,backgroundColor:l.primary,borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"bold"},children:"Primary"}),s.jsx(u,{sx:{width:60,height:40,backgroundColor:l.secondary,borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"bold"},children:"Secondary"}),s.jsx(u,{sx:{width:60,height:40,backgroundColor:l.darkBackground,borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"bold"},children:"Dark BG"}),s.jsx(u,{sx:{width:60,height:40,backgroundColor:l.darkPaper,borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"bold"},children:"Dark Paper"})]})]})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:()=>{c({primary:"#9c27b0",secondary:"#7c4dff",darkBackground:"#18122B",darkPaper:"#231942",lightBackground:"#f3eaff",lightPaper:"#fff"}),o(r?.name||"My Custom Theme")},color:"secondary",children:"Reset to Default"}),s.jsx(A,{onClick:t,children:"Cancel"}),s.jsx(A,{onClick:()=>{if(!a.trim())return void alert("Please enter a theme name");const e={id:r?.id||`custom_${Date.now()}`,name:a.trim(),...l,isCustom:!0};n(e),t()},variant:"contained",children:r?"Update Theme":"Save Custom Theme"})]})]}),s.jsx(f,{open:p.open,anchorEl:p.anchorEl,onClose:()=>{m({open:!1,field:null,anchorEl:null})},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:s.jsx(u,{sx:{p:2},children:s.jsx(Lk,{color:p.field?l[p.field]:"#000000",onChange:e=>{p.field&&x(p.field,e.hex)},disableAlpha:!0})})})]})},Qk=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Zk=e=>{const t=[];return e?Qk.test(e)?e.length>254&&t.push("Email address is too long"):t.push("Please enter a valid email address"):t.push("Email is required"),{isValid:0===t.length,errors:t}},eP=({onSuccess:e,onSwitchToSignUp:t,onForgotPassword:r,showRememberMe:n=!0,showForgotPassword:a=!0,showSignUpLink:o=!0})=>{const l=m(),{signInWithEmail:c,isLoading:p,lastError:f,clearError:g}=tc(),[y,b]=i.useState({email:"",password:"",rememberMe:!0}),[v,w]=i.useState(!1),[S,j]=i.useState([]),[C,P]=i.useState(!1),E=e=>t=>{const r="rememberMe"===e?t.target.checked:t.target.value;b((t=>({...t,[e]:r}))),S.length>0&&j([]),f&&g()},M=S.length>0||!!f;return s.jsxs(u,{component:"form",onSubmit:async t=>{t.preventDefault();const r=(e=>{const t=[];return e.email?Qk.test(e.email)||t.push("Please enter a valid email address"):t.push("Email is required"),e.password||t.push("Password is required"),{isValid:0===t.length,errors:t}})({email:y.email,password:y.password});if(r.isValid){P(!0),j([]);try{await c(y.email,y.password)&&e?.()}catch(vz){}finally{P(!1)}}else j(r.errors)},sx:{width:"100%"},children:[s.jsxs(u,{sx:{textAlign:"center",mb:3},children:[s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:l.palette.primary.main,color:"white",margin:"0 auto 16px"},children:s.jsx(ci,{sx:{fontSize:28}})}),s.jsx(h,{variant:"h5",fontWeight:600,gutterBottom:!0,children:"Sign In"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"Enter your email and password to continue"})]}),M&&s.jsx(x,{severity:"error",sx:{mb:2},children:S.length>0?s.jsx(u,{children:S.map(((e,t)=>s.jsx(h,{variant:"body2",children:e},t)))}):f?.message||"Sign-in failed. Please try again."}),s.jsx(T,{fullWidth:!0,label:"Email Address",type:"email",value:y.email,onChange:E("email"),disabled:C||p,error:S.some((e=>e.toLowerCase().includes("email"))),InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(Ba,{color:"action"})})},sx:{mb:2},autoComplete:"email",autoFocus:!0}),s.jsx(T,{fullWidth:!0,label:"Password",type:v?"text":"password",value:y.password,onChange:E("password"),disabled:C||p,error:S.some((e=>e.toLowerCase().includes("password"))),InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(si,{color:"action"})}),endAdornment:s.jsx(B,{position:"end",children:s.jsx(d,{onClick:()=>{w(!v)},disabled:C||p,edge:"end",children:v?s.jsx(Bi,{}):s.jsx(Ui,{})})})},sx:{mb:2},autoComplete:"current-password"}),s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[n&&s.jsx(X,{control:s.jsx($,{checked:y.rememberMe,onChange:E("rememberMe"),disabled:C||p,size:"small"}),label:s.jsx(h,{variant:"body2",color:"text.secondary",children:"Remember me"})}),a&&s.jsx(de,{component:"button",type:"button",variant:"body2",onClick:r,disabled:C||p,sx:{textDecoration:"none"},children:"Forgot password?"})]}),s.jsx(A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:C||p||!y.email||!y.password,sx:{mb:2,height:48,fontWeight:600},children:C||p?s.jsxs(I,{direction:"row",alignItems:"center",spacing:1,children:[s.jsx(H,{size:20,color:"inherit"}),s.jsx("span",{children:"Signing In..."})]}):"Sign In"}),o&&s.jsxs(s.Fragment,{children:[s.jsx(k,{sx:{my:2},children:s.jsx(h,{variant:"body2",color:"text.secondary",children:"Don't have an account?"})}),s.jsx(A,{fullWidth:!0,variant:"outlined",onClick:t,disabled:C||p,sx:{height:48},children:"Create Account"})]})]})},tP=({onSuccess:e,onSwitchToSignIn:t,showSignInLink:r=!0})=>{const n=m(),{createUserWithEmail:a,isLoading:o,lastError:l,clearError:c}=tc(),[p,f]=i.useState({email:"",password:"",confirmPassword:"",displayName:"",acceptTerms:!1}),[g,y]=i.useState(!1),[b,v]=i.useState(!1),[w,S]=i.useState([]),[j,C]=i.useState(!1),[k,P]=i.useState(null),E=e=>t=>{const r="acceptTerms"===e?t.target.checked:t.target.value;if(f((t=>({...t,[e]:r}))),"password"===e){const e=(e=>{const t=[],r=[];let n,a=0;return e?(e.length>=8&&(a+=20),e.length>=12&&(a+=10),e.length>=16&&(a+=10),/[a-z]/.test(e)&&(a+=10),/[A-Z]/.test(e)&&(a+=10),/\d/.test(e)&&(a+=10),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)&&(a+=15),/(.)\1{2,}/.test(e)||(a+=10),/123|abc|qwe|password|admin/i.test(e)||(a+=15),e.length<8&&r.push("Use at least 8 characters"),/[a-z]/.test(e)||r.push("Add lowercase letters"),/[A-Z]/.test(e)||r.push("Add uppercase letters"),/\d/.test(e)||r.push("Add numbers"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)||r.push("Add special characters"),e.length<12&&r.push("Consider using 12+ characters for better security"),a<30?(n="weak",t.push("Password is too weak")):n=a<50?"fair":a<70?"good":a<85?"strong":"very-strong",{isValid:0===t.length&&a>=30,errors:t,suggestions:r,strength:n,score:a}):{isValid:!1,errors:["Password is required"],suggestions:["Enter a password to see strength analysis"],strength:"weak",score:0}})(r);P(e)}w.length>0&&S([]),l&&c()},M=e=>{switch(e){case"weak":return n.palette.error.main;case"fair":return n.palette.warning.main;case"good":return n.palette.info.main;case"strong":return n.palette.success.main;case"very-strong":return n.palette.success.dark;default:return n.palette.grey[400]}},R=w.length>0||!!l;return s.jsxs(u,{component:"form",onSubmit:async t=>{t.preventDefault();const r=(e=>{const t=[],r=Zk(e.email);r.isValid||t.push(...r.errors),r.isValid&&(e=>{const t=e.split("@")[1]?.toLowerCase();return["10minutemail.com","tempmail.org","guerrillamail.com","mailinator.com","throwaway.email"].includes(t)})(e.email)&&t.push("Please use a permanent email address");const n=(e=>{const t=[];return e?(e.length<8&&t.push("Password must be at least 8 characters long"),e.length>128&&t.push("Password must be no more than 128 characters long"),/[a-z]/.test(e)||t.push("Password must contain at least one lowercase letter"),/[A-Z]/.test(e)||t.push("Password must contain at least one uppercase letter"),/\d/.test(e)||t.push("Password must contain at least one number"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)||t.push("Password must contain at least one special character")):t.push("Password is required"),{isValid:0===t.length,errors:t}})(e.password);n.isValid||t.push(...n.errors);const a=((e,t)=>{const r=[];return t?e!==t&&r.push("Passwords do not match"):r.push("Please confirm your password"),{isValid:0===r.length,errors:r}})(e.password,e.confirmPassword);return a.isValid||t.push(...a.errors),e.displayName&&e.displayName.length>50&&t.push("Display name must be 50 characters or less"),e.acceptTerms||t.push("You must accept the terms of service"),{isValid:0===t.length,errors:t}})(p);if(r.isValid){C(!0),S([]);try{await a(p.email,p.password,p.displayName||void 0)&&e?.()}catch(vz){}finally{C(!1)}}else S(r.errors)},sx:{width:"100%"},children:[s.jsxs(u,{sx:{textAlign:"center",mb:3},children:[s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:n.palette.secondary.main,color:"white",margin:"0 auto 16px"},children:s.jsx(ga,{sx:{fontSize:28}})}),s.jsx(h,{variant:"h5",fontWeight:600,gutterBottom:!0,children:"Create Account"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"Join Power Hour at 5 and start creating amazing playlists"})]}),R&&s.jsx(x,{severity:"error",sx:{mb:2},children:w.length>0?s.jsx(u,{children:w.map(((e,t)=>s.jsx(h,{variant:"body2",children:e},t)))}):l?.message||"Account creation failed. Please try again."}),s.jsx(T,{fullWidth:!0,label:"Display Name (Optional)",value:p.displayName,onChange:E("displayName"),disabled:j||o,InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(xi,{color:"action"})})},sx:{mb:2},autoComplete:"name",placeholder:"How should we call you?"}),s.jsx(T,{fullWidth:!0,label:"Email Address",type:"email",value:p.email,onChange:E("email"),disabled:j||o,error:w.some((e=>e.toLowerCase().includes("email"))),InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(Ba,{color:"action"})})},sx:{mb:2},autoComplete:"email",required:!0}),s.jsx(T,{fullWidth:!0,label:"Password",type:g?"text":"password",value:p.password,onChange:E("password"),disabled:j||o,error:w.some((e=>e.toLowerCase().includes("password")&&!e.toLowerCase().includes("confirm"))),InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(si,{color:"action"})}),endAdornment:s.jsx(B,{position:"end",children:s.jsx(d,{onClick:()=>y(!g),disabled:j||o,edge:"end",children:g?s.jsx(Bi,{}):s.jsx(Ui,{})})})},sx:{mb:1},autoComplete:"new-password",required:!0}),k&&p.password&&s.jsxs(u,{sx:{mb:2},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:1},children:[s.jsx(h,{variant:"caption",color:"text.secondary",sx:{mr:1},children:"Password Strength:"}),s.jsx(q,{label:k.strength.replace("-"," ").toUpperCase(),size:"small",sx:{backgroundColor:M(k.strength),color:"white",fontWeight:600,fontSize:"0.7rem"}})]}),s.jsx(he,{variant:"determinate",value:k.score,sx:{height:4,borderRadius:2,backgroundColor:n.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:M(k.strength)}}}),k.suggestions.length>0&&s.jsx(u,{sx:{mt:1},children:k.suggestions.slice(0,2).map(((e,t)=>s.jsxs(h,{variant:"caption",color:"text.secondary",display:"block",children:[" ",e]},t)))})]}),s.jsx(T,{fullWidth:!0,label:"Confirm Password",type:b?"text":"password",value:p.confirmPassword,onChange:E("confirmPassword"),disabled:j||o,error:w.some((e=>e.toLowerCase().includes("confirm")||e.toLowerCase().includes("match"))),InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(si,{color:"action"})}),endAdornment:s.jsx(B,{position:"end",children:s.jsx(d,{onClick:()=>v(!b),disabled:j||o,edge:"end",children:b?s.jsx(Bi,{}):s.jsx(Ui,{})})})},sx:{mb:2},autoComplete:"new-password",required:!0}),s.jsx(X,{control:s.jsx($,{checked:p.acceptTerms,onChange:E("acceptTerms"),disabled:j||o,color:"primary"}),label:s.jsxs(h,{variant:"body2",color:"text.secondary",children:["I agree to the"," ",s.jsx(de,{href:"#",underline:"hover",children:"Terms of Service"})," ","and"," ",s.jsx(de,{href:"#",underline:"hover",children:"Privacy Policy"})]}),sx:{mb:3,alignItems:"flex-start"}}),s.jsx(A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:j||o||!p.email||!p.password||!p.confirmPassword||!p.acceptTerms||k&&k.score<30,sx:{mb:2,height:48,fontWeight:600},children:j||o?s.jsxs(I,{direction:"row",alignItems:"center",spacing:1,children:[s.jsx(H,{size:20,color:"inherit"}),s.jsx("span",{children:"Creating Account..."})]}):"Create Account"}),r&&s.jsx(u,{sx:{textAlign:"center"},children:s.jsxs(h,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",s.jsx(de,{component:"button",type:"button",variant:"body2",onClick:t,disabled:j||o,sx:{textDecoration:"none",fontWeight:600},children:"Sign In"})]})})]})},rP=({onBack:e,onSuccess:t,showBackButton:r=!0})=>{const n=m(),{sendPasswordResetEmail:a,lastError:o,clearError:l}=tc(),[d,p]=i.useState(""),[f,g]=i.useState([]),[y,b]=i.useState(!1),[v,w]=i.useState(!1),S=f.length>0||!!o;return v?s.jsxs(u,{sx:{width:"100%",textAlign:"center"},children:[s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:80,height:80,borderRadius:"50%",backgroundColor:n.palette.success.main,color:"white",margin:"0 auto 24px"},children:s.jsx(Oa,{sx:{fontSize:40}})}),s.jsx(h,{variant:"h5",fontWeight:600,gutterBottom:!0,children:"Check Your Email"}),s.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"We've sent a password reset link to:"}),s.jsx(c,{variant:"outlined",sx:{p:2,mb:3,backgroundColor:n.palette.grey[50],border:`1px solid ${n.palette.success.main}`},children:s.jsx(h,{variant:"body1",fontWeight:600,color:"success.main",children:d})}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Click the link in the email to reset your password. The link will expire in 1 hour."}),s.jsxs(I,{spacing:2,children:[s.jsx(A,{variant:"outlined",onClick:()=>{w(!1),p("")},sx:{height:48},children:"Send Another Email"}),r&&s.jsx(A,{variant:"text",startIcon:s.jsx(Ca,{}),onClick:e,sx:{height:48},children:"Back to Sign In"})]})]}):s.jsxs(u,{component:"form",onSubmit:async e=>{e.preventDefault();const r=(e=>Zk(e))(d);if(r.isValid){b(!0),g([]);try{await a(d),w(!0),setTimeout((()=>{t?.()}),3e3)}catch(vz){}finally{b(!1)}}else g(r.errors)},sx:{width:"100%"},children:[s.jsxs(u,{sx:{textAlign:"center",mb:3},children:[s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,borderRadius:"50%",backgroundColor:n.palette.warning.main,color:"white",margin:"0 auto 16px"},children:s.jsx(li,{sx:{fontSize:28}})}),s.jsx(h,{variant:"h5",fontWeight:600,gutterBottom:!0,children:"Reset Password"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"Enter your email address and we'll send you a link to reset your password"})]}),S&&s.jsx(x,{severity:"error",sx:{mb:2},children:f.length>0?s.jsx(u,{children:f.map(((e,t)=>s.jsx(h,{variant:"body2",children:e},t)))}):o?.message||"Failed to send reset email. Please try again."}),s.jsx(T,{fullWidth:!0,label:"Email Address",type:"email",value:d,onChange:e=>{p(e.target.value),f.length>0&&g([]),o&&l(),v&&w(!1)},disabled:y,error:f.some((e=>e.toLowerCase().includes("email"))),InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(Ba,{color:"action"})})},sx:{mb:3},autoComplete:"email",autoFocus:!0,placeholder:"Enter your email address"}),s.jsx(A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:y||!d,sx:{mb:2,height:48,fontWeight:600},children:y?s.jsxs(I,{direction:"row",alignItems:"center",spacing:1,children:[s.jsx(H,{size:20,color:"inherit"}),s.jsx("span",{children:"Sending Email..."})]}):"Send Reset Email"}),r&&s.jsx(u,{sx:{textAlign:"center"},children:s.jsxs(de,{component:"button",type:"button",variant:"body2",onClick:e,disabled:y,sx:{textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[s.jsx(Ca,{sx:{fontSize:16}}),"Back to Sign In"]})}),s.jsxs(u,{sx:{mt:3,p:2,backgroundColor:n.palette.grey[50],borderRadius:1},children:[s.jsx(h,{variant:"caption",color:"text.secondary",display:"block",gutterBottom:!0,children:s.jsx("strong",{children:"Having trouble?"})}),s.jsx(h,{variant:"caption",color:"text.secondary",display:"block",children:" Check your spam/junk folder"}),s.jsx(h,{variant:"caption",color:"text.secondary",display:"block",children:" Make sure you entered the correct email address"}),s.jsx(h,{variant:"caption",color:"text.secondary",display:"block",children:" The reset link expires in 1 hour"})]})]})},nP=({open:e,onClose:t,title:r="Welcome to Power Hour",subtitle:n="Sign in to access all features and sync your data across devices",requireAuth:a=!1,showAnonymousOption:o=!0,showEmailOption:l=!0,defaultMode:p="social",onSuccess:f})=>{const v=m(),{currentTheme:w}=qc(),{signInWithGoogle:S,signInAnonymously:j,isLoading:C,lastError:E,clearError:M,isAuthenticated:T}=tc(),[R,z]=i.useState(p),[D,L]=i.useState(null);i.useEffect((()=>{T&&e&&(f?.(),t())}),[T,e,t,f]),i.useEffect((()=>{e&&(M(),L(null),z(p))}),[e,M,p]);const O=()=>{a||C||D||(M(),t())},_=C||null!==D;return s.jsxs(g,{open:e,onClose:O,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:`linear-gradient(135deg, ${pe(w.primary,.05)} 0%, ${pe(w.secondary,.05)} 100%)`,backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:`1px solid ${pe(v.palette.divider,.1)}`}},TransitionComponent:ne,TransitionProps:{timeout:300},children:[s.jsxs(y,{sx:{pb:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:48,height:48,borderRadius:"12px",background:`linear-gradient(135deg, ${w.primary} 0%, ${w.secondary} 100%)`,color:"white"},children:s.jsx(Ei,{sx:{fontSize:24}})}),s.jsxs(u,{children:[s.jsx(h,{variant:"h5",fontWeight:600,children:r}),s.jsx(h,{variant:"body2",color:"text.secondary",children:n})]})]}),!a&&s.jsx(d,{onClick:O,disabled:_,sx:{color:"text.secondary","&:hover":{backgroundColor:pe(v.palette.error.main,.1)}},children:s.jsx(An,{})})]}),s.jsxs(b,{sx:{pt:2,pb:3},children:[l&&s.jsx(u,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:s.jsxs(fe,{value:R,onChange:(e,t)=>z(t),variant:"fullWidth",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:500}},children:[s.jsx(me,{label:"Quick Sign In",value:"social",icon:s.jsx(ti,{}),iconPosition:"start"}),s.jsx(me,{label:"Email",value:"email",icon:s.jsx(Ba,{}),iconPosition:"start"}),s.jsx(me,{label:"Sign Up",value:"signup",icon:s.jsx(ga,{}),iconPosition:"start"})]})}),"social"===R&&s.jsxs(I,{spacing:3,children:[E&&s.jsx(x,{severity:"error",onClose:M,sx:{borderRadius:2},children:E.message}),s.jsxs(I,{spacing:2,children:[s.jsx(c,{elevation:0,sx:{p:0,borderRadius:2,border:`2px solid ${pe(v.palette.divider,.1)}`,overflow:"hidden",transition:"all 0.2s ease-in-out","&:hover":{borderColor:pe(w.primary,.3),transform:"translateY(-2px)",boxShadow:`0 8px 24px ${pe(w.primary,.15)}`}},children:s.jsx(A,{fullWidth:!0,size:"large",onClick:async()=>{try{L("google"),M(),await S()}catch(vz){}finally{L(null)}},disabled:_,startIcon:"google"===D?s.jsx(H,{size:20}):s.jsx(ti,{sx:{color:"#4285f4"}}),sx:{py:2,px:3,textTransform:"none",fontSize:"1.1rem",fontWeight:500,color:"text.primary",backgroundColor:"transparent","&:hover":{backgroundColor:pe(w.primary,.05)},"&:disabled":{backgroundColor:"transparent"}},children:"Continue with Google"})}),o&&s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(k,{sx:{flex:1}}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"or"}),s.jsx(k,{sx:{flex:1}})]}),o&&s.jsx(c,{elevation:0,sx:{p:0,borderRadius:2,border:`2px solid ${pe(v.palette.divider,.1)}`,overflow:"hidden",transition:"all 0.2s ease-in-out","&:hover":{borderColor:pe(v.palette.secondary.main,.3),transform:"translateY(-2px)",boxShadow:`0 8px 24px ${pe(v.palette.secondary.main,.15)}`}},children:s.jsx(A,{fullWidth:!0,size:"large",onClick:async()=>{try{L("anonymous"),M(),await j()}catch(vz){}finally{L(null)}},disabled:_,startIcon:"anonymous"===D?s.jsx(H,{size:20}):s.jsx(xi,{}),sx:{py:2,px:3,textTransform:"none",fontSize:"1.1rem",fontWeight:500,color:"text.primary",backgroundColor:"transparent","&:hover":{backgroundColor:pe(v.palette.secondary.main,.05)},"&:disabled":{backgroundColor:"transparent"}},children:"Continue as Guest"})})]}),s.jsxs(u,{sx:{p:2,borderRadius:2,backgroundColor:pe(w.primary,.05),border:`1px solid ${pe(w.primary,.1)}`},children:[s.jsx(h,{variant:"subtitle2",fontWeight:600,gutterBottom:!0,sx:{color:w.primary},children:" Unlock Premium Features"}),s.jsxs(I,{spacing:1,children:[s.jsx(h,{variant:"body2",color:"text.secondary",children:" Sync your playlists across all devices"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:" Share playlists with the community"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:" Save your preferences and custom themes"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:" Get personalized music recommendations"})]})]}),s.jsxs(u,{sx:{display:"flex",alignItems:"flex-start",gap:1,p:2,borderRadius:2,backgroundColor:pe(v.palette.info.main,.05),border:`1px solid ${pe(v.palette.info.main,.1)}`},children:[s.jsx(Ei,{sx:{fontSize:16,color:"info.main",mt:.2}}),s.jsxs(u,{children:[s.jsx(h,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:" Your privacy is protected"}),s.jsx(h,{variant:"caption",color:"text.secondary",children:"Data is saved locally and synced securely when you sign in. You can use the app without an account."})]})]})]}),"email"===R&&s.jsx(eP,{onSuccess:()=>{f?.(),t()},onSwitchToSignUp:()=>z("signup"),onForgotPassword:()=>z("reset"),showSignUpLink:!0,showForgotPassword:!0}),"signup"===R&&s.jsx(tP,{onSuccess:()=>{f?.(),t()},onSwitchToSignIn:()=>z("email"),showSignInLink:!0}),"reset"===R&&s.jsx(rP,{onBack:()=>z("email"),onSuccess:()=>z("email"),showBackButton:!0}),"social"===R&&l&&s.jsx(u,{sx:{textAlign:"center",mt:2},children:s.jsx(A,{variant:"text",startIcon:s.jsx(Ba,{}),onClick:()=>z("email"),disabled:_,sx:{textTransform:"none",color:w.primary,"&:hover":{backgroundColor:pe(w.primary,.05)}},children:"Sign in with Email Instead"})})]}),!a&&s.jsx(P,{sx:{px:3,pb:3},children:s.jsx(A,{onClick:O,disabled:_,sx:{textTransform:"none"},children:"Maybe Later"})})]})},aP=({open:e,onClose:t,onComplete:r})=>{const n=m(),{currentTheme:a}=qc(),{isAuthenticated:o}=nc(),[l,c]=i.useState(0),[d,p]=i.useState(!1),[f,y]=i.useState(!1);i.useEffect((()=>{const e=localStorage.getItem("hasSeenOnboarding");y(!!e)}),[]),i.useEffect((()=>{o&&1===l&&c(2)}),[o,l]);const x=()=>{c((e=>e+1))},v=()=>{c((e=>e-1))},w=[{label:"Welcome to Power Hour at 5",content:s.jsxs(u,{sx:{textAlign:"center",py:3},children:[s.jsx(u,{sx:{display:"flex",justifyContent:"center",mb:3},children:s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:80,height:80,borderRadius:"20px",background:`linear-gradient(135deg, ${a.primary} 0%, ${a.secondary} 100%)`,color:"white",mb:2},children:s.jsx(Ha,{sx:{fontSize:40}})})}),s.jsx(h,{variant:"h4",fontWeight:700,gutterBottom:!0,sx:{color:a.primary},children:"Welcome to Power Hour at 5! "}),s.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:400,mx:"auto"},children:"The ultimate music mixing and playlist management app. Create amazing Power Hour experiences with your favorite songs and YouTube videos."}),s.jsxs(I,{direction:"row",spacing:2,justifyContent:"center",flexWrap:"wrap",children:[s.jsx(q,{icon:s.jsx(pi,{}),label:"Mix Creation",color:"primary",variant:"outlined"}),s.jsx(q,{icon:s.jsx(pa,{}),label:"Playlist Sharing",color:"secondary",variant:"outlined"}),s.jsx(q,{icon:s.jsx(_a,{}),label:"Cloud Sync",color:"success",variant:"outlined"})]})]})},{label:"Sign In (Optional)",content:s.jsxs(u,{sx:{py:3},children:[s.jsx(h,{variant:"h5",fontWeight:600,gutterBottom:!0,textAlign:"center",children:"Unlock All Features"}),s.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3,textAlign:"center"},children:"Sign in to access community features, sync your data across devices, and get the most out of Power Hour."}),s.jsx(N,{sx:{mb:3,background:`linear-gradient(135deg, ${pe(a.primary,.05)} 0%, ${pe(a.secondary,.05)} 100%)`,border:`1px solid ${pe(a.primary,.1)}`},children:s.jsxs(W,{children:[s.jsx(h,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"With an account, you can:"}),s.jsxs(I,{spacing:1,children:[s.jsxs(h,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(Oa,{sx:{fontSize:16,color:"success.main"}}),"Share playlists with the community"]}),s.jsxs(h,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(Oa,{sx:{fontSize:16,color:"success.main"}}),"Sync your data across multiple devices"]}),s.jsxs(h,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(Oa,{sx:{fontSize:16,color:"success.main"}}),"Access your playlists from anywhere"]}),s.jsxs(h,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(Oa,{sx:{fontSize:16,color:"success.main"}}),"Get personalized recommendations"]})]})]})}),s.jsxs(I,{spacing:2,children:[s.jsx(A,{variant:"contained",size:"large",onClick:()=>{p(!0)},sx:{background:`linear-gradient(135deg, ${a.primary} 0%, ${a.secondary} 100%)`,"&:hover":{transform:"translateY(-2px)",boxShadow:`0 8px 24px ${pe(a.primary,.4)}`}},children:"Sign In Now"}),s.jsx(A,{variant:"text",onClick:()=>{x()},sx:{textTransform:"none"},children:"Continue as Guest"})]})]})},{label:"You're All Set!",content:s.jsxs(u,{sx:{textAlign:"center",py:3},children:[s.jsx(u,{sx:{display:"flex",justifyContent:"center",mb:3},children:s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:80,height:80,borderRadius:"20px",background:`linear-gradient(135deg, ${n.palette.success.main} 0%, ${n.palette.success.light} 100%)`,color:"white",mb:2},children:s.jsx(Oa,{sx:{fontSize:40}})})}),s.jsx(h,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"Ready to Rock!"}),s.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:400,mx:"auto"},children:o?"You're signed in and ready to explore all features. Start creating amazing Power Hour experiences!":"You can start using Power Hour right away. Sign in anytime to unlock additional features."}),s.jsx(N,{sx:{mb:3,background:`linear-gradient(135deg, ${pe(n.palette.info.main,.05)} 0%, ${pe(n.palette.info.light,.05)} 100%)`,border:`1px solid ${pe(n.palette.info.main,.1)}`},children:s.jsxs(W,{children:[s.jsx(h,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"Quick Start Tips:"}),s.jsxs(I,{spacing:1,children:[s.jsx(h,{variant:"body2",children:' Start with the "Create Mix" tab to build your first Power Hour'}),s.jsx(h,{variant:"body2",children:' Use the "YouTube" tab to find and add videos to your playlists'}),s.jsx(h,{variant:"body2",children:' Check out the "Community" tab for shared playlists'}),s.jsx(h,{variant:"body2",children:' Use the "Visualizer" for an immersive music experience'})]})]})}),s.jsx(A,{variant:"contained",size:"large",endIcon:s.jsx(ka,{}),onClick:()=>{localStorage.setItem("hasSeenOnboarding","true"),r(),t()},sx:{background:`linear-gradient(135deg, ${a.primary} 0%, ${a.secondary} 100%)`,"&:hover":{transform:"translateY(-2px)",boxShadow:`0 8px 24px ${pe(a.primary,.4)}`}},children:"Start Using Power Hour"})]})}];return s.jsxs(s.Fragment,{children:[s.jsx(g,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:`linear-gradient(135deg, ${pe(a.primary,.05)} 0%, ${pe(a.secondary,.05)} 100%)`,backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:`1px solid ${pe(n.palette.divider,.1)}`,minHeight:600}},TransitionComponent:ne,TransitionProps:{timeout:300},children:s.jsx(b,{sx:{p:4},children:s.jsx(ge,{activeStep:l,orientation:"vertical",children:w.map(((e,t)=>s.jsxs(ye,{children:[s.jsx(be,{children:s.jsx(h,{variant:"h6",fontWeight:600,children:e.label})}),s.jsxs(xe,{children:[e.content,t<w.length-1&&s.jsxs(u,{sx:{mt:3,display:"flex",gap:1},children:[t>0&&s.jsx(A,{onClick:v,variant:"outlined",sx:{textTransform:"none"},children:"Back"}),0===t&&s.jsx(A,{onClick:x,variant:"contained",sx:{textTransform:"none"},children:"Get Started"})]})]})]},e.label)))})})}),s.jsx(nP,{open:d,onClose:()=>p(!1),onSuccess:()=>{p(!1),x()},title:"Sign In to Power Hour",subtitle:"Join the community and sync your data across devices"})]})},iP="power_hour_libraries",oP="power_hour_library_settings",sP="power_hour_current_library",lP={autoRefreshEnabled:!0,cacheExpiryDays:7,maxCacheSize:100,showTagsColumn:!0,showExtractColumn:!0,showWildCardColumn:!1},cP=class e{constructor(){r(this,"libraries",new Map),r(this,"settings",lP),this.loadFromStorage()}static getInstance(){return e.instance||(e.instance=new e),e.instance}loadFromStorage(){try{const e=localStorage.getItem(iP);if(e){const t=JSON.parse(e);this.libraries=new Map(Object.entries(t)),this.migrateLibraryIds()}const t=localStorage.getItem(oP);t&&(this.settings={...lP,...JSON.parse(t)}),this.cleanupExpiredCaches()}catch(vz){this.libraries.clear(),this.settings=lP}}saveToStorage(){try{const e=Object.fromEntries(this.libraries);localStorage.setItem(iP,JSON.stringify(e)),localStorage.setItem(oP,JSON.stringify(this.settings))}catch(vz){this.cleanupOldestCaches();try{const e=Object.fromEntries(this.libraries);localStorage.setItem(iP,JSON.stringify(e))}catch(e){}}}generateLibraryId(e){const t=e.replace(/\\/g,"/").toLowerCase(),r=btoa(t).replace(/[^a-zA-Z0-9]/g,"");let n=0;for(let i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;const a=Math.abs(n).toString(36);return`${r.substring(0,12)}_${a}`.substring(0,20)}migrateLibraryIds(){const e=[];for(const[t,r]of this.libraries)t.length<=16&&!t.includes("_")&&this.generateLibraryId(r.path)!==t&&e.push([t,r]);if(e.length>0){for(const[t,r]of e){const e=this.generateLibraryId(r.path);r.id=e,this.libraries.set(e,r),this.libraries.delete(t),localStorage.getItem(sP)===t&&localStorage.setItem(sP,e)}this.saveToStorage()}}async needsRefresh(e){const t=this.generateLibraryId(e),r=this.libraries.get(t);return!r||(Date.now()-r.lastScanned>24*this.settings.cacheExpiryDays*60*60*1e3||(this.settings.autoRefreshEnabled,!1))}saveLibrary(e,t,r,n=!1){const a=this.generateLibraryId(e),i=Date.now(),o=t.reduce(((e,t)=>e+(t.fileSize||0)),0),s={id:a,name:r||this.extractLibraryName(e),path:e,songs:t,lastScanned:i,songCount:t.length,totalSize:o,version:1};this.libraries.set(a,s),this.saveToStorage(),n&&localStorage.setItem(sP,a)}loadLibrary(e,t=!1){const r=this.generateLibraryId(e),n=this.libraries.get(r);return n?(t&&localStorage.setItem(sP,r),n.songs):null}getAllLibraries(){return Array.from(this.libraries.values()).sort(((e,t)=>t.lastScanned-e.lastScanned))}getCurrentLibrary(){const e=localStorage.getItem(sP);return e&&this.libraries.get(e)||null}setCurrentLibrary(e){const t=this.generateLibraryId(e);this.libraries.get(t)&&localStorage.setItem(sP,t)}removeLibrary(e){const t=this.generateLibraryId(e);this.libraries.delete(t),this.saveToStorage(),localStorage.getItem(sP)===t&&localStorage.removeItem(sP)}updateLibraryMetadata(e,t){const r=this.generateLibraryId(e),n=this.libraries.get(r);n&&(Object.assign(n,t),this.saveToStorage())}addSongToLibrary(e,t){const r=this.generateLibraryId(e),n=this.libraries.get(r);if(!n)return null;const a=n.songs.findIndex((e=>e.path===t.path));return a>=0?n.songs[a]=t:n.songs.push(t),n.songCount=n.songs.length,n.totalSize=n.songs.reduce(((e,t)=>e+(t.fileSize||0)),0),n.lastScanned=Date.now(),this.saveToStorage(),n.songs}updateSongMetadata(e,t,r){const n=this.generateLibraryId(e),a=this.libraries.get(n);if(!a)return!1;const i=a.songs.findIndex((e=>e.path===t));if(-1===i)return!1;const o=a.songs[i];return a.songs[i]={...o,...r},a.lastScanned=Date.now(),this.saveToStorage(),!0}getSettings(){return{...this.settings}}updateSettings(e){this.settings={...this.settings,...e},this.saveToStorage()}cleanupExpiredCaches(){const e=Date.now(),t=24*this.settings.cacheExpiryDays*60*60*1e3;for(const[r,n]of this.libraries)e-n.lastScanned>t&&this.libraries.delete(r)}cleanupOldestCaches(){const e=Array.from(this.libraries.entries()).sort((([,e],[,t])=>e.lastScanned-t.lastScanned)),t=Math.ceil(.25*e.length);for(let r=0;r<t;r++){const[t,n]=e[r];this.libraries.delete(t)}}extractLibraryName(e){const t=e.replace(/\\/g,"/").split("/");return t[t.length-1]||"Music Library"}getCacheStats(){const e=Array.from(this.libraries.values());return{totalLibraries:e.length,totalSongs:e.reduce(((e,t)=>e+t.songCount),0),totalSize:e.reduce(((e,t)=>e+t.totalSize),0),oldestCache:Math.min(...e.map((e=>e.lastScanned))),newestCache:Math.max(...e.map((e=>e.lastScanned)))}}clearAllCaches(){this.libraries.clear(),localStorage.removeItem(iP),localStorage.removeItem(sP)}};r(cP,"instance");let uP=cP;const dP=({open:e,onClose:t,mode:r,onToggleMode:n})=>{const{currentTheme:a,setTheme:o,availableThemes:l,deleteCustomTheme:c}=qc(),{user:p,profile:f,updateProfile:m,signOut:x,isLoading:w}=tc(),{isAuthenticated:E,isAnonymous:I,hasFullAccount:M}=nc(),[R,z]=i.useState(!1),[D,O]=i.useState(null),[_,$]=i.useState(!1),[N,W]=i.useState(null),[U,B]=i.useState({}),[V,Y]=i.useState(!1),[J,K]=i.useState(!1),[X,Z]=i.useState(""),[ee,te]=i.useState(!1),re=uP.getInstance();i.useEffect((()=>{if(e){const e=re.getSettings();B(e)}}),[e,re]);const ne=(e,t)=>{const r={...U,[e]:t};B(r),re.updateSettings(r),window.dispatchEvent(new CustomEvent("librarySettingsChanged",{detail:r}))},ie=()=>{O(null)},se=e=>{"create-new"===e?(W(null),$(!0),ie()):(o(e),ie())},le=e=>e.primary||"#9c27b0";return s.jsxs(s.Fragment,{children:[s.jsxs(g,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,sx:{zIndex:1200,"& .MuiDialog-container":{paddingTop:"100px",paddingBottom:"20px"}},PaperProps:{sx:{borderRadius:2,minHeight:"400px",marginTop:0}},children:[s.jsx(y,{children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(ha,{}),s.jsx(h,{variant:"h6",children:"Settings"})]}),s.jsx(A,{onClick:t,variant:"contained",sx:{minWidth:"auto",width:"40px",height:"40px",padding:0,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(An,{})})]})}),s.jsx(b,{sx:{px:0},children:s.jsxs(v,{children:[s.jsx(S,{children:s.jsx(h,{variant:"subtitle1",color:"primary",sx:{fontWeight:"bold"},children:"Account"})}),E?s.jsxs(s.Fragment,{children:[s.jsxs(S,{children:[s.jsx(F,{children:s.jsx(va,{})}),s.jsx(j,{primary:p?.displayName||p?.email||"Anonymous User",secondary:I?"Anonymous Account - Consider linking to an email":M?"Full Account with Cloud Sync":"Basic Account"})]}),!I&&s.jsxs(S,{children:[s.jsx(F,{children:s.jsx(xi,{})}),J?s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,flex:1},children:[s.jsx(T,{value:X,onChange:e=>Z(e.target.value),placeholder:"Enter display name",size:"small",sx:{flex:1},disabled:ee}),s.jsx(G,{title:"Save",children:s.jsx(d,{onClick:async()=>{if(f)try{te(!0),await m({...f,displayName:X.trim()}),K(!1)}catch(vz){}finally{te(!1)}},disabled:ee,size:"small",color:"primary",children:ee?s.jsx(H,{size:20}):s.jsx(Pi,{})})}),s.jsx(G,{title:"Cancel",children:s.jsx(d,{onClick:()=>{Z(f?.displayName||p?.displayName||""),K(!1)},disabled:ee,size:"small",children:s.jsx(Ta,{})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(j,{primary:"Display Name",secondary:f?.displayName||p?.displayName||"Not set"}),s.jsx(C,{children:s.jsx(G,{title:"Edit Display Name",children:s.jsx(d,{onClick:()=>{Z(f?.displayName||p?.displayName||""),K(!0)},size:"small",color:"primary",children:s.jsx(Jn,{})})})})]})]}),s.jsxs(oe,{onClick:async()=>{try{await x()}catch(vz){}},disabled:w,children:[s.jsx(F,{children:s.jsx(ui,{})}),s.jsx(j,{primary:"Sign Out",secondary:"Sign out of your account"})]})]}):s.jsxs(oe,{onClick:()=>{Y(!0)},disabled:w,children:[s.jsx(F,{children:s.jsx(ci,{})}),s.jsx(j,{primary:"Sign In",secondary:"Sign in to sync your data across devices"})]}),s.jsx(k,{sx:{my:1}}),s.jsx(S,{children:s.jsx(h,{variant:"subtitle1",color:"primary",sx:{fontWeight:"bold"},children:"Appearance"})}),s.jsxs(oe,{onClick:e=>{O(e.currentTarget)},children:[s.jsx(F,{children:s.jsx(bi,{})}),s.jsx(j,{primary:"Change Theme",secondary:`Current: ${a.name}`})]}),s.jsxs(S,{children:[s.jsx(F,{children:"dark"===r?s.jsx(Ia,{}):s.jsx(Ea,{})}),s.jsx(j,{primary:"Dark Mode",secondary:"Toggle between light and dark mode"}),s.jsx(C,{children:s.jsx(Q,{edge:"end",onChange:n,checked:"dark"===r})})]}),s.jsxs(S,{children:[s.jsx(F,{children:s.jsx($i,{})}),s.jsx(j,{primary:"Show Tags Column",secondary:"Display tags column in Music Library"}),s.jsx(C,{children:s.jsx(Q,{edge:"end",onChange:e=>ne("showTagsColumn",e.target.checked),checked:!1!==U.showTagsColumn})})]}),s.jsxs(S,{children:[s.jsx(F,{children:s.jsx($i,{})}),s.jsx(j,{primary:"Show Extract Column",secondary:"Display extract clip button for each song in Music Library"}),s.jsx(C,{children:s.jsx(Q,{edge:"end",onChange:e=>ne("showExtractColumn",e.target.checked),checked:!1!==U.showExtractColumn})})]}),s.jsxs(S,{children:[s.jsx(F,{children:s.jsx($i,{})}),s.jsx(j,{primary:"Show Wild Card Column",secondary:"Display wild card button for each song in Music Library"}),s.jsx(C,{children:s.jsx(Q,{edge:"end",onChange:e=>ne("showWildCardColumn",e.target.checked),checked:!0===U.showWildCardColumn})})]}),s.jsx(k,{sx:{my:1}}),s.jsx(S,{children:s.jsx(h,{variant:"subtitle1",color:"primary",sx:{fontWeight:"bold"},children:"Controls & Shortcuts"})}),s.jsxs(oe,{onClick:()=>{z(!0)},children:[s.jsx(F,{children:s.jsx(ii,{})}),s.jsx(j,{primary:"Keyboard Shortcuts",secondary:"View all available keyboard shortcuts"})]}),s.jsx(k,{sx:{my:1}}),s.jsx(S,{children:s.jsx(h,{variant:"subtitle1",color:"primary",sx:{fontWeight:"bold"},children:"Developer Tools"})}),s.jsxs(oe,{onClick:()=>{window.electronAPI&&window.electronAPI.openDevTools()},children:[s.jsx(F,{children:s.jsx(Wa,{})}),s.jsx(j,{primary:"Developer Console",secondary:"Open browser developer tools (F12)"})]})]})}),s.jsx(P,{sx:{px:3,pb:2},children:s.jsx(A,{onClick:t,variant:"contained",children:"Close"})})]}),s.jsx(ud,{open:R,onClose:()=>z(!1)}),s.jsxs(ae,{anchorEl:D,open:Boolean(D),onClose:ie,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{mt:1,minWidth:200,maxWidth:250}},children:[s.jsx(u,{sx:{px:2,py:1,borderBottom:1,borderColor:"divider"},children:s.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Choose Theme"})}),l.map((e=>s.jsxs(L,{onClick:()=>se(e.id),sx:{display:"flex",alignItems:"center",gap:1.5,py:1.5,px:2},children:[s.jsx(u,{sx:{width:24,height:24,borderRadius:"50%",backgroundColor:le(e),border:2,borderColor:"divider",flexShrink:0}}),s.jsx(h,{variant:"body2",sx:{flex:1},children:e.name}),e.isCustom&&s.jsxs(u,{sx:{display:"flex",gap:.5},children:[s.jsx(d,{size:"small",onClick:t=>((e,t)=>{t.stopPropagation(),W(e),$(!0),ie()})(e,t),sx:{p:.5},children:s.jsx(Jn,{sx:{fontSize:16}})}),s.jsx(d,{size:"small",onClick:t=>((e,t)=>{t.stopPropagation(),c(e.id)})(e,t),sx:{p:.5},children:s.jsx(dn,{sx:{fontSize:16}})})]}),a.id===e.id&&s.jsx(za,{sx:{fontSize:18,color:"primary.main"}})]},e.id))),s.jsx(k,{}),s.jsxs(L,{onClick:()=>se("create-new"),sx:{display:"flex",alignItems:"center",gap:1.5,py:1.5,px:2},children:[s.jsx(wa,{sx:{fontSize:18,color:"primary.main"}}),s.jsx(h,{variant:"body2",sx:{flex:1},children:"Create Custom Theme"})]}),s.jsx(u,{sx:{px:2,py:1,borderTop:1,borderColor:"divider"},children:s.jsx(q,{label:`Current: ${a.name}`,size:"small",sx:{backgroundColor:a.primary,color:"white",fontSize:"0.75rem"}})})]}),s.jsx(Xk,{open:_,onClose:()=>{$(!1),W(null)},editingTheme:N}),s.jsx(nP,{open:V,onClose:()=>Y(!1),onSuccess:()=>{Y(!1)},title:"Sign In to Power Hour",subtitle:"Sign in to sync your playlists and settings across devices"})]})},hP=({editingPlaylist:e,onPlaylistUpdated:t,specificClipToEdit:r,onSpecificClipEditComplete:n,onEditingPlaylistChanged:a})=>{const o=m(),{currentTheme:l}=qc(),{updateCollaborativePlaylistMetadata:c}=lu(),[f,w]=i.useState(""),[k,E]=i.useState([]),[I,M]=i.useState(!1),[O,_]=i.useState(null),[F,B]=i.useState(1),[V,G]=i.useState(10),[J,Q]=i.useState("relevance"),[Z,ee]=i.useState("any"),[te,ne]=i.useState(!1),[ae,ie]=i.useState("videos"),[oe,se]=i.useState([]),[le,ce]=i.useState(null),[ue,de]=i.useState("music"),[fe,me]=i.useState(null),[ge,ye]=i.useState([]),[be,xe]=i.useState(null),[Ce,ke]=i.useState(null),[Pe,Ae]=i.useState(0),[Ee,Ie]=i.useState("medium"),[Me,Te]=i.useState(!1),[Re,ze]=i.useState(null),[De,Le]=i.useState(!1),[Oe,Ne]=i.useState(0),[We,Ue]=i.useState(60),[Be,He]=i.useState(!1),[Ve,Ye]=i.useState("60"),[Ge,qe]=i.useState(!1),[Je,Ke]=i.useState(null),[Xe,Qe]=i.useState([]),[Ze,et]=i.useState(""),[tt,rt]=i.useState(!1),[nt,at]=i.useState(!1),[it,ot]=i.useState(null),[st,lt]=i.useState(!1),[ct,ut]=i.useState(!1),[dt,ht]=i.useState(""),[pt,ft]=i.useState(null),[mt,gt]=i.useState(!1),yt=i.useRef(null),bt=i.useRef(null),[xt,vt]=i.useState([]),[wt,St]=i.useState(!1),[jt,Ct]=i.useState("random"),[kt,Pt]=i.useState(0),[At,Et]=i.useState(60),[It,Mt]=i.useState({}),[Tt,Rt]=i.useState(!1),[zt,Dt]=i.useState(!1),[Lt,Ot]=i.useState([]),[_t,Ft]=i.useState(0),[$t,Nt]=i.useState([]),[Wt,Ut]=i.useState(!0),[Bt,Ht]=i.useState("search"),[Vt,Yt]=i.useState(""),[Gt,qt]=i.useState(""),[Jt,Kt]=i.useState(!1),[Xt,Qt]=i.useState({isImporting:!1,videosFound:0,currentStatus:""});i.useEffect((()=>{e?(at(!0),ot(e.id),Qe([...e.clips]),et(e.name)):(at(!1),ot(null),Qe([]),et(""))}),[e]),i.useEffect((()=>{if(r&&r.clip){const e=r.clip,t=setTimeout((()=>{const t={id:e.videoId,title:e.title,channelTitle:e.artist,thumbnail:e.thumbnail,duration:"PT300S",publishedAt:"",viewCount:"",description:""};ze(t),Ne(e.startTime),Ue(e.duration);const r=![30,45,60,90,120].includes(e.duration);He(r),Ye(e.duration.toString()),ft(e.videoId),setTimeout((()=>{Le(!0)}),100),n&&n()}),500);return()=>clearTimeout(t)}}),[r,n]),i.useEffect((()=>{}),[fe,ge,k,I,nt,e,it,Xe,Ze,r,De]),i.useEffect((()=>()=>{bt.current&&clearTimeout(bt.current)}),[]);const[Zt,er]=i.useState(null),tr=e=>/^https?:\/\/(www\.)?(youtube\.com|youtu\.be)/.test(e),rr=i.useCallback((async(e,t=!0)=>{if(f.trim()){M(!0),me(null),er(null);try{if("channels"===ae){const t={maxResults:V,pageToken:e,sortOrder:ue},r=await Ac(f,0,t);se(r.channels),ce(r.pagination),E([]),_(null)}else{const t={maxResults:V,pageToken:e,order:J,videoDuration:Z,useYtDlp:Wt},r=await zc(f,null,t);_(r),E(r.videos),se([]),ce(null)}t&&B(1)}catch(vz){er(vz.message||"Search failed. Please try again."),"channels"===ae?(se([]),ce(null)):(E([]),_(null))}finally{M(!1)}}}),[f,V,J,Z,ae,ue,Wt]),nr=i.useCallback((async e=>{me(e),M(!0);try{const t={maxResults:V,order:"date"},r=await Tc(e.id,null,t);xe(r),ye(r.videos),B(1),se([])}catch(vz){}finally{M(!1)}}),[V]),ar=()=>{if("channels"===ae&&le?.nextPageToken)rr(le.nextPageToken,!1),B((e=>e+1));else{const e=fe?be:O;e?.nextPageToken&&(fe?or(fe,e.nextPageToken,!1):rr(e.nextPageToken,!1),B((e=>e+1)))}},ir=()=>{if("channels"===ae&&le?.prevPageToken)rr(le.prevPageToken,!1),B((e=>e-1));else{const e=fe?be:O;e?.prevPageToken&&(fe?or(fe,e.prevPageToken,!1):rr(e.prevPageToken,!1),B((e=>e-1)))}},or=i.useCallback((async(e,t,r)=>{M(!0);try{const n={maxResults:V,pageToken:t,order:"date"},a=await Tc(e.id,null,n);xe(a),ye(a.videos),r&&B(1)}catch(vz){}finally{M(!1)}}),[V]),sr=()=>{B(1),me(null),ye([]),xe(null),rr(void 0,!0)},lr=async()=>{if(Vt.trim()){Kt(!0),er(null);try{if(!tr(Vt))throw new Error("Please enter a valid YouTube URL");const t=(e=>{const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const r of t){const t=e.match(r);if(t)return t[1]}return null})(Vt);if(!t)throw new Error("Could not extract video ID from URL");let r;try{const e=await zc(`https://www.youtube.com/watch?v=${t}`,null,{maxResults:1,useYtDlp:!0});if(!(e.videos.length>0))throw new Error("No video details found");r=e.videos[0]}catch(e){r={id:t,title:`YouTube Video (${t})`,channelTitle:"Unknown Channel",thumbnail:`https://img.youtube.com/vi/${t}/maxresdefault.jpg`,duration:"PT0S",publishedAt:"",viewCount:"",description:"Video added via direct URL"}}E([r]),_({videos:[r],totalResults:1,nextPageToken:null,prevPageToken:null}),Yt("")}catch(vz){er(vz.message||"Failed to process video URL")}finally{Kt(!1)}}},cr=async()=>{if(Gt.trim()){Kt(!0),er(null),Qt({isImporting:!0,videosFound:0,currentStatus:"Validating playlist URL..."});try{if(!tr(Gt))throw new Error("Please enter a valid YouTube playlist URL");const e=(e=>{const t=e.match(/[?&]list=([^&\n?#]+)/);return t?t[1]:null})(Gt);if(!e)throw new Error('Could not extract playlist ID from URL. Make sure the URL contains "list=" parameter');Qt((e=>({...e,currentStatus:"Extracting playlist videos..."})));const t=await Lc(e,0,{maxResults:Math.min(3*V,100)});if(0===t.videos.length)throw new Error("No videos found in playlist. The playlist may be empty or private.");Qt((e=>({...e,videosFound:t.videos.length,currentStatus:`Processing ${t.videos.length} videos...`}))),E(t.videos),_(t),se([]),ce(null),me(null),ye([]),xe(null),qt(""),Qt((e=>({...e,currentStatus:` Successfully imported ${t.videos.length} videos!`}))),setTimeout((()=>{Qt({isImporting:!1,videosFound:0,currentStatus:""})}),3e3)}catch(vz){er(vz.message||"Failed to process playlist URL"),Qt({isImporting:!1,videosFound:0,currentStatus:""})}finally{Kt(!1)}}},ur=()=>{ke(null),Ae(0)},dr=()=>{switch(Ee){case"small":return{height:340,thumbnailHeight:120,titleHeight:32,titleLines:2,fontSize:"0.75rem",buttonFontSize:"0.65rem",padding:12,metadataHeight:40,channelHeight:20,buttonAreaHeight:32};case"large":return{height:500,thumbnailHeight:200,titleHeight:48,titleLines:3,fontSize:"0.9rem",buttonFontSize:"0.8rem",padding:16,metadataHeight:50,channelHeight:24,buttonAreaHeight:40};default:return{height:420,thumbnailHeight:140,titleHeight:40,titleLines:2,fontSize:"0.8rem",buttonFontSize:"0.7rem",padding:14,metadataHeight:45,channelHeight:22,buttonAreaHeight:36}}},hr=e=>{if(yt.current=e.target,Re&&yt.current)try{const e=yt.current.getDuration();if(e&&e>0){const t={...Re,duration:`PT${Math.floor(e)}S`};ze(t)}}catch(vz){}},pr=e=>{gt(1===e.data),2===e.data?qe(!1):0===e.data&&(qe(!1),Ke(null))},fr=()=>{bt.current&&(clearTimeout(bt.current),bt.current=null),zt?kr():(Le(!1),ze(null),ft(null),gt(!1),qe(!1),Ke(null))},mr=()=>{Re&&(Qe((e=>e.map((e=>e.videoId===Re.id?{...e,startTime:Oe,duration:We}:e)))),Le(!1),ze(null))},gr=(r=!1)=>{if(!Ze.trim()||0===Xe.length)return;const n={id:nt&&!r&&it?it:gc(),name:Ze.trim(),clips:Xe,date:nt&&!r&&e?e.date:(new Date).toISOString(),...nt&&!r&&e&&{drinkingSoundPath:e.drinkingSoundPath,imagePath:e.imagePath,isPublic:e.isPublic,shareCode:e.shareCode,creator:e.creator,description:e.description,rating:e.rating,downloadCount:e.downloadCount,tags:e.tags,createdAt:e.createdAt,updatedAt:(new Date).toISOString(),version:e.version}};pc(n),t&&t(n),nt&&!r||(Qe([]),et(""),at(!1),ot(null)),rt(!1)},yr=()=>{rt(!1)},br=e=>{const t=uc(e.duration);if(t<=0&&yt.current)try{const e=yt.current.getDuration();return e>0?e:300}catch(vz){return 300}return t>0?t:300},xr=Re?Math.max(0,br(Re)-We):0,vr=()=>{St(!1)},wr=()=>{0!==xt.length&&(Ot([...xt]),Ft(0),Nt([]),Dt(!0),St(!1),Sr(xt[0]))},Sr=e=>{ze(e),Ne(0),Ue(60),He(!1),Ye("60"),ft(e.id),Le(!0)},jr=()=>{if(!Re)return;const e=hc(Re,Oe,We),t=_t+1;t<Lt.length?(Nt((t=>[...t,e])),Ft(t),Le(!1),setTimeout((()=>{Sr(Lt[t])}),100)):Nt((t=>{const r=[...t,e];return setTimeout((()=>{Cr(r)}),0),r}))},Cr=e=>{Qe((t=>[...t,...e])),Dt(!1),Ot([]),Ft(0),Nt([]),Le(!1),ze(null),vt([]),Mt({})},kr=()=>{Dt(!1),Ot([]),Ft(0),Nt([]),Le(!1),ze(null)},Pr=i.useCallback((e=>{const{destination:t,source:r}=e;if(!t)return;if(t.droppableId===r.droppableId&&t.index===r.index)return;const n=Array.from(Xe),[a]=n.splice(r.index,1);n.splice(t.index,0,a),Qe(n)}),[Xe]);return s.jsxs(u,{children:[s.jsxs(u,{sx:{mb:4},children:[s.jsx(u,{sx:{mb:3},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[s.jsxs(h,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,fontWeight:600,background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:[s.jsx(In,{sx:{color:l.primary}}),"YouTube Search & Clip Creation"]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[s.jsx(q,{icon:s.jsx(In,{}),label:"Search",color:"primary",variant:"search"===Bt?"filled":"outlined",onClick:()=>Ht("search"),clickable:!0,disabled:I||Jt,sx:{fontWeight:600,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:2}}}),s.jsx(q,{icon:s.jsx(hn,{}),label:"Video URL",color:"secondary",variant:"video"===Bt?"filled":"outlined",onClick:()=>Ht("video"),clickable:!0,disabled:I||Jt,sx:{fontWeight:600,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:2}}}),s.jsx(q,{icon:s.jsx(aa,{}),label:"Playlist URL",color:"info",variant:"playlist"===Bt?"filled":"outlined",onClick:()=>Ht("playlist"),clickable:!0,disabled:I||Jt,sx:{fontWeight:600,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:2}}})]})]})}),"search"===Bt&&s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"body2",sx:{mb:1,fontWeight:600},children:"Search Type:"}),s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(A,{variant:"videos"===ae?"contained":"outlined",onClick:()=>ie("videos"),disabled:I,size:"small",startIcon:s.jsx(In,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,..."videos"===ae&&{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`}},children:"Search Videos"}),s.jsx(A,{variant:"channels"===ae?"contained":"outlined",onClick:()=>ie("channels"),disabled:I,size:"small",startIcon:s.jsx(xi,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,..."channels"===ae&&{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`}},children:"Search Channels"})]})]}),"search"===Bt&&"channels"===ae&&s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"body2",sx:{mb:1,fontWeight:600},children:"Sort Channels By:"}),s.jsx(u,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[{value:"relevance",label:"Best Match",icon:""},{value:"music",label:"Music Priority",icon:""},{value:"title",label:"Name (A-Z)",icon:""},{value:"subscribers",label:"Subscribers",icon:""},{value:"recent",label:"Recent Activity",icon:""}].map((e=>s.jsx(A,{variant:ue===e.value?"contained":"outlined",size:"small",onClick:()=>de(e.value),startIcon:s.jsx("span",{children:e.icon}),sx:{...ue===e.value&&{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`}},children:e.label},e.value)))})]}),s.jsxs(u,{sx:{display:"flex",gap:2,mb:3},children:["search"===Bt&&s.jsxs(s.Fragment,{children:[s.jsx(T,{fullWidth:!0,label:"videos"===ae?"Search Videos":"Search Channels",value:f,onChange:e=>w(e.target.value),onKeyPress:e=>{"Enter"===e.key&&sr()},placeholder:"videos"===ae?"Enter song name, artist, or keywords...":"Enter channel name or creator...",InputProps:{startAdornment:s.jsx(In,{sx:{mr:1,color:"text.secondary"}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3,transition:"all 0.2s ease","&:hover":{boxShadow:`0 0 0 2px ${l.primary}20`},"&.Mui-focused":{boxShadow:`0 0 0 2px ${l.primary}40`}}}}),"videos"===ae&&s.jsx(A,{variant:"outlined",onClick:()=>ne(!te),startIcon:s.jsx(Ka,{}),sx:{minWidth:120,borderRadius:3,textTransform:"none",fontWeight:600,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:2}},children:"Filters"}),s.jsx(A,{variant:"contained",onClick:sr,disabled:I||!f.trim(),sx:{minWidth:120,borderRadius:3,textTransform:"none",fontWeight:600,background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:`0 4px 12px ${l.primary}40`,background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`,filter:"brightness(1.1)"},"&:disabled":{background:"action.disabledBackground",transform:"none",boxShadow:"none"}},children:I?s.jsx(H,{size:24,color:"inherit"}):"Search"})]}),"video"===Bt&&s.jsxs(s.Fragment,{children:[s.jsx(T,{fullWidth:!0,label:"YouTube Video URL",value:Vt,onChange:e=>Yt(e.target.value),onKeyPress:e=>"Enter"===e.key&&lr(),placeholder:"https://www.youtube.com/watch?v=... or https://youtu.be/...",InputProps:{startAdornment:s.jsx(hn,{sx:{mr:1,color:"text.secondary"}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3,transition:"all 0.2s ease","&:hover":{boxShadow:`0 0 0 2px ${l.secondary}20`},"&.Mui-focused":{boxShadow:`0 0 0 2px ${l.secondary}40`}}}}),s.jsx(A,{variant:"contained",onClick:lr,disabled:Jt||!Vt.trim(),sx:{minWidth:120,borderRadius:3,textTransform:"none",fontWeight:600,background:`linear-gradient(135deg, ${l.secondary} 0%, ${l.primary} 100%)`,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:`0 4px 12px ${l.secondary}40`,background:`linear-gradient(135deg, ${l.secondary} 0%, ${l.primary} 100%)`,filter:"brightness(1.1)"},"&:disabled":{background:"action.disabledBackground",transform:"none",boxShadow:"none"}},children:Jt?s.jsx(H,{size:24,color:"inherit"}):"Add Video"})]}),"playlist"===Bt&&s.jsxs(s.Fragment,{children:[s.jsx(T,{fullWidth:!0,label:"YouTube Playlist URL",value:Gt,onChange:e=>qt(e.target.value),onKeyPress:e=>"Enter"===e.key&&cr(),placeholder:"https://www.youtube.com/playlist?list=...",InputProps:{startAdornment:s.jsx(aa,{sx:{mr:1,color:"text.secondary"}})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3,transition:"all 0.2s ease","&:hover":{boxShadow:"0 0 0 2px #2196f320"},"&.Mui-focused":{boxShadow:"0 0 0 2px #2196f340"}}}}),s.jsx(A,{variant:"contained",onClick:cr,disabled:Jt||!Gt.trim(),sx:{minWidth:140,borderRadius:3,textTransform:"none",fontWeight:600,background:"linear-gradient(135deg, #2196f3 0%, #21cbf3 100%)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px #2196f340",background:"linear-gradient(135deg, #2196f3 0%, #21cbf3 100%)",filter:"brightness(1.1)"},"&:disabled":{background:"action.disabledBackground",transform:"none",boxShadow:"none"}},children:Jt?s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(H,{size:20,color:"inherit"}),s.jsx(h,{variant:"caption",children:Xt.videosFound>0?`${Xt.videosFound} videos`:"Processing..."})]}):"Import Playlist"})]}),s.jsx(A,{variant:"outlined",onClick:()=>Te(!Me),startIcon:s.jsx(ha,{}),sx:{minWidth:120,borderRadius:3,textTransform:"none",fontWeight:600,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:2}},children:"Size"})]}),"search"===Bt&&te&&s.jsxs(u,{sx:{p:3,mb:3,backgroundColor:"action.hover",borderRadius:2,border:`1px solid ${l.primary}20`},children:[s.jsxs(h,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[s.jsx(ha,{sx:{mr:1}}),"Search Options"]}),s.jsxs(U,{container:!0,spacing:3,children:[s.jsx(U,{item:!0,xs:12,sm:6,md:3,children:s.jsxs(R,{fullWidth:!0,size:"small",children:[s.jsx(z,{children:"Results per page"}),s.jsxs(D,{value:V,onChange:e=>G(e.target.value),label:"Results per page",children:[s.jsx(L,{value:10,children:"10 results"}),s.jsx(L,{value:25,children:"25 results"}),s.jsx(L,{value:50,children:"50 results"})]})]})}),s.jsx(U,{item:!0,xs:12,sm:6,md:3,children:s.jsxs(R,{fullWidth:!0,size:"small",children:[s.jsx(z,{children:"Sort by"}),s.jsxs(D,{value:J,onChange:e=>Q(e.target.value),label:"Sort by",children:[s.jsx(L,{value:"relevance",children:"Relevance"}),s.jsx(L,{value:"date",children:"Upload date"}),s.jsx(L,{value:"viewCount",children:"View count"}),s.jsx(L,{value:"rating",children:"Rating"}),s.jsx(L,{value:"title",children:"Title"})]})]})}),s.jsx(U,{item:!0,xs:12,sm:6,md:3,children:s.jsxs(R,{fullWidth:!0,size:"small",children:[s.jsx(z,{children:"Duration"}),s.jsxs(D,{value:Z,onChange:e=>ee(e.target.value),label:"Duration",children:[s.jsx(L,{value:"any",children:"Any duration"}),s.jsx(L,{value:"short",children:"Under 4 minutes"}),s.jsx(L,{value:"medium",children:"4-20 minutes"}),s.jsx(L,{value:"long",children:"Over 20 minutes"})]})]})}),s.jsx(U,{item:!0,xs:12,sm:6,md:3,children:s.jsx(A,{variant:"outlined",fullWidth:!0,onClick:sr,disabled:I,startIcon:s.jsx(In,{}),children:"Apply Filters"})})]})]}),Me&&s.jsxs(u,{sx:{p:3,mb:3,backgroundColor:"action.hover",borderRadius:2,border:`1px solid ${l.primary}20`},children:[s.jsxs(h,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[s.jsx(ha,{sx:{mr:1}}),"Card Size Options"]}),s.jsxs(U,{container:!0,spacing:2,alignItems:"center",children:[s.jsxs(U,{item:!0,xs:12,sm:6,children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Choose how large you want the video cards to appear"}),s.jsx(u,{sx:{display:"flex",gap:1},children:[{key:"small",label:"Small",icon:"",desc:"Compact view, more cards per row"},{key:"medium",label:"Medium",icon:"",desc:"Balanced view (default)"},{key:"large",label:"Large",icon:"",desc:"Detailed view, larger thumbnails"}].map((e=>s.jsxs(A,{variant:Ee===e.key?"contained":"outlined",onClick:()=>Ie(e.key),sx:{borderRadius:2,textTransform:"none",fontWeight:600,flexDirection:"column",minHeight:80,flex:1,...Ee===e.key&&{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`}},children:[s.jsx(u,{sx:{fontSize:"1.5rem",mb:.5},children:e.icon}),s.jsx(h,{variant:"caption",sx:{fontWeight:600},children:e.label})]},e.key)))})]}),s.jsx(U,{item:!0,xs:12,sm:6,children:s.jsxs(u,{sx:{p:2,backgroundColor:"background.paper",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[s.jsxs(h,{variant:"body2",sx:{fontWeight:600,mb:1},children:["small"===Ee&&" Small Cards","medium"===Ee&&" Medium Cards","large"===Ee&&" Large Cards"]}),s.jsxs(h,{variant:"caption",color:"text.secondary",children:["small"===Ee&&"Compact view with more videos visible at once. Perfect for browsing large collections quickly.","medium"===Ee&&"Balanced view with good detail and reasonable density. Recommended for most users.","large"===Ee&&"Detailed view with large thumbnails and more information. Great for careful selection."]})]})})]})]}),Xt.isImporting&&s.jsxs(u,{sx:{p:2,mb:3,backgroundColor:pe("#2196f3",.1),borderRadius:2,border:`1px solid ${pe("#2196f3",.3)}`},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[s.jsx(H,{size:20,sx:{color:"#2196f3"}}),s.jsx(h,{variant:"body2",sx:{fontWeight:600,color:"#2196f3"},children:"Importing Playlist"})]}),s.jsx(h,{variant:"body2",color:"text.secondary",children:Xt.currentStatus}),Xt.videosFound>0&&s.jsxs(h,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Found ",Xt.videosFound," videos so far..."]})]}),"video"===Bt&&s.jsxs(u,{sx:{p:2,mb:3,backgroundColor:pe(l.secondary,.1),borderRadius:2,border:`1px solid ${pe(l.secondary,.2)}`},children:[s.jsx(h,{variant:"body2",sx:{fontWeight:600,mb:1,color:l.secondary},children:" Direct Video URL"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"Paste any YouTube video URL to add it directly to your search results. Supports:"}),s.jsxs(u,{component:"ul",sx:{mt:1,mb:0,pl:2},children:[s.jsx(h,{component:"li",variant:"caption",color:"text.secondary",children:"youtube.com/watch?v=VIDEO_ID"}),s.jsx(h,{component:"li",variant:"caption",color:"text.secondary",children:"youtu.be/VIDEO_ID"}),s.jsx(h,{component:"li",variant:"caption",color:"text.secondary",children:"youtube.com/embed/VIDEO_ID"})]})]}),"playlist"===Bt&&s.jsxs(u,{sx:{p:2,mb:3,backgroundColor:pe("#2196f3",.1),borderRadius:2,border:`1px solid ${pe("#2196f3",.2)}`},children:[s.jsx(h,{variant:"body2",sx:{fontWeight:600,mb:1,color:"#2196f3"},children:" YouTube Playlist Import"}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Import all videos from a YouTube playlist at once using yt-dlp. Perfect for:"}),s.jsxs(u,{component:"ul",sx:{mt:1,mb:1,pl:2},children:[s.jsx(h,{component:"li",variant:"caption",color:"text.secondary",children:"Music albums or compilations"}),s.jsx(h,{component:"li",variant:"caption",color:"text.secondary",children:"Curated song collections"}),s.jsx(h,{component:"li",variant:"caption",color:"text.secondary",children:"Artist discographies"}),s.jsx(h,{component:"li",variant:"caption",color:"text.secondary",children:"Live concert recordings"})]}),s.jsx(h,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:" Supports public playlists   Powered by yt-dlp   Up to 100 videos"})]})]}),pt&&!De&&s.jsxs(u,{sx:{mb:4},children:[s.jsx(h,{variant:"h6",sx:{mb:2},children:"Video Preview"}),s.jsx(u,{sx:{display:"flex",justifyContent:"center","& iframe":{maxWidth:"100%",height:"auto"}},children:s.jsx(Uo,{videoId:pt,opts:{height:"315",width:"560",playerVars:{autoplay:0,controls:1,rel:0,showinfo:0}},onReady:hr,onStateChange:pr})}),s.jsx(u,{sx:{textAlign:"center",mt:2},children:s.jsx(A,{variant:"outlined",onClick:()=>ft(null),children:"Close Preview"})})]}),Zt&&s.jsx(u,{sx:{mb:4},children:s.jsxs(x,{severity:"error",action:s.jsx(A,{color:"inherit",size:"small",onClick:()=>{er(null),rr(void 0,!0)},children:"Retry"}),sx:{mb:2},children:[s.jsx(ve,{children:"Search Failed"}),Zt]})}),"channels"===ae&&!I&&!Zt&&f.trim()&&0===oe.length&&s.jsxs(u,{sx:{textAlign:"center",py:6,mb:4},children:[s.jsx(In,{sx:{fontSize:64,color:"text.secondary",mb:2}}),s.jsxs(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:['No channels found for "',f,'"']}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Try different search terms or check your spelling"}),s.jsx(A,{variant:"outlined",onClick:()=>rr(void 0,!0),startIcon:s.jsx(In,{}),children:"Search Again"})]}),oe.length>0&&s.jsxs(u,{sx:{mb:4},children:[s.jsxs(h,{variant:"h6",sx:{mb:3},children:["Channel Results (",oe.length,")"]}),s.jsx(u,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)",xl:"repeat(4, 1fr)"},gap:2},children:oe.map((e=>{const t=dr();return s.jsx(u,{children:s.jsx(N,{onClick:()=>nr(e),sx:{height:t.height,display:"flex",flexDirection:"column",cursor:"pointer",transition:"all 0.2s ease",border:"1px solid",borderColor:"divider","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${l.primary}30`,borderColor:l.primary}},children:s.jsxs(W,{sx:{flexGrow:1,p:`${t.padding}px`,display:"flex",flexDirection:"column",height:"100%"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[s.jsx(re,{src:e.thumbnail,alt:e.title,sx:{width:56,height:56,mr:2,bgcolor:l.primary,fontSize:"1.4rem",fontWeight:600,border:`2px solid ${l.primary}20`,boxShadow:`0 2px 8px ${l.primary}20`,flexShrink:0},children:e.title.charAt(0).toUpperCase()}),s.jsx(u,{sx:{flexGrow:1,minWidth:0},children:s.jsx(h,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.2,fontSize:t.fontSize},children:e.title})})]}),s.jsxs(u,{sx:{mb:2},children:[e.subscriberCount&&s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[s.jsx(xi,{sx:{fontSize:14,color:"text.secondary"}}),s.jsx(h,{variant:"caption",color:"text.secondary",children:Cc(e.subscriberCount).replace("views","subscribers")})]}),e.videoCount&&s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:.5},children:[s.jsx(hn,{sx:{fontSize:14,color:"text.secondary"}}),s.jsxs(h,{variant:"caption",color:"text.secondary",children:[Cc(e.videoCount)," videos"]})]})]}),s.jsx(u,{sx:{flexGrow:1,mb:2},children:s.jsx(h,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.4,fontSize:"0.875rem"},children:e.description||"No description available"})}),s.jsx(u,{sx:{mt:"auto",pt:1,borderTop:"1px solid",borderColor:"divider",textAlign:"center"},children:s.jsxs(h,{variant:"caption",color:"primary",sx:{fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[s.jsx(hn,{sx:{fontSize:14}}),"Click to view videos"]})})]})})},e.id)}))})]}),(k.length>0||ge.length>0||fe)&&s.jsxs(u,{sx:{mb:4},children:[s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[s.jsxs(u,{children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[s.jsx(h,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:fe?s.jsxs(s.Fragment,{children:[" ",fe.title," Videos"]}):" Video Results"}),fe&&s.jsx(A,{variant:"outlined",size:"small",onClick:async()=>{if(me(null),ye([]),xe(null),vt([]),Mt({}),"channels"===ae&&f.trim())try{const e=await Ac(f);se(e)}catch(vz){}},startIcon:s.jsx(fi,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:"Back to Search"})]}),(O||be||le)&&s.jsx(u,{children:s.jsx(h,{variant:"body2",color:"text.secondary",children:"channels"===ae&&le?s.jsxs(s.Fragment,{children:["Showing ",oe.length," of ",le.totalResults.toLocaleString()," channels",le.currentPage>1&&`  Page ${le.currentPage} of ${le.totalPages}`]}):s.jsxs(s.Fragment,{children:["Showing ",fe?ge.length:k.length," of ",(fe?be:O)?.totalResults.toLocaleString()," results",F>1&&`  Page ${F}`,fe&&`  From ${fe.title}`]})})})]}),s.jsxs(u,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[xt.length>0&&s.jsx(q,{label:`${xt.length} selected`,color:"primary",size:"small",variant:"outlined"}),s.jsx(A,{variant:"outlined",size:"small",onClick:()=>{const e=fe?ge:k;vt([...e]);const t={};e.forEach((e=>{t[e.id]={startTime:0,duration:60}})),Mt(t)},disabled:xt.length===(fe?ge:k).length,startIcon:s.jsx(Da,{}),children:"Select All"}),s.jsx(A,{variant:"outlined",size:"small",onClick:()=>{vt([]),Mt({})},disabled:0===xt.length,startIcon:s.jsx(La,{}),children:"Deselect All"}),s.jsxs(A,{variant:"contained",size:"small",onClick:()=>{if(0===xt.length)return;const e={...It};xt.forEach((t=>{e[t.id]||(e[t.id]={startTime:0,duration:60})})),Mt(e),St(!0)},disabled:0===xt.length,startIcon:s.jsx(wa,{}),sx:{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`},children:["Add Selected (",xt.length,")"]})]})]}),(O&&(O.nextPageToken||O.prevPageToken)||be&&(be.nextPageToken||be.prevPageToken)||le&&(le.nextPageToken||le.prevPageToken))&&s.jsx(u,{sx:{display:"flex",justifyContent:"center",mb:3},children:s.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[s.jsx(A,{variant:"outlined",onClick:ir,disabled:"channels"===ae?!le?.prevPageToken||I:!(fe?be?.prevPageToken:O?.prevPageToken)||I,startIcon:s.jsx(fi,{}),size:"small",children:"Previous"}),s.jsx(q,{label:"channels"===ae&&le?`Page ${le.currentPage} of ${le.totalPages}`:`Page ${F}`,variant:"outlined",size:"small"}),s.jsx(A,{variant:"outlined",onClick:ar,disabled:"channels"===ae?!le?.nextPageToken||I:!(fe?be?.nextPageToken:O?.nextPageToken)||I,endIcon:s.jsx(mi,{}),size:"small",children:"Next"})]})}),fe&&0===ge.length&&I&&s.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:s.jsxs(u,{sx:{textAlign:"center"},children:[s.jsx(H,{size:48,sx:{mb:2}}),s.jsxs(h,{variant:"h6",color:"text.secondary",children:["Loading ",fe.title," videos..."]})]})}),fe&&0===ge.length&&!I&&s.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:s.jsxs(u,{sx:{textAlign:"center"},children:[s.jsxs(h,{variant:"h6",color:"text.secondary",sx:{mb:2},children:["No videos found for ",fe.title]}),s.jsx(A,{variant:"outlined",onClick:async()=>{if(me(null),ye([]),xe(null),"channels"===ae&&f.trim())try{const e=await Ac(f);se(e)}catch(vz){}},startIcon:s.jsx(fi,{}),children:"Back to Search"})]})}),s.jsx(u,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)",xl:"repeat(4, 1fr)"},gap:2},children:(fe?ge:k).map((e=>{const t=xt.some((t=>t.id===e.id)),r=dr();return s.jsx(u,{children:s.jsxs(N,{sx:{height:r.height,display:"flex",flexDirection:"column",border:t?`2px solid ${l.primary}`:"1px solid",borderColor:t?l.primary:"divider",borderRadius:3,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:t?`0 8px 24px ${l.primary}30, 0 0 0 1px ${l.primary}20`:"0 2px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden",position:"relative","&:hover":{transform:"translateY(-4px)",boxShadow:`0 12px 32px ${l.primary}25, 0 0 0 1px ${l.primary}30`,borderColor:l.primary},"&:before":t?{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${l.primary} 0%, ${l.secondary} 100%)`,zIndex:1}:{}},children:[s.jsxs(u,{sx:{position:"relative",height:r.thumbnailHeight},children:[s.jsx(Y,{component:"img",height:r.thumbnailHeight,image:e.thumbnail,alt:e.title,sx:{objectFit:"cover",width:"100%",height:r.thumbnailHeight}}),s.jsx($,{checked:t,onChange:t=>((e,t)=>{t?(vt((t=>[...t,e])),Mt((t=>({...t,[e.id]:{startTime:0,duration:60}})))):(vt((t=>t.filter((t=>t.id!==e.id)))),Mt((t=>{const r={...t};return delete r[e.id],r})))})(e,t.target.checked),sx:{position:"absolute",top:4,right:4,backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:"6px",padding:"4px","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.8)"},"& .MuiSvgIcon-root":{color:t?l.primary:"white",fontSize:"1.2rem"}}}),s.jsx(q,{label:dc(br(e)),size:"small",sx:{position:"absolute",bottom:4,right:4,backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",fontWeight:"bold",height:20,"& .MuiChip-label":{fontSize:"0.7rem",padding:"0 6px"}}})]}),s.jsxs(W,{sx:{height:r.height-r.thumbnailHeight,p:`${r.padding}px`,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},children:[s.jsx(u,{sx:{height:`${r.titleHeight}px`,mb:1,overflow:"hidden",flexShrink:0},children:s.jsx(h,{variant:"body2",sx:{fontWeight:600,display:"-webkit-box",WebkitLineClamp:r.titleLines,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.2,height:"100%",fontSize:r.fontSize},children:e.title})}),s.jsxs(u,{sx:{height:`${r.channelHeight}px`,mb:1,display:"flex",alignItems:"center",overflow:"hidden",flexShrink:0},children:[s.jsx(xi,{sx:{fontSize:"large"===Ee?16:14,mr:.5,color:"text.secondary",flexShrink:0}}),s.jsx(h,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{fontWeight:500,fontSize:r.fontSize},children:e.channelTitle})]}),s.jsxs(u,{sx:{height:`${r.metadataHeight}px`,display:"flex",flexDirection:"column",justifyContent:"flex-start",gap:.5,overflow:"hidden",flexShrink:0,mb:1},children:[e.viewCount&&s.jsxs(u,{sx:{display:"flex",alignItems:"center",height:"16px"},children:[s.jsx(Ui,{sx:{fontSize:"large"===Ee?14:12,mr:.5,color:"text.secondary",flexShrink:0}}),s.jsx(h,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{fontSize:r.fontSize},children:Cc(e.viewCount)})]}),e.publishedAt&&s.jsx(u,{sx:{display:"flex",alignItems:"center",height:"16px"},children:s.jsx(h,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{fontSize:r.fontSize},children:kc(e.publishedAt)})})]}),s.jsx(u,{sx:{flexGrow:1}}),s.jsxs(u,{sx:{height:`${r.buttonAreaHeight}px`,display:"flex",gap:"large"===Ee?1:.5,alignItems:"center"},children:[s.jsx(A,{variant:"outlined",startIcon:"small"!==Ee?s.jsx(hn,{}):void 0,onClick:()=>((e,t=0)=>{ke(e.id),Ae(t)})(e),size:"large"===Ee?"medium":"small",sx:{flex:1,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:r.buttonFontSize,height:`${r.buttonAreaHeight}px`,minWidth:0,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:2,backgroundColor:pe(l.primary,.04)}},children:"Play"}),s.jsx(A,{variant:"outlined",startIcon:"small"!==Ee?s.jsx(Ui,{}):void 0,onClick:()=>(e=>{ft(e.id),gt(!0)})(e),size:"large"===Ee?"medium":"small",sx:{flex:1,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:r.buttonFontSize,height:`${r.buttonAreaHeight}px`,minWidth:0,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:2,backgroundColor:pe(l.secondary,.04)}},children:"Preview"}),s.jsx(A,{variant:"contained",startIcon:"small"!==Ee?s.jsx(wa,{}):void 0,onClick:()=>(e=>{ze(e),Ne(0),Ue(60),He(!1),Ye("60"),ft(e.id),Le(!0)})(e),size:"large"===Ee?"medium":"small",sx:{flex:1,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:r.buttonFontSize,height:`${r.buttonAreaHeight}px`,minWidth:0,background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`,transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:`0 4px 12px ${l.primary}40`,background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`,filter:"brightness(1.1)"}},children:"Add"})]})]})]})},e.id)}))}),(O&&(O.nextPageToken||O.prevPageToken)||be&&(be.nextPageToken||be.prevPageToken)||le&&(le.nextPageToken||le.prevPageToken))&&s.jsx(u,{sx:{display:"flex",justifyContent:"center",mt:4},children:s.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center"},children:[s.jsx(A,{variant:"outlined",onClick:ir,disabled:"channels"===ae?!le?.prevPageToken||I:!(fe?be?.prevPageToken:O?.prevPageToken)||I,startIcon:s.jsx(fi,{}),children:"Previous"}),s.jsx(q,{label:"channels"===ae&&le?`Page ${le.currentPage} of ${le.totalPages}`:`Page ${F}`,color:"primary",variant:"outlined"}),s.jsx(A,{variant:"outlined",onClick:ar,disabled:"channels"===ae?!le?.nextPageToken||I:!(fe?be?.nextPageToken:O?.nextPageToken)||I,endIcon:s.jsx(mi,{}),children:"Next"})]})})]}),(Xe.length>0||nt)&&s.jsxs(u,{children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[s.jsxs(h,{variant:"h6",children:[nt?`Editing: ${Ze}`:"Current Playlist"," (",Xe.length," clip",1!==Xe.length?"s":"",")"]}),nt&&s.jsx(q,{label:"Editing Mode",color:"primary",variant:"outlined",size:"small"})]}),Xe.length>0?s.jsx(_e,{onDragEnd:Pr,children:s.jsx(Fe,{droppableId:"youtube-playlist-clips",children:e=>s.jsxs(v,{ref:e.innerRef,...e.droppableProps,sx:{backgroundColor:"background.paper",borderRadius:2,border:`1px solid ${l.primary}20`,mb:3},children:[Xe.map(((e,t)=>s.jsx($e,{draggableId:e.id,index:t,children:(r,n)=>s.jsxs(S,{ref:r.innerRef,...r.draggableProps,sx:{borderBottom:t<Xe.length-1?"1px solid":"none",borderColor:"divider",backgroundColor:n.isDragging?"action.hover":"transparent","&:hover":{backgroundColor:"action.hover"}},children:[s.jsx(u,{...r.dragHandleProps,sx:{mr:2,cursor:"grab",color:"text.secondary","&:active":{cursor:"grabbing"}},children:s.jsx(ta,{})}),s.jsx(u,{sx:{mr:2},children:s.jsx("img",{src:e.thumbnail,alt:e.title,style:{width:60,height:45,borderRadius:4,objectFit:"cover"}})}),s.jsx(j,{primary:s.jsx(h,{variant:"subtitle2",noWrap:!0,children:e.title}),secondary:s.jsxs(u,{children:[s.jsx(h,{variant:"caption",color:"text.secondary",display:"block",children:e.artist}),s.jsxs(u,{sx:{display:"flex",gap:1,mt:.5},children:[s.jsx(q,{label:`Start: ${dc(e.startTime)}`,size:"small",variant:"outlined"}),s.jsx(q,{label:`${e.duration}s`,size:"small",variant:"outlined"})]})]})}),s.jsx(C,{children:s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(d,{size:"small",onClick:()=>(e=>{const t={id:e.videoId,title:e.title,channelTitle:e.artist,thumbnail:e.thumbnail,duration:"PT0S",publishedAt:"",viewCount:"",description:""};ze(t),Ne(e.startTime),Ue(e.duration);const r=![30,45,60,90,120].includes(e.duration);He(r),Ye(e.duration.toString()),ft(e.videoId),Le(!0)})(e),sx:{color:"primary.main"},children:s.jsx(Jn,{})}),s.jsx(d,{size:"small",onClick:()=>{return t=e.id,void Qe((e=>e.filter((e=>e.id!==t))));var t},sx:{color:"error.main"},children:s.jsx(dn,{})})]})})]})},e.id))),e.placeholder]})})}):s.jsx(u,{sx:{backgroundColor:"background.paper",borderRadius:2,border:`1px solid ${l.primary}20`,p:4,textAlign:"center",mb:3},children:s.jsx(h,{variant:"body1",color:"text.secondary",children:nt?"This playlist is currently empty. Add clips by searching for videos above.":"No clips added yet. Search for videos and add them to your playlist."})}),s.jsxs(u,{sx:{display:"flex",gap:2,justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:[nt&&s.jsx(A,{variant:"outlined",size:"large",startIcon:st?s.jsx(Oa,{}):s.jsx(Pi,{}),onClick:async()=>{if(nt&&e&&it)try{if(e.isCollaborative||e.collaborationId){const r={};if(Ze.trim()&&Ze.trim()!==e.name&&(r.name=Ze.trim()),r.clips=Xe,r.date=(new Date).toISOString(),!(await c(it,r)))throw new Error("Failed to update collaborative playlist");const n={...e,...r};a&&a(n),t&&t(n)}else{const r={id:it,name:Ze.trim()||e.name,clips:Xe,date:e.date,drinkingSoundPath:e.drinkingSoundPath,imagePath:e.imagePath,isPublic:e.isPublic,shareCode:e.shareCode,creator:e.creator,description:e.description,rating:e.rating,downloadCount:e.downloadCount,tags:e.tags,createdAt:e.createdAt,updatedAt:(new Date).toISOString(),version:e.version};pc(r),t&&t(r)}lt(!0),ht(`Playlist "${Ze.trim()||e.name}" saved successfully!`),ut(!0),setTimeout((()=>lt(!1)),3e3)}catch(vz){ht(`Failed to save playlist: ${vz instanceof Error?vz.message:"Unknown error"}`),ut(!0)}},disabled:!e,sx:{borderColor:st?"success.main":l.primary,color:st?"success.main":l.primary,fontWeight:600,minWidth:180,transition:"all 0.3s ease","&:hover":{borderColor:st?"success.dark":l.secondary,backgroundColor:pe(st?o.palette.success.main:l.primary,.1),transform:"translateY(-1px)"}},children:st?"Saved!":"Save to Current Playlist"}),s.jsx(A,{variant:"contained",size:"large",onClick:()=>{0!==Xe.length&&(nt||et(`YouTube Power Hour ${(new Date).toLocaleDateString()}`),rt(!0))},sx:{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`,fontWeight:600,minWidth:180,transition:"all 0.3s ease","&:hover":{transform:"translateY(-1px)",boxShadow:4}},children:nt?"Update Options...":"Save Playlist"})]})]}),s.jsxs(g,{open:!!Ce,onClose:ur,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{backgroundColor:"#000",borderRadius:3,overflow:"hidden","& .MuiDialogContent-root":{padding:0}}},sx:{"& .MuiDialog-paper":{margin:2,maxHeight:"calc(100vh - 32px)"}},children:[s.jsxs(y,{sx:{color:"white",backgroundColor:"#000",display:"flex",justifyContent:"space-between",alignItems:"center",py:2,px:3,borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(hn,{sx:{color:l.primary}}),s.jsx(h,{variant:"h6",sx:{fontWeight:600},children:"Video Player"})]}),s.jsx(d,{onClick:ur,sx:{color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:""})]}),s.jsx(b,{sx:{backgroundColor:"#000",p:0,position:"relative"},children:Ce&&s.jsx(u,{sx:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden","& iframe":{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},children:s.jsx(Uo,{videoId:Ce,opts:{width:"100%",height:"100%",playerVars:{autoplay:1,start:Pe,modestbranding:1,rel:0,fs:1,cc_load_policy:0,iv_load_policy:3,enablejsapi:1,origin:window.location.origin}},onReady:e=>{Pe>0&&e.target.seekTo(Pe)},onStateChange:e=>{}})})})]}),s.jsxs(g,{open:De,onClose:fr,maxWidth:"sm",fullWidth:!0,children:[s.jsx(y,{children:zt?`Configure Clip - Video ${_t+1} of ${Lt.length}`:"Configure Clip"}),s.jsx(b,{children:Re&&s.jsxs(u,{sx:{pt:2},children:[s.jsx(h,{variant:"subtitle1",sx:{mb:2},children:Re.title}),s.jsx(u,{sx:{mb:3,display:"flex",justifyContent:"center","& iframe":{maxWidth:"100%",height:"auto"}},children:s.jsx(Uo,{videoId:Re.id,opts:{height:"240",width:"426",playerVars:{autoplay:0,controls:1,rel:0,showinfo:0,start:Oe}},onReady:hr,onStateChange:pr})}),s.jsx(u,{sx:{mb:3},children:s.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Video Duration: ",dc(br(Re))]})}),s.jsxs(u,{sx:{mb:3},children:[s.jsxs(h,{variant:"body2",sx:{mb:2,fontWeight:600},children:["Start Time: ",dc(Oe)]}),s.jsxs(u,{sx:{display:"flex",gap:2,mb:2,alignItems:"center"},children:[s.jsx(T,{size:"small",label:"Minutes",type:"number",value:Math.floor(Oe/60),onChange:e=>{const t=parseInt(e.target.value)||0,r=Oe%60,n=Math.min(60*t+r,xr);Ne(n)},inputProps:{min:0,max:Math.floor(xr/60)},sx:{width:80}}),s.jsx(h,{variant:"body2",children:":"}),s.jsx(T,{size:"small",label:"Seconds",type:"number",value:Oe%60,onChange:e=>{const t=parseInt(e.target.value)||0,r=Math.floor(Oe/60),n=Math.min(60*r+t,xr);Ne(n)},inputProps:{min:0,max:59},sx:{width:80}}),s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(A,{size:"small",variant:"outlined",onClick:()=>Ne(Math.max(0,Oe-5)),disabled:Oe<=0,children:"-5s"}),s.jsx(A,{size:"small",variant:"outlined",onClick:()=>Ne(Math.min(xr,Oe+5)),disabled:Oe>=xr,children:"+5s"})]})]}),s.jsx(p,{value:Oe,onChange:(e,t)=>Ne(t),min:0,max:xr,step:1,marks:[{value:0,label:"0:00"},{value:Math.floor(xr/2),label:dc(Math.floor(xr/2))},{value:xr,label:dc(xr)}],sx:{mb:2}}),s.jsxs(u,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[s.jsx(A,{variant:"outlined",size:"small",startIcon:s.jsx(kn,{}),onClick:()=>{yt.current&&(yt.current.seekTo(0,!0),qe(!1),Ke(null))},title:"Jump to video beginning",children:"Start"}),s.jsx(A,{variant:"outlined",size:"small",startIcon:s.jsx(ki,{}),onClick:()=>{yt.current&&(bt.current&&(clearTimeout(bt.current),bt.current=null),yt.current.seekTo(Oe,!0),yt.current.playVideo(),qe(!0),Ke(null),bt.current=setTimeout((()=>{yt.current&&(yt.current.pauseVideo(),qe(!1))}),1e3*We))},title:"Restart clip from designated start time",children:"Repeat"}),s.jsx(A,{variant:"contained",size:"small",startIcon:Ge?s.jsx(pn,{}):s.jsx(hn,{}),onClick:()=>{if(yt.current)if(Ge){yt.current.pauseVideo(),qe(!1);const e=yt.current.getCurrentTime();Ke(e),bt.current&&(clearTimeout(bt.current),bt.current=null)}else{const e=null!==Je?Je:Oe,t=null!==Je?Math.max(0,Oe+We-Je):We;yt.current.seekTo(e,!0),yt.current.playVideo(),qe(!0),t>0&&(bt.current=setTimeout((()=>{yt.current&&(yt.current.pauseVideo(),qe(!1),Ke(null))}),1e3*t))}},title:Ge?"Pause clip":"Play clip",sx:{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`,minWidth:100},children:Ge?"Pause":"Play"}),s.jsx(A,{variant:"outlined",size:"small",startIcon:s.jsx(fn,{}),onClick:()=>{yt.current&&(yt.current.pauseVideo(),qe(!1),Ke(null),bt.current&&(clearTimeout(bt.current),bt.current=null))},title:"Stop playback",children:"Stop"}),s.jsx(A,{variant:"outlined",size:"small",startIcon:s.jsx(Pn,{}),onClick:()=>{if(yt.current&&Re){const e=br(Re),t=Math.max(0,e-60);yt.current.seekTo(t,!0),qe(!1),Ke(null)}},title:"Jump to last minute of video",children:"End"}),s.jsx(A,{variant:"outlined",size:"small",startIcon:s.jsx(Ra,{}),onClick:()=>{if(Re){const e=br(Re),t=Math.max(0,e-We),r=Math.floor(Math.random()*(t+1));Ne(r),yt.current&&yt.current.seekTo(r,!0)}},title:"Set random start time",sx:{color:"secondary.main",borderColor:"secondary.main","&:hover":{backgroundColor:"secondary.main",color:"white"}},children:"Random"})]})]}),s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"body2",sx:{mb:2,fontWeight:600},children:"Clip Duration"}),s.jsx(u,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[30,45,60,90,120].map((e=>s.jsx(A,{variant:We!==e||Be?"outlined":"contained",size:"small",onClick:()=>{He(!1),(e=>{Ue(e),Ye(e.toString())})(e)},sx:{minWidth:"auto",px:2,...We===e&&!Be&&{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`}},children:60===e?"60s (Power Hour)":`${e}s`},e)))}),s.jsx(X,{control:s.jsx($,{checked:Be,onChange:e=>{return t=e.target.checked,He(t),void(t?Ye(We.toString()):(Ue(60),Ye("60")));var t},color:"primary"}),label:"Custom duration",sx:{mb:Be?1:0}}),Be&&s.jsx(T,{fullWidth:!0,size:"small",label:"Duration (seconds)",type:"number",value:Ve,onChange:e=>(e=>{Ye(e);const t=parseInt(e);!isNaN(t)&&t>0&&t<=600&&Ue(t)})(e.target.value),inputProps:{min:1,max:600,step:1},helperText:"Enter duration in seconds (1-600)",sx:{mt:1}}),s.jsx(u,{sx:{mt:1,p:1,backgroundColor:"action.hover",borderRadius:1},children:s.jsxs(h,{variant:"caption",color:"text.secondary",children:["Current duration: ",s.jsxs("strong",{children:[We," seconds"]}),We>=60&&` (${Math.floor(We/60)}:${(We%60).toString().padStart(2,"0")})`]})})]}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:["Clip will play from ",dc(Oe)," to ",dc(Oe+We)]})]})}),s.jsxs(P,{children:[s.jsx(A,{onClick:fr,children:zt?"Cancel All":"Cancel"}),s.jsx(A,{onClick:()=>{if(Re)if(zt)jr();else if(-1!==Xe.findIndex((e=>e.videoId===Re.id)))mr();else{const e=hc(Re,Oe,We);Qe((t=>[...t,e])),Le(!1),ze(null)}},variant:"contained",children:zt?_t===Lt.length-1?"Finish":"Next Video":Re&&Xe.some((e=>e.videoId===Re.id))?"Update Clip":"Add to Playlist"})]})]}),s.jsxs(g,{open:tt,onClose:yr,maxWidth:"sm",fullWidth:!0,children:[s.jsx(y,{children:nt?"Update YouTube Playlist":"Save YouTube Playlist"}),s.jsx(b,{children:s.jsxs(u,{sx:{pt:2},children:[s.jsx(T,{fullWidth:!0,label:"Playlist Name",value:Ze,onChange:e=>et(e.target.value),placeholder:"Enter playlist name...",sx:{mb:2}}),nt&&s.jsxs(u,{sx:{mb:2,p:2,backgroundColor:"action.hover",borderRadius:1},children:[s.jsx(h,{variant:"body2",sx:{fontWeight:600,mb:1},children:"Editing Mode Options:"}),s.jsxs(h,{variant:"caption",color:"text.secondary",children:[" ",s.jsx("strong",{children:"Update Existing:"})," Save changes to the original playlist",s.jsx("br",{})," ",s.jsx("strong",{children:"Save As New:"})," Create a new playlist while keeping the original"]})]}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:["This playlist contains ",Xe.length," clips with a total duration of ",dc(Xe.reduce(((e,t)=>e+t.duration),0)),"."]})]})}),s.jsxs(P,{children:[s.jsx(A,{onClick:yr,children:"Cancel"}),nt?s.jsxs(s.Fragment,{children:[s.jsx(A,{onClick:()=>gr(!0),variant:"outlined",disabled:!Ze.trim(),children:"Save As New"}),s.jsx(A,{onClick:()=>gr(!1),variant:"contained",disabled:!Ze.trim(),sx:{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`},children:"Update Existing"})]}):s.jsx(A,{onClick:()=>gr(!1),variant:"contained",disabled:!Ze.trim(),sx:{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`},children:"Save Playlist"})]})]}),s.jsxs(g,{open:wt,onClose:vr,maxWidth:"md",fullWidth:!0,children:[s.jsxs(y,{children:["Configure Multiple Videos (",xt.length," selected)"]}),s.jsx(b,{children:s.jsxs(u,{sx:{pt:2},children:[s.jsxs(R,{component:"fieldset",sx:{mb:3},children:[s.jsx(we,{component:"legend",children:"Time Selection Mode"}),s.jsxs(Se,{value:jt,onChange:e=>Ct(e.target.value),row:!0,children:[s.jsx(X,{value:"random",control:s.jsx(je,{}),label:s.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(ua,{sx:{mr:1}}),"Random minute for each video"]})}),s.jsx(X,{value:"same",control:s.jsx(je,{}),label:s.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(Ai,{sx:{mr:1}}),"Same time for all videos"]})}),s.jsx(X,{value:"manual",control:s.jsx(je,{}),label:s.jsxs(u,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(Ai,{sx:{mr:1}}),"Manual time for each video"]}),s.jsx(h,{variant:"caption",color:"text.secondary",sx:{ml:3,mt:.5},children:"Opens the minute extractor for each video sequentially"})]})})]})]}),s.jsx(u,{sx:{mb:3},children:s.jsxs(R,{fullWidth:!0,children:[s.jsx(z,{children:"Clip Duration"}),s.jsxs(D,{value:At,onChange:e=>Et(e.target.value),label:"Clip Duration",children:[s.jsx(L,{value:30,children:"30 seconds"}),s.jsx(L,{value:45,children:"45 seconds"}),s.jsx(L,{value:60,children:"60 seconds (Power Hour)"}),s.jsx(L,{value:90,children:"90 seconds"}),s.jsx(L,{value:120,children:"2 minutes"})]})]})}),"same"===jt&&s.jsxs(u,{sx:{mb:3},children:[s.jsxs(h,{variant:"body2",sx:{mb:1},children:["Start Time for All Videos: ",dc(kt)]}),s.jsx(p,{value:kt,onChange:(e,t)=>Pt(t),min:0,max:300,step:1,marks:[{value:0,label:"0:00"},{value:60,label:"1:00"},{value:120,label:"2:00"},{value:180,label:"3:00"},{value:240,label:"4:00"},{value:300,label:"5:00"}]})]}),"manual"===jt&&s.jsxs(u,{sx:{mb:3,p:2,backgroundColor:"info.main",color:"info.contrastText",borderRadius:1},children:[s.jsx(h,{variant:"body2",sx:{fontWeight:600,mb:1},children:"Sequential Manual Configuration"}),s.jsx(h,{variant:"body2",children:'When you click "Add Clips", the minute extractor will open for each video one by one. You\'ll be able to set precise start and end times for each video using the full interface with video preview and controls.'})]}),s.jsx(u,{sx:{p:2,backgroundColor:"action.hover",borderRadius:1},children:s.jsxs(h,{variant:"body2",color:"text.secondary",children:["random"===jt&&"Random start times will be generated for each video.","same"===jt&&`All videos will start at ${dc(kt)}.`,"manual"===jt&&"The minute extractor will open sequentially for each video, allowing you to set precise start and end times.",s.jsx("br",{}),"Total clips to add: ",xt.length]})}),Tt&&s.jsxs(u,{sx:{mt:2},children:[s.jsx(he,{}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1,textAlign:"center"},children:"Creating clips..."})]})]})}),s.jsxs(P,{children:[s.jsx(A,{onClick:vr,disabled:Tt,children:"Cancel"}),s.jsx(A,{onClick:async()=>{if(0!==xt.length)if("manual"!==jt){Rt(!0);try{let e={};xt.forEach((t=>{switch(jt){case"random":const r=br(t);e[t.id]={startTime:Sc(r,At),duration:At};break;case"same":e[t.id]={startTime:kt,duration:At};break;default:e[t.id]={startTime:0,duration:60}}}));const t=wc(xt,e);Qe((e=>[...e,...t])),St(!1),vt([]),Mt({})}catch(vz){}finally{Rt(!1)}}else wr()},variant:"contained",disabled:Tt||0===xt.length,sx:{background:`linear-gradient(135deg, ${l.primary} 0%, ${l.secondary} 100%)`},children:Tt?"Processing...":`Add ${xt.length} Clips`})]})]}),s.jsx(K,{open:ct,autoHideDuration:4e3,onClose:()=>ut(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:s.jsx(x,{onClose:()=>ut(!1),severity:"success",variant:"filled",sx:{width:"100%"},children:dt})})]})};function pP(e,t){return function(){return e.apply(t,arguments)}}const{toString:fP}=Object.prototype,{getPrototypeOf:mP}=Object,{iterator:gP,toStringTag:yP}=Symbol,bP=(e=>t=>{const r=fP.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),xP=e=>(e=e.toLowerCase(),t=>bP(t)===e),vP=e=>t=>typeof t===e,{isArray:wP}=Array,SP=vP("undefined"),jP=xP("ArrayBuffer"),CP=vP("string"),kP=vP("function"),PP=vP("number"),AP=e=>null!==e&&"object"==typeof e,EP=e=>{if("object"!==bP(e))return!1;const t=mP(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||yP in e||gP in e)},IP=xP("Date"),MP=xP("File"),TP=xP("Blob"),RP=xP("FileList"),zP=xP("URLSearchParams"),[DP,LP,OP,_P]=["ReadableStream","Request","Response","Headers"].map(xP);function FP(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,a;if("object"!=typeof e&&(e=[e]),wP(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let o;for(n=0;n<i;n++)o=a[n],t.call(null,e[o],o,e)}}function $P(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const NP="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,WP=e=>!SP(e)&&e!==NP,UP=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&mP(Uint8Array)),BP=xP("HTMLFormElement"),HP=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),VP=xP("RegExp"),YP=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};FP(r,((r,a)=>{let i;!1!==(i=t(r,a,e))&&(n[a]=i||r)})),Object.defineProperties(e,n)},GP=xP("AsyncFunction"),qP=(JP="function"==typeof setImmediate,KP=kP(NP.postMessage),JP?setImmediate:KP?(XP=`axios@${Math.random()}`,QP=[],NP.addEventListener("message",(({source:e,data:t})=>{e===NP&&t===XP&&QP.length&&QP.shift()()}),!1),e=>{QP.push(e),NP.postMessage(XP,"*")}):e=>setTimeout(e));var JP,KP,XP,QP;const ZP="undefined"!=typeof queueMicrotask?queueMicrotask.bind(NP):"undefined"!=typeof process&&process.nextTick||qP,eA={isArray:wP,isArrayBuffer:jP,isBuffer:function(e){return null!==e&&!SP(e)&&null!==e.constructor&&!SP(e.constructor)&&kP(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||kP(e.append)&&("formdata"===(t=bP(e))||"object"===t&&kP(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&jP(e.buffer),t},isString:CP,isNumber:PP,isBoolean:e=>!0===e||!1===e,isObject:AP,isPlainObject:EP,isReadableStream:DP,isRequest:LP,isResponse:OP,isHeaders:_P,isUndefined:SP,isDate:IP,isFile:MP,isBlob:TP,isRegExp:VP,isFunction:kP,isStream:e=>AP(e)&&kP(e.pipe),isURLSearchParams:zP,isTypedArray:UP,isFileList:RP,forEach:FP,merge:function e(){const{caseless:t}=WP(this)&&this||{},r={},n=(n,a)=>{const i=t&&$P(r,a)||a;EP(r[i])&&EP(n)?r[i]=e(r[i],n):EP(n)?r[i]=e({},n):wP(n)?r[i]=n.slice():r[i]=n};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&FP(arguments[a],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(FP(t,((t,n)=>{r&&kP(t)?e[n]=pP(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,i,o;const s={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],n&&!n(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==r&&mP(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:bP,kindOfTest:xP,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(wP(e))return e;let t=e.length;if(!PP(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[gP]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:BP,hasOwnProperty:HP,hasOwnProp:HP,reduceDescriptors:YP,freezeMethods:e=>{YP(e,((t,r)=>{if(kP(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];kP(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return wP(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:$P,global:NP,isContextDefined:WP,isSpecCompliantForm:function(e){return!!(e&&kP(e.append)&&"FormData"===e[yP]&&e[gP])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(AP(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const a=wP(e)?[]:{};return FP(e,((e,t)=>{const i=r(e,n+1);!SP(i)&&(a[t]=i)})),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:GP,isThenable:e=>e&&(AP(e)||kP(e))&&kP(e.then)&&kP(e.catch),setImmediate:qP,asap:ZP,isIterable:e=>null!=e&&kP(e[gP])};function tA(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}eA.inherits(tA,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:eA.toJSONObject(this.config),code:this.code,status:this.status}}});const rA=tA.prototype,nA={};function aA(e){return eA.isPlainObject(e)||eA.isArray(e)}function iA(e){return eA.endsWith(e,"[]")?e.slice(0,-2):e}function oA(e,t,r){return e?e.concat(t).map((function(e,t){return e=iA(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{nA[e]={value:e}})),Object.defineProperties(tA,nA),Object.defineProperty(rA,"isAxiosError",{value:!0}),tA.from=(e,t,r,n,a,i)=>{const o=Object.create(rA);return eA.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),tA.call(o,e.message,t,r,n,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const sA=eA.toFlatObject(eA,{},null,(function(e){return/^is[A-Z]/.test(e)}));function lA(e,t,r){if(!eA.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=eA.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!eA.isUndefined(t[e])}))).metaTokens,a=r.visitor||c,i=r.dots,o=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&eA.isSpecCompliantForm(t);if(!eA.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(eA.isDate(e))return e.toISOString();if(!s&&eA.isBlob(e))throw new tA("Blob is not supported. Use a Buffer instead.");return eA.isArrayBuffer(e)||eA.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let s=e;if(e&&!a&&"object"==typeof e)if(eA.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(eA.isArray(e)&&function(e){return eA.isArray(e)&&!e.some(aA)}(e)||(eA.isFileList(e)||eA.endsWith(r,"[]"))&&(s=eA.toArray(e)))return r=iA(r),s.forEach((function(e,n){!eA.isUndefined(e)&&null!==e&&t.append(!0===o?oA([r],n,i):null===o?r:r+"[]",l(e))})),!1;return!!aA(e)||(t.append(oA(a,r,i),l(e)),!1)}const u=[],d=Object.assign(sA,{defaultVisitor:c,convertValue:l,isVisitable:aA});if(!eA.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!eA.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),eA.forEach(r,(function(r,i){!0===(!(eA.isUndefined(r)||null===r)&&a.call(t,r,eA.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])})),u.pop()}}(e),t}function cA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function uA(e,t){this._pairs=[],e&&lA(e,this,t)}const dA=uA.prototype;function hA(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pA(e,t,r){if(!t)return e;const n=r&&r.encode||hA;eA.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(i=a?a(t,r):eA.isURLSearchParams(t)?t.toString():new uA(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}dA.append=function(e,t){this._pairs.push([e,t])},dA.toString=function(e){const t=e?function(t){return e.call(this,t,cA)}:cA;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class fA{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){eA.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const mA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gA={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:uA,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},yA="undefined"!=typeof window&&"undefined"!=typeof document,bA="object"==typeof navigator&&navigator||void 0,xA=yA&&(!bA||["ReactNative","NativeScript","NS"].indexOf(bA.product)<0),vA="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,wA=yA&&window.location.href||"http://localhost",SA={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yA,hasStandardBrowserEnv:xA,hasStandardBrowserWebWorkerEnv:vA,navigator:bA,origin:wA},Symbol.toStringTag,{value:"Module"})),...gA};function jA(e){function t(e,r,n,a){let i=e[a++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),s=a>=e.length;return i=!i&&eA.isArray(n)?n.length:i,s?(eA.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o):(n[i]&&eA.isObject(n[i])||(n[i]=[]),t(e,r,n[i],a)&&eA.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}(n[i])),!o)}if(eA.isFormData(e)&&eA.isFunction(e.entries)){const r={};return eA.forEachEntry(e,((e,n)=>{t(function(e){return eA.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null}const CA={transitional:mA,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=eA.isObject(e);if(a&&eA.isHTMLForm(e)&&(e=new FormData(e)),eA.isFormData(e))return n?JSON.stringify(jA(e)):e;if(eA.isArrayBuffer(e)||eA.isBuffer(e)||eA.isStream(e)||eA.isFile(e)||eA.isBlob(e)||eA.isReadableStream(e))return e;if(eA.isArrayBufferView(e))return e.buffer;if(eA.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return lA(e,new SA.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return SA.isNode&&eA.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=eA.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return lA(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(eA.isString(e))try{return(t||JSON.parse)(e),eA.trim(e)}catch(xz){if("SyntaxError"!==xz.name)throw xz}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||CA.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(eA.isResponse(e)||eA.isReadableStream(e))return e;if(e&&eA.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(xz){if(r){if("SyntaxError"===xz.name)throw tA.from(xz,tA.ERR_BAD_RESPONSE,this,null,this.response);throw xz}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:SA.classes.FormData,Blob:SA.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};eA.forEach(["delete","get","head","post","put","patch"],(e=>{CA.headers[e]={}}));const kA=eA.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PA=Symbol("internals");function AA(e){return e&&String(e).trim().toLowerCase()}function EA(e){return!1===e||null==e?e:eA.isArray(e)?e.map(EA):String(e)}function IA(e,t,r,n,a){return eA.isFunction(n)?n.call(this,t,r):(a&&(t=r),eA.isString(t)?eA.isString(n)?-1!==t.indexOf(n):eA.isRegExp(n)?n.test(t):void 0:void 0)}let MA=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=AA(t);if(!a)throw new Error("header name must be a non-empty string");const i=eA.findKey(n,a);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=EA(e))}const i=(e,t)=>eA.forEach(e,((e,r)=>a(e,r,t)));if(eA.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(eA.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&kA[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(eA.isObject(e)&&eA.isIterable(e)){let r,n,a={};for(const t of e){if(!eA.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?eA.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=AA(e)){const r=eA.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(eA.isFunction(t))return t.call(this,e,r);if(eA.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=AA(e)){const r=eA.findKey(this,e);return!(!r||void 0===this[r]||t&&!IA(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=AA(e)){const a=eA.findKey(r,e);!a||t&&!IA(0,r[a],a,t)||(delete r[a],n=!0)}}return eA.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!IA(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return eA.forEach(this,((n,a)=>{const i=eA.findKey(r,a);if(i)return t[i]=EA(n),void delete t[a];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(a):String(a).trim();o!==a&&delete t[a],t[o]=EA(n),r[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return eA.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&eA.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[PA]=this[PA]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=AA(e);t[n]||(function(e,t){const r=eA.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})}))}(r,e),t[n]=!0)}return eA.isArray(e)?e.forEach(n):n(e),this}};function TA(e,t){const r=this||CA,n=t||r,a=MA.from(n.headers);let i=n.data;return eA.forEach(e,(function(e){i=e.call(r,i,a.normalize(),t?t.status:void 0)})),a.normalize(),i}function RA(e){return!(!e||!e.__CANCEL__)}function zA(e,t,r){tA.call(this,null==e?"canceled":e,tA.ERR_CANCELED,t,r),this.name="CanceledError"}function DA(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new tA("Request failed with status code "+r.status,[tA.ERR_BAD_REQUEST,tA.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}MA.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),eA.reduceDescriptors(MA.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),eA.freezeMethods(MA),eA.inherits(zA,tA,{__CANCEL__:!0});const LA=(e,t,r=3)=>{let n=0;const a=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,i=0,o=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=n[o];a||(a=l),r[i]=s,n[i]=l;let u=o,d=0;for(;u!==i;)d+=r[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let r,n,a=0,i=1e3/t;const o=(t,i=Date.now())=>{a=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-a;s>=i?o(e,t):(r=e,n||(n=setTimeout((()=>{n=null,o(r)}),i-s)))},()=>r&&o(r)]}((r=>{const i=r.loaded,o=r.lengthComputable?r.total:void 0,s=i-n,l=a(s);n=i,e({loaded:i,total:o,progress:o?i/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&i<=o?(o-i)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),r)},OA=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},_A=e=>(...t)=>eA.asap((()=>e(...t))),FA=SA.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,SA.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(SA.origin),SA.navigator&&/(msie|trident)/i.test(SA.navigator.userAgent)):()=>!0,$A=SA.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];eA.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),eA.isString(n)&&o.push("path="+n),eA.isString(a)&&o.push("domain="+a),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function NA(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const WA=e=>e instanceof MA?{...e}:e;function UA(e,t){t=t||{};const r={};function n(e,t,r,n){return eA.isPlainObject(e)&&eA.isPlainObject(t)?eA.merge.call({caseless:n},e,t):eA.isPlainObject(t)?eA.merge({},t):eA.isArray(t)?t.slice():t}function a(e,t,r,a){return eA.isUndefined(t)?eA.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function i(e,t){if(!eA.isUndefined(t))return n(void 0,t)}function o(e,t){return eA.isUndefined(t)?eA.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,a,i){return i in t?n(r,a):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t,r)=>a(WA(e),WA(t),0,!0)};return eA.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=l[n]||a,o=i(e[n],t[n],n);eA.isUndefined(o)&&i!==s||(r[n]=o)})),r}const BA=e=>{const t=UA({},e);let r,{data:n,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:l}=t;if(t.headers=s=MA.from(s),t.url=pA(NA(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),eA.isFormData(n))if(SA.hasStandardBrowserEnv||SA.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(r=s.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(SA.hasStandardBrowserEnv&&(a&&eA.isFunction(a)&&(a=a(t)),a||!1!==a&&FA(t.url))){const e=i&&o&&$A.read(o);e&&s.set(i,e)}return t},HA="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=BA(e);let a=n.data;const i=MA.from(n.headers).normalize();let o,s,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=n;function f(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=MA.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());DA((function(e){t(e),f()}),(function(e){r(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new tA("Request aborted",tA.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new tA("Network Error",tA.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||mA;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new tA(t,a.clarifyTimeoutError?tA.ETIMEDOUT:tA.ECONNABORTED,e,m)),m=null},void 0===a&&i.setContentType(null),"setRequestHeader"in m&&eA.forEach(i.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),eA.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),d&&"json"!==d&&(m.responseType=n.responseType),p&&([l,u]=LA(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([s,c]=LA(h),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{m&&(r(!t||t.type?new zA(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===SA.protocols.indexOf(y)?r(new tA("Unsupported protocol "+y+":",tA.ERR_BAD_REQUEST,e)):m.send(a||null)}))},VA=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof tA?t:new zA(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,a(new tA(`timeout ${t} of ms exceeded`,tA.ETIMEDOUT))}),t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:s}=n;return s.unsubscribe=()=>eA.asap(o),s}},YA=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},GA=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},qA=(e,t,r,n)=>{const a=async function*(e,t){for await(const r of GA(e))yield*YA(r,t)}(e,t);let i,o=0,s=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return s(),void e.close();let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw s(t),t}},cancel:e=>(s(e),a.return())},{highWaterMark:2})},JA="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,KA=JA&&"function"==typeof ReadableStream,XA=JA&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),QA=(e,...t)=>{try{return!!e(...t)}catch(xz){return!1}},ZA=KA&&QA((()=>{let e=!1;const t=new Request(SA.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),eE=KA&&QA((()=>eA.isReadableStream(new Response("").body))),tE={stream:eE&&(e=>e.body)};var rE;JA&&(rE=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!tE[e]&&(tE[e]=eA.isFunction(rE[e])?t=>t[e]():(t,r)=>{throw new tA(`Response type '${e}' is not supported`,tA.ERR_NOT_SUPPORT,r)})})));const nE=async(e,t)=>{const r=eA.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(eA.isBlob(e))return e.size;if(eA.isSpecCompliantForm(e)){const t=new Request(SA.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return eA.isArrayBufferView(e)||eA.isArrayBuffer(e)?e.byteLength:(eA.isURLSearchParams(e)&&(e+=""),eA.isString(e)?(await XA(e)).byteLength:void 0)})(t):r},aE={http:null,xhr:HA,fetch:JA&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=BA(e);c=c?(c+"").toLowerCase():"text";let p,f=VA([a,i&&i.toAbortSignal()],o);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&ZA&&"get"!==r&&"head"!==r&&0!==(g=await nE(u,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(eA.isFormData(n)&&(e=r.headers.get("content-type"))&&u.setContentType(e),r.body){const[e,t]=OA(g,LA(_A(l)));n=qA(r.body,65536,e,t)}}eA.isString(d)||(d=d?"include":"omit");const a="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:a?d:void 0});let i=await fetch(p);const o=eE&&("stream"===c||"response"===c);if(eE&&(s||o&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=eA.toFiniteNumber(i.headers.get("content-length")),[r,n]=s&&OA(t,LA(_A(s),!0))||[];i=new Response(qA(i.body,65536,r,(()=>{n&&n(),m&&m()})),e)}c=c||"text";let y=await tE[eA.findKey(tE,c)||"text"](i,e);return!o&&m&&m(),await new Promise(((t,r)=>{DA(t,r,{data:y,headers:MA.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new tA("Network Error",tA.ERR_NETWORK,e,p),{cause:y.cause||y});throw tA.from(y,y&&y.code,e,p)}})};eA.forEach(aE,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(xz){}Object.defineProperty(e,"adapterName",{value:t})}}));const iE=e=>`- ${e}`,oE=e=>eA.isFunction(e)||null===e||!1===e,sE=e=>{e=eA.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!oE(r)&&(n=aE[(t=String(r)).toLowerCase()],void 0===n))throw new tA(`Unknown adapter '${t}'`);if(n)break;a[t||"#"+i]=n}if(!n){const e=Object.entries(a).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new tA("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(iE).join("\n"):" "+iE(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function lE(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zA(null,e)}function cE(e){return lE(e),e.headers=MA.from(e.headers),e.data=TA.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),sE(e.adapter||CA.adapter)(e).then((function(t){return lE(e),t.data=TA.call(e,e.transformResponse,t),t.headers=MA.from(t.headers),t}),(function(t){return RA(t)||(lE(e),t&&t.response&&(t.response.data=TA.call(e,e.transformResponse,t.response),t.response.headers=MA.from(t.response.headers))),Promise.reject(t)}))}const uE="1.9.0",dE={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{dE[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const hE={};dE.transitional=function(e,t,r){return(n,a,i)=>{if(!1===e)throw new tA(function(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(r?". "+r:"")}(a," has been removed"+(t?" in "+t:"")),tA.ERR_DEPRECATED);return t&&!hE[a]&&(hE[a]=!0),!e||e(n,a,i)}},dE.spelling=function(e){return(e,t)=>!0};const pE={assertOptions:function(e,t,r){if("object"!=typeof e)throw new tA("options must be an object",tA.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new tA("option "+i+" must be "+r,tA.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new tA("Unknown option "+i,tA.ERR_BAD_OPTION)}},validators:dE},fE=pE.validators;let mE=class{constructor(e){this.defaults=e||{},this.interceptors={request:new fA,response:new fA}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(xz){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=UA(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&pE.assertOptions(r,{silentJSONParsing:fE.transitional(fE.boolean),forcedJSONParsing:fE.transitional(fE.boolean),clarifyTimeoutError:fE.transitional(fE.boolean)},!1),null!=n&&(eA.isFunction(n)?t.paramsSerializer={serialize:n}:pE.assertOptions(n,{encode:fE.function,serialize:fE.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),pE.assertOptions(t,{baseUrl:fE.spelling("baseURL"),withXsrfToken:fE.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&eA.merge(a.common,a[t.method]);a&&eA.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=MA.concat(i,a);const o=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[cE.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(vz){t.call(this,vz);break}}try{c=cE.call(this,h)}catch(vz){return Promise.reject(vz)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return pA(NA((e=UA(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};eA.forEach(["delete","get","head","options"],(function(e){mE.prototype[e]=function(t,r){return this.request(UA(r||{},{method:e,url:t,data:(r||{}).data}))}})),eA.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,a){return this.request(UA(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}mE.prototype[e]=t(),mE.prototype[e+"Form"]=t(!0)}));const gE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gE).forEach((([e,t])=>{gE[t]=e}));const yE=function e(t){const r=new mE(t),n=pP(mE.prototype.request,r);return eA.extend(n,mE.prototype,r,{allOwnKeys:!0}),eA.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(UA(t,r))},n}(CA);yE.Axios=mE,yE.CanceledError=zA,yE.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,a){r.reason||(r.reason=new zA(e,n,a),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},yE.isCancel=RA,yE.VERSION=uE,yE.toFormData=lA,yE.AxiosError=tA,yE.Cancel=yE.CanceledError,yE.all=function(e){return Promise.all(e)},yE.spread=function(e){return function(t){return e.apply(null,t)}},yE.isAxiosError=function(e){return eA.isObject(e)&&!0===e.isAxiosError},yE.mergeConfig=UA,yE.AxiosHeaders=MA,yE.formToJSON=e=>jA(eA.isHTMLForm(e)?new FormData(e):e),yE.getAdapter=sE,yE.HttpStatusCode=gE,yE.default=yE;const{Axios:bE,AxiosError:xE,CanceledError:vE,isCancel:wE,CancelToken:SE,VERSION:jE,all:CE,Cancel:kE,isAxiosError:PE,spread:AE,toFormData:EE,AxiosHeaders:IE,HttpStatusCode:ME,formToJSON:TE,getAdapter:RE,mergeConfig:zE}=yE,DE={API_KEY:"7f664029662dd6948a5b23dc9b3c734f",BASE_URL:"https://ws.audioscrobbler.com/2.0/",RATE_LIMIT_DELAY:200,CACHE_DURATION:864e5,MAX_SIMILAR_ARTISTS:50},LE=()=>DE.API_KEY.length>0,OE={maxEntries:1e4,popularArtistTTL:2592e6,mediumArtistTTL:12096e5,obscureArtistTTL:6048e5,cleanupInterval:36e5,backupInterval:864e5},_E=new class{constructor(e={}){r(this,"cache",new Map),r(this,"statistics"),r(this,"config"),r(this,"cleanupTimer"),r(this,"backupTimer"),r(this,"STORAGE_KEY","power_hour_artist_cache"),r(this,"STATS_KEY","power_hour_cache_stats"),r(this,"BACKUP_KEY","power_hour_cache_backup"),this.config={...OE,...e},this.statistics=this.initializeStatistics(),this.loadCache(),this.startCleanupTimer(),this.startBackupTimer()}get(e){const t=this.normalizeArtistName(e),r=this.cache.get(t);return r?Date.now()>r.metadata.expiresAt?(this.cache.delete(t),this.statistics.missCount++,this.updateHitRate(),null):(r.metadata.lastAccessed=Date.now(),r.metadata.accessCount++,this.statistics.hitCount++,this.updateHitRate(),r):(this.statistics.missCount++,this.updateHitRate(),null)}set(e,t,r={}){const n=this.normalizeArtistName(e),a=Date.now(),i=this.determinePopularity(t,r.accessCount||0),o={artist:n,similarArtists:t,metadata:{timestamp:a,expiresAt:a+this.getTTLForPopularity(i),popularity:i,lastAccessed:a,accessCount:1,source:r.source||"lastfm",apiCallCount:r.apiCallCount||1,...r},genres:this.extractGenres(t),tags:this.extractTags(t),playcount:r.apiCallCount||0};this.cache.set(n,o),this.statistics.totalEntries=this.cache.size,this.cache.size>this.config.maxEntries&&this.performCleanup(),this.saveCache()}has(e){return null!==this.get(e)}getStatistics(){return this.updateStatistics(),{...this.statistics}}clear(){this.cache.clear(),this.statistics=this.initializeStatistics(),localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.STATS_KEY)}exportCache(){const e={cache:Object.fromEntries(this.cache.entries()),statistics:this.statistics,timestamp:Date.now(),version:"1.0"};return JSON.stringify(e,null,2)}importCache(e){try{const t=JSON.parse(e);if(!t.cache||!t.statistics)throw new Error("Invalid cache data format");return this.cache=new Map(Object.entries(t.cache)),this.statistics={...this.statistics,...t.statistics},this.saveCache(),!0}catch(vz){return!1}}getExpiringEntries(e=24){const t=Date.now()+60*e*60*1e3;return Array.from(this.cache.values()).filter((e=>e.metadata.expiresAt<=t)).sort(((e,t)=>e.metadata.expiresAt-t.metadata.expiresAt))}async refreshExpiringEntries(){this.getExpiringEntries(48).forEach((e=>{}))}getPopularArtists(e=10){return Array.from(this.cache.values()).sort(((e,t)=>t.metadata.accessCount-e.metadata.accessCount)).slice(0,e).map((e=>e.artist))}getRecentlyAccessed(e=10){return Array.from(this.cache.values()).sort(((e,t)=>t.metadata.lastAccessed-e.metadata.lastAccessed)).slice(0,e).map((e=>e.artist))}normalizeArtistName(e){return e.trim().toLowerCase()}determinePopularity(e,t){const r=e.reduce(((e,t)=>e+t.similarity),0)/e.length;return t>10||r>.8||e.length>40?"high":t>3||r>.6||e.length>20?"medium":"low"}getTTLForPopularity(e){switch(e){case"high":return this.config.popularArtistTTL;case"medium":return this.config.mediumArtistTTL;case"low":return this.config.obscureArtistTTL}}extractGenres(e){const t=new Set;return e.forEach((e=>{e.genres?.forEach((e=>t.add(e)))})),Array.from(t)}extractTags(e){const t=new Set;return e.forEach((e=>{e.tags?.forEach((e=>t.add(e)))})),Array.from(t)}initializeStatistics(){const e=localStorage.getItem(this.STATS_KEY);if(e)try{return JSON.parse(e)}catch(vz){}return{totalEntries:0,hitCount:0,missCount:0,hitRate:0,totalSize:0,oldestEntry:Date.now(),newestEntry:Date.now(),popularArtists:[],recentlyAccessed:[],expiringEntries:0}}updateHitRate(){const e=this.statistics.hitCount+this.statistics.missCount;this.statistics.hitRate=e>0?this.statistics.hitCount/e*100:0}updateStatistics(){if(this.statistics.totalEntries=this.cache.size,this.statistics.popularArtists=this.getPopularArtists(5),this.statistics.recentlyAccessed=this.getRecentlyAccessed(5),this.statistics.expiringEntries=this.getExpiringEntries(24).length,this.cache.size>0){const e=Array.from(this.cache.values()).map((e=>e.metadata.timestamp));this.statistics.oldestEntry=Math.min(...e),this.statistics.newestEntry=Math.max(...e)}this.statistics.totalSize=JSON.stringify(Object.fromEntries(this.cache.entries())).length}loadCache(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e){const t=JSON.parse(e);this.cache=new Map(Object.entries(t)),this.performCleanup()}}catch(vz){this.cache=new Map}}saveCache(){try{const e=Object.fromEntries(this.cache.entries());localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),localStorage.setItem(this.STATS_KEY,JSON.stringify(this.statistics))}catch(vz){}}performCleanup(){const e=Date.now();let t=0;for(const[r,n]of this.cache.entries())e>n.metadata.expiresAt&&(this.cache.delete(r),t++);if(this.cache.size>this.config.maxEntries){const e=Array.from(this.cache.entries()).sort((([,e],[,t])=>e.metadata.lastAccessed-t.metadata.lastAccessed)),r=this.cache.size-this.config.maxEntries;for(let n=0;n<r;n++)this.cache.delete(e[n][0]),t++}t>0&&this.saveCache()}startCleanupTimer(){this.cleanupTimer=setInterval((()=>{this.performCleanup()}),this.config.cleanupInterval)}startBackupTimer(){this.backupTimer=setInterval((()=>{const e=this.exportCache();localStorage.setItem(this.BACKUP_KEY,e)}),this.config.backupInterval)}destroy(){this.cleanupTimer&&clearInterval(this.cleanupTimer),this.backupTimer&&clearInterval(this.backupTimer)}},FE={genesis:[{name:"Genesis",disambiguationTerms:["progressive rock","phil collins","peter gabriel","british"],genres:["progressive rock","art rock","pop rock"],activeYears:"1967-present",country:"UK",description:"British progressive rock band formed in 1967"},{name:"Genesis",disambiguationTerms:["rapper","hip hop","american"],genres:["hip hop","rap"],activeYears:"1990s-2000s",country:"USA",description:"American rapper from the 1990s"}],bush:[{name:"Bush",disambiguationTerms:["grunge","alternative rock","gavin rossdale","british"],genres:["grunge","alternative rock","post-grunge"],activeYears:"1992-present",country:"UK",description:"British grunge/alternative rock band"},{name:"Bush",disambiguationTerms:["canadian","indie rock"],genres:["indie rock","alternative rock"],activeYears:"1990s",country:"Canada",description:"Canadian indie rock band"}],america:[{name:"America",disambiguationTerms:["folk rock","horse with no name","1970s"],genres:["folk rock","soft rock","country rock"],activeYears:"1970-present",country:"USA",description:'American folk rock band known for "A Horse with No Name"'}],kansas:[{name:"Kansas",disambiguationTerms:["progressive rock","carry on wayward son","dust in the wind"],genres:["progressive rock","arena rock","hard rock"],activeYears:"1973-present",country:"USA",description:"American progressive rock band"}],chicago:[{name:"Chicago",disambiguationTerms:["rock band","horn section","saturday in the park"],genres:["rock","jazz rock","soft rock"],activeYears:"1967-present",country:"USA",description:"American rock band with horn section"}],boston:[{name:"Boston",disambiguationTerms:["arena rock","more than a feeling","tom scholz"],genres:["arena rock","hard rock","classic rock"],activeYears:"1976-present",country:"USA",description:"American arena rock band"}],europe:[{name:"Europe",disambiguationTerms:["swedish","the final countdown","hard rock"],genres:["hard rock","heavy metal","glam metal"],activeYears:"1979-present",country:"Sweden",description:'Swedish hard rock band known for "The Final Countdown"'}],asia:[{name:"Asia",disambiguationTerms:["supergroup","progressive rock","heat of the moment"],genres:["progressive rock","arena rock","art rock"],activeYears:"1981-present",country:"UK",description:"British progressive rock supergroup"}],journey:[{name:"Journey",disambiguationTerms:["arena rock","steve perry","dont stop believin"],genres:["arena rock","soft rock","hard rock"],activeYears:"1973-present",country:"USA",description:"American arena rock band"}],foreigner:[{name:"Foreigner",disambiguationTerms:["arena rock","i want to know what love is","cold as ice"],genres:["arena rock","hard rock","soft rock"],activeYears:"1976-present",country:"USA/UK",description:"British-American arena rock band"}],"the police":[{name:"The Police",disambiguationTerms:["sting","new wave","every breath you take"],genres:["new wave","post-punk","reggae rock"],activeYears:"1977-1986, 2007-2008",country:"UK",description:"British new wave band fronted by Sting"}],cream:[{name:"Cream",disambiguationTerms:["eric clapton","ginger baker","jack bruce","blues rock"],genres:["blues rock","psychedelic rock","hard rock"],activeYears:"1966-1968, 1993, 2005",country:"UK",description:"British blues rock supergroup with Eric Clapton"}]},$E=new class{disambiguateArtist(e,t){const r=e.toLowerCase().trim(),n=FE[r];if(!n||1===n.length)return{originalQuery:e,disambiguatedQuery:e,confidence:"high",method:"exact_match"};const a=this.disambiguateWithContext(e,n,t);return a||{originalQuery:e,disambiguatedQuery:e,confidence:"low",method:"manual_disambiguation",suggestions:n}}createDisambiguatedQuery(e,t){const r=this.disambiguateArtist(e,t);if("high"===r.confidence||"medium"===r.confidence){const n=this.getDisambiguationInfo(e,r.method,t);if(n)return`${e} ${n.disambiguationTerms.slice(0,2).join(" ")}`}return e}getLastFmQuery(e,t){return this.createDisambiguatedQuery(e,t)}getYouTubeQuery(e,t,r){const n=this.createDisambiguatedQuery(e,r);return t?`${n} ${t}`:`${n} songs`}disambiguateWithContext(e,t,r){if(!r)return null;if(r.genres||r.seedGenres){const n=[...r.genres||[],...r.seedGenres||[]];for(const r of t)if(r.genres.some((e=>n.some((t=>e.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.toLowerCase()))))))return{originalQuery:e,disambiguatedQuery:this.buildDisambiguatedQuery(e,r),confidence:"high",method:"genre_context"}}return r.seedArtist,null}buildDisambiguatedQuery(e,t){return`${e} ${t.disambiguationTerms.slice(0,2).join(" ")}`}getDisambiguationInfo(e,t,r){const n=e.toLowerCase().trim(),a=FE[n];if(!a||1===a.length)return a?.[0]||null;if(r?.genres||r?.seedGenres){const e=[...r.genres||[],...r.seedGenres||[]];for(const t of a)if(t.genres.some((t=>e.some((e=>t.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.toLowerCase()))))))return t}return a[0]}addDisambiguationEntry(e,t){const r=e.toLowerCase().trim();FE[r]||(FE[r]=[]),FE[r].push(t)}getAmbiguousArtists(){return Object.keys(FE)}isAmbiguous(e){const t=e.toLowerCase().trim(),r=FE[t];return r&&r.length>1}getDisambiguationSuggestions(e){const t=e.toLowerCase().trim();return FE[t]||[]}},NE=new class{constructor(){r(this,"cache",new Map),r(this,"lastRequestTime",0),r(this,"rateLimitRemaining",1e3),r(this,"rateLimitResetTime",Date.now()+36e5),this.loadCache(),LE()}async getSimilarArtists(e,t=50,r){this.normalizeArtistName(e);const n=$E.disambiguateArtist(e,r);"low"===n.confidence&&n.suggestions&&n.suggestions.forEach(((e,t)=>{}));const a=$E.getLastFmQuery(e,r),i=this.normalizeArtistName(a),o=_E.get(i);if(o)return o.similarArtists.slice(0,t);const s=this.getCachedResult(i);if(s)return _E.set(i,s.similarArtists,{source:"lastfm",apiCallCount:1}),s.similarArtists.slice(0,t);try{const e=await this.getExpandedSimilarArtists(a,t);return this.cacheResult(i,e),_E.set(i,e,{source:"lastfm",apiCallCount:this.getApiCallCount(e.length)}),e.slice(0,t)}catch(vz){return yE.isAxiosError(vz)&&vz.response&&vz.response.data,[]}}async getExpandedSimilarArtists(e,t){const r=new Map,n=e.toLowerCase();await this.enforceRateLimit();const a=await this.makeLastFmRequest("artist.getSimilar",{artist:e,limit:"50",autocorrect:"1"}),i=this.parseLastFmResponse(a.data,e);if(i.forEach((e=>{e.name.toLowerCase()!==n&&r.set(e.name.toLowerCase(),e)})),r.size<t&&i.length>0){const e=i.slice(0,Math.min(5,i.length));for(const a of e){if(r.size>=t)break;try{await this.enforceRateLimit();const e=await this.makeLastFmRequest("artist.getSimilar",{artist:a.name,limit:"30",autocorrect:"1"});this.parseLastFmResponse(e.data,a.name).forEach((e=>{const t=e.name.toLowerCase();t===n||r.has(t)||r.set(t,{...e,similarity:.7*e.similarity})}))}catch(vz){continue}}}return Array.from(r.values()).sort(((e,t)=>t.similarity-e.similarity))}isAvailable(){return LE()}clearCache(e){if(e){const t=this.normalizeArtistName(e);this.cache.delete(t)}else this.cache.clear(),localStorage.removeItem("music_similarity_cache")}getRateLimit(){return{remaining:this.rateLimitRemaining,resetTime:this.rateLimitResetTime}}async getArtistInfo(e){if(!this.isAvailable())return null;try{await this.enforceRateLimit();const t=(await this.makeLastFmRequest("artist.getInfo",{artist:this.normalizeArtistName(e),autocorrect:"1"})).data.artist;if(!t)return null;const r=[],n=[];t.tags&&t.tags.tag&&(Array.isArray(t.tags.tag)?t.tags.tag:[t.tags.tag]).forEach((e=>{e.name&&(n.push(e.name.toLowerCase()),this.isGenreTag(e.name)&&r.push(e.name.toLowerCase()))}));const a=parseInt(t.stats?.playcount||"0");return{genres:r,tags:n,playcount:a}}catch(vz){return null}}isGenreTag(e){const t=e.toLowerCase();return["rock","pop","hip hop","rap","electronic","dance","house","techno","jazz","blues","country","folk","classical","metal","punk","reggae","r&b","soul","funk","disco","indie","alternative","grunge","emo","ambient","experimental","world","latin","acoustic","instrumental"].some((e=>t.includes(e)))}async makeLastFmRequest(e,t){const r={method:e,api_key:DE.API_KEY,format:"json",...t};try{const e=await yE.get(DE.BASE_URL,{params:r,timeout:15e3,headers:{Accept:"application/json","Content-Type":"application/json"},validateStatus:e=>e<500});if(e.headers["x-ratelimit-remaining"]&&(this.rateLimitRemaining=parseInt(e.headers["x-ratelimit-remaining"])),e.headers["x-ratelimit-reset"]&&(this.rateLimitResetTime=1e3*parseInt(e.headers["x-ratelimit-reset"])),e.data&&e.data.error){const t=`Last.fm API Error ${e.data.error}: ${e.data.message}`;throw new Error(t)}return e}catch(vz){if(yE.isAxiosError(vz)){if("ECONNABORTED"===vz.code)throw new Error("Last.fm API request timed out");if(vz.response)throw new Error(`Last.fm API HTTP error: ${vz.response.status}`);if(vz.request)throw new Error("Last.fm API network error - check internet connection")}throw vz}}parseLastFmResponse(e,t){return e.similarartists&&e.similarartists.artist?(Array.isArray(e.similarartists.artist)?e.similarartists.artist:[e.similarartists.artist]).map((e=>({name:e.name,similarity:parseFloat(e.match),mbid:e.mbid||void 0,url:e.url,image:this.extractBestImage(e.image),genres:[],tags:[],playcount:0}))).filter((e=>e.name.toLowerCase()!==t.toLowerCase())).sort(((e,t)=>t.similarity-e.similarity)):[]}extractBestImage(e){if(!e||0===e.length)return;const t=["extralarge","large","medium","small"];for(const r of t){const t=e.find((e=>e.size===r));if(t&&t["#text"])return t["#text"]}return e[0]?.["#text"]||void 0}normalizeArtistName(e){return e.trim().toLowerCase()}async enforceRateLimit(){const e=Date.now()-this.lastRequestTime;if(e<DE.RATE_LIMIT_DELAY){const t=DE.RATE_LIMIT_DELAY-e;await new Promise((e=>setTimeout(e,t)))}this.lastRequestTime=Date.now()}getCachedResult(e){const t=this.cache.get(e);return t?Date.now()>t.expiresAt?(this.cache.delete(e),null):t:null}cacheResult(e,t){const r={artist:e,similarArtists:t,timestamp:Date.now(),expiresAt:Date.now()+DE.CACHE_DURATION};this.cache.set(e,r),this.saveCache()}loadCache(){try{const e=localStorage.getItem("music_similarity_cache");if(e){const t=JSON.parse(e);this.cache=new Map(Object.entries(t));const r=Date.now();for(const[e,n]of this.cache.entries())r>n.expiresAt&&this.cache.delete(e)}}catch(vz){this.cache=new Map}}saveCache(){try{const e=Object.fromEntries(this.cache.entries());localStorage.setItem("music_similarity_cache",JSON.stringify(e))}catch(vz){}}getCacheStats(){let e=Date.now(),t=0;for(const r of this.cache.values())r.timestamp<e&&(e=r.timestamp),r.timestamp>t&&(t=r.timestamp);return{size:this.cache.size,oldestEntry:e,newestEntry:t,persistentStats:_E.getStatistics()}}getApiCallCount(e){return e<=50?1:e<=100?2:e<=150?3:Math.ceil(e/50)}},WE={goose:[{name:"Phish",similarity:.85,genres:["jam band","rock"],tags:["improvisational","psychedelic"]},{name:"Widespread Panic",similarity:.82,genres:["jam band","southern rock"],tags:["improvisational","blues"]},{name:"String Cheese Incident",similarity:.8,genres:["jam band","bluegrass"],tags:["improvisational","folk"]},{name:"Umphrey's McGee",similarity:.78,genres:["jam band","progressive rock"],tags:["improvisational","metal"]},{name:"Trey Anastasio Band",similarity:.75,genres:["jam band","rock"],tags:["improvisational","psychedelic"]},{name:"moe.",similarity:.73,genres:["jam band","rock"],tags:["improvisational","alternative"]},{name:"The New Deal",similarity:.7,genres:["jam band","electronic"],tags:["improvisational","trance"]},{name:"Lotus",similarity:.68,genres:["jam band","electronic"],tags:["improvisational","dance"]},{name:"Disco Biscuits",similarity:.65,genres:["jam band","electronic"],tags:["improvisational","trance"]},{name:"Pigeons Playing Ping Pong",similarity:.63,genres:["jam band","funk"],tags:["improvisational","psychedelic"]},{name:"Spafford",similarity:.6,genres:["jam band","rock"],tags:["improvisational","progressive"]},{name:"Aqueous",similarity:.58,genres:["jam band","rock"],tags:["improvisational","progressive"]},{name:"Dopapod",similarity:.55,genres:["jam band","electronic"],tags:["improvisational","funk"]},{name:"Tauk",similarity:.53,genres:["jam band","instrumental"],tags:["improvisational","progressive"]},{name:"Lettuce",similarity:.5,genres:["funk","jam band"],tags:["improvisational","soul"]}],phish:[{name:"Grateful Dead",similarity:.9,genres:["jam band","rock"],tags:["improvisational","psychedelic"]},{name:"Goose",similarity:.85,genres:["jam band","rock"],tags:["improvisational","psychedelic"]},{name:"Widespread Panic",similarity:.83,genres:["jam band","southern rock"],tags:["improvisational","blues"]},{name:"String Cheese Incident",similarity:.8,genres:["jam band","bluegrass"],tags:["improvisational","folk"]},{name:"Umphrey's McGee",similarity:.78,genres:["jam band","progressive rock"],tags:["improvisational","metal"]},{name:"moe.",similarity:.75,genres:["jam band","rock"],tags:["improvisational","alternative"]},{name:"The New Deal",similarity:.7,genres:["jam band","electronic"],tags:["improvisational","trance"]},{name:"Disco Biscuits",similarity:.68,genres:["jam band","electronic"],tags:["improvisational","trance"]},{name:"Lotus",similarity:.65,genres:["jam band","electronic"],tags:["improvisational","dance"]},{name:"Spafford",similarity:.63,genres:["jam band","rock"],tags:["improvisational","progressive"]}],"grateful dead":[{name:"Phish",similarity:.9,genres:["jam band","rock"],tags:["improvisational","psychedelic"]},{name:"Jerry Garcia Band",similarity:.85,genres:["jam band","rock"],tags:["improvisational","blues"]},{name:"Widespread Panic",similarity:.8,genres:["jam band","southern rock"],tags:["improvisational","blues"]},{name:"String Cheese Incident",similarity:.75,genres:["jam band","bluegrass"],tags:["improvisational","folk"]},{name:"Dark Star Orchestra",similarity:.7,genres:["jam band","rock"],tags:["improvisational","tribute"]},{name:"Goose",similarity:.68,genres:["jam band","rock"],tags:["improvisational","psychedelic"]}],"taylor swift":[{name:"Olivia Rodrigo",similarity:.85,genres:["pop","alternative"],tags:["singer-songwriter","indie pop"]},{name:"Ariana Grande",similarity:.8,genres:["pop","r&b"],tags:["contemporary","dance pop"]},{name:"Billie Eilish",similarity:.75,genres:["pop","alternative"],tags:["indie pop","electropop"]},{name:"Dua Lipa",similarity:.73,genres:["pop","dance"],tags:["dance pop","electropop"]},{name:"Lorde",similarity:.7,genres:["pop","alternative"],tags:["indie pop","electropop"]},{name:"Katy Perry",similarity:.68,genres:["pop","dance"],tags:["dance pop","electropop"]},{name:"Ed Sheeran",similarity:.65,genres:["pop","folk"],tags:["singer-songwriter","acoustic"]},{name:"Selena Gomez",similarity:.63,genres:["pop","dance"],tags:["dance pop","latin pop"]},{name:"Miley Cyrus",similarity:.6,genres:["pop","rock"],tags:["pop rock","country pop"]},{name:"Halsey",similarity:.58,genres:["pop","alternative"],tags:["indie pop","electropop"]}],"ariana grande":[{name:"Taylor Swift",similarity:.8,genres:["pop","country"],tags:["singer-songwriter","pop country"]},{name:"Dua Lipa",similarity:.78,genres:["pop","dance"],tags:["dance pop","electropop"]},{name:"The Weeknd",similarity:.75,genres:["r&b","pop"],tags:["contemporary r&b","alternative r&b"]},{name:"Billie Eilish",similarity:.73,genres:["pop","alternative"],tags:["indie pop","electropop"]},{name:"Olivia Rodrigo",similarity:.7,genres:["pop","alternative"],tags:["singer-songwriter","indie pop"]},{name:"Selena Gomez",similarity:.68,genres:["pop","dance"],tags:["dance pop","latin pop"]},{name:"Katy Perry",similarity:.65,genres:["pop","dance"],tags:["dance pop","electropop"]},{name:"Camila Cabello",similarity:.63,genres:["pop","latin"],tags:["latin pop","dance pop"]}],drake:[{name:"Kendrick Lamar",similarity:.8,genres:["hip hop","rap"],tags:["conscious rap","west coast"]},{name:"J. Cole",similarity:.78,genres:["hip hop","rap"],tags:["conscious rap","southern hip hop"]},{name:"The Weeknd",similarity:.75,genres:["r&b","pop"],tags:["contemporary r&b","alternative r&b"]},{name:"Future",similarity:.73,genres:["hip hop","trap"],tags:["southern hip hop","mumble rap"]},{name:"Travis Scott",similarity:.7,genres:["hip hop","trap"],tags:["psychedelic rap","southern hip hop"]},{name:"Post Malone",similarity:.68,genres:["hip hop","pop"],tags:["melodic rap","pop rap"]},{name:"Lil Wayne",similarity:.65,genres:["hip hop","rap"],tags:["southern hip hop","hardcore hip hop"]},{name:"Kanye West",similarity:.63,genres:["hip hop","rap"],tags:["conscious rap","experimental hip hop"]},{name:"Big Sean",similarity:.6,genres:["hip hop","rap"],tags:["midwest hip hop","contemporary rap"]},{name:"Tory Lanez",similarity:.58,genres:["hip hop","r&b"],tags:["melodic rap","contemporary r&b"]}],"kendrick lamar":[{name:"J. Cole",similarity:.85,genres:["hip hop","rap"],tags:["conscious rap","southern hip hop"]},{name:"Drake",similarity:.8,genres:["hip hop","r&b"],tags:["contemporary rap","melodic rap"]},{name:"Kanye West",similarity:.78,genres:["hip hop","rap"],tags:["conscious rap","experimental hip hop"]},{name:"Tyler, The Creator",similarity:.75,genres:["hip hop","alternative"],tags:["alternative hip hop","experimental"]},{name:"Childish Gambino",similarity:.73,genres:["hip hop","r&b"],tags:["alternative hip hop","funk"]},{name:"Chance the Rapper",similarity:.7,genres:["hip hop","gospel"],tags:["conscious rap","gospel rap"]},{name:"Joey Bada$$",similarity:.68,genres:["hip hop","rap"],tags:["east coast hip hop","boom bap"]},{name:"Vince Staples",similarity:.65,genres:["hip hop","rap"],tags:["west coast hip hop","alternative hip hop"]}],"the beatles":[{name:"The Rolling Stones",similarity:.85,genres:["rock","classic rock"],tags:["british invasion","blues"]},{name:"Led Zeppelin",similarity:.8,genres:["rock","hard rock"],tags:["classic rock","blues"]},{name:"The Who",similarity:.78,genres:["rock","hard rock"],tags:["british invasion","progressive"]},{name:"Pink Floyd",similarity:.75,genres:["rock","progressive rock"],tags:["psychedelic","experimental"]},{name:"The Kinks",similarity:.73,genres:["rock","pop rock"],tags:["british invasion","alternative"]},{name:"The Beach Boys",similarity:.7,genres:["pop","rock"],tags:["surf rock","psychedelic"]},{name:"Bob Dylan",similarity:.68,genres:["folk","rock"],tags:["singer-songwriter","folk rock"]},{name:"The Byrds",similarity:.65,genres:["folk rock","country rock"],tags:["psychedelic","jangle pop"]}],"led zeppelin":[{name:"Black Sabbath",similarity:.85,genres:["rock","heavy metal"],tags:["hard rock","doom metal"]},{name:"Deep Purple",similarity:.83,genres:["rock","hard rock"],tags:["classic rock","heavy metal"]},{name:"The Rolling Stones",similarity:.8,genres:["rock","classic rock"],tags:["british invasion","blues"]},{name:"AC/DC",similarity:.78,genres:["rock","hard rock"],tags:["classic rock","heavy metal"]},{name:"The Who",similarity:.75,genres:["rock","hard rock"],tags:["british invasion","progressive"]},{name:"Queen",similarity:.73,genres:["rock","arena rock"],tags:["classic rock","progressive"]},{name:"Aerosmith",similarity:.7,genres:["rock","hard rock"],tags:["classic rock","blues rock"]},{name:"The Beatles",similarity:.68,genres:["rock","pop"],tags:["british invasion","psychedelic"]}],queen:[{name:"Led Zeppelin",similarity:.8,genres:["rock","hard rock"],tags:["classic rock","blues"]},{name:"The Who",similarity:.78,genres:["rock","hard rock"],tags:["british invasion","progressive"]},{name:"David Bowie",similarity:.75,genres:["rock","glam rock"],tags:["art rock","experimental"]},{name:"Elton John",similarity:.73,genres:["rock","pop"],tags:["piano rock","glam rock"]},{name:"The Rolling Stones",similarity:.7,genres:["rock","classic rock"],tags:["british invasion","blues"]},{name:"AC/DC",similarity:.68,genres:["rock","hard rock"],tags:["classic rock","heavy metal"]},{name:"Aerosmith",similarity:.65,genres:["rock","hard rock"],tags:["classic rock","blues rock"]}],jazz:[{name:"Miles Davis",similarity:.9,genres:["jazz","bebop"],tags:["trumpet","cool jazz"]},{name:"John Coltrane",similarity:.88,genres:["jazz","bebop"],tags:["saxophone","spiritual jazz"]},{name:"Bill Evans",similarity:.85,genres:["jazz","cool jazz"],tags:["piano","modal jazz"]},{name:"Charlie Parker",similarity:.83,genres:["jazz","bebop"],tags:["saxophone","hard bop"]},{name:"Thelonious Monk",similarity:.8,genres:["jazz","bebop"],tags:["piano","avant-garde"]}],blues:[{name:"B.B. King",similarity:.9,genres:["blues","electric blues"],tags:["guitar","chicago blues"]},{name:"Muddy Waters",similarity:.88,genres:["blues","chicago blues"],tags:["guitar","electric blues"]},{name:"Robert Johnson",similarity:.85,genres:["blues","delta blues"],tags:["guitar","acoustic"]},{name:"Howlin' Wolf",similarity:.83,genres:["blues","chicago blues"],tags:["harmonica","electric blues"]},{name:"Stevie Ray Vaughan",similarity:.8,genres:["blues","texas blues"],tags:["guitar","blues rock"]}],deadmau5:[{name:"Skrillex",similarity:.8,genres:["electronic","dubstep"],tags:["edm","bass music"]},{name:"Calvin Harris",similarity:.78,genres:["electronic","house"],tags:["edm","dance"]},{name:"Avicii",similarity:.75,genres:["electronic","house"],tags:["edm","progressive house"]},{name:"Tisto",similarity:.73,genres:["electronic","trance"],tags:["edm","progressive trance"]},{name:"David Guetta",similarity:.7,genres:["electronic","house"],tags:["edm","electro house"]},{name:"Daft Punk",similarity:.68,genres:["electronic","house"],tags:["french house","disco"]},{name:"Diplo",similarity:.65,genres:["electronic","trap"],tags:["edm","moombahton"]},{name:"Zedd",similarity:.63,genres:["electronic","electro house"],tags:["edm","progressive house"]}],"daft punk":[{name:"Justice",similarity:.85,genres:["electronic","house"],tags:["french house","electro"]},{name:"Moderat",similarity:.8,genres:["electronic","techno"],tags:["minimal techno","ambient"]},{name:"Deadmau5",similarity:.78,genres:["electronic","progressive house"],tags:["edm","techno"]},{name:"Chemical Brothers",similarity:.75,genres:["electronic","big beat"],tags:["breakbeat","acid house"]},{name:"Fatboy Slim",similarity:.73,genres:["electronic","big beat"],tags:["breakbeat","house"]},{name:"Basement Jaxx",similarity:.7,genres:["electronic","house"],tags:["uk garage","breakbeat"]},{name:"Kraftwerk",similarity:.68,genres:["electronic","synthpop"],tags:["krautrock","experimental"]}],"johnny cash":[{name:"Hank Williams",similarity:.85,genres:["country","honky tonk"],tags:["classic country","traditional"]},{name:"Willie Nelson",similarity:.83,genres:["country","outlaw country"],tags:["folk","americana"]},{name:"Waylon Jennings",similarity:.8,genres:["country","outlaw country"],tags:["rockabilly","honky tonk"]},{name:"Merle Haggard",similarity:.78,genres:["country","bakersfield sound"],tags:["honky tonk","traditional"]},{name:"Kris Kristofferson",similarity:.75,genres:["country","folk"],tags:["singer-songwriter","outlaw country"]},{name:"George Jones",similarity:.73,genres:["country","honky tonk"],tags:["traditional country","classic"]},{name:"Patsy Cline",similarity:.7,genres:["country","pop"],tags:["traditional country","crossover"]}],radiohead:[{name:"Thom Yorke",similarity:.85,genres:["alternative","electronic"],tags:["experimental","art rock"]},{name:"Coldplay",similarity:.75,genres:["alternative","rock"],tags:["britpop","post-britpop"]},{name:"Muse",similarity:.73,genres:["alternative","rock"],tags:["progressive rock","space rock"]},{name:"Arcade Fire",similarity:.7,genres:["indie rock","alternative"],tags:["art rock","baroque pop"]},{name:"The National",similarity:.68,genres:["indie rock","alternative"],tags:["post-punk revival","art rock"]},{name:"Vampire Weekend",similarity:.65,genres:["indie rock","alternative"],tags:["indie pop","afropop"]},{name:"Bon Iver",similarity:.63,genres:["indie folk","alternative"],tags:["folktronica","art folk"]}],"the weeknd":[{name:"Frank Ocean",similarity:.85,genres:["r&b","alternative"],tags:["alternative r&b","neo soul"]},{name:"Drake",similarity:.8,genres:["hip hop","r&b"],tags:["contemporary rap","melodic rap"]},{name:"Ariana Grande",similarity:.78,genres:["pop","r&b"],tags:["contemporary","dance pop"]},{name:"Bruno Mars",similarity:.75,genres:["pop","r&b"],tags:["funk","soul"]},{name:"John Legend",similarity:.73,genres:["r&b","soul"],tags:["contemporary r&b","neo soul"]},{name:"Miguel",similarity:.7,genres:["r&b","alternative"],tags:["alternative r&b","funk"]},{name:"Daniel Caesar",similarity:.68,genres:["r&b","soul"],tags:["neo soul","alternative r&b"]}],metallica:[{name:"Iron Maiden",similarity:.85,genres:["metal","heavy metal"],tags:["nwobhm","power metal"]},{name:"Black Sabbath",similarity:.83,genres:["metal","heavy metal"],tags:["doom metal","hard rock"]},{name:"Megadeth",similarity:.8,genres:["metal","thrash metal"],tags:["speed metal","heavy metal"]},{name:"Slayer",similarity:.78,genres:["metal","thrash metal"],tags:["speed metal","death metal"]},{name:"Anthrax",similarity:.75,genres:["metal","thrash metal"],tags:["speed metal","hardcore"]},{name:"Judas Priest",similarity:.73,genres:["metal","heavy metal"],tags:["nwobhm","speed metal"]},{name:"Pantera",similarity:.7,genres:["metal","groove metal"],tags:["thrash metal","heavy metal"]}],"imagine dragons":[{name:"OneRepublic",similarity:.8,genres:["pop rock","alternative"],tags:["arena rock","mainstream"]},{name:"Maroon 5",similarity:.75,genres:["pop rock","alternative"],tags:["pop","mainstream"]},{name:"Coldplay",similarity:.73,genres:["alternative rock","pop rock"],tags:["britpop","arena rock"]},{name:"The Killers",similarity:.7,genres:["alternative rock","indie rock"],tags:["new wave","post-punk"]},{name:"Fall Out Boy",similarity:.68,genres:["pop punk","alternative rock"],tags:["emo","pop rock"]},{name:"Panic! At The Disco",similarity:.65,genres:["pop rock","alternative"],tags:["emo","theatrical"]}],"foo fighters":[{name:"Nirvana",similarity:.85,genres:["grunge","alternative rock"],tags:["seattle","90s"]},{name:"Pearl Jam",similarity:.83,genres:["grunge","alternative rock"],tags:["seattle","90s"]},{name:"Red Hot Chili Peppers",similarity:.8,genres:["alternative rock","funk rock"],tags:["california","funk"]},{name:"Stone Temple Pilots",similarity:.78,genres:["grunge","alternative rock"],tags:["90s","hard rock"]},{name:"Soundgarden",similarity:.75,genres:["grunge","alternative metal"],tags:["seattle","90s"]},{name:"Alice in Chains",similarity:.73,genres:["grunge","alternative metal"],tags:["seattle","90s"]}],"green day":[{name:"Blink-182",similarity:.85,genres:["pop punk","alternative rock"],tags:["california","90s"]},{name:"The Offspring",similarity:.83,genres:["punk rock","alternative rock"],tags:["california","90s"]},{name:"Sum 41",similarity:.8,genres:["pop punk","alternative rock"],tags:["canadian","2000s"]},{name:"Good Charlotte",similarity:.78,genres:["pop punk","alternative rock"],tags:["emo","2000s"]},{name:"Simple Plan",similarity:.75,genres:["pop punk","alternative rock"],tags:["canadian","2000s"]},{name:"Fall Out Boy",similarity:.73,genres:["pop punk","alternative rock"],tags:["emo","chicago"]}]},UE={phish:["Wilson","You Enjoy Myself","Fluffhead","Harry Hood","Tweezer","Divided Sky","Run Like an Antelope"],"widespread panic":["Chilly Water","Fishwater","Airplane","Porch Song","Tall Boy","Space Wrangler"],"string cheese incident":["Black Clouds","Rollover","Born on the Wrong Planet","Jellyfish","Round the Wheel"],"umphrey's mcgee":["All in Time","Divisions","The Triple Wide","Booth Love","Slacker","Roulette"],"grateful dead":["Truckin","Touch of Grey","Casey Jones","Sugar Magnolia","Fire on the Mountain"],"moe.":["Meat","Rebubula","Timmy Tucker","Brent Black","Nebraska","Captain America"],"disco biscuits":["Helicopters","Basis for a Day","Mindless Dribble","Crickets","The Overture"],lotus:["Greet the Mind","Flower Sermon","Lucid Awakening","Spiritualize","Age of Inexperience"],spafford:["All In","Electric Taco Stand","Minds Unchained","The Postman","Bee Jam"],aqueous:["The Painting","Kitty Hawk","Origami","Underlyer","Color Wheel"],"pigeons playing ping pong":["Melting Lights","Poseidon","Julia","Offshoot","Time to Ride"],goose:["Hungersite","Borne","Your Direction","Madhuvan","Arcadia","Tumble"],"taylor swift":["Shake It Off","Love Story","Blank Space","Anti-Hero","You Belong With Me","Bad Blood"],"ariana grande":["Thank U Next","7 rings","Problem","Break Free","Side to Side","Positions"],"billie eilish":["Bad Guy","Happier Than Ever","Ocean Eyes","Lovely","Therefore I Am","When the Party's Over"],"dua lipa":["Levitating","Don't Start Now","Physical","New Rules","One Kiss","Future Nostalgia"],"olivia rodrigo":["Drivers License","Good 4 U","Vampire","Deja Vu","Brutal","Traitor"],"ed sheeran":["Shape of You","Perfect","Thinking Out Loud","Photograph","Castle on the Hill","Bad Habits"],drake:["God's Plan","In My Feelings","Hotline Bling","One Dance","Started From the Bottom","Nice For What"],"kendrick lamar":["HUMBLE.","DNA.","Swimming Pools","Alright","King Kunta","Money Trees"],"j. cole":["No Role Modelz","Middle Child","GOMD","Work Out","Power Trip","ATM"],"kanye west":["Stronger","Gold Digger","Heartless","Power","All of the Lights","Good Life"],"post malone":["Circles","Sunflower","Rockstar","White Iverson","Congratulations","Better Now"],"the beatles":["Hey Jude","Let It Be","Yesterday","Come Together","Here Comes the Sun","Help!"],"led zeppelin":["Stairway to Heaven","Whole Lotta Love","Kashmir","Black Dog","Rock and Roll","Immigrant Song"],queen:["Bohemian Rhapsody","We Will Rock You","We Are the Champions","Another One Bites the Dust","Somebody to Love","Don't Stop Me Now"],"the rolling stones":["Paint It Black","Start Me Up","Satisfaction","Gimme Shelter","Brown Sugar","Angie"],"pink floyd":["Another Brick in the Wall","Comfortably Numb","Wish You Were Here","Money","Time","Shine On You Crazy Diamond"],deadmau5:["Ghosts 'n' Stuff","Strobe","I Remember","The Veldt","Professional Griefers","Raise Your Weapon"],"daft punk":["Get Lucky","One More Time","Harder Better Faster Stronger","Around the World","Digital Love","Instant Crush"],"calvin harris":["Feel So Close","We Found Love","Summer","This Is What You Came For","One Kiss","Feels"],avicii:["Wake Me Up","Levels","Hey Brother","The Nights","Waiting for Love","Without You"],skrillex:["Bangarang","Scary Monsters and Nice Sprites","First of the Year","Cinema","Where Are  Now","Purple Lamborghini"],"johnny cash":["Ring of Fire","I Walk the Line","Folsom Prison Blues","Hurt","Man in Black","A Boy Named Sue"],"willie nelson":["On the Road Again","Blue Eyes Crying in the Rain","Mammas Don't Let Your Babies Grow Up to Be Cowboys","Always on My Mind","Whiskey River","Georgia on My Mind"],"the weeknd":["Blinding Lights","Can't Feel My Face","The Hills","Starboy","Earned It","I Feel It Coming"],"bruno mars":["Uptown Funk","24K Magic","Just the Way You Are","Grenade","Count on Me","Locked Out of Heaven"],metallica:["Enter Sandman","Master of Puppets","One","Nothing Else Matters","Fade to Black","For Whom the Bell Tolls"],"iron maiden":["The Number of the Beast","Run to the Hills","Fear of the Dark","Aces High","Wasted Years","Hallowed Be Thy Name"],radiohead:["Creep","Karma Police","Paranoid Android","No Surprises","High and Dry","Fake Plastic Trees"],coldplay:["Yellow","Fix You","Viva la Vida","The Scientist","Clocks","Paradise"],"imagine dragons":["Radioactive","Demons","Thunder","Believer","Whatever It Takes","Natural"],"foo fighters":["Everlong","Learn to Fly","The Pretender","My Hero","Times Like These","Best of You"],"green day":["Basket Case","When I Come Around","Longview","American Idiot","Boulevard of Broken Dreams","Good Riddance"],nirvana:["Smells Like Teen Spirit","Come As You Are","Lithium","In Bloom","Heart-Shaped Box","About a Girl"],"pearl jam":["Alive","Even Flow","Jeremy","Black","Better Man","Elderly Woman Behind the Counter"],"red hot chili peppers":["Under the Bridge","Give It Away","Californication","Scar Tissue","By the Way","Dani California"],"blink-182":["All the Small Things","What's My Age Again?","Dammit","I Miss You","Adam's Song","The Rock Show"],"the offspring":["Come Out and Play","Self Esteem","Gotta Get Away","Pretty Fly (For a White Guy)","The Kids Aren't Alright","Hit That"]},BE=new class{getSimilarArtists(e,t=15){const r=e.toLowerCase().trim();return(WE[r]||[]).slice(0,t)}getPopularSongs(e){const t=e.toLowerCase().trim();return UE[t]||[]}hasDataFor(e){return e.toLowerCase().trim()in WE}getSupportedArtists(){return Object.keys(WE)}generateSimilarArtistSearches(e,t=10){const r=this.getSimilarArtists(e,t),n=[];return r.forEach(((e,t)=>{const r=Math.floor(10*e.similarity),a=this.getPopularSongs(e.name);n.push({query:e.name,artist:e.name,priority:r}),a.length>0&&a.slice(0,2).forEach((t=>{n.push({query:`${e.name} ${t}`,artist:e.name,priority:r-1})}))})),n.sort(((e,t)=>t.priority-e.priority))}},HE="https://musicbrainz.org/ws/2/",VE=1e3,YE="PHat5-PowerHour/1.0.0 (https://github.com/your-repo)",GE={"jam band":["phish","grateful dead","goose","widespread panic","string cheese","umphrey","moe","disco biscuits"],"classic rock":["beatles","led zeppelin","queen","rolling stones","pink floyd","the who","deep purple"],pop:["taylor swift","ariana grande","billie eilish","dua lipa","katy perry","selena gomez"],"hip hop":["drake","kendrick lamar","j. cole","kanye west","travis scott","future","lil wayne"],electronic:["deadmau5","daft punk","calvin harris","skrillex","avicii","tiesto","david guetta"],country:["johnny cash","willie nelson","dolly parton","garth brooks","keith urban","carrie underwood"],metal:["metallica","iron maiden","black sabbath","megadeth","slayer","judas priest","pantera"],alternative:["radiohead","nirvana","pearl jam","soundgarden","alice in chains","stone temple pilots"]},qE=new class{constructor(){r(this,"lastRequestTime",0)}async findSimilarArtists(e,t=15){try{let r=await this.tryMusicBrainzDiscovery(e,t);return 0===r.length&&(r=await this.tryGenreBasedDiscovery(e,t)),0===r.length&&(r=await this.tryPatternBasedDiscovery(e,t)),r}catch(vz){return[]}}async tryMusicBrainzDiscovery(e,t){try{await this.enforceRateLimit();const r=`${HE}artist/?query=${encodeURIComponent(e)}&fmt=json&limit=1`,n=await fetch(r,{headers:{"User-Agent":YE}});if(!n.ok)throw new Error(`MusicBrainz search failed: ${n.status}`);const a=await n.json();if(!a.artists||0===a.artists.length)return[];const i=a.artists[0].id,o=a.artists[0].tags||[];await this.enforceRateLimit();const s=`${HE}artist/${i}?inc=artist-rels&fmt=json`,l=await fetch(s,{headers:{"User-Agent":YE}});if(!l.ok)throw new Error(`MusicBrainz relations failed: ${l.status}`);const c=(await l.json()).relations||[],u=[];return c.forEach((t=>{if("member of band"===t.type||"collaboration"===t.type||"performance"===t.type||"support"===t.type){const r=t.artist;r&&r.name!==e&&u.push({name:r.name,similarity:this.calculateMusicBrainzSimilarity(t.type),genres:this.extractGenresFromTags(o),tags:o.map((e=>e.name)),mbid:r.id})}})),u.slice(0,t)}catch(vz){return[]}}async tryGenreBasedDiscovery(e,t){const r=this.detectArtistGenres(e),n=[];if(0===r.length)return[];r.forEach((t=>{const r=this.generateGenreBasedArtists(t,e);n.push(...r)}));const a=this.removeDuplicates(n);return a.sort(((e,t)=>t.similarity-e.similarity)),a.slice(0,t)}async tryPatternBasedDiscovery(e,t){const r=e.toLowerCase(),n=[];if(Object.entries(GE).forEach((([t,a])=>{if(a.some((e=>r.includes(e)||e.includes(r)))){const r=this.generateGenreBasedArtists(t,e);n.push(...r)}})),0===n.length){const t=this.generateFallbackArtists(e);n.push(...t)}const a=this.removeDuplicates(n);return a.sort(((e,t)=>t.similarity-e.similarity)),a.slice(0,t)}detectArtistGenres(e){const t=e.toLowerCase(),r=[];return Object.entries(GE).forEach((([e,n])=>{n.some((e=>t.includes(e)||e.includes(t)))&&r.push(e)})),0===r.length&&(t.includes("dj")||t.includes("electronic")?r.push("electronic"):t.includes("mc")||t.includes("lil")?r.push("hip hop"):t.includes("band")||t.includes("brothers")?r.push("rock"):r.push("pop")),r}generateGenreBasedArtists(e,t){const r=[];return(GE[e]||[]).forEach(((n,a)=>{n.toLowerCase()!==t.toLowerCase()&&r.push({name:this.capitalizeArtistName(n),similarity:.7-.05*a,genres:[e],tags:[e,"similar artist"]})})),r}generateFallbackArtists(e){return["The Beatles","Led Zeppelin","Queen","Pink Floyd","The Rolling Stones","Taylor Swift","Ariana Grande","Drake","Kendrick Lamar","Ed Sheeran"].filter((t=>t.toLowerCase()!==e.toLowerCase())).slice(0,8).map(((e,t)=>({name:e,similarity:.5-.03*t,genres:["popular"],tags:["popular","mainstream"]})))}calculateMusicBrainzSimilarity(e){return{"member of band":.8,collaboration:.7,performance:.6,support:.5,tribute:.4}[e]||.3}extractGenresFromTags(e){return e.filter((e=>e.count>0)).map((e=>e.name.toLowerCase())).slice(0,5)}removeDuplicates(e){const t=new Set;return e.filter((e=>{const r=e.name.toLowerCase();return!t.has(r)&&(t.add(r),!0)}))}capitalizeArtistName(e){return e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}async enforceRateLimit(){const e=Date.now()-this.lastRequestTime;if(e<VE){const t=VE-e;await new Promise((e=>setTimeout(e,t)))}this.lastRequestTime=Date.now()}},JE={"jam band":[{name:"Phish",similarity:.95,genres:["jam band","rock"],tags:["improvisational","psychedelic"]},{name:"Grateful Dead",similarity:.93,genres:["jam band","rock"],tags:["improvisational","psychedelic"]},{name:"Widespread Panic",similarity:.9,genres:["jam band","southern rock"],tags:["improvisational","blues"]},{name:"String Cheese Incident",similarity:.88,genres:["jam band","bluegrass"],tags:["improvisational","folk"]},{name:"Umphrey's McGee",similarity:.85,genres:["jam band","progressive rock"],tags:["improvisational","metal"]},{name:"moe.",similarity:.83,genres:["jam band","rock"],tags:["improvisational","alternative"]},{name:"Disco Biscuits",similarity:.8,genres:["jam band","electronic"],tags:["improvisational","trance"]},{name:"Lotus",similarity:.78,genres:["jam band","electronic"],tags:["improvisational","dance"]},{name:"Spafford",similarity:.75,genres:["jam band","rock"],tags:["improvisational","progressive"]},{name:"Aqueous",similarity:.73,genres:["jam band","rock"],tags:["improvisational","progressive"]},{name:"Pigeons Playing Ping Pong",similarity:.7,genres:["jam band","funk"],tags:["improvisational","psychedelic"]},{name:"Goose",similarity:.68,genres:["jam band","rock"],tags:["improvisational","psychedelic"]},{name:"Dopapod",similarity:.65,genres:["jam band","electronic"],tags:["improvisational","funk"]},{name:"Tauk",similarity:.63,genres:["jam band","instrumental"],tags:["improvisational","progressive"]},{name:"Lettuce",similarity:.6,genres:["funk","jam band"],tags:["improvisational","soul"]}],pop:[{name:"Taylor Swift",similarity:.95,genres:["pop","country"],tags:["singer-songwriter","mainstream"]},{name:"Ariana Grande",similarity:.93,genres:["pop","r&b"],tags:["contemporary","dance pop"]},{name:"Billie Eilish",similarity:.9,genres:["pop","alternative"],tags:["indie pop","electropop"]},{name:"Dua Lipa",similarity:.88,genres:["pop","dance"],tags:["dance pop","electropop"]},{name:"Olivia Rodrigo",similarity:.85,genres:["pop","alternative"],tags:["singer-songwriter","indie pop"]},{name:"Lorde",similarity:.83,genres:["pop","alternative"],tags:["indie pop","electropop"]},{name:"Katy Perry",similarity:.8,genres:["pop","dance"],tags:["dance pop","electropop"]},{name:"Ed Sheeran",similarity:.78,genres:["pop","folk"],tags:["singer-songwriter","acoustic"]},{name:"Selena Gomez",similarity:.75,genres:["pop","dance"],tags:["dance pop","latin pop"]},{name:"Miley Cyrus",similarity:.73,genres:["pop","rock"],tags:["pop rock","country pop"]},{name:"Halsey",similarity:.7,genres:["pop","alternative"],tags:["indie pop","electropop"]},{name:"Camila Cabello",similarity:.68,genres:["pop","latin"],tags:["latin pop","dance pop"]},{name:"Shawn Mendes",similarity:.65,genres:["pop","folk"],tags:["singer-songwriter","acoustic"]},{name:"Doja Cat",similarity:.63,genres:["pop","hip hop"],tags:["contemporary","r&b"]},{name:"The Weeknd",similarity:.6,genres:["r&b","pop"],tags:["contemporary r&b","alternative r&b"]}],"hip hop":[{name:"Drake",similarity:.95,genres:["hip hop","r&b"],tags:["contemporary rap","melodic rap"]},{name:"Kendrick Lamar",similarity:.93,genres:["hip hop","rap"],tags:["conscious rap","west coast"]},{name:"J. Cole",similarity:.9,genres:["hip hop","rap"],tags:["conscious rap","southern hip hop"]},{name:"Kanye West",similarity:.88,genres:["hip hop","rap"],tags:["conscious rap","experimental hip hop"]},{name:"Travis Scott",similarity:.85,genres:["hip hop","trap"],tags:["psychedelic rap","southern hip hop"]},{name:"Future",similarity:.83,genres:["hip hop","trap"],tags:["southern hip hop","mumble rap"]},{name:"Post Malone",similarity:.8,genres:["hip hop","pop"],tags:["melodic rap","pop rap"]},{name:"Lil Wayne",similarity:.78,genres:["hip hop","rap"],tags:["southern hip hop","hardcore hip hop"]},{name:"Tyler, The Creator",similarity:.75,genres:["hip hop","alternative"],tags:["alternative hip hop","experimental"]},{name:"Childish Gambino",similarity:.73,genres:["hip hop","r&b"],tags:["alternative hip hop","funk"]},{name:"Chance the Rapper",similarity:.7,genres:["hip hop","gospel"],tags:["conscious rap","gospel rap"]},{name:"Big Sean",similarity:.68,genres:["hip hop","rap"],tags:["midwest hip hop","contemporary rap"]},{name:"Joey Bada$$",similarity:.65,genres:["hip hop","rap"],tags:["east coast hip hop","boom bap"]},{name:"Vince Staples",similarity:.63,genres:["hip hop","rap"],tags:["west coast hip hop","alternative hip hop"]},{name:"Mac Miller",similarity:.6,genres:["hip hop","alternative"],tags:["alternative hip hop","conscious rap"]}],rock:[{name:"The Beatles",similarity:.95,genres:["rock","pop"],tags:["british invasion","psychedelic"]},{name:"Led Zeppelin",similarity:.93,genres:["rock","hard rock"],tags:["classic rock","blues"]},{name:"Queen",similarity:.9,genres:["rock","arena rock"],tags:["classic rock","progressive"]},{name:"The Rolling Stones",similarity:.88,genres:["rock","classic rock"],tags:["british invasion","blues"]},{name:"Pink Floyd",similarity:.85,genres:["rock","progressive rock"],tags:["psychedelic","experimental"]},{name:"The Who",similarity:.83,genres:["rock","hard rock"],tags:["british invasion","progressive"]},{name:"AC/DC",similarity:.8,genres:["rock","hard rock"],tags:["classic rock","heavy metal"]},{name:"Aerosmith",similarity:.78,genres:["rock","hard rock"],tags:["classic rock","blues rock"]},{name:"Deep Purple",similarity:.75,genres:["rock","hard rock"],tags:["classic rock","heavy metal"]},{name:"Black Sabbath",similarity:.73,genres:["rock","heavy metal"],tags:["hard rock","doom metal"]},{name:"Nirvana",similarity:.7,genres:["rock","grunge"],tags:["alternative rock","punk"]},{name:"Pearl Jam",similarity:.68,genres:["rock","grunge"],tags:["alternative rock","hard rock"]},{name:"Radiohead",similarity:.65,genres:["alternative rock","experimental"],tags:["art rock","electronic"]},{name:"Foo Fighters",similarity:.63,genres:["rock","alternative rock"],tags:["post-grunge","hard rock"]},{name:"Red Hot Chili Peppers",similarity:.6,genres:["rock","funk rock"],tags:["alternative rock","rap rock"]}],electronic:[{name:"Daft Punk",similarity:.95,genres:["electronic","house"],tags:["french house","disco"]},{name:"Deadmau5",similarity:.93,genres:["electronic","progressive house"],tags:["edm","techno"]},{name:"Calvin Harris",similarity:.9,genres:["electronic","house"],tags:["edm","dance"]},{name:"Skrillex",similarity:.88,genres:["electronic","dubstep"],tags:["edm","bass music"]},{name:"Avicii",similarity:.85,genres:["electronic","house"],tags:["edm","progressive house"]},{name:"Tisto",similarity:.83,genres:["electronic","trance"],tags:["edm","progressive trance"]},{name:"David Guetta",similarity:.8,genres:["electronic","house"],tags:["edm","electro house"]},{name:"Diplo",similarity:.78,genres:["electronic","trap"],tags:["edm","moombahton"]},{name:"Zedd",similarity:.75,genres:["electronic","electro house"],tags:["edm","progressive house"]},{name:"Martin Garrix",similarity:.73,genres:["electronic","big room house"],tags:["edm","progressive house"]},{name:"Marshmello",similarity:.7,genres:["electronic","future bass"],tags:["edm","trap"]},{name:"The Chainsmokers",similarity:.68,genres:["electronic","pop"],tags:["edm","electropop"]},{name:"Flume",similarity:.65,genres:["electronic","future bass"],tags:["experimental","ambient"]},{name:"Porter Robinson",similarity:.63,genres:["electronic","electro house"],tags:["edm","progressive house"]},{name:"ODESZA",similarity:.6,genres:["electronic","future bass"],tags:["ambient","chillwave"]}]},KE={goose:"jam band",phish:"jam band","grateful dead":"jam band","widespread panic":"jam band","string cheese incident":"jam band","umphrey's mcgee":"jam band","moe.":"jam band","disco biscuits":"jam band","taylor swift":"pop","ariana grande":"pop","billie eilish":"pop","dua lipa":"pop","olivia rodrigo":"pop","ed sheeran":"pop",drake:"hip hop","kendrick lamar":"hip hop","j. cole":"hip hop","kanye west":"hip hop","travis scott":"hip hop","post malone":"hip hop","the beatles":"rock","led zeppelin":"rock",queen:"rock","the rolling stones":"rock","pink floyd":"rock",nirvana:"rock","daft punk":"electronic",deadmau5:"electronic","calvin harris":"electronic",skrillex:"electronic",avicii:"electronic","tisto":"electronic"},XE=new class{findSimilarArtists(e,t=15){const r=e.toLowerCase().trim();if(BE.hasDataFor(e))return BE.getSimilarArtists(e,t);const n=this.detectGenre(r);return n&&JE[n]?JE[n].filter((e=>e.name.toLowerCase()!==r)).slice(0,t):this.getFallbackArtists(e,t)}detectGenre(e){return KE[e]?KE[e]:e.includes("dj")||e.includes("electronic")?"electronic":e.includes("mc")||e.includes("lil")||e.includes("young")?"hip hop":e.includes("band")||e.includes("brothers")||e.includes("sisters")?"rock":null}getFallbackArtists(e,t){return[{name:"The Beatles",similarity:.6,genres:["rock","pop"],tags:["classic","popular"]},{name:"Taylor Swift",similarity:.58,genres:["pop","country"],tags:["contemporary","popular"]},{name:"Drake",similarity:.56,genres:["hip hop","r&b"],tags:["contemporary","popular"]},{name:"Led Zeppelin",similarity:.54,genres:["rock","hard rock"],tags:["classic","popular"]},{name:"Ariana Grande",similarity:.52,genres:["pop","r&b"],tags:["contemporary","popular"]},{name:"Queen",similarity:.5,genres:["rock","arena rock"],tags:["classic","popular"]},{name:"Kendrick Lamar",similarity:.48,genres:["hip hop","rap"],tags:["contemporary","popular"]},{name:"Daft Punk",similarity:.46,genres:["electronic","house"],tags:["electronic","popular"]},{name:"Billie Eilish",similarity:.44,genres:["pop","alternative"],tags:["contemporary","popular"]},{name:"Pink Floyd",similarity:.42,genres:["rock","progressive"],tags:["classic","popular"]}].filter((t=>t.name.toLowerCase()!==e.toLowerCase())).slice(0,t)}getSupportedGenres(){return Object.keys(JE)}getArtistsByGenre(e,t=15){return JE[e]?.slice(0,t)||[]}},QE={maxResults:15,enableLastFm:!0,enableCurated:!0,enableAI:!0,enableFallback:!0,similarityThreshold:"moderate",preferenceOrder:["lastfm","curated","ai","fallback"]},ZE=new class{constructor(){r(this,"discoveryStats",{totalRequests:0,lastfmSuccess:0,curatedSuccess:0,aiSuccess:0,fallbackUsed:0})}async findSimilarArtists(e,t={}){const r={...QE,...t};this.discoveryStats.totalRequests++;const n={artist:e,totalFound:0,sources:{lastfm:0,curated:0,ai:0,fallback:0},similarArtists:[],method:"fallback",confidence:"low"};for(const a of r.preferenceOrder)if(r[{lastfm:"enableLastFm",curated:"enableCurated",ai:"enableAI",fallback:"enableFallback"}[a]])try{let t=[];switch(a){case"lastfm":t=await this.tryLastFmDiscovery(e,r),n.sources.lastfm=t.length,t.length>0&&this.discoveryStats.lastfmSuccess++;break;case"curated":t=await this.tryCuratedDiscovery(e,r),n.sources.curated=t.length,t.length>0&&this.discoveryStats.curatedSuccess++;break;case"ai":t=await this.tryAIDiscovery(e,r),n.sources.ai=t.length,t.length>0&&this.discoveryStats.aiSuccess++;break;case"fallback":t=await this.tryFallbackDiscovery(e,r),n.sources.fallback=t.length,t.length>0&&this.discoveryStats.fallbackUsed++}if(t.length>0){n.similarArtists=t.slice(0,r.maxResults),n.totalFound=t.length,n.method=a,n.confidence=this.calculateConfidence(a,t.length);break}}catch(vz){}return 0===n.similarArtists.length&&(n.similarArtists=this.generateIntelligentFallback(e,r.maxResults),n.sources.fallback=n.similarArtists.length,n.totalFound=n.similarArtists.length,n.method="fallback",n.confidence="low",this.discoveryStats.fallbackUsed++),n}async tryLastFmDiscovery(e,t){if(!NE.isAvailable())return[];try{const r={seedArtist:e},n=await NE.getSimilarArtists(e,t.maxResults,r);if(0===n.length)return[];const a=this.applySimilarityThreshold(n,t.similarityThreshold);return a.length>0&&t.maxResults>=60&&a.length,a}catch(vz){return[]}}async tryCuratedDiscovery(e,t){try{if(!BE.hasDataFor(e))return[];const r=BE.getSimilarArtists(e,t.maxResults);return this.applySimilarityThreshold(r,t.similarityThreshold)}catch(vz){return[]}}async tryAIDiscovery(e,t){try{const r=await qE.findSimilarArtists(e,t.maxResults);return this.applySimilarityThreshold(r,t.similarityThreshold)}catch(vz){return[]}}async tryFallbackDiscovery(e,t){try{return this.generateIntelligentFallback(e,t.maxResults)}catch(vz){return[]}}applySimilarityThreshold(e,t){const r={loose:.1,moderate:.2,strict:.4}[t],n=e.filter((e=>e.similarity>=r));return n.length<e.length&&e.filter((e=>e.similarity<r)),n}calculateConfidence(e,t){return"lastfm"===e&&t>=10||"curated"===e&&t>=8?"high":"ai"===e&&t>=6||t>=5?"medium":"low"}generateIntelligentFallback(e,t){const r=XE.findSimilarArtists(e,t);if(r.length>0)return r;const n=BE.getSimilarArtists(e,t);if(n.length>0)return n;const a=e.toLowerCase(),i=[],o=BE.getSupportedArtists(),s=[];if(o.forEach((e=>{const t=e.toLowerCase();let r=0;(t.includes(a)||a.includes(t))&&(r+=.8);const n=a.split(/\s+/),i=t.split(/\s+/);n.forEach((e=>{i.some((t=>t.includes(e)||e.includes(t)))&&(r+=.3)})),r>0&&s.push({artist:e,score:r})})),s.sort(((e,t)=>t.score-e.score)),s.length>0){const e=s[0],r=BE.getSimilarArtists(e.artist,t),n=Math.min(e.score,.8);return r.forEach(((e,t)=>{i.push({...e,similarity:e.similarity*n,tags:[...e.tags||[],"fallback","partial-match"]})})),i}return[]}getStats(){return{...this.discoveryStats,successRate:{lastfm:this.discoveryStats.totalRequests>0?(this.discoveryStats.lastfmSuccess/this.discoveryStats.totalRequests*100).toFixed(1)+"%":"0%",curated:this.discoveryStats.totalRequests>0?(this.discoveryStats.curatedSuccess/this.discoveryStats.totalRequests*100).toFixed(1)+"%":"0%",ai:this.discoveryStats.totalRequests>0?(this.discoveryStats.aiSuccess/this.discoveryStats.totalRequests*100).toFixed(1)+"%":"0%"}}}resetStats(){this.discoveryStats={totalRequests:0,lastfmSuccess:0,curatedSuccess:0,aiSuccess:0,fallbackUsed:0}}async testDiscovery(e){const t=await this.findSimilarArtists(e,{maxResults:50,enableLastFm:!0,enableCurated:!0,enableAI:!0,enableFallback:!0});return t.similarArtists.length>0&&(t.similarArtists.slice(0,15).forEach(((e,t)=>{})),t.similarArtists.length),t}},eI={maxArtists:60,diversityWeight:.3,similarityWeight:.7,genreDiversityEnabled:!0,eraDiversityEnabled:!0,maxSameGenre:8,maxSameEra:10,preventDuplicates:!0},tI={"classic rock":"1960s-1980s","new wave":"1980s",grunge:"1990s",britpop:"1990s","nu metal":"2000s","indie revival":"2000s","edm boom":"2010s","modern pop":"2010s-2020s",contemporary:"2020s"},rI=new class{constructor(e={}){r(this,"config"),r(this,"selectedArtists",new Set),r(this,"genreCounts",new Map),r(this,"eraCounts",new Map),this.config={...eI,...e}}selectArtists(e,t){const r={...this.config,...t};this.reset();const n=this.calculateWeights(e,r),a=[],i=[];for(;a.length<r.maxArtists&&n.length>0;){const e=this.selectWeightedRandom(n);if(!e)break;const t=this.checkDiversityConstraints(e,r);if(t.allowed){a.push(e),this.updateSelectionState(e);const t=n.findIndex((t=>t.name===e.name));t>=0&&n.splice(t,1),this.updateWeights(n,r)}else{i.push({artist:e,reason:t.reason});const r=n.findIndex((t=>t.name===e.name));r>=0&&n.splice(r,1)}}return{selectedArtists:a,selectionStats:this.calculateSelectionStats(a,e.length),rejectedArtists:i}}calculateWeights(e,t){const r=Math.max(...e.map((e=>e.similarity))),n=Math.min(...e.map((e=>e.similarity))),a=r-n;return e.map((e=>{const r=a>0?(e.similarity-n)/a:.5,i=Math.pow(r,2*t.similarityWeight),o=this.calculateDiversityBonus(e,t),s=i*t.similarityWeight+o*t.diversityWeight;return{...e,weight:s,selectionProbability:0,diversityPenalty:0}}))}calculateDiversityBonus(e,t){let r=1;if(t.genreDiversityEnabled&&e.genres){const n=e.genres[0],a=this.genreCounts.get(n)||0;a<t.maxSameGenre/2?r+=.5:a>=t.maxSameGenre&&(r-=.8)}if(t.eraDiversityEnabled){const n=this.determineEra(e),a=this.eraCounts.get(n)||0;a<t.maxSameEra/2?r+=.3:a>=t.maxSameEra&&(r-=.6)}return Math.max(.1,r)}selectWeightedRandom(e){if(0===e.length)return null;const t=e.reduce(((e,t)=>e+t.weight),0);if(t<=0)return e[Math.floor(Math.random()*e.length)];e.forEach((e=>{e.selectionProbability=e.weight/t}));const r=Math.random();let n=0;for(const a of e)if(n+=a.selectionProbability,r<=n)return a;return e[e.length-1]}checkDiversityConstraints(e,t){if(t.preventDuplicates&&this.selectedArtists.has(e.name.toLowerCase()))return{allowed:!1,reason:"Duplicate artist"};if(t.genreDiversityEnabled&&e.genres&&e.genres.length>0){const r=e.genres[0],n=this.genreCounts.get(r)||0;if(n>=t.maxSameGenre)return{allowed:!1,reason:`Too many ${r} artists (${n}/${t.maxSameGenre})`}}if(t.eraDiversityEnabled){const r=this.determineEra(e),n=this.eraCounts.get(r)||0;if(n>=t.maxSameEra)return{allowed:!1,reason:`Too many ${r} artists (${n}/${t.maxSameEra})`}}return{allowed:!0,reason:""}}updateSelectionState(e){if(this.selectedArtists.add(e.name.toLowerCase()),e.genres&&e.genres.length>0){const t=e.genres[0];this.genreCounts.set(t,(this.genreCounts.get(t)||0)+1)}const t=this.determineEra(e);this.eraCounts.set(t,(this.eraCounts.get(t)||0)+1)}updateWeights(e,t){e.forEach((e=>{const r=this.calculateDiversityBonus(e,t);e.weight=.7*e.weight+r*t.diversityWeight*.3}))}determineEra(e){if(e.genres)for(const r of e.genres)if(tI[r.toLowerCase()])return tI[r.toLowerCase()];if(e.tags)for(const r of e.tags)if(tI[r.toLowerCase()])return tI[r.toLowerCase()];const t=e.name.toLowerCase();return t.includes("classic")||t.includes("vintage")?"1960s-1980s":t.includes("modern")||t.includes("new")?"2010s-2020s":"contemporary"}calculateSelectionStats(e,t){const r={},n={};let a=0;e.forEach((e=>{if(a+=e.similarity,e.genres&&e.genres.length>0){const t=e.genres[0];r[t]=(r[t]||0)+1}const t=this.determineEra(e);n[t]=(n[t]||0)+1}));const i=e.length>0?a/e.length:0,o=Object.keys(r).length,s=Object.keys(n).length,l=o/Math.min(10,e.length)*.6+s/Math.min(6,e.length)*.4;return{totalCandidates:t,genreDistribution:r,eraDistribution:n,averageSimilarity:i,diversityScore:Math.min(1,l)}}reset(){this.selectedArtists.clear(),this.genreCounts.clear(),this.eraCounts.clear()}getSelectionState(){return{selectedArtists:Array.from(this.selectedArtists),genreCounts:Object.fromEntries(this.genreCounts),eraCounts:Object.fromEntries(this.eraCounts)}}},nI={preferredDuration:60,durationTolerance:30,maxSearchResults:20,albumDiversityEnabled:!0,yearDiversityEnabled:!0,maxSameAlbum:3,maxSameYear:8,fallbackToPopular:!0,randomnessWeight:.7,enableContentFiltering:!0,enableDuplicateDetection:!0,duplicateSimilarityThreshold:.8,minVideoDuration:60,strictMusicContentOnly:!0},aI={"taylor swift":["Shake It Off","Love Story","You Belong With Me","Anti-Hero","Blank Space","Bad Blood","Look What You Made Me Do","We Are Never Ever Getting Back Together"],drake:["God's Plan","In My Feelings","Hotline Bling","One Dance","Started From the Bottom","Take Care","Nice For What","Passionfruit"],"the beatles":["Hey Jude","Let It Be","Yesterday","Come Together","Here Comes the Sun","Help!","A Hard Day's Night","Twist and Shout"],"led zeppelin":["Stairway to Heaven","Black Dog","Rock and Roll","Kashmir","Whole Lotta Love","Immigrant Song","Good Times Bad Times","Ramble On"],queen:["Bohemian Rhapsody","We Will Rock You","We Are the Champions","Another One Bites the Dust","Somebody to Love","Don't Stop Me Now","Under Pressure","Radio Ga Ga"],"ariana grande":["Thank U, Next","7 rings","Problem","Side to Side","Dangerous Woman","Break Free","No Tears Left to Cry","positions"],"billie eilish":["Bad Guy","Happier Than Ever","Therefore I Am","Lovely","When the Party's Over","Ocean Eyes","Everything I Wanted","Your Power"],"kendrick lamar":["HUMBLE.","DNA.","Swimming Pools","Alright","King Kunta","Money Trees","Bitch, Don't Kill My Vibe","i"],"daft punk":["Get Lucky","One More Time","Harder Better Faster Stronger","Around the World","Digital Love","Something About Us","Instant Crush","Lose Yourself to Dance"],"pink floyd":["Another Brick in the Wall","Comfortably Numb","Wish You Were Here","Time","Money","Shine On You Crazy Diamond","Us and Them","High Hopes"],default:["Greatest Hits","Best Songs","Top Tracks","Popular Music","Hit Singles","Essential Collection","Classic Songs","Fan Favorites"]},iI=new class{constructor(e={}){r(this,"config"),r(this,"diversityState"),this.config={...nI,...e},this.diversityState={selectedAlbums:new Map,selectedYears:new Map,selectedSongs:new Set,selectedSongTitles:new Set}}async selectSongForArtist(e,t){const r={...this.config,...t};try{const t=await this.discoverSongsForArtist(e,r);if(0===t.length)return this.createFallbackResult(e);const n=this.filterByDuration(t,r),a=this.applyDiversityFilters(n.length>0?n:t,r);let i=a,o="random";if(0===i.length&&(i=n.length>0?n:t,o="fallback"),0===i.length)return this.createFallbackResult(e);const s=this.selectWeightedRandom(i,r);this.updateDiversityState(s);const l=this.calculateSearchStats(t,n,a);return{selectedSong:s,alternativeSongs:t.filter((e=>e.title!==s.title)).slice(0,5),selectionMethod:"fallback"===o?"fallback":"search"===s.source?"random":s.source,searchStats:l}}catch(vz){return this.createFallbackResult(e)}}async discoverSongsForArtist(e,t){const r=[];if(!(await cc().catch((()=>!1))))return this.createFallbackCandidates(e.name,e.name);const n=this.generateSearchQueries(e);for(const a of n.slice(0,2))try{const n=$E.getYouTubeQuery(e.name,a.replace(e.name,"").trim(),{genres:e.genres}),i=await zc(n,null,{maxResults:Math.min(10,t.maxSearchResults),useYtDlp:!0,videoDuration:"short"});if(i.videos&&i.videos.length>0){const n=t.enableContentFiltering?this.filterNonMusicContent(i.videos,t):i.videos,a=this.convertYouTubeVideosToSongCandidates(n,e.name);r.push(...a)}if(r.length>=t.maxSearchResults)break;await new Promise((e=>setTimeout(e,100)))}catch(vz){if(vz.message&&vz.message.includes("yt-dlp")){const t=this.createFallbackCandidates(e.name,a);r.push(...t)}}return(t.enableDuplicateDetection?this.removeDuplicatesEnhanced(r,t):this.removeDuplicates(r)).slice(0,t.maxSearchResults)}convertYouTubeVideosToSongCandidates(e,t){return e.map((e=>{const r=this.parseDuration(e.duration)||180,n=this.extractAlbumInfo(e.title,e.description),a=e.publishedAt?new Date(e.publishedAt).getFullYear():void 0,i=this.calculatePopularityScore(e);return{title:this.cleanSongTitle(e.title,t),artist:t,duration:r,url:`https://www.youtube.com/watch?v=${e.id}`,album:n,year:a,popularity:i,source:"search"}}))}parseDuration(e){if(!e)return 180;const t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(t)return 3600*parseInt(t[1]||"0")+60*parseInt(t[2]||"0")+parseInt(t[3]||"0");const r=e.match(/(\d+):(\d+)/);return r?60*parseInt(r[1])+parseInt(r[2]):180}extractAlbumInfo(e,t){const r=[/from the album[:\s]+"([^"]+)"/i,/\(from "([^"]+)"\)/i,/\[([^\]]+)\]/,/- ([^-]+)$/];for(const n of r){const t=e.match(n);if(t&&t[1])return t[1].trim()}if(t){const e=t.match(/album[:\s]+"([^"]+)"/i);if(e&&e[1])return e[1].trim()}}calculatePopularityScore(e){let t=.5;if(e.viewCount){const r=parseInt(e.viewCount);r>1e6?t+=.3:r>1e5?t+=.2:r>1e4&&(t+=.1)}if(e.likeCount){const r=parseInt(e.likeCount);r>1e4?t+=.2:r>1e3&&(t+=.1)}return Math.min(1,t)}cleanSongTitle(e,t){let r=e;const n=new RegExp(`^${t}\\s*[-:]?\\s*`,"i");return r=r.replace(n,""),r=r.replace(/^(official\s+)?(music\s+)?video\s*[-:]?\s*/i,""),r=r.replace(/^(lyrics?\s*)?[-:]?\s*/i,""),r=r.replace(/\s*\(official.*?\)$/i,""),r=r.replace(/\s*\[official.*?\]$/i,""),r=r.trim(),r||e}createFallbackCandidates(e,t){const r=e.toLowerCase(),n=aI[r]||aI.default;return this.shuffleArray([...n]).slice(0,Math.min(5,n.length)).map(((t,r)=>({title:t,artist:e,duration:45+Math.floor(90*Math.random()),url:`https://youtube.com/results?search_query=${encodeURIComponent(`${e} ${t}`)}`,album:void 0,year:void 0,popularity:.6+.3*Math.random(),source:"fallback"})))}shuffleArray(e){const t=[...e];for(let r=t.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[t[r],t[e]]=[t[e],t[r]]}return t}generateSearchQueries(e){const t=[`${e.name} official music video`,`${e.name} songs`,`${e.name} music`,e.name];return e.genres&&e.genres.length>0&&t.push(`${e.name} ${e.genres[0]} music`),t.push(`${e.name} hits official`),t.push(`${e.name} best songs music video`),t.push(`${e.name} live performance`),t}filterNonMusicContent(e,t){return e.filter((e=>{const r=e.title.toLowerCase(),n=(e.description||"").toLowerCase();if(this.parseDuration(e.duration)<t.minVideoDuration)return!1;const a=[/\b(review|reaction|reacts?\s+to|breakdown|analysis|explained|commentary)\b/i,/\b(interview|behind\s+the\s+scenes|making\s+of|documentary|tutorial|how\s+to)\b/i,/\b(compilation|playlist|mix)\b/i,/\b(gameplay|gaming|stream|podcast|vlog|blog)\b/i,/\b(news|talk\s+show|discussion|debate)\b/i];for(const t of a)if(t.test(r)||t.test(n))return!1;const i=[/\b(official\s+(video|audio|music\s+video)|music\s+video)\b/i,/\b(live|concert|performance|tour|festival)\b/i,/\b(cover|covers|acoustic\s+version|unplugged)\b/i,/\b(remix|extended|radio\s+edit|album\s+version|instrumental)\b/i,/\b(greatest\s+hits|best\s+of|essential|anthology)\b/i];for(const t of i)if(t.test(r)||t.test(n))return!0;if(t.strictMusicContentOnly){const e=/\b(song|music|audio|video|track|single|album|ep|lp)\b/i;if(!e.test(r)&&!e.test(n))return!1}return!0}))}filterByDuration(e,t){const r=t.preferredDuration-t.durationTolerance,n=t.preferredDuration+t.durationTolerance;return e.filter((e=>e.duration>=r&&e.duration<=n))}applyDiversityFilters(e,t){return e.filter((e=>{if(t.albumDiversityEnabled&&e.album&&(this.diversityState.selectedAlbums.get(e.album)||0)>=t.maxSameAlbum)return!1;if(t.yearDiversityEnabled&&e.year&&(this.diversityState.selectedYears.get(e.year)||0)>=t.maxSameYear)return!1;const r=`${e.artist.toLowerCase()}-${e.title.toLowerCase()}`;if(this.diversityState.selectedSongs.has(r))return!1;if(t.enableDuplicateDetection){const r=this.normalizeSongTitle(e.title);for(const e of this.diversityState.selectedSongTitles)if(this.calculateStringSimilarity(r,e)>=t.duplicateSimilarityThreshold)return!1}return!0}))}selectWeightedRandom(e,t){if(0===e.length)throw new Error("No candidates available for selection");if(1===e.length)return e[0];const r=e.map((e=>{const r=(e.popularity||.5)*(1-t.randomnessWeight),n=Math.random()*t.randomnessWeight,a=Math.abs(e.duration-t.preferredDuration);return r+n+.2*Math.max(0,1-a/t.durationTolerance)+this.calculateContentPriority(e)/5*.5})),n=r.reduce(((e,t)=>e+t),0),a=Math.random()*n;let i=0;for(let o=0;o<e.length;o++)if(i+=r[o],a<=i)return e[o];return e[e.length-1]}calculateContentPriority(e){const t=e.title.toLowerCase();return/\b(official\s+(video|audio|music\s+video)|music\s+video)\b/i.test(t)?5:/\b(live|concert|performance|tour|festival)\b/i.test(t)?4:/\b(cover|covers|acoustic\s+version|unplugged)\b/i.test(t)?3:/\b(remix|extended|radio\s+edit|album\s+version|instrumental)\b/i.test(t)?2:1}updateDiversityState(e){if(e.album){const t=this.diversityState.selectedAlbums.get(e.album)||0;this.diversityState.selectedAlbums.set(e.album,t+1)}if(e.year){const t=this.diversityState.selectedYears.get(e.year)||0;this.diversityState.selectedYears.set(e.year,t+1)}const t=`${e.artist.toLowerCase()}-${e.title.toLowerCase()}`;this.diversityState.selectedSongs.add(t);const r=this.normalizeSongTitle(e.title);this.diversityState.selectedSongTitles.add(r)}removeDuplicates(e){const t=new Set;return e.filter((e=>{const r=`${e.artist.toLowerCase()}-${e.title.toLowerCase()}`;return!t.has(r)&&(t.add(r),!0)}))}removeDuplicatesEnhanced(e,t){const r=[],n=[];for(const a of e){const e=this.normalizeSongTitle(a.title);let i=!1;for(const r of n)if(this.calculateStringSimilarity(e,r)>=t.duplicateSimilarityThreshold){i=!0;break}for(const r of this.diversityState.selectedSongTitles)if(this.calculateStringSimilarity(e,r)>=t.duplicateSimilarityThreshold){i=!0;break}i||(r.push(a),n.push(e))}return r}normalizeSongTitle(e){return e.toLowerCase().replace(/\s*\(.*?\)\s*/g,"").replace(/\s*\[.*?\]\s*/g,"").replace(/\s*-\s*(official|music|video|audio|lyric|lyrics).*$/i,"").replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim()}calculateStringSimilarity(e,t){const r=e.length,n=t.length;if(0===r)return 0===n?1:0;if(0===n)return 0;const a=[];for(let o=0;o<=r;o++)a[o]=[o];for(let o=0;o<=n;o++)a[0][o]=o;for(let o=1;o<=r;o++)for(let r=1;r<=n;r++){const n=e[o-1]===t[r-1]?0:1;a[o][r]=Math.min(a[o-1][r]+1,a[o][r-1]+1,a[o-1][r-1]+n)}const i=Math.max(r,n);return 1-a[r][n]/i}calculateSearchStats(e,t,r,n,a,i){const o=new Set(e.map((e=>e.album)).filter(Boolean)),s=new Set(e.map((e=>e.year)).filter(Boolean));return{totalFound:e.length,durationMatches:t.length,albumDiversity:o.size,yearDiversity:s.size,contentFiltered:a||0,duplicatesFiltered:i||0,shortsFiltered:n?n-e.length:0}}createFallbackResult(e){return{selectedSong:{title:`${e.name} - Best Songs`,artist:e.name,duration:60,url:`https://youtube.com/results?search_query=${encodeURIComponent(e.name+" songs")}`,source:"fallback"},alternativeSongs:[],selectionMethod:"fallback",searchStats:{totalFound:0,durationMatches:0,albumDiversity:0,yearDiversity:0,contentFiltered:0,duplicatesFiltered:0,shortsFiltered:0}}}resetDiversityState(){this.diversityState.selectedAlbums.clear(),this.diversityState.selectedYears.clear(),this.diversityState.selectedSongs.clear(),this.diversityState.selectedSongTitles.clear()}getDiversityState(){return{albumCounts:Object.fromEntries(this.diversityState.selectedAlbums),yearCounts:Object.fromEntries(this.diversityState.selectedYears),selectedSongsCount:this.diversityState.selectedSongs.size}}updateConfig(e){this.config={...this.config,...e}}},oI={seedArtist:"",totalTracks:60,clipDuration:60,seedArtistClipCount:6,artistSelection:{maxArtists:60,diversityWeight:.4,similarityWeight:.6,genreDiversityEnabled:!0,eraDiversityEnabled:!0,maxSameGenre:8,maxSameEra:12},songSelection:{preferredDuration:60,durationTolerance:30,albumDiversityEnabled:!0,yearDiversityEnabled:!0,randomnessWeight:.7},prioritizeCachedResults:!0,maxApiCalls:10,showProgress:!0},sI=new class{constructor(){r(this,"progressCallback"),r(this,"abortController"),r(this,"startTime")}async generatePowerHour(e,t){const r=Date.now(),n={...oI,...e};this.progressCallback=t,this.abortController=new AbortController;try{this.updateProgress(0,n.totalTracks,"Generating seed artist clips...",0,0);const e=await this.generateSeedArtistTracks(n),t=e.length,a=n.totalTracks-t;let i=[],o=[],s={selectedArtists:[],selectionStats:{genreDistribution:{},diversityScore:0}};a>0&&(this.updateProgress(t,n.totalTracks,"Discovering similar artists...",0,0),o=await this.discoverSimilarArtists(n),this.updateProgress(t,n.totalTracks,"Selecting diverse artists...",0,0),s=rI.selectArtists(o,{...n.artistSelection,maxArtists:a}),i=await this.generateSimilarArtistTracks(s.selectedArtists,n,t));const l=[...e,...i],c=Date.now()-r;return this.calculateResults(l,s,o.length,c,n)}catch(vz){throw vz}}async discoverSimilarArtists(e){const t=$E.getDisambiguationSuggestions(e.seedArtist);t.length>1&&(e.seedArtist=t[0].name);const r=_E.get(e.seedArtist);if(r&&e.prioritizeCachedResults)return r.similarArtists;const n=await ZE.findSimilarArtists(e.seedArtist,{maxResults:Math.max(3*e.totalTracks,150),enableLastFm:!0,enableCurated:!0,enableAI:!0,enableFallback:!0,similarityThreshold:"loose"});if(0===n.similarArtists.length)throw new Error(`No similar artists found for "${e.seedArtist}". This could be due to:\n1. Last.fm API issues\n2. Artist not in backup database\n3. Network connectivity problems\n\nTry a more popular artist or check your internet connection.`);return _E.set(e.seedArtist,n.similarArtists,{source:n.method,discoveryMethod:n.method,confidence:n.confidence,sources:n.sources,timestamp:Date.now()}),n.similarArtists}async generateSeedArtistTracks(e){const t=[];let r=0,n=0;iI.resetDiversityState();const a={name:e.seedArtist,similarity:1,genres:[],popularity:1};for(let i=0;i<e.seedArtistClipCount;i++){this.updateProgress(t.length,e.totalTracks,`Generating seed artist track ${i+1}/${e.seedArtistClipCount}...`,n,r);try{if(this.abortController?.signal.aborted)break;const i=await iI.selectSongForArtist(a,e.songSelection);let o="api";_E.has(a.name)?(o="cached",n++):"fallback"===i.selectionMethod?o="fallback":r++;const s={artist:a.name,song:i.selectedSong,startTime:t.length*e.clipDuration,clipDuration:e.clipDuration,selectionMethod:o,artistSimilarity:1,isSeedArtist:!0};t.push(s)}catch(vz){}}return t}async generateSimilarArtistTracks(e,t,r){const n=[];let a=0,i=0;for(let o=0;o<e.length&&n.length<t.totalTracks-r;o++){const s=e[o];this.updateProgress(r+n.length,t.totalTracks,`Generating track for ${s.name}...`,i,a);try{if(this.abortController?.signal.aborted)break;a>=t.maxApiCalls&&_E.has(s.name);const e=await iI.selectSongForArtist(s,t.songSelection);let o="api";_E.has(s.name)?(o="cached",i++):"fallback"===e.selectionMethod?o="fallback":a++;const l={artist:s.name,song:e.selectedSong,startTime:(r+n.length)*t.clipDuration,clipDuration:t.clipDuration,selectionMethod:o,artistSimilarity:s.similarity,isSeedArtist:!1};n.push(l)}catch(vz){}}return n}async generateTracks(e,t){const r=[];let n=0,a=0;iI.resetDiversityState();for(let i=0;i<e.length&&r.length<t.totalTracks;i++){const o=e[i];this.updateProgress(r.length,t.totalTracks,`Generating track for ${o.name}...`,a,n);try{if(this.abortController?.signal.aborted)break;n>=t.maxApiCalls&&_E.has(o.name);const e=await iI.selectSongForArtist(o,t.songSelection);let i="api";_E.has(o.name)?(i="cached",a++):"fallback"===e.selectionMethod?i="fallback":n++;const s={artist:o.name,song:e.selectedSong,startTime:r.length*t.clipDuration,clipDuration:t.clipDuration,selectionMethod:i,artistSimilarity:o.similarity,isSeedArtist:o.name.toLowerCase()===t.seedArtist.toLowerCase()};r.push(s)}catch(vz){}}return r}calculateResults(e,t,r,n,a){const i=e.filter((e=>"cached"===e.selectionMethod)).length,o=e.filter((e=>"api"===e.selectionMethod)).length,s=e.filter((e=>"fallback"===e.selectionMethod)).length,l=e.filter((e=>e.isSeedArtist)),c=e.filter((e=>!e.isSeedArtist)),u=l.length,d=a.seedArtistClipCount,h=d>0?u/d*100:0,p=e.length>0?i/e.length*100:0,f=e.length>0?e.reduce(((e,t)=>e+t.artistSimilarity),0)/e.length:0,m=e.length/a.totalTracks*100;return{tracks:e,generationStats:{totalArtistsConsidered:r,cachedArtistsUsed:i,apiCallsMade:o,fallbacksUsed:s,averageArtistSimilarity:f,genreDistribution:t.selectionStats?.genreDistribution||{},generationTimeMs:n,cacheHitRate:p,seedArtistClipsGenerated:u,seedArtistClipsRequested:d,similarArtistClips:c.length},qualityMetrics:{diversityScore:t.selectionStats?.diversityScore||0,similarityScore:f,completionRate:m,seedArtistFulfillmentRate:h}}}updateProgress(e,t,r,n,a){if(!this.progressCallback)return;const i=e/t,o=i>0?(Date.now()-(this.startTime||Date.now()))/i*(1-i):0;this.progressCallback({currentTrack:e,totalTracks:t,currentStep:r,cacheHits:n,apiCalls:a,estimatedTimeRemaining:o})}abort(){this.abortController&&this.abortController.abort()}getCacheStatistics(){return _E.getStatistics()}exportCache(){return _E.exportCache()}importCache(e){return _E.importCache(e)}clearCache(){_E.clear()}async warmCache(e){for(const t of e)if(!_E.has(t))try{await this.discoverSimilarArtists({...oI,seedArtist:t,prioritizeCachedResults:!1})}catch(vz){}}},lI=({open:e,onClose:t,artistName:r,suggestions:n,onSelect:a,onCustomSearch:o})=>{const[l,c]=i.useState(null),[d,p]=i.useState(""),[f,m]=i.useState(!1),w=()=>{d.trim()&&o&&(o(d.trim()),t())},C=()=>{c(null),p(""),m(!1),t()};return s.jsxs(g,{open:e,onClose:C,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"400px"}},children:[s.jsx(y,{children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(pi,{color:"primary"}),s.jsxs(h,{variant:"h6",children:['Which "',r,'" did you mean?']})]})}),s.jsxs(b,{children:[s.jsx(x,{severity:"info",sx:{mb:3},children:s.jsxs(h,{variant:"body2",children:['We found multiple artists with the name "',r,"\". Please select the one you're looking for:"]})}),s.jsx(v,{children:n.map(((e,t)=>s.jsx(S,{disablePadding:!0,children:s.jsx(oe,{selected:l===t,onClick:()=>c(t),sx:{border:l===t?2:1,borderColor:l===t?"primary.main":"divider",borderRadius:1,mb:1,"&:hover":{borderColor:"primary.light"}},children:s.jsx(j,{primary:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[s.jsx(h,{variant:"h6",component:"span",children:e.name}),e.country&&s.jsx(q,{label:e.country,size:"small",variant:"outlined"})]}),secondary:s.jsxs(u,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.description}),s.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:1},children:e.genres.map(((e,t)=>s.jsx(q,{label:e,size:"small",color:"primary",variant:"outlined"},t)))}),e.activeYears&&s.jsxs(h,{variant:"caption",color:"text.secondary",children:["Active: ",e.activeYears]})]})})})},t)))}),s.jsx(u,{sx:{mt:3,pt:2,borderTop:1,borderColor:"divider"},children:f?s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Custom Search"}),s.jsx(T,{fullWidth:!0,placeholder:`e.g., "${r} progressive rock" or "${r} 1970s"`,value:d,onChange:e=>p(e.target.value),InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(In,{})})},onKeyPress:e=>"Enter"===e.key&&w()}),s.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"Add genre, year, or other terms to help identify the specific artist"})]}):s.jsx(A,{variant:"outlined",startIcon:s.jsx(In,{}),onClick:()=>m(!0),fullWidth:!0,children:"None of these? Search with custom terms"})})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:C,children:"Cancel"}),f&&d.trim()&&s.jsxs(A,{onClick:w,variant:"contained",startIcon:s.jsx(In,{}),children:['Search "',d,'"']}),null!==l&&s.jsxs(A,{onClick:()=>{null!==l&&n[l]&&(a(n[l]),t())},variant:"contained",startIcon:s.jsx(pi,{}),children:["Select ",n[l]?.name]})]})]})},cI="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function uI(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function dI(e){return"nodeType"in e}function hI(e){var t,r;return e?uI(e)?e:dI(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function pI(e){const{Document:t}=hI(e);return e instanceof t}function fI(e){return!uI(e)&&e instanceof hI(e).HTMLElement}function mI(e){return e instanceof hI(e).SVGElement}function gI(e){return e?uI(e)?e.document:dI(e)?pI(e)?e:fI(e)||mI(e)?e.ownerDocument:document:document:document}const yI=cI?i.useLayoutEffect:i.useEffect;function bI(e){const t=i.useRef(e);return yI((()=>{t.current=e})),i.useCallback((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)}),[])}function xI(e,t){void 0===t&&(t=[e]);const r=i.useRef(e);return yI((()=>{r.current!==e&&(r.current=e)}),t),r}function vI(e,t){const r=i.useRef();return i.useMemo((()=>{const t=e(r.current);return r.current=t,t}),[...t])}function wI(e){const t=bI(e),r=i.useRef(null),n=i.useCallback((e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e}),[]);return[r,n]}function SI(e){const t=i.useRef();return i.useEffect((()=>{t.current=e}),[e]),t.current}let jI={};function CI(e,t){return i.useMemo((()=>{if(t)return t;const r=null==jI[e]?0:jI[e]+1;return jI[e]=r,e+"-"+r}),[e,t])}function kI(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce(((t,r)=>{const n=Object.entries(r);for(const[a,i]of n){const r=t[a];null!=r&&(t[a]=r+e*i)}return t}),{...t})}}const PI=kI(1),AI=kI(-1);function EI(e){if(!e)return!1;const{KeyboardEvent:t}=hI(e.target);return t&&e instanceof t}function II(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=hI(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const MI=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[MI.Translate.toString(e),MI.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),TI="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function RI(e){return e.matches(TI)?e:e.querySelector(TI)}const zI={display:"none"};function DI(e){let{id:t,value:r}=e;return w.createElement("div",{id:t,style:zI},r)}function LI(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return w.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}const OI=i.createContext(null),_I={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},FI={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function $I(e){let{announcements:t=FI,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=_I}=e;const{announce:o,announcement:s}=function(){const[e,t]=i.useState("");return{announce:i.useCallback((e=>{null!=e&&t(e)}),[]),announcement:e}}(),l=CI("DndLiveRegion"),[c,u]=i.useState(!1);if(i.useEffect((()=>{u(!0)}),[]),function(e){const t=i.useContext(OI);i.useEffect((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}(i.useMemo((()=>({onDragStart(e){let{active:r}=e;o(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:n}=e;t.onDragMove&&o(t.onDragMove({active:r,over:n}))},onDragOver(e){let{active:r,over:n}=e;o(t.onDragOver({active:r,over:n}))},onDragEnd(e){let{active:r,over:n}=e;o(t.onDragEnd({active:r,over:n}))},onDragCancel(e){let{active:r,over:n}=e;o(t.onDragCancel({active:r,over:n}))}})),[o,t])),!c)return null;const d=w.createElement(w.Fragment,null,w.createElement(DI,{id:n,value:a.draggable}),w.createElement(LI,{id:l,announcement:s}));return r?Ce.createPortal(d,r):d}var NI,WI;function UI(){}function BI(e,t){return i.useMemo((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}(WI=NI||(NI={})).DragStart="dragStart",WI.DragMove="dragMove",WI.DragEnd="dragEnd",WI.DragCancel="dragCancel",WI.DragOver="dragOver",WI.RegisterDroppable="registerDroppable",WI.SetDroppableDisabled="setDroppableDisabled",WI.UnregisterDroppable="unregisterDroppable";const HI=Object.freeze({x:0,y:0});function VI(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function YI(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function GI(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function qI(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function JI(e,t){if(!e||0===e.length)return null;const[r]=e;return r[t]}function KI(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}const XI=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=KI(t,t.left,t.top),i=[];for(const o of n){const{id:e}=o,t=r.get(e);if(t){const r=VI(KI(t),a);i.push({id:e,data:{droppableContainer:o,value:r}})}}return i.sort(YI)};function QI(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-n,s=i-r;if(n<a&&r<i){const r=t.width*t.height,n=e.width*e.height,a=o*s;return Number((a/(r+n-a)).toFixed(4))}return 0}const ZI=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const i of n){const{id:e}=i,n=r.get(e);if(n){const r=QI(n,t);r>0&&a.push({id:e,data:{droppableContainer:i,value:r}})}}return a.sort(GI)};function eM(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:HI}function tM(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce(((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x})),{...t})}}const rM=tM(1),nM={ignoreTransform:!1};function aM(e,t){void 0===t&&(t=nM);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:n}=hI(e).getComputedStyle(e);t&&(r=function(e,t,r){const n=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!n)return e;const{scaleX:a,scaleY:i,x:o,y:s}=n,l=e.left-o-(1-a)*parseFloat(r),c=e.top-s-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),u=a?e.width/a:e.width,d=i?e.height/i:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(r,t,n))}const{top:n,left:a,width:i,height:o,bottom:s,right:l}=r;return{top:n,left:a,width:i,height:o,bottom:s,right:l}}function iM(e){return aM(e,{ignoreTransform:!0})}function oM(e,t){const r=[];return e?function n(a){if(null!=t&&r.length>=t)return r;if(!a)return r;if(pI(a)&&null!=a.scrollingElement&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!fI(a)||mI(a))return r;if(r.includes(a))return r;const i=hI(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=hI(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const n=t[e];return"string"==typeof n&&r.test(n)}))}(a,i)&&r.push(a),function(e,t){return void 0===t&&(t=hI(e).getComputedStyle(e)),"fixed"===t.position}(a,i)?r:n(a.parentNode)}(e):r}function sM(e){const[t]=oM(e,1);return null!=t?t:null}function lM(e){return cI&&e?uI(e)?e:dI(e)?pI(e)||e===gI(e).scrollingElement?window:fI(e)?e:null:null:null}function cM(e){return uI(e)?e.scrollX:e.scrollLeft}function uM(e){return uI(e)?e.scrollY:e.scrollTop}function dM(e){return{x:cM(e),y:uM(e)}}var hM,pM;function fM(e){return!(!cI||!e)&&e===document.scrollingElement}function mM(e){const t={x:0,y:0},r=fM(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}(pM=hM||(hM={}))[pM.Forward=1]="Forward",pM[pM.Backward=-1]="Backward";const gM={x:.2,y:.2};function yM(e,t,r,n,a){let{top:i,left:o,right:s,bottom:l}=r;void 0===n&&(n=10),void 0===a&&(a=gM);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=mM(e),p={x:0,y:0},f={x:0,y:0},m=t.height*a.y,g=t.width*a.x;return!c&&i<=t.top+m?(p.y=hM.Backward,f.y=n*Math.abs((t.top+m-i)/m)):!u&&l>=t.bottom-m&&(p.y=hM.Forward,f.y=n*Math.abs((t.bottom-m-l)/m)),!h&&s>=t.right-g?(p.x=hM.Forward,f.x=n*Math.abs((t.right-g-s)/g)):!d&&o<=t.left+g&&(p.x=hM.Backward,f.x=n*Math.abs((t.left+g-o)/g)),{direction:p,speed:f}}function bM(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function xM(e){return e.reduce(((e,t)=>PI(e,dM(t))),HI)}const vM=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+cM(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+uM(t)),0)}]];class wM{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=oM(t),n=xM(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,i,o]of vM)for(const e of i)Object.defineProperty(this,e,{get:()=>{const t=o(r),i=n[a]-t;return this.rect[e]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class SM{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function jM(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}var CM,kM,PM,AM;function EM(e){e.preventDefault()}function IM(e){e.stopPropagation()}(kM=CM||(CM={})).Click="click",kM.DragStart="dragstart",kM.Keydown="keydown",kM.ContextMenu="contextmenu",kM.Resize="resize",kM.SelectionChange="selectionchange",kM.VisibilityChange="visibilitychange",(AM=PM||(PM={})).Space="Space",AM.Down="ArrowDown",AM.Right="ArrowRight",AM.Left="ArrowLeft",AM.Up="ArrowUp",AM.Esc="Escape",AM.Enter="Enter",AM.Tab="Tab";const MM={start:[PM.Space,PM.Enter],cancel:[PM.Esc],end:[PM.Space,PM.Enter,PM.Tab]},TM=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case PM.Right:return{...r,x:r.x+25};case PM.Left:return{...r,x:r.x-25};case PM.Down:return{...r,y:r.y+25};case PM.Up:return{...r,y:r.y-25}}};class RM{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new SM(gI(t)),this.windowListeners=new SM(hI(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(CM.Resize,this.handleCancel),this.windowListeners.add(CM.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(CM.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&function(e,t){if(void 0===t&&(t=aM),!e)return;const{top:r,left:n,bottom:a,right:i}=t(e);sM(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(r),t(HI)}handleKeyDown(e){if(EI(e)){const{active:t,context:r,options:n}=this.props,{keyboardCodes:a=MM,coordinateGetter:i=TM,scrollBehavior:o="smooth"}=n,{code:s}=e;if(a.end.includes(s))return void this.handleEnd(e);if(a.cancel.includes(s))return void this.handleCancel(e);const{collisionRect:l}=r.current,c=l?{x:l.left,y:l.top}:HI;this.referenceCoordinates||(this.referenceCoordinates=c);const u=i(e,{active:t,context:r.current,currentCoordinates:c});if(u){const t=AI(u,c),n={x:0,y:0},{scrollableAncestors:a}=r.current;for(const r of a){const a=e.code,{isTop:i,isRight:s,isLeft:l,isBottom:c,maxScroll:d,minScroll:h}=mM(r),p=bM(r),f={x:Math.min(a===PM.Right?p.right-p.width/2:p.right,Math.max(a===PM.Right?p.left:p.left+p.width/2,u.x)),y:Math.min(a===PM.Down?p.bottom-p.height/2:p.bottom,Math.max(a===PM.Down?p.top:p.top+p.height/2,u.y))},m=a===PM.Right&&!s||a===PM.Left&&!l,g=a===PM.Down&&!c||a===PM.Up&&!i;if(m&&f.x!==u.x){const e=r.scrollLeft+t.x,i=a===PM.Right&&e<=d.x||a===PM.Left&&e>=h.x;if(i&&!t.y)return void r.scrollTo({left:e,behavior:o});n.x=i?r.scrollLeft-e:a===PM.Right?r.scrollLeft-d.x:r.scrollLeft-h.x,n.x&&r.scrollBy({left:-n.x,behavior:o});break}if(g&&f.y!==u.y){const e=r.scrollTop+t.y,i=a===PM.Down&&e<=d.y||a===PM.Up&&e>=h.y;if(i&&!t.x)return void r.scrollTo({top:e,behavior:o});n.y=i?r.scrollTop-e:a===PM.Down?r.scrollTop-d.y:r.scrollTop-h.y,n.y&&r.scrollBy({top:-n.y,behavior:o});break}}this.handleMove(e,PI(AI(u,this.referenceCoordinates),n))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function zM(e){return Boolean(e&&"distance"in e)}function DM(e){return Boolean(e&&"delay"in e)}RM.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=MM,onActivation:a}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const t=i.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==a||a({event:e.nativeEvent}),0))}return!1}}];class LM{constructor(e,t,r){var n;void 0===r&&(r=function(e){const{EventTarget:t}=hI(e);return e instanceof t?e:gI(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:i}=a;this.props=e,this.events=t,this.document=gI(i),this.documentListeners=new SM(this.document),this.listeners=new SM(r),this.windowListeners=new SM(hI(i)),this.initialCoordinates=null!=(n=II(a))?n:HI,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(CM.Resize,this.handleCancel),this.windowListeners.add(CM.DragStart,EM),this.windowListeners.add(CM.VisibilityChange,this.handleCancel),this.windowListeners.add(CM.ContextMenu,EM),this.documentListeners.add(CM.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(DM(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(zM(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(CM.Click,IM,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(CM.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:n,props:a}=this,{onMove:i,options:{activationConstraint:o}}=a;if(!n)return;const s=null!=(t=II(e))?t:HI,l=AI(n,s);if(!r&&o){if(zM(o)){if(null!=o.tolerance&&jM(l,o.tolerance))return this.handleCancel();if(jM(l,o.distance))return this.handleStart()}return DM(o)&&jM(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}e.cancelable&&e.preventDefault(),i(s)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===PM.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const OM={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class _M extends LM{constructor(e){const{event:t}=e,r=gI(t.target);super(e,OM,r)}}_M.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!(!r.isPrimary||0!==r.button||(null==n||n({event:r}),0))}}];const FM={move:{name:"mousemove"},end:{name:"mouseup"}};var $M,NM;(NM=$M||($M={}))[NM.RightClick=2]="RightClick",class extends LM{constructor(e){super(e,FM,gI(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==$M.RightClick&&(null==n||n({event:r}),!0)}}];const WM={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var UM,BM,HM,VM;function YM(e){let{acceleration:t,activator:r=UM.Pointer,canScroll:n,draggingRect:a,enabled:o,interval:s=5,order:l=HM.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:p}=e;const f=function(e){let{delta:t,disabled:r}=e;const n=SI(t);return vI((e=>{if(r||!n||!e)return GM;const a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[hM.Backward]:e.x[hM.Backward]||-1===a.x,[hM.Forward]:e.x[hM.Forward]||1===a.x},y:{[hM.Backward]:e.y[hM.Backward]||-1===a.y,[hM.Forward]:e.y[hM.Forward]||1===a.y}}}),[r,t,n])}({delta:h,disabled:!o}),[m,g]=function(){const e=i.useRef(null);return[i.useCallback(((t,r)=>{e.current=setInterval(t,r)}),[]),i.useCallback((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),y=i.useRef({x:0,y:0}),b=i.useRef({x:0,y:0}),x=i.useMemo((()=>{switch(r){case UM.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case UM.DraggableRect:return a}}),[r,a,c]),v=i.useRef(null),w=i.useCallback((()=>{const e=v.current;if(!e)return;const t=y.current.x*b.current.x,r=y.current.y*b.current.y;e.scrollBy(t,r)}),[]),S=i.useMemo((()=>l===HM.TreeOrder?[...u].reverse():u),[l,u]);i.useEffect((()=>{if(o&&u.length&&x){for(const e of S){if(!1===(null==n?void 0:n(e)))continue;const r=u.indexOf(e),a=d[r];if(!a)continue;const{direction:i,speed:o}=yM(e,a,x,t,p);for(const e of["x","y"])f[e][i[e]]||(o[e]=0,i[e]=0);if(o.x>0||o.y>0)return g(),v.current=e,m(w,s),y.current=o,void(b.current=i)}y.current={x:0,y:0},b.current={x:0,y:0},g()}else g()}),[t,w,n,g,o,s,JSON.stringify(x),JSON.stringify(f),m,u,S,d,JSON.stringify(p)])}(class extends LM{constructor(e){super(e,WM)}static setup(){return window.addEventListener(WM.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(WM.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return!(a.length>1||(null==n||n({event:r}),0))}}],(BM=UM||(UM={}))[BM.Pointer=0]="Pointer",BM[BM.DraggableRect=1]="DraggableRect",(VM=HM||(HM={}))[VM.TreeOrder=0]="TreeOrder",VM[VM.ReversedTreeOrder=1]="ReversedTreeOrder";const GM={x:{[hM.Backward]:!1,[hM.Forward]:!1},y:{[hM.Backward]:!1,[hM.Forward]:!1}};var qM,JM,KM;(JM=qM||(qM={}))[JM.Always=0]="Always",JM[JM.BeforeDragging=1]="BeforeDragging",JM[JM.WhileDragging=2]="WhileDragging",(KM||(KM={})).Optimized="optimized";const XM=new Map;function QM(e,t){return vI((r=>e?r||("function"==typeof t?t(e):e):null),[t,e])}function ZM(e){let{callback:t,disabled:r}=e;const n=bI(t),a=i.useMemo((()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(n)}),[r]);return i.useEffect((()=>()=>null==a?void 0:a.disconnect()),[a]),a}function eT(e){return new wM(aM(e),e)}function tT(e,t,r){void 0===t&&(t=eT);const[n,a]=i.useState(null);function o(){a((n=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=n?n:r)?a:null;const i=t(e);return JSON.stringify(n)===JSON.stringify(i)?n:i}))}const s=function(e){let{callback:t,disabled:r}=e;const n=bI(t),a=i.useMemo((()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(n)}),[n,r]);return i.useEffect((()=>()=>null==a?void 0:a.disconnect()),[a]),a}({callback(t){if(e)for(const r of t){const{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){o();break}}}}),l=ZM({callback:o});return yI((()=>{o(),e?(null==l||l.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==s||s.disconnect())}),[e]),n}const rT=[];function nT(e,t){void 0===t&&(t=[]);const r=i.useRef(null);return i.useEffect((()=>{r.current=null}),t),i.useEffect((()=>{const t=e!==HI;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)}),[e]),r.current?AI(e,r.current):HI}function aT(e){return i.useMemo((()=>e?function(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null),[e])}const iT=[];function oT(e){let{measure:t}=e;const[r,n]=i.useState(null),a=ZM({callback:i.useCallback((e=>{for(const{target:r}of e)if(fI(r)){n((e=>{const n=t(r);return e?{...e,width:n.width,height:n.height}:n}));break}}),[t])}),o=i.useCallback((e=>{const r=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return fI(t)?t:e}(e);null==a||a.disconnect(),r&&(null==a||a.observe(r)),n(r?t(r):null)}),[t,a]),[s,l]=wI(o);return i.useMemo((()=>({nodeRef:s,rect:r,setRef:l})),[r,s,l])}const sT=[{sensor:_M,options:{}},{sensor:RM,options:{}}],lT={current:{}},cT={draggable:{measure:iM},droppable:{measure:iM,strategy:qM.WhileDragging,frequency:KM.Optimized},dragOverlay:{measure:aM}};class uT extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}const dT={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new uT,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:UI},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cT,measureDroppableContainers:UI,windowRect:null,measuringScheduled:!1},hT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:UI,draggableNodes:new Map,over:null,measureDroppableContainers:UI},pT=i.createContext(hT),fT=i.createContext(dT);function mT(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new uT}}}function gT(e,t){switch(t.type){case NI.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case NI.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case NI.DragEnd:case NI.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case NI.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new uT(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case NI.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new uT(e.droppable.containers);return o.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case NI.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new uT(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function yT(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:a}=i.useContext(pT),o=SI(n),s=SI(null==r?void 0:r.id);return i.useEffect((()=>{if(!t&&!n&&o&&null!=s){if(!EI(o))return;if(document.activeElement===o.target)return;const e=a.get(s);if(!e)return;const{activatorNode:t,node:r}=e;if(!t.current&&!r.current)return;requestAnimationFrame((()=>{for(const e of[t.current,r.current]){if(!e)continue;const t=RI(e);if(t){t.focus();break}}}))}}),[n,t,a,s,o]),null}const bT=i.createContext({...HI,scaleX:1,scaleY:1});var xT,vT;(vT=xT||(xT={}))[vT.Uninitialized=0]="Uninitialized",vT[vT.Initializing=1]="Initializing",vT[vT.Initialized=2]="Initialized";const wT=i.memo((function(e){var t,r,n,a;let{id:o,accessibility:s,autoScroll:l=!0,children:c,sensors:u=sT,collisionDetection:d=ZI,measuring:h,modifiers:p,...f}=e;const m=i.useReducer(gT,void 0,mT),[g,y]=m,[b,x]=function(){const[e]=i.useState((()=>new Set)),t=i.useCallback((t=>(e.add(t),()=>e.delete(t))),[e]);return[i.useCallback((t=>{let{type:r,event:n}=t;e.forEach((e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)}))}),[e]),t]}(),[v,S]=i.useState(xT.Uninitialized),j=v===xT.Initialized,{draggable:{active:C,nodes:k,translate:P},droppable:{containers:A}}=g,E=null!=C?k.get(C):null,I=i.useRef({initial:null,translated:null}),M=i.useMemo((()=>{var e;return null!=C?{id:C,data:null!=(e=null==E?void 0:E.data)?e:lT,rect:I}:null}),[C,E]),T=i.useRef(null),[R,z]=i.useState(null),[D,L]=i.useState(null),O=xI(f,Object.values(f)),_=CI("DndDescribedBy",o),F=i.useMemo((()=>A.getEnabled()),[A]),$=(N=h,i.useMemo((()=>({draggable:{...cT.draggable,...null==N?void 0:N.draggable},droppable:{...cT.droppable,...null==N?void 0:N.droppable},dragOverlay:{...cT.dragOverlay,...null==N?void 0:N.dragOverlay}})),[null==N?void 0:N.draggable,null==N?void 0:N.droppable,null==N?void 0:N.dragOverlay]));var N;const{droppableRects:W,measureDroppableContainers:U,measuringScheduled:B}=function(e,t){let{dragging:r,dependencies:n,config:a}=t;const[o,s]=i.useState(null),{frequency:l,measure:c,strategy:u}=a,d=i.useRef(e),h=function(){switch(u){case qM.Always:return!1;case qM.BeforeDragging:return r;default:return!r}}(),p=xI(h),f=i.useCallback((function(e){void 0===e&&(e=[]),p.current||s((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[p]),m=i.useRef(null),g=vI((t=>{if(h&&!r)return XM;if(!t||t===XM||d.current!==e||null!=o){const t=new Map;for(let r of e){if(!r)continue;if(o&&o.length>0&&!o.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}const e=r.node.current,n=e?new wM(c(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t}),[e,o,r,h,c]);return i.useEffect((()=>{d.current=e}),[e]),i.useEffect((()=>{h||f()}),[r,h]),i.useEffect((()=>{o&&o.length>0&&s(null)}),[JSON.stringify(o)]),i.useEffect((()=>{h||"number"!=typeof l||null!==m.current||(m.current=setTimeout((()=>{f(),m.current=null}),l))}),[l,h,f,...n]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=o}}(F,{dragging:j,dependencies:[P.x,P.y],config:$.droppable}),H=function(e,t){const r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return vI((e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null}),[n,t])}(k,C),V=i.useMemo((()=>D?II(D):null),[D]),Y=function(){const e=!1===(null==R?void 0:R.autoScrollEnabled),t="object"==typeof l?!1===l.enabled:!1===l,r=j&&!e&&!t;return"object"==typeof l?{...l,enabled:r}:{enabled:r}}(),G=function(e,t){return QM(e,t)}(H,$.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e;const o=i.useRef(!1),{x:s,y:l}="boolean"==typeof a?{x:a,y:a}:a;yI((()=>{if(!s&&!l||!t)return void(o.current=!1);if(o.current||!n)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const a=eM(r(e),n);if(s||(a.x=0),l||(a.y=0),o.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){const t=sM(e);t&&t.scrollBy({top:a.y,left:a.x})}}),[t,s,l,n,r])}({activeNode:null!=C?k.get(C):null,config:Y.layoutShiftCompensation,initialRect:G,measure:$.draggable.measure});const q=tT(H,$.draggable.measure,G),J=tT(H?H.parentElement:null),K=i.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:W,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=A.getNodeFor(null==(t=K.current.over)?void 0:t.id),Q=oT({measure:$.dragOverlay.measure}),Z=null!=(r=Q.nodeRef.current)?r:H,ee=j?null!=(n=Q.rect)?n:q:null,te=Boolean(Q.nodeRef.current&&Q.rect),re=eM(ne=te?null:q,QM(ne));var ne;const ae=aT(Z?hI(Z):null),ie=function(e){const t=i.useRef(e),r=vI((r=>e?r&&r!==rT&&e&&t.current&&e.parentNode===t.current.parentNode?r:oM(e):rT),[e]);return i.useEffect((()=>{t.current=e}),[e]),r}(j?null!=X?X:H:null),oe=function(e,t){void 0===t&&(t=aM);const[r]=e,n=aT(r?hI(r):null),[a,o]=i.useState(iT);function s(){o((()=>e.length?e.map((e=>fM(e)?n:new wM(t(e),e))):iT))}const l=ZM({callback:s});return yI((()=>{null==l||l.disconnect(),s(),e.forEach((e=>null==l?void 0:l.observe(e)))}),[e]),a}(ie),se=function(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...n})),r):r}(p,{transform:{x:P.x-re.x,y:P.y-re.y,scaleX:1,scaleY:1},activatorEvent:D,active:M,activeNodeRect:q,containerNodeRect:J,draggingNodeRect:ee,over:K.current.over,overlayNodeRect:Q.rect,scrollableAncestors:ie,scrollableAncestorRects:oe,windowRect:ae}),le=V?PI(V,P):null,ce=function(e){const[t,r]=i.useState(null),n=i.useRef(e),a=i.useCallback((e=>{const t=lM(e.target);t&&r((e=>e?(e.set(t,dM(t)),new Map(e)):null))}),[]);return i.useEffect((()=>{const t=n.current;if(e!==t){i(t);const o=e.map((e=>{const t=lM(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,dM(t)]):null})).filter((e=>null!=e));r(o.length?new Map(o):null),n.current=e}return()=>{i(e),i(t)};function i(e){e.forEach((e=>{const t=lM(e);null==t||t.removeEventListener("scroll",a)}))}}),[a,e]),i.useMemo((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>PI(e,t)),HI):xM(e):HI),[e,t])}(ie),ue=nT(ce),de=nT(ce,[q]),he=PI(se,ue),pe=ee?rM(ee,se):null,fe=M&&pe?d({active:M,collisionRect:pe,droppableRects:W,droppableContainers:F,pointerCoordinates:le}):null,me=JI(fe,"id"),[ge,ye]=i.useState(null),be=function(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}(te?se:PI(se,de),null!=(a=null==ge?void 0:ge.rect)?a:null,q),xe=i.useRef(null),ve=i.useCallback(((e,t)=>{let{sensor:r,options:n}=t;if(null==T.current)return;const a=k.get(T.current);if(!a)return;const i=e.nativeEvent,o=new r({active:T.current,activeNode:a,event:i,options:n,context:K,onAbort(e){if(!k.get(e))return;const{onDragAbort:t}=O.current,r={id:e};null==t||t(r),b({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!k.get(e))return;const{onDragPending:a}=O.current,i={id:e,constraint:t,initialCoordinates:r,offset:n};null==a||a(i),b({type:"onDragPending",event:i})},onStart(e){const t=T.current;if(null==t)return;const r=k.get(t);if(!r)return;const{onDragStart:n}=O.current,a={activatorEvent:i,active:{id:t,data:r.data,rect:I}};Ce.unstable_batchedUpdates((()=>{null==n||n(a),S(xT.Initializing),y({type:NI.DragStart,initialCoordinates:e,active:t}),b({type:"onDragStart",event:a}),z(xe.current),L(i)}))},onMove(e){y({type:NI.DragMove,coordinates:e})},onEnd:s(NI.DragEnd),onCancel:s(NI.DragCancel)});function s(e){return async function(){const{active:t,collisions:r,over:n,scrollAdjustedTranslate:a}=K.current;let o=null;if(t&&a){const{cancelDrop:s}=O.current;o={activatorEvent:i,active:t,collisions:r,delta:a,over:n},e===NI.DragEnd&&"function"==typeof s&&await Promise.resolve(s(o))&&(e=NI.DragCancel)}T.current=null,Ce.unstable_batchedUpdates((()=>{y({type:e}),S(xT.Uninitialized),ye(null),z(null),L(null),xe.current=null;const t=e===NI.DragEnd?"onDragEnd":"onDragCancel";if(o){const e=O.current[t];null==e||e(o),b({type:t,event:o})}}))}}xe.current=o}),[k]),we=function(e,t){return i.useMemo((()=>e.reduce(((e,r)=>{const{sensor:n}=r;return[...e,...n.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,r)})))]}),[])),[e,t])}(u,i.useCallback(((e,t)=>(r,n)=>{const a=r.nativeEvent,i=k.get(n);if(null!==T.current||!i||a.dndKit||a.defaultPrevented)return;const o={active:i};!0===e(r,t.options,o)&&(a.dndKit={capturedBy:t.sensor},T.current=n,ve(r,t))}),[k,ve]));!function(e){i.useEffect((()=>{if(!cI)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(u),yI((()=>{q&&v===xT.Initializing&&S(xT.Initialized)}),[q,v]),i.useEffect((()=>{const{onDragMove:e}=O.current,{active:t,activatorEvent:r,collisions:n,over:a}=K.current;if(!t||!r)return;const i={active:t,activatorEvent:r,collisions:n,delta:{x:he.x,y:he.y},over:a};Ce.unstable_batchedUpdates((()=>{null==e||e(i),b({type:"onDragMove",event:i})}))}),[he.x,he.y]),i.useEffect((()=>{const{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:a}=K.current;if(!e||null==T.current||!t||!a)return;const{onDragOver:i}=O.current,o=n.get(me),s=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:r,delta:{x:a.x,y:a.y},over:s};Ce.unstable_batchedUpdates((()=>{ye(s),null==i||i(l),b({type:"onDragOver",event:l})}))}),[me]),yI((()=>{K.current={activatorEvent:D,active:M,activeNode:H,collisionRect:pe,collisions:fe,droppableRects:W,draggableNodes:k,draggingNode:Z,draggingNodeRect:ee,droppableContainers:A,over:ge,scrollableAncestors:ie,scrollAdjustedTranslate:he},I.current={initial:ee,translated:pe}}),[M,H,fe,pe,k,Z,ee,W,A,ge,ie,he]),YM({...Y,delta:P,draggingRect:pe,pointerCoordinates:le,scrollableAncestors:ie,scrollableAncestorRects:oe});const Se=i.useMemo((()=>({active:M,activeNode:H,activeNodeRect:q,activatorEvent:D,collisions:fe,containerNodeRect:J,dragOverlay:Q,draggableNodes:k,droppableContainers:A,droppableRects:W,over:ge,measureDroppableContainers:U,scrollableAncestors:ie,scrollableAncestorRects:oe,measuringConfiguration:$,measuringScheduled:B,windowRect:ae})),[M,H,q,D,fe,J,Q,k,A,W,ge,U,ie,oe,$,B,ae]),je=i.useMemo((()=>({activatorEvent:D,activators:we,active:M,activeNodeRect:q,ariaDescribedById:{draggable:_},dispatch:y,draggableNodes:k,over:ge,measureDroppableContainers:U})),[D,we,M,q,y,_,k,ge,U]);return w.createElement(OI.Provider,{value:x},w.createElement(pT.Provider,{value:je},w.createElement(fT.Provider,{value:Se},w.createElement(bT.Provider,{value:be},c)),w.createElement(yT,{disabled:!1===(null==s?void 0:s.restoreFocus)})),w.createElement($I,{...s,hiddenTextDescribedById:_}))})),ST=i.createContext(null),jT="button";function CT(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e;const o=CI("Draggable"),{activators:s,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:p}=i.useContext(pT),{role:f=jT,roleDescription:m="draggable",tabIndex:g=0}=null!=a?a:{},y=(null==c?void 0:c.id)===t,b=i.useContext(y?bT:ST),[x,v]=wI(),[w,S]=wI(),j=function(e,t){return i.useMemo((()=>e.reduce(((e,r)=>{let{eventName:n,handler:a}=r;return e[n]=e=>{a(e,t)},e}),{})),[e,t])}(s,t),C=xI(r);return yI((()=>(h.set(t,{id:t,key:o,node:x,activatorNode:w,data:C}),()=>{const e=h.get(t);e&&e.key===o&&h.delete(t)})),[h,t]),{active:c,activatorEvent:l,activeNodeRect:u,attributes:i.useMemo((()=>({role:f,tabIndex:g,"aria-disabled":n,"aria-pressed":!(!y||f!==jT)||void 0,"aria-roledescription":m,"aria-describedby":d.draggable})),[n,f,g,y,m,d.draggable]),isDragging:y,listeners:n?void 0:j,node:x,over:p,setNodeRef:v,setActivatorNodeRef:S,transform:b}}const kT={timeout:25};function PT(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function AT(e,t){return e.reduce(((e,r,n)=>{const a=t.get(r);return a&&(e[n]=a),e}),Array(e.length))}function ET(e){return null!==e&&e>=0}const IT=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const i=PT(t,n,r),o=t[a],s=i[a];return s&&o?{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}:null},MT={scaleX:1,scaleY:1},TT=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:a,rects:i,overIndex:o}=e;const s=null!=(t=i[r])?t:n;if(!s)return null;if(a===r){const e=i[o];return e?{x:0,y:r<o?e.top+e.height-(s.top+s.height):e.top-s.top,...MT}:null}const l=function(e,t,r){const n=e[t],a=e[t-1],i=e[t+1];return n?r<t?a?n.top-(a.top+a.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):a?n.top-(a.top+a.height):0:0}(i,a,r);return a>r&&a<=o?{x:0,y:-s.height-l,...MT}:a<r&&a>=o?{x:0,y:s.height+l,...MT}:{x:0,y:0,...MT}},RT="Sortable",zT=w.createContext({activeIndex:-1,containerId:RT,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:IT,disabled:{draggable:!1,droppable:!1}});function DT(e){let{children:t,id:r,items:n,strategy:a=IT,disabled:o=!1}=e;const{active:s,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=i.useContext(fT),h=CI(RT,r),p=Boolean(null!==l.rect),f=i.useMemo((()=>n.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[n]),m=null!=s,g=s?f.indexOf(s.id):-1,y=u?f.indexOf(u.id):-1,b=i.useRef(f),x=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(f,b.current),v=-1!==y&&-1===g||x,S=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(o);yI((()=>{x&&m&&d(f)}),[x,f,m,d]),i.useEffect((()=>{b.current=f}),[f]);const j=i.useMemo((()=>({activeIndex:g,containerId:h,disabled:S,disableTransforms:v,items:f,overIndex:y,useDragOverlay:p,sortedRects:AT(f,c),strategy:a})),[g,h,S.draggable,S.droppable,v,f,y,c,p,a]);return w.createElement(zT.Provider,{value:j},t)}const LT=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return PT(r,n,a).indexOf(t)},OT=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:i,newIndex:o,previousItems:s,previousContainerId:l,transition:c}=e;return!(!c||!n||s!==i&&a===o||!r&&(o===a||t!==l))},_T={duration:200,easing:"ease"},FT="transform",$T=MI.Transition.toString({property:FT,duration:0,easing:"linear"}),NT={roleDescription:"sortable"};function WT(e){let{animateLayoutChanges:t=OT,attributes:r,disabled:n,data:a,getNewIndex:o=LT,id:s,strategy:l,resizeObserverConfig:c,transition:u=_T}=e;const{items:d,containerId:h,activeIndex:p,disabled:f,disableTransforms:m,sortedRects:g,overIndex:y,useDragOverlay:b,strategy:x}=i.useContext(zT),v=function(e,t){var r,n;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(n,f),w=d.indexOf(s),S=i.useMemo((()=>({sortable:{containerId:h,index:w,items:d},...a})),[h,a,w,d]),j=i.useMemo((()=>d.slice(d.indexOf(s))),[d,s]),{rect:C,node:k,isOver:P,setNodeRef:A}=function(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e;const o=CI("Droppable"),{active:s,dispatch:l,over:c,measureDroppableContainers:u}=i.useContext(pT),d=i.useRef({disabled:r}),h=i.useRef(!1),p=i.useRef(null),f=i.useRef(null),{disabled:m,updateMeasurementsFor:g,timeout:y}={...kT,...a},b=xI(null!=g?g:n),x=ZM({callback:i.useCallback((()=>{h.current?(null!=f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{u(Array.isArray(b.current)?b.current:[b.current]),f.current=null}),y)):h.current=!0}),[y]),disabled:m||!s}),v=i.useCallback(((e,t)=>{x&&(t&&(x.unobserve(t),h.current=!1),e&&x.observe(e))}),[x]),[w,S]=wI(v),j=xI(t);return i.useEffect((()=>{x&&w.current&&(x.disconnect(),h.current=!1,x.observe(w.current))}),[w,x]),i.useEffect((()=>(l({type:NI.RegisterDroppable,element:{id:n,key:o,disabled:r,node:w,rect:p,data:j}}),()=>l({type:NI.UnregisterDroppable,key:o,id:n}))),[n]),i.useEffect((()=>{r!==d.current.disabled&&(l({type:NI.SetDroppableDisabled,id:n,key:o,disabled:r}),d.current.disabled=r)}),[n,o,r,l]),{active:s,rect:p,isOver:(null==c?void 0:c.id)===n,node:w,over:c,setNodeRef:S}}({id:s,data:S,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...c}}),{active:E,activatorEvent:I,activeNodeRect:M,attributes:T,setNodeRef:R,listeners:z,isDragging:D,over:L,setActivatorNodeRef:O,transform:_}=CT({id:s,data:S,attributes:{...NT,...r},disabled:v.draggable}),F=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.useMemo((()=>e=>{t.forEach((t=>t(e)))}),t)}(A,R),$=Boolean(E),N=$&&!m&&ET(p)&&ET(y),W=!b&&D,U=W&&N?_:null,B=N?null!=U?U:(null!=l?l:x)({rects:g,activeNodeRect:M,activeIndex:p,overIndex:y,index:w}):null,H=ET(p)&&ET(y)?o({id:s,items:d,activeIndex:p,overIndex:y}):w,V=null==E?void 0:E.id,Y=i.useRef({activeId:V,items:d,newIndex:H,containerId:h}),G=d!==Y.current.items,q=t({active:E,containerId:h,isDragging:D,isSorting:$,id:s,index:w,items:d,newIndex:Y.current.newIndex,previousItems:Y.current.items,previousContainerId:Y.current.containerId,transition:u,wasDragging:null!=Y.current.activeId}),J=function(e){let{disabled:t,index:r,node:n,rect:a}=e;const[o,s]=i.useState(null),l=i.useRef(r);return yI((()=>{if(!t&&r!==l.current&&n.current){const e=a.current;if(e){const t=aM(n.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&s(r)}}r!==l.current&&(l.current=r)}),[t,r,n,a]),i.useEffect((()=>{o&&s(null)}),[o]),o}({disabled:!q,index:w,node:k,rect:C});return i.useEffect((()=>{$&&Y.current.newIndex!==H&&(Y.current.newIndex=H),h!==Y.current.containerId&&(Y.current.containerId=h),d!==Y.current.items&&(Y.current.items=d)}),[$,H,h,d]),i.useEffect((()=>{if(V===Y.current.activeId)return;if(null!=V&&null==Y.current.activeId)return void(Y.current.activeId=V);const e=setTimeout((()=>{Y.current.activeId=V}),50);return()=>clearTimeout(e)}),[V]),{active:E,activeIndex:p,attributes:T,data:S,rect:C,index:w,newIndex:H,items:d,isOver:P,isSorting:$,isDragging:D,listeners:z,node:k,overIndex:y,over:L,setNodeRef:F,setActivatorNodeRef:O,setDroppableNodeRef:A,setDraggableNodeRef:R,transform:null!=J?J:B,transition:J||G&&Y.current.newIndex===w?$T:W&&!EI(I)||!u?void 0:$||q?MI.Transition.toString({...u,property:FT}):void 0}}function UT(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const BT=[PM.Down,PM.Right,PM.Up,PM.Left],HT=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:s}}=t;if(BT.includes(e.code)){if(e.preventDefault(),!r||!n)return;const t=[];i.getEnabled().forEach((r=>{if(!r||null!=r&&r.disabled)return;const i=a.get(r.id);if(i)switch(e.code){case PM.Down:n.top<i.top&&t.push(r);break;case PM.Up:n.top>i.top&&t.push(r);break;case PM.Left:n.left>i.left&&t.push(r);break;case PM.Right:n.left<i.left&&t.push(r)}}));const u=(e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=qI(t),i=[];for(const o of n){const{id:e}=o,t=r.get(e);if(t){const r=qI(t),n=a.reduce(((e,t,n)=>e+VI(r[n],t)),0),s=Number((n/4).toFixed(4));i.push({id:e,data:{droppableContainer:o,value:s}})}}return i.sort(YI)})({collisionRect:n,droppableRects:a,droppableContainers:t});let d=JI(u,"id");if(d===(null==o?void 0:o.id)&&u.length>1&&(d=u[1].id),null!=d){const e=i.get(r.id),t=i.get(d),o=t?a.get(t.id):null,u=null==t?void 0:t.node.current;if(u&&o&&e&&t){const r=oM(u).some(((e,t)=>s[t]!==e)),a=VT(e,t),i=(c=t,!(!UT(l=e)||!UT(c))&&!!VT(l,c)&&l.data.current.sortable.index<c.data.current.sortable.index),d=r||!a?{x:0,y:0}:{x:i?n.width-o.width:0,y:i?n.height-o.height:0},h={x:o.left,y:o.top};return d.x&&d.y?h:AI(h,d)}}}var l,c};function VT(e,t){return!(!UT(e)||!UT(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const YT=({open:e,clip:t,clipIndex:r,onClose:n,onSave:a,onRegenerate:o})=>{const[l,c]=i.useState(t),[p,f]=i.useState(!1),[m,v]=i.useState([]),[w,S]=i.useState(t?.artist||""),[j,C]=i.useState(t?.song?.title||"");return i.useEffect((()=>{c(t),S(t?.artist||""),C(t?.song?.title||"")}),[t]),t?s.jsxs(g,{open:e,onClose:n,maxWidth:"md",fullWidth:!0,children:[s.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs(h,{variant:"h6",children:["Edit Clip #",r+1]}),s.jsx(d,{onClick:n,size:"small",children:s.jsx(An,{})})]}),s.jsx(b,{children:s.jsxs(U,{container:!0,spacing:3,children:[s.jsx(U,{item:!0,xs:12,md:6,children:s.jsxs(N,{children:[s.jsx(Y,{component:"img",height:"200",image:`https://img.youtube.com/vi/${(e=>{const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return t?t[1]:"dQw4w9WgXcQ"})(l.song?.url||"")}/mqdefault.jpg`,alt:l.song?.title}),s.jsxs(W,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Current Clip"}),s.jsx(h,{variant:"body1",sx:{fontWeight:"bold"},children:l.song?.title}),s.jsxs(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["by ",l.artist]}),s.jsxs(I,{direction:"row",spacing:1,sx:{mt:2},children:[s.jsx(q,{size:"small",label:`${Math.round(100*l.artistSimilarity)}% match`,color:(E=l.artistSimilarity,E>=.7?"success":E>=.4?"warning":"error")}),s.jsx(q,{size:"small",label:l.selectionMethod,variant:"outlined",color:"cached"===l.selectionMethod?"success":"fallback"===l.selectionMethod?"warning":"default"}),s.jsx(q,{size:"small",label:`${l.clipDuration}s`,variant:"outlined"})]}),s.jsxs(u,{sx:{mt:2,display:"flex",gap:1},children:[s.jsx(G,{title:"Preview on YouTube",children:s.jsx(d,{size:"small",onClick:()=>{window.open(l.song?.url,"_blank")},children:s.jsx(da,{})})}),s.jsx(G,{title:"Play Preview",children:s.jsx(d,{size:"small",onClick:()=>{},children:s.jsx(hn,{})})})]})]})]})}),s.jsxs(U,{item:!0,xs:12,md:6,children:[s.jsxs(u,{sx:{mb:3},children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Edit Clip Details"}),s.jsx(T,{fullWidth:!0,label:"Artist Name",value:w,onChange:e=>S(e.target.value),sx:{mb:2}}),s.jsx(T,{fullWidth:!0,label:"Song Title",value:j,onChange:e=>C(e.target.value),sx:{mb:2}}),s.jsx(k,{sx:{my:2}}),s.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Regeneration Options"}),s.jsx(A,{variant:"outlined",startIcon:p?s.jsx(H,{size:16}):s.jsx(Sn,{}),onClick:async()=>{f(!0),v([]);try{const e=w.trim()||t.artist,n=await o(r,e);n&&(c(n),v([n]))}catch(vz){}finally{f(!1)}},disabled:p,fullWidth:!0,sx:{mb:2},children:p?"Finding New Song...":"Find Different Song"}),w!==t.artist&&s.jsxs(x,{severity:"info",sx:{mb:2},children:['Artist changed to "',w,'". Click "Find Different Song" to search for songs by this artist.']})]}),m.length>0&&s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Alternative Options"}),m.map(((e,t)=>s.jsx(N,{sx:{mb:1,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>(e=>{c(e),S(e.artist),C(e.song.title),v([])})(e),children:s.jsxs(W,{sx:{py:1},children:[s.jsx(h,{variant:"body2",sx:{fontWeight:"bold"},children:e.song?.title}),s.jsxs(h,{variant:"caption",color:"text.secondary",children:["by ",e.artist,"  ",Math.round(100*e.artistSimilarity),"% match"]})]})},t)))]})]})]})}),s.jsxs(P,{children:[s.jsx(A,{onClick:n,children:"Cancel"}),s.jsx(A,{onClick:()=>{const e={...l,artist:w,song:{...l.song,title:j}};a(e)},variant:"contained",startIcon:s.jsx(Pi,{}),disabled:!w.trim()||!j.trim(),children:"Save Changes"})]})]}):null;var E},GT=({track:e,index:t,isSelected:r,isRegenerating:n,onSelectClip:a,onEditClip:i,onRegenerateClip:o,onRemoveClip:l,getSimilarityColor:c,theme:p,currentTheme:f,alpha:m})=>{const{attributes:g,listeners:y,setNodeRef:b,transform:x,transition:v,isDragging:w}=WT({id:`clip-${t}`}),j={transform:MI.Transform.toString(x),transition:v},C=c(e.artistSimilarity);return s.jsxs(S,{ref:b,style:j,sx:{border:`1px solid ${m(p.palette.divider,.5)}`,borderRadius:2,mb:1,backgroundColor:w?m(f.primary,.2):r?m(f.primary,.1):"transparent","&:hover":{backgroundColor:m(f.primary,w?.2:.05)},cursor:w?"grabbing":"default",opacity:w?.8:1},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[s.jsx(u,{...g,...y,sx:{display:"flex",alignItems:"center",cursor:"grab",mr:1,color:"text.secondary","&:hover":{color:"text.primary"},"&:active":{cursor:"grabbing"}},children:s.jsx(Ua,{})}),s.jsx($,{checked:r,onChange:()=>a(t),sx:{mr:1}}),s.jsx(Y,{component:"img",sx:{width:80,height:60,borderRadius:1,mr:2},image:`https://img.youtube.com/vi/${e.song.url.includes("youtube.com")&&e.song.url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/)?.[1]||"dQw4w9WgXcQ"}/mqdefault.jpg`,alt:e.song.title}),s.jsxs(u,{sx:{flex:1,minWidth:0},children:[s.jsx(h,{variant:"subtitle1",sx:{fontWeight:"bold"},noWrap:!0,children:e.song.title}),s.jsxs(h,{variant:"body2",color:"text.secondary",noWrap:!0,children:[e.artist,"  ",e.clipDuration,"s clip"]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[s.jsx(q,{size:"small",label:`#${t+1}`,variant:"outlined"}),s.jsx(q,{size:"small",label:`${Math.round(100*e.artistSimilarity)}% match`,color:C}),s.jsx(q,{size:"small",label:e.selectionMethod,variant:"outlined",color:"cached"===e.selectionMethod?"success":"fallback"===e.selectionMethod?"warning":"default"}),e.isSeedArtist&&s.jsx(q,{size:"small",label:"Seed Artist",color:"primary",sx:{fontWeight:"bold"}}),(()=>{const t=e.song?.title?.toLowerCase()||"";return/\b(official\s+(video|audio|music\s+video)|music\s+video)\b/i.test(t)?s.jsx(q,{size:"small",label:"Official",color:"success",variant:"outlined"}):/\b(live|concert|performance|tour|festival)\b/i.test(t)?s.jsx(q,{size:"small",label:"Live",color:"info",variant:"outlined"}):/\b(cover|covers|acoustic\s+version|unplugged)\b/i.test(t)?s.jsx(q,{size:"small",label:"Cover",color:"secondary",variant:"outlined"}):/\b(remix|extended|radio\s+edit|album\s+version|instrumental)\b/i.test(t)?s.jsx(q,{size:"small",label:"Remix",color:"warning",variant:"outlined"}):null})()]})]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(G,{title:"Preview Clip",children:s.jsx(d,{size:"small",onClick:()=>{},children:s.jsx(hn,{})})}),s.jsx(G,{title:"Edit Clip",children:s.jsx(d,{size:"small",onClick:()=>i(e,t),children:s.jsx(Jn,{})})}),s.jsx(G,{title:"Regenerate Clip",children:s.jsx(d,{size:"small",onClick:async()=>{try{await o(t,e.artist)}catch(vz){}},disabled:n,children:s.jsx(Sn,{})})}),s.jsx(G,{title:"Remove Clip",children:s.jsx(d,{size:"small",color:"error",onClick:()=>l(t),children:s.jsx(dn,{})})})]})]}),n&&s.jsx(u,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:m(p.palette.background.paper,.8),display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2},children:s.jsx(h,{variant:"body2",children:"Regenerating..."})})]})},qT=({generationResult:e,targetTrackCount:t,onSavePlaylist:r,onContinueGeneration:n,onCancel:a,onRegenerateClip:o})=>{const l=m(),{currentTheme:d}=qc(),p=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.useMemo((()=>[...t].filter((e=>null!=e))),[...t])}(BI(_M),BI(RM,{coordinateGetter:HT})),[f,x]=i.useState(new Set),[w,S]=i.useState(null),[j,C]=i.useState(!1),[E,M]=i.useState((()=>`Enhanced Power Hour - ${e?.tracks?.[0]?.artist||"Generated"} - ${(new Date).toLocaleDateString()}`)),[R,z]=i.useState(new Set),[D,L]=i.useState(!1),[O,_]=i.useState((()=>e?.tracks||[])),F=O,B=F.length,H=t>0?B/t*100:0,V=i.useMemo((()=>{const e=[],r=[];B<t&&(e.push({type:"warning",message:`Only ${B}/${t} tracks generated`,severity:"high"}),r.push(`Continue generation to reach ${t} tracks`));const n=F.filter((e=>e.isSeedArtist)),a=F.filter((e=>!e.isSeedArtist));n.length>0&&e.push({type:"info",message:`${n.length} clips from seed artist, ${a.length} from similar artists`,severity:"low"});const i=F.reduce(((e,t)=>(e[t.artist]=(e[t.artist]||0)+1,e)),{}),o=Math.max(...Object.values(i)),s=Object.keys(i).length/B;o>3&&e.push({type:"warning",message:`Artist "${Object.keys(i).find((e=>i[e]===o))}" appears ${o} times`,severity:"medium"});const l=F.filter((e=>e.artistSimilarity<.3));l.length>0&&(e.push({type:"warning",message:`${l.length} tracks have low similarity scores`,severity:"medium"}),r.push("Consider regenerating tracks with low similarity scores"));const c=F.filter((e=>"fallback"===e.selectionMethod));c.length>0&&e.push({type:"info",message:`${c.length} tracks used fallback selection (limited options after filtering)`,severity:"low"});const u=F.reduce(((e,t)=>e+(t.searchStats?.contentFiltered||0)),0),d=F.reduce(((e,t)=>e+(t.searchStats?.duplicatesFiltered||0)),0);return(u>0||d>0)&&e.push({type:"info",message:`Enhanced filtering: ${u} non-music content, ${d} duplicates removed`,severity:"low"}),{overallScore:Math.max(0,1-.1*e.length),completionRate:H,artistDiversity:s,potentialIssues:e,recommendations:r}}),[F,B,t]),Y=e=>{const t=new Set(f);t.has(e)?t.delete(e):t.add(e),x(t)},G=e=>{},J=e=>{switch(e.type){case"excellent":return s.jsx(Oa,{color:"success"});case"good":return s.jsx(Oa,{color:"primary"});case"warning":return s.jsx(Hi,{color:"warning"});case"error":return s.jsx(Va,{color:"error"});default:return s.jsx(jn,{color:"info"})}},K=e=>e>=.7?"success":e>=.4?"warning":"error";return s.jsxs(u,{sx:{p:3},children:[s.jsx(h,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:" Playlist Review & Editor"}),s.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Review and edit your generated power hour playlist before saving. Make adjustments to ensure the best quality."}),s.jsxs(U,{container:!0,spacing:3,sx:{mb:3},children:[s.jsx(U,{item:!0,xs:12,md:3,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Generation Progress"}),s.jsx(he,{variant:"determinate",value:H,sx:{mb:2,height:8,borderRadius:4},color:H>=100?"success":"primary"}),s.jsxs(h,{variant:"body2",children:[B," / ",t," tracks (",H.toFixed(1),"%)"]}),B<t&&s.jsx(A,{variant:"outlined",size:"small",startIcon:s.jsx(vi,{}),onClick:n,sx:{mt:1},children:"Continue Generation"})]})})}),s.jsx(U,{item:!0,xs:12,md:3,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Quality Score"}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[s.jsx(he,{variant:"determinate",value:100*V.overallScore,sx:{flex:1,height:8,borderRadius:4},color:V.overallScore>=.8?"success":V.overallScore>=.6?"warning":"error"}),s.jsxs(h,{variant:"body2",sx:{minWidth:40},children:[(100*V.overallScore).toFixed(0),"%"]})]}),s.jsxs(h,{variant:"body2",children:["Artist Diversity: ",(100*V.artistDiversity).toFixed(0),"%"]})]})})}),s.jsx(U,{item:!0,xs:12,md:3,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Artist Distribution"}),(()=>{const t=F.filter((e=>e.isSeedArtist)),r=F.filter((e=>!e.isSeedArtist)),n=e?.tracks?.[0]?.artist||"Seed Artist";return s.jsxs(I,{spacing:1,children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(q,{size:"small",label:"Seed Artist",color:"primary"}),s.jsxs(h,{variant:"body2",children:[n,": ",t.length," clips"]})]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(q,{size:"small",label:"Similar Artists",variant:"outlined"}),s.jsxs(h,{variant:"body2",children:[r.length," clips from ",new Set(r.map((e=>e.artist))).size," artists"]})]})]})})()]})})}),s.jsx(U,{item:!0,xs:12,md:3,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Issues & Recommendations"}),0===V.potentialIssues.length?s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(Oa,{color:"success"}),s.jsx(h,{variant:"body2",children:"No issues detected"})]}):s.jsxs(I,{spacing:1,children:[V.potentialIssues.slice(0,2).map(((e,t)=>s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[J(e),s.jsx(h,{variant:"body2",sx:{fontSize:"0.875rem"},children:e.message})]},t))),V.potentialIssues.length>2&&s.jsxs(h,{variant:"caption",color:"text.secondary",children:["+",V.potentialIssues.length-2," more issues"]})]})]})})})]}),s.jsx(c,{sx:{p:2,mb:3},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[s.jsx(X,{control:s.jsx($,{checked:f.size===F.length&&F.length>0,indeterminate:f.size>0&&f.size<F.length,onChange:()=>{f.size===F.length?x(new Set):x(new Set(F.map(((e,t)=>t))))}}),label:`Select All (${f.size} selected)`}),s.jsx(k,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),s.jsx(A,{variant:"outlined",size:"small",startIcon:s.jsx(ua,{}),onClick:()=>{const e=[...O];for(let r=e.length-1;r>0;r--){const t=Math.floor(Math.random()*(r+1));[e[r],e[t]]=[e[t],e[r]]}const t=e.map(((e,t)=>({...e,startTime:t*e.clipDuration})));_(t),x(new Set)},disabled:F.length<2,children:"Shuffle Order"}),s.jsx(A,{variant:"outlined",size:"small",onClick:()=>{_([...e?.tracks||[]]),x(new Set)},disabled:0===F.length,children:"Reset Order"}),f.size>0&&s.jsxs(s.Fragment,{children:[s.jsxs(A,{variant:"outlined",size:"small",startIcon:s.jsx(Sn,{}),onClick:async()=>{const e=Array.from(f);z(new Set(e));try{for(const t of e){const e=F[t];await o(t,e.artist)}}catch(vz){}finally{z(new Set),x(new Set)}},disabled:R.size>0,children:["Regenerate Selected (",f.size,")"]}),s.jsx(A,{variant:"outlined",size:"small",color:"error",startIcon:s.jsx(dn,{}),onClick:()=>{Array.from(f),x(new Set)},children:"Remove Selected"}),s.jsx(A,{variant:"outlined",size:"small",startIcon:s.jsx(Mn,{}),onClick:()=>x(new Set),children:"Clear Selection"})]})]})}),s.jsxs(u,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[s.jsxs(A,{variant:"contained",size:"large",startIcon:s.jsx(Pi,{}),onClick:()=>C(!0),disabled:0===F.length,children:["Save Playlist (",F.length," tracks)"]}),B<t&&s.jsxs(A,{variant:"outlined",size:"large",startIcon:s.jsx(vi,{}),onClick:n,color:"primary",children:["Continue to ",t," tracks"]}),s.jsx(A,{variant:"outlined",onClick:a,children:"Back to Settings"})]}),s.jsxs(g,{open:j,onClose:()=>C(!1),maxWidth:"sm",fullWidth:!0,children:[s.jsx(y,{children:"Save Playlist"}),s.jsxs(b,{children:[s.jsx(T,{fullWidth:!0,label:"Playlist Name",value:E,onChange:e=>M(e.target.value),sx:{mt:1}}),s.jsxs(u,{sx:{mt:3},children:[s.jsx(X,{control:s.jsx(Q,{checked:D,onChange:e=>L(e.target.checked),color:"primary"}),label:"Shuffle clips when saving"}),s.jsx(h,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"Randomize the order of clips in the final saved playlist"})]}),s.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:2},children:["This playlist will be saved with ",F.length," tracks",D?" in shuffled order":"","."]})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:()=>C(!1),children:"Cancel"}),s.jsxs(A,{onClick:()=>{if(E.trim()){let t=[...F];if(D)for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}const n=t.map(((e,t)=>({id:`enhanced_${Date.now()}_${t}`,videoId:e.song.url.includes("youtube.com")&&e.song.url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/)?.[1]||"dQw4w9WgXcQ",title:e.song.title,artist:e.artist,startTime:Math.floor(30*Math.random()),duration:e.clipDuration,thumbnail:`https://img.youtube.com/vi/${e.song.url.includes("youtube.com")&&e.song.url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/)?.[1]||"dQw4w9WgXcQ"}/mqdefault.jpg`,url:e.song.url,sourceArtist:e.artist,searchQuery:`${e.artist} ${e.song.title}`,relevanceScore:e.artistSimilarity,generationRank:t+1,selectionMethod:e.selectionMethod}))),a={id:`enhanced_${Date.now()}`,name:E.trim(),clips:n,date:(new Date).toISOString(),drinkingSoundPath:void 0,imagePath:void 0,metadata:{generationType:"enhanced",generationStats:e.generationStats,qualityMetrics:e.qualityMetrics,qualityAnalysis:V}};r(a),C(!1)}},variant:"contained",disabled:!E.trim(),children:["Save",D?" & Shuffle":""]})]})]}),s.jsxs(c,{sx:{p:3},children:[s.jsxs(h,{variant:"h6",sx:{fontWeight:"bold",mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[" Generated Clips (",F.length,")"]}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Drag clips to reorder  Click and hold the drag handle"})]}),s.jsx(wT,{sensors:p,collisionDetection:XI,onDragEnd:e=>{const{active:t,over:r}=e;if(!r||t.id===r.id)return;const n=O.findIndex(((e,r)=>`clip-${r}`===t.id)),a=O.findIndex(((e,t)=>`clip-${t}`===r.id));if(-1===n||-1===a)return;const i=PT(O,n,a).map(((e,t)=>({...e,startTime:t*e.clipDuration})));_(i),x(new Set)},children:s.jsx(DT,{items:F.map(((e,t)=>`clip-${t}`)),strategy:TT,children:s.jsx(v,{sx:{maxHeight:600,overflow:"auto"},children:F.map(((e,t)=>{const r=f.has(t),n=R.has(t);return s.jsx(GT,{track:e,index:t,isSelected:r,isRegenerating:n,onSelectClip:Y,onEditClip:(e,t)=>S({clip:e,index:t}),onRegenerateClip:async(e,t)=>{z(new Set([e]));try{await o(e,t)}finally{z(new Set)}},onRemoveClip:G,getSimilarityColor:K,theme:l,currentTheme:d,alpha:pe},`clip-${t}`)}))})})}),0===F.length&&s.jsx(u,{sx:{textAlign:"center",py:4},children:s.jsx(h,{variant:"body1",color:"text.secondary",children:"No tracks generated yet."})})]}),w&&s.jsx(YT,{open:!0,clip:w.clip,clipIndex:w.index,onClose:()=>S(null),onSave:e=>{S(null)},onRegenerate:o})]})},JT=new class{constructor(){}async regenerateClip(e,t){try{const e={name:t.artist,similarity:1,genres:[],popularity:.5},r={preferredDuration:t.preferredDuration||60,durationTolerance:30,albumDiversityEnabled:!0,yearDiversityEnabled:!0},n=await iI.selectSongForArtist(e,r);if(!n||!n.selectedSong)throw new Error(`No songs found for artist: ${t.artist}`);let a="api";_E.has(t.artist)?a="cached":"fallback"===n.selectionMethod&&(a="fallback");const i={artist:t.artist,song:{title:n.selectedSong.title,url:n.selectedSong.url||`https://youtube.com/results?search_query=${encodeURIComponent(`${t.artist} ${n.selectedSong.title}`)}`,duration:n.selectedSong.duration,source:n.selectedSong.source},artistSimilarity:e.similarity,selectionMethod:a,clipDuration:t.preferredDuration||60,alternatives:[]};if(n.alternativeSongs&&n.alternativeSongs.length>0){const r=Math.min(t.maxAlternatives||3,n.alternativeSongs.length);i.alternatives=n.alternativeSongs.slice(0,r).map((r=>({artist:t.artist,song:{title:r.title,url:r.url||`https://youtube.com/results?search_query=${encodeURIComponent(`${t.artist} ${r.title}`)}`,duration:r.duration,source:r.source},artistSimilarity:e.similarity,selectionMethod:a,clipDuration:t.preferredDuration||60})))}return i}catch(vz){return this.createFallbackClip(t.artist,t.preferredDuration||60)}}async findAlternativeArtists(e,t=5){try{const r=await ZE.getSimilarArtists(e);return 0===r.length?[]:r.slice(0,t).map((e=>e.name))}catch(vz){return[]}}async regenerateMultipleClips(e,t,r){const n={};for(let a=0;a<t.length;a++){const i=t[a],o=e[i];r&&r({current:a+1,total:t.length,artist:o.artist});try{const e=await this.regenerateClip(o,{artist:o.artist,preferredDuration:o.clipDuration,excludeCurrentSong:o.song?.title});n[i]=e,await new Promise((e=>setTimeout(e,100)))}catch(vz){}}return n}analyzePlaylistQuality(e){const t=[],r=[],n={};if(e.forEach((e=>{n[e.artist]=(n[e.artist]||0)+1})),Math.max(...Object.values(n))>3){const e=Object.keys(n).filter((e=>n[e]>3));t.push(`Artists over-represented: ${e.join(", ")}`),r.push("Consider regenerating some clips to improve artist diversity")}const a=e.filter((e=>e.artistSimilarity<.3));a.length>0&&(t.push(`${a.length} tracks have low similarity scores`),r.push("Regenerate tracks with low similarity for better quality"));const i=e.filter((e=>"fallback"===e.selectionMethod));i.length>.3*e.length&&(t.push(`${i.length} tracks used fallback selection`),r.push("Consider adjusting generation settings for better results"));const o=Object.keys(n).length/e.length,s=e.reduce(((e,t)=>e+t.artistSimilarity),0)/e.length,l=i.length/e.length*.3;return{overallScore:Math.max(0,Math.min(1,.4*o+.4*s+(.2-l))),issues:t,recommendations:r,artistDistribution:n}}createFallbackClip(e,t){return{artist:e,song:{title:`Popular Song by ${e}`,url:`https://youtube.com/results?search_query=${encodeURIComponent(e+" popular songs")}`,source:"fallback"},artistSimilarity:.1,selectionMethod:"fallback",clipDuration:t,alternatives:[]}}},KT=({onPlaylistGenerated:e,onCancel:t})=>{const[r,n]=i.useState("configuration"),[a,o]=i.useState(""),[l,c]=i.useState(!1),[d,f]=i.useState(null),[m,g]=i.useState(null),[y,b]=i.useState(null),[v,w]=i.useState(60),[S,j]=i.useState(60),[C,P]=i.useState(6),[E,I]=i.useState(!1),[M,R]=i.useState(10),[z,D]=i.useState(.4),[L,O]=i.useState(.6),[_,F]=i.useState(!1),[$,B]=i.useState(!1),[H,V]=i.useState([]),[Y,G]=i.useState(!1),[J,K]=i.useState(null);i.useEffect((()=>{const e=_E.getStatistics();K(e)}),[]);const Z=i.useCallback((async()=>{if(!a.trim())return void b("Please enter an artist name");const e=$E.getDisambiguationSuggestions(a);if(e.length>1)return V(e),B(!0),void G(!0);await ee()}),[a]),ee=i.useCallback((async()=>{b(null),c(!0),f(null),g(null);const e={seedArtist:a,totalTracks:v,clipDuration:S,seedArtistClipCount:C,prioritizeCachedResults:E,maxApiCalls:M,artistSelection:{diversityWeight:z,similarityWeight:L,maxArtists:v-C,genreDiversityEnabled:!0,eraDiversityEnabled:!0},songSelection:{preferredDuration:S,durationTolerance:30,albumDiversityEnabled:!0,yearDiversityEnabled:!0}};try{const t=await sI.generatePowerHour(e,(e=>{f(e)}));g(t),n("review")}catch(t){b(t instanceof Error?t.message:"Generation failed")}finally{c(!1),f(null)}}),[a,v,S,E,M,z,L,e]),te=t=>{pc(t)?(e({clips:t.clips,success:!0}),n("results")):b("Failed to save generated playlist")},re=async()=>{if(!m)return;const e=v-m.tracks.length;if(e<=0)return;n("generating"),c(!0);const t={seedArtist:a,totalTracks:e,clipDuration:S,seedArtistClipCount:0,prioritizeCachedResults:E,maxApiCalls:M,artistSelection:{diversityWeight:z,similarityWeight:L,maxArtists:e,genreDiversityEnabled:!0,eraDiversityEnabled:!0},songSelection:{preferredDuration:S,durationTolerance:30,albumDiversityEnabled:!0,yearDiversityEnabled:!0}};try{const e=await sI.generatePowerHour(t,(e=>{f(e)})),r={...m,tracks:[...m.tracks,...e.tracks],generationStats:{...m.generationStats,totalArtistsConsidered:m.generationStats.totalArtistsConsidered+e.generationStats.totalArtistsConsidered,apiCallsMade:m.generationStats.apiCallsMade+e.generationStats.apiCallsMade,generationTimeMs:m.generationStats.generationTimeMs+e.generationStats.generationTimeMs},qualityMetrics:{...e.qualityMetrics,completionRate:(m.tracks.length+e.tracks.length)/v}};g(r),n("review")}catch(r){b(r instanceof Error?r.message:"Continue generation failed"),n("review")}finally{c(!1),f(null)}},ne=async(e,t)=>{if(!m)return null;try{const r=await JT.regenerateClip(m.tracks[e],{artist:t,preferredDuration:S}),n=[...m.tracks];return n[e]={artist:r.artist,song:r.song,startTime:e*S,clipDuration:r.clipDuration,selectionMethod:r.selectionMethod,artistSimilarity:r.artistSimilarity},g({...m,tracks:n}),r}catch(r){throw r}},ae=()=>{n("configuration"),g(null),b(null)};return"review"===r&&m?s.jsx(qT,{generationResult:m,targetTrackCount:v,onSavePlaylist:te,onContinueGeneration:re,onCancel:ae,onRegenerateClip:ne}):s.jsxs(u,{children:[s.jsxs(h,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(Aa,{color:"primary"}),"Enhanced Random Playlist Generator"]}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Generate intelligent power hour playlists using advanced caching, smart artist selection, and disambiguation."}),J&&s.jsx(x,{severity:"info",sx:{mb:3},children:s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs(h,{variant:"body2",children:[s.jsx("strong",{children:"Cache Status:"})," ",J.totalEntries," artists cached, ",J.hitRate.toFixed(1),"% hit rate",J.totalEntries>0&&`  Recent: ${J.recentlyAccessed.slice(0,3).join(", ")}`]}),J.totalEntries>0&&s.jsx(A,{size:"small",variant:"outlined",color:"warning",onClick:()=>{sI.clearCache(),K(_E.getStatistics())},disabled:l,children:"Clear Cache"})]})}),s.jsxs(ke,{defaultExpanded:!0,sx:{mb:3},children:[s.jsx(Pe,{expandIcon:s.jsx(Ya,{}),children:s.jsx(h,{variant:"h6",children:" Generation Settings"})}),s.jsx(Ae,{children:s.jsxs(U,{container:!0,spacing:3,children:[s.jsxs(U,{item:!0,xs:12,children:[s.jsx(T,{fullWidth:!0,label:"Seed Artist",value:a,onChange:e=>o(e.target.value),placeholder:"e.g., Taylor Swift, Led Zeppelin, Drake",disabled:l,onKeyPress:e=>"Enter"===e.key&&Z()}),s.jsxs(u,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:1},children:[s.jsx(h,{variant:"caption",sx:{width:"100%",mb:1},children:"Quick presets:"}),["Taylor Swift","Drake","The Beatles","Led Zeppelin","Queen","Genesis","Bush","Kansas"].map((e=>s.jsx(q,{label:e,size:"small",variant:"outlined",clickable:!0,disabled:l,onClick:()=>o(e),color:["Genesis","Bush","Kansas"].includes(e)?"warning":"default"},e)))]})]}),s.jsx(U,{item:!0,xs:12,md:3,children:s.jsx(T,{fullWidth:!0,type:"number",label:"Total Tracks",value:v,onChange:e=>w(Math.max(1,parseInt(e.target.value)||60)),disabled:l,inputProps:{min:1,max:120}})}),s.jsx(U,{item:!0,xs:12,md:3,children:s.jsx(T,{fullWidth:!0,type:"number",label:"Clip Duration (seconds)",value:S,onChange:e=>j(Math.max(15,parseInt(e.target.value)||60)),disabled:l,inputProps:{min:15,max:300}})}),s.jsx(U,{item:!0,xs:12,md:3,children:s.jsx(T,{fullWidth:!0,type:"number",label:"Seed Artist Clips",value:C,onChange:e=>P(Math.max(0,Math.min(v,parseInt(e.target.value)||6))),disabled:l,inputProps:{min:0,max:v},helperText:`Guaranteed clips from ${a||"seed artist"}`})}),s.jsxs(U,{item:!0,xs:12,children:[s.jsx(k,{sx:{my:2}}),s.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Advanced Settings"})]}),s.jsxs(U,{item:!0,xs:12,md:6,children:[s.jsx(X,{control:s.jsx(Q,{checked:E,onChange:e=>I(e.target.checked),disabled:l}),label:"Prioritize Cached Results"}),s.jsx(h,{variant:"caption",display:"block",color:"text.secondary",children:"Use cached data when available for faster generation"})]}),s.jsxs(U,{item:!0,xs:12,md:6,children:[s.jsx(X,{control:s.jsx(Q,{checked:_,onChange:e=>F(e.target.checked),disabled:l}),label:"Debug Mode"}),s.jsx(h,{variant:"caption",display:"block",color:"text.secondary",children:"Show detailed discovery logs in browser console"})]}),s.jsxs(U,{item:!0,xs:12,md:6,children:[s.jsxs(h,{variant:"body2",gutterBottom:!0,children:["Max API Calls: ",M]}),s.jsx(p,{value:M,onChange:(e,t)=>R(t),min:1,max:20,step:1,disabled:l,marks:[{value:1,label:"1"},{value:10,label:"10"},{value:20,label:"20"}]})]}),s.jsxs(U,{item:!0,xs:12,md:6,children:[s.jsxs(h,{variant:"body2",gutterBottom:!0,children:["Diversity Weight: ",(100*z).toFixed(0),"%"]}),s.jsx(p,{value:z,onChange:(e,t)=>D(t),min:0,max:1,step:.1,disabled:l})]}),s.jsxs(U,{item:!0,xs:12,md:6,children:[s.jsxs(h,{variant:"body2",gutterBottom:!0,children:["Similarity Weight: ",(100*L).toFixed(0),"%"]}),s.jsx(p,{value:L,onChange:(e,t)=>O(t),min:0,max:1,step:.1,disabled:l})]})]})})]}),s.jsxs(u,{sx:{display:"flex",gap:2,mb:3},children:[s.jsx(A,{variant:"contained",size:"large",onClick:Z,disabled:l||!a.trim(),startIcon:l?s.jsx(Ii,{}):s.jsx(Aa,{}),sx:{minWidth:200},children:l?"Generating...":"Generate Playlist"}),l&&s.jsx(A,{variant:"outlined",color:"error",onClick:()=>{sI.abort(),c(!1),f(null)},startIcon:s.jsx(fn,{}),children:"Stop"}),t&&s.jsx(A,{variant:"outlined",onClick:t,children:"Cancel"}),_&&a.trim()&&s.jsx(A,{variant:"outlined",color:"info",onClick:()=>{window.musicDebug?.compareDiscoveryMethods&&window.musicDebug.compareDiscoveryMethods(a)},disabled:l,children:"Test Discovery"})]}),d&&s.jsx(N,{sx:{mb:3},children:s.jsxs(W,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Generation Progress"}),s.jsx(he,{variant:"determinate",value:d.currentTrack/d.totalTracks*100,sx:{mb:2}}),s.jsx(h,{variant:"body2",color:"text.secondary",children:d.currentStep}),s.jsxs(h,{variant:"body2",children:["Track ",d.currentTrack," of ",d.totalTracks,"  Cache Hits: ",d.cacheHits,"  API Calls: ",d.apiCalls]}),d.estimatedTimeRemaining>0&&s.jsxs(h,{variant:"caption",color:"text.secondary",children:["Estimated time remaining: ",Math.round(d.estimatedTimeRemaining/1e3),"s"]})]})}),_&&s.jsx(x,{severity:"info",sx:{mb:3},children:s.jsxs(h,{variant:"body2",children:[s.jsx("strong",{children:"Debug Mode Active:"}),' Detailed discovery logs will appear in the browser console. Use the "Test Discovery" button to compare Discovery Tester vs Enhanced Generator results. Open the Debug page first to access all debug tools.']})}),y&&s.jsx(x,{severity:"error",sx:{mb:3},children:y}),m&&s.jsxs(ke,{defaultExpanded:!0,children:[s.jsx(Pe,{expandIcon:s.jsx(Ya,{}),children:s.jsx(h,{variant:"h6",children:" Generation Results"})}),s.jsx(Ae,{children:s.jsxs(U,{container:!0,spacing:2,children:[s.jsx(U,{item:!0,xs:12,md:4,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsxs(h,{variant:"subtitle1",gutterBottom:!0,children:[s.jsx(Oi,{sx:{mr:1,verticalAlign:"middle"}}),"Generation Stats"]}),s.jsxs(h,{variant:"body2",children:["Total Tracks: ",m.tracks.length]}),s.jsxs(h,{variant:"body2",children:["Seed Artist: ",m.generationStats.seedArtistClipsGenerated,"/",m.generationStats.seedArtistClipsRequested]}),s.jsxs(h,{variant:"body2",children:["Similar Artists: ",m.generationStats.similarArtistClips]}),s.jsxs(h,{variant:"body2",children:["Cache Hit Rate: ",m.generationStats.cacheHitRate.toFixed(1),"%"]}),s.jsxs(h,{variant:"body2",children:["Time: ",(m.generationStats.generationTimeMs/1e3).toFixed(1),"s"]})]})})}),s.jsx(U,{item:!0,xs:12,md:4,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsxs(h,{variant:"subtitle1",gutterBottom:!0,children:[s.jsx(pi,{sx:{mr:1,verticalAlign:"middle"}}),"Quality Metrics"]}),s.jsxs(h,{variant:"body2",children:["Diversity: ",m.qualityMetrics.diversityScore.toFixed(2)]}),s.jsxs(h,{variant:"body2",children:["Similarity: ",m.qualityMetrics.similarityScore.toFixed(2)]}),s.jsxs(h,{variant:"body2",children:["Completion: ",m.qualityMetrics.completionRate.toFixed(1),"%"]}),s.jsxs(h,{variant:"body2",children:["Seed Fulfillment: ",m.qualityMetrics.seedArtistFulfillmentRate.toFixed(1),"%"]})]})})}),s.jsx(U,{item:!0,xs:12,md:4,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Genre Distribution"}),s.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:Object.entries(m.generationStats.genreDistribution).map((([e,t])=>s.jsx(q,{label:`${e}: ${t}`,size:"small",variant:"outlined"},e)))})]})})})]})})]}),s.jsx(lI,{open:$,onClose:()=>{B(!1),G(!1)},artistName:a,suggestions:H,onSelect:e=>{o(e.name),B(!1),G(!1),setTimeout((()=>ee()),100)},onCustomSearch:e=>{o(e),B(!1),G(!1),setTimeout((()=>ee()),100)}})]})},XT=()=>{const e=m(),{currentTheme:t}=qc(),{activeCollaborations:r}=lu(),[n,a]=i.useState(0),[o,l]=i.useState(null),[p,f]=i.useState(null),[g,y]=i.useState(null),[b,x]=i.useState(!0);return w.useEffect((()=>{const e=localStorage.getItem("youtube_edit_context");if(e)try{const t=JSON.parse(e);if(t.playlistId){l(t);const e=localStorage.getItem("youtube_playlists")||"[]";let n=JSON.parse(e).find((e=>e.id===t.playlistId));if(!n){const e=r[t.playlistId];e&&"youtube"===e.type&&(n={id:e.id,name:e.name,clips:e.clips,date:e.date,drinkingSoundPath:e.drinkingSoundPath,imagePath:e.imagePath,isCollaborative:!0,collaborationId:e.collaborationId})}n&&(f(n),"number"==typeof t.clipIndex&&t.clipIndex>0&&n.clips[t.clipIndex]&&y({clip:n.clips[t.clipIndex],index:t.clipIndex}))}localStorage.removeItem("youtube_edit_context")}catch(vz){localStorage.removeItem("youtube_edit_context")}}),[r]),s.jsxs(M,{maxWidth:"xl",sx:{py:3},children:[s.jsxs(u,{sx:{mb:4},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(da,{sx:{mr:2,fontSize:32,color:"#FF0000"}}),s.jsx(h,{variant:"h4",component:"h1",sx:{fontWeight:"bold"},children:"YouTube Power Hour"})]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(q,{icon:s.jsx(Ii,{}),label:"yt-dlp Enabled",size:"small",color:"success",variant:"outlined"}),p&&s.jsx(q,{label:`Editing: ${p.name}`,size:"small",color:"primary",variant:"filled"})]})]}),s.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"Create Power Hour playlists using YouTube videos. Search manually or generate intelligent playlists with AI-powered artist discovery."})]}),s.jsx(c,{elevation:0,sx:{borderRadius:4,overflow:"hidden",border:`1px solid ${pe(t.primary,.1)}`,background:pe(e.palette.background.paper,.8),backdropFilter:"blur(20px)",mb:3},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1},children:[s.jsxs(fe,{value:n,onChange:(e,t)=>a(t),sx:{"& .MuiTab-root":{fontWeight:600,textTransform:"none",fontSize:"1rem",minHeight:56,color:pe(e.palette.text.primary,.7),"&:hover":{color:t.primary,backgroundColor:pe(t.primary,.04)}},"& .Mui-selected":{color:t.primary},"& .MuiTabs-indicator":{backgroundColor:t.primary,height:3,borderRadius:"3px 3px 0 0"}},children:[s.jsx(me,{icon:s.jsx(In,{}),iconPosition:"start",label:"Manual Search",sx:{px:3}}),s.jsx(me,{icon:s.jsx(Aa,{}),iconPosition:"start",label:"Enhanced Random Playlist",sx:{px:3}})]}),1===n&&s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(h,{variant:"caption",color:"text.secondary",children:"Enhanced Mode"}),s.jsx(G,{title:b?"Switch to Basic Generator":"Switch to Enhanced Generator",children:s.jsx(d,{size:"small",onClick:()=>x(!b),sx:{color:b?t.primary:"text.secondary"},children:b?s.jsx(Di,{}):s.jsx(zi,{})})})]})]})}),s.jsxs(c,{elevation:0,sx:{borderRadius:3,overflow:"hidden",border:`1px solid ${pe(t.primary,.1)}`,background:pe(e.palette.background.paper,.8),backdropFilter:"blur(20px)"},children:[0===n&&s.jsxs(u,{sx:{p:3},children:[null,s.jsx(hP,{editingPlaylist:p,onPlaylistUpdated:e=>{f(null),l(null),y(null)},specificClipToEdit:g,onSpecificClipEditComplete:()=>y(null),onEditingPlaylistChanged:f})]}),1===n&&s.jsx(u,{sx:{p:3},children:s.jsx(KT,{onPlaylistGenerated:e=>{a(0)},onCancel:()=>{}})})]})]})},QT=()=>{const{playlistId:e}=function(){let{matches:e}=i.useContext(gr),t=e[e.length-1];return t?t.params:{}}(),[t]=cn(),r=Sr(),{currentTheme:n}=qc(),a=lu(),[o,l]=i.useState(null),[m,g]=i.useState(0),[y,b]=i.useState(!1),[x,w]=i.useState(0),[C,k]=i.useState(0),[P,E]=i.useState(!1),[I,T]=i.useState(!0),[R,z]=i.useState(!1),[D,L]=i.useState(!1),[O,_]=i.useState(null),[$,N]=i.useState(!1),[W,U]=i.useState(!1),[B,H]=i.useState(100),[V,Y]=i.useState(!1),[G,J]=i.useState(null),[K,X]=i.useState(!1),[Q,Z]=i.useState(!1),ee=i.useRef(null),te=i.useRef(null),re=i.useRef(null),ne=i.useRef(null),ae=i.useRef(null),ie=i.useRef(null),oe=i.useRef(null),se=i.useRef(!1);i.useEffect((()=>{(async()=>{if(e)try{let i=fc(),o=[];try{const e=a.activeCollaborations;o=Object.values(e).filter((e=>e&&"object"==typeof e&&e.id&&e.name)).map((e=>({id:e.id,name:e.name,date:e.createdAt?e.createdAt instanceof Date?e.createdAt.toISOString():"object"==typeof e.createdAt&&"toDate"in e.createdAt?e.createdAt.toDate().toISOString():e.createdAt.toString():(new Date).toISOString(),clips:Array.isArray(e.clips)?e.clips:[],drinkingSoundPath:e.drinkingSoundPath,imagePath:e.imagePath,isCollaborative:!0})))}catch(n){o=[]}const s=[...i,...o];if(0===s.length){const e={id:"test_youtube_playlist_1",name:"Test YouTube Playlist",date:(new Date).toISOString(),clips:[{id:"clip_1",videoId:"dQw4w9WgXcQ",title:"Rick Astley - Never Gonna Give You Up",artist:"Rick Astley",startTime:0,duration:60,thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/medium.jpg"},{id:"clip_2",videoId:"L_jWHffIx5E",title:"Smash Mouth - All Star",artist:"Smash Mouth",startTime:30,duration:60,thumbnail:"https://img.youtube.com/vi/L_jWHffIx5E/medium.jpg"}]};localStorage.setItem("youtube_playlists",JSON.stringify([e])),s.push(e)}const c=s.find((t=>t.id===e));if(c){l(c);const e=t.get("clip");if(e){const t=parseInt(e,10);!isNaN(t)&&t>=0&&t<c.clips.length&&g(t)}}else r("/playlists")}catch(vz){r("/playlists")}})()}),[e,r,t]);const le=i.useCallback((e=>{const t=1===e.data,r=0===e.data,n=5===e.data,a=3===e.data;n&&null!==O&&setTimeout((()=>{ee.current&&null!==O&&(ee.current.seekTo(O,!0),_(null),I&&ee.current.playVideo())}),100),b(t),t?(ce(),N(!1)):a?N(!0):ue(),r&&o&&I&&!K&&!Q&&!W&&(re.current||ie.current||(X(!0),Z(!0),fe(m)))}),[O,m,I,o,K,Q]),ce=()=>{te.current&&clearInterval(te.current),te.current=setInterval((()=>{try{if(ee.current&&ee.current.getCurrentTime){const e=ee.current.getCurrentTime();w(e);const t=de();o&&t&&e>=t.startTime+t.duration&&!K&&!Q&&!W&&(X(!0),Z(!0),re.current&&(clearTimeout(re.current),re.current=null),fe(m))}}catch(vz){}}),500)},ue=()=>{te.current&&(clearInterval(te.current),te.current=null)};i.useEffect((()=>{const e=()=>{const e=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);z(e)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}}),[]),i.useEffect((()=>()=>{ue(),re.current&&clearTimeout(re.current),ie.current&&clearTimeout(ie.current),oe.current&&clearTimeout(oe.current),ae.current&&(ae.current.stop(),ae.current.unload())}),[]);const de=()=>o?.clips[m],pe=(e,t,r)=>{if(U(!1),ae.current&&(ae.current.stop(),ae.current=null),ee.current&&ee.current.setVolume&&ee.current.setVolume(t),e<o.clips.length-1){const t=e+1;X(!1),me(t)}else b(!1),w(0),X(!1)},fe=async e=>{if(!W&&!K&&!se.current)if(se.current=!0,U(!0),X(!0),Z(!0),ae.current&&(ae.current.stop(),ae.current.unload(),ae.current=null),o?.clips[e+1],o?.drinkingSoundPath)try{let t;try{t=JSON.parse(o.drinkingSoundPath)}catch{t={type:"audio",path:o.drinkingSoundPath,name:"Drinking Sound"}}if("youtube"===t.type)return void(await(async(e,t)=>{ie.current&&(clearTimeout(ie.current),ie.current=null),U(!0);const r=o?.clips[t]?.videoId,n=V?0:B;try{if(ee.current&&e.youtubeId){ee.current.loadVideoById({videoId:e.youtubeId,startSeconds:e.startTime||0});const a=e.duration||5;ie.current=setTimeout((()=>{ie.current=null,pe(t,n,r)}),1e3*a)}else pe(t,n,r)}catch(vz){pe(t,n,r)}})(t,e));let r=t.path;if(window.electronAPI&&!r.startsWith("blob:")&&!r.startsWith("http")){const e=await window.electronAPI.getFileBlob(r),t=new Blob([e],{type:"audio/wav"});r=URL.createObjectURL(t)}const n=V?0:B;ee.current&&ee.current.setVolume&&ee.current.setVolume(15);const a=new bn.Howl({src:[r],html5:!0,format:["wav","mp3","ogg"],volume:.7,loop:!1,preload:!0,onload:()=>{},onend:()=>{U(!1),oe.current&&(clearTimeout(oe.current),oe.current=null),ae.current&&(ae.current.unload(),ae.current=null),ee.current&&ee.current.setVolume&&ee.current.setVolume(n),r.startsWith("blob:")&&URL.revokeObjectURL(r),setTimeout((()=>{if(e<o.clips.length-1){const t=e+1;X(!1),me(t)}else b(!1),w(0),X(!1)}),200)},onloaderror:(t,r)=>{if(U(!1),ae.current=null,e<o.clips.length-1){const t=e+1;X(!1),me(t)}},onplayerror:(t,r)=>{if(U(!1),ae.current=null,e<o.clips.length-1){const t=e+1;X(!1),me(t)}}});ae.current=a;try{a.play();const t=a.duration()||5;oe.current&&clearTimeout(oe.current),oe.current=setTimeout((()=>{W&&ae.current===a&&(oe.current=null,a&&a.playing()&&a.stop(),U(!1),ae.current&&(ae.current.unload(),ae.current=null),ee.current&&ee.current.setVolume&&ee.current.setVolume(n),r.startsWith("blob:")&&URL.revokeObjectURL(r),setTimeout((()=>{if(e<o.clips.length-1){const t=e+1;X(!1),me(t)}else b(!1),w(0),X(!1)}),200))}),1e3*(t+1))}catch(vz){se.current=!1,U(!1),ae.current=null,setTimeout((()=>{if(e<o.clips.length-1){const t=e+1;X(!1),me(t)}}),200)}}catch(vz){if(se.current=!1,U(!1),e<o.clips.length-1){const t=e+1;X(!1),me(t)}}else if(U(!1),e<o.clips.length-1){const t=e+1;X(!1),me(t)}else b(!1),w(0),X(!1)},me=i.useCallback((e=>{if(!ee.current||!o)return;const t=o.clips[e];if(t){se.current=!1,X(!1),Z(!1),g(e),w(0),N(!0);try{if(re.current&&(clearTimeout(re.current),re.current=null),_(t.startTime),ee.current.loadVideoById({videoId:t.videoId,startSeconds:t.startTime}),I){const r=1e3*t.duration;re.current=setTimeout((()=>{K||Q||W||(X(!0),Z(!0),fe(e))}),r)}}catch(vz){N(!1)}}}),[o,m,I,K,Q]),ge=i.useCallback((e=>{const{destination:t,source:r}=e;if(t&&o&&(t.droppableId!==r.droppableId||t.index!==r.index))try{const e={...o},[n]=e.clips.splice(r.index,1);e.clips.splice(t.index,0,n);const a=JSON.parse(localStorage.getItem("youtube_playlists")||"[]"),i=a.findIndex((e=>e.id===o.id));-1!==i&&(a[i]=e,localStorage.setItem("youtube_playlists",JSON.stringify(a)),l(e),r.index===m?g(t.index):r.index<m&&t.index>=m?g(m-1):r.index>m&&t.index<=m&&g(m+1))}catch(vz){}}),[o,m]);if(i.useEffect((()=>{o&&o.clips.length>0&&ee.current&&P&&!D&&(L(!0),me(0))}),[o,P,D]),!o)return s.jsxs(M,{maxWidth:"md",sx:{py:4,textAlign:"center"},children:[s.jsx(h,{variant:"h6",sx:{mb:2},children:e?"Loading playlist...":"No playlist specified"}),e&&s.jsxs(h,{variant:"body2",color:"text.secondary",children:["Playlist ID: ",e]})]});if(!o.clips||0===o.clips.length)return s.jsxs(M,{maxWidth:"md",sx:{py:4,textAlign:"center"},children:[s.jsx(h,{variant:"h6",sx:{mb:2},children:"This playlist is empty"}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"No videos found in this YouTube playlist."})]});const ye=de();return s.jsxs(M,{maxWidth:"xl",sx:{py:3},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:3},children:[s.jsx(d,{onClick:()=>r("/playlists"),sx:{mr:2},children:s.jsx(Ca,{})}),s.jsx(da,{sx:{mr:2,fontSize:32,color:"#FF0000"}}),s.jsxs(u,{sx:{flex:1},children:[s.jsx(h,{variant:"h4",component:"h1",sx:{fontWeight:"bold",mb:.5},children:o.name}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(q,{label:"YouTube Playlist",size:"small",sx:{backgroundColor:"#FF0000",color:"white"}}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:[o.clips.length," videos  Created ",new Date(o.date).toLocaleDateString()]})]})]})]}),s.jsxs(u,{sx:{display:"flex",gap:3,height:"calc(100vh - 200px)"},children:[s.jsx(u,{sx:{flex:2},children:s.jsxs(c,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:[ye&&s.jsxs(u,{sx:{mb:2},children:[s.jsx(h,{variant:"h6",sx:{mb:1},children:ye.title}),s.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["by ",ye.artist]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[s.jsxs(h,{variant:"caption",children:["Clip ",m+1," of ",o.clips.length]}),s.jsxs(h,{variant:"caption",children:[dc((()=>{const e=de();return e?Math.max(0,x-e.startTime):0})())," / ",dc(ye.duration)]})]}),s.jsx(he,{variant:"determinate",value:(()=>{const e=de();if(!e)return 0;const t=Math.max(0,x-e.startTime);return Math.min(100,t/e.duration*100)})(),sx:{mb:2}})]}),s.jsxs(u,{ref:ne,sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden"},children:[s.jsx(Uo,{videoId:o?.clips[0]?.videoId||"dQw4w9WgXcQ",opts:{width:"100%",height:"400",playerVars:{autoplay:0,controls:1,rel:0,showinfo:0,modestbranding:1,fs:1,cc_load_policy:0,iv_load_policy:3,enablejsapi:1,origin:window.location.origin}},onReady:e=>{try{ee.current=e.target,E(!0),e.target&&e.target.getDuration&&k(e.target.getDuration()),e.target&&e.target.setVolume&&e.target.setVolume(B)}catch(vz){}},onStateChange:le}),W&&s.jsxs(s.Fragment,{children:[s.jsx(u,{sx:{position:"absolute",top:16,left:16,zIndex:10,pointerEvents:"none",animation:"drinkingNotification 0.5s ease-out","@keyframes drinkingNotification":{"0%":{transform:"scale(0.8) translateY(-20px)",opacity:0},"50%":{transform:"scale(1.1) translateY(0px)",opacity:1},"100%":{transform:"scale(1) translateY(0px)",opacity:1}}},children:s.jsxs(u,{sx:{background:"linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 50%, #45B7D1 100%)",borderRadius:3,px:3,py:2,boxShadow:"0 8px 32px rgba(0,0,0,0.3)",border:"2px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",animation:"partyPulse 1s ease-in-out infinite alternate","@keyframes partyPulse":{"0%":{transform:"scale(1)",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},"100%":{transform:"scale(1.05)",boxShadow:"0 12px 40px rgba(255,107,107,0.4)"}}},children:[s.jsx(h,{variant:"h6",sx:{color:"white",fontWeight:"bold",textAlign:"center",textShadow:"2px 2px 4px rgba(0,0,0,0.5)",fontSize:"1.2rem",animation:"textBounce 0.6s ease-in-out infinite alternate","@keyframes textBounce":{"0%":{transform:"translateY(0px)"},"100%":{transform:"translateY(-2px)"}}},children:" DRINK UP! "}),s.jsx(h,{variant:"caption",sx:{color:"rgba(255,255,255,0.9)",display:"block",textAlign:"center",mt:.5,fontWeight:"medium",textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:"Time to celebrate! "})]})}),[...Array(6)].map(((e,t)=>s.jsx(u,{sx:{position:"absolute",top:20+15*t+"%",right:10+t%3*20+"%",zIndex:5,pointerEvents:"none",fontSize:"1.5rem",animation:`floatEmoji${t} ${2+.3*t}s ease-in-out infinite`,animationDelay:.2*t+"s","@keyframes floatEmoji0":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)",opacity:.8},"50%":{transform:"translateY(-20px) rotate(10deg)",opacity:1}},"@keyframes floatEmoji1":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)",opacity:.7},"50%":{transform:"translateY(-15px) rotate(-8deg)",opacity:1}},"@keyframes floatEmoji2":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)",opacity:.9},"50%":{transform:"translateY(-25px) rotate(12deg)",opacity:1}},"@keyframes floatEmoji3":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)",opacity:.6},"50%":{transform:"translateY(-18px) rotate(-5deg)",opacity:1}},"@keyframes floatEmoji4":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)",opacity:.8},"50%":{transform:"translateY(-22px) rotate(15deg)",opacity:1}},"@keyframes floatEmoji5":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)",opacity:.7},"50%":{transform:"translateY(-16px) rotate(-10deg)",opacity:1}}},children:["","","","","",""][t]},t)))]}),$&&!W&&s.jsx(u,{sx:{position:"absolute",top:16,right:16,backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:1,px:1,py:.5,zIndex:1,pointerEvents:"none",transition:"opacity 0.2s ease-in-out"},children:s.jsx(h,{variant:"caption",sx:{color:"white",fontSize:"0.7rem"},children:"Loading..."})})]}),s.jsxs(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mt:2},children:[s.jsx(d,{onClick:()=>{m>0&&!$&&me(m-1)},disabled:0===m,size:"large",children:s.jsx(kn,{})}),s.jsx(d,{onClick:()=>{try{if(ee.current)if(y)ee.current.pauseVideo();else{const e=de();if(e&&ee.current.getCurrentTime){const t=ee.current.getCurrentTime(),r=e.startTime,n=e.startTime+e.duration;t<r||t>=n?ee.current.seekTo&&(ee.current.seekTo(r,!0),setTimeout((()=>{ee.current&&ee.current.playVideo&&ee.current.playVideo()}),100)):ee.current.playVideo()}else ee.current.playVideo()}}catch(vz){}},size:"large",sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}},children:y?s.jsx(pn,{}):s.jsx(hn,{})}),s.jsx(d,{onClick:()=>((e=!1)=>{o&&!$&&(m<o.clips.length-1?me(m+1):(b(!1),w(0),X(!1),e&&I&&setTimeout((()=>{me(0)}),2e3)))})(!1),disabled:m===o.clips.length-1,size:"large",children:s.jsx(Pn,{})}),s.jsx(d,{onClick:e=>{J(e.currentTarget)},size:"large",sx:{color:"text.secondary","&:hover":{color:"text.primary"}},children:V||0===B?s.jsx(yn,{}):s.jsx(gn,{})}),s.jsx(d,{onClick:()=>{if(ee.current)try{if(R)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else if(ee.current.getIframe){const e=ee.current.getIframe();e&&(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())}}catch(vz){if(!ne.current)return;R?document.exitFullscreen&&document.exitFullscreen():ne.current.requestFullscreen&&ne.current.requestFullscreen()}},size:"large",sx:{color:"text.secondary","&:hover":{color:"text.primary"}},children:R?s.jsx(ei,{}):s.jsx(Za,{})})]}),s.jsxs(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,mt:1},children:[s.jsx(h,{variant:"caption",color:"text.secondary",children:"Auto-advance:"}),s.jsx(A,{size:"small",variant:I?"contained":"outlined",onClick:()=>T(!I),sx:{minWidth:60},children:I?"ON":"OFF"}),R&&s.jsx(q,{label:"Fullscreen",size:"small",color:"primary",sx:{ml:1}}),$&&s.jsx(q,{label:"Loading...",size:"small",color:"info",sx:{ml:1}})]})]})}),s.jsx(u,{sx:{flex:1},children:s.jsxs(c,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs(u,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[s.jsxs(h,{variant:"h6",sx:{display:"flex",alignItems:"center",mb:1},children:[s.jsx(aa,{sx:{mr:1}}),"Playlist"]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsxs(h,{variant:"caption",color:"text.secondary",children:["Playing: ",m+1," of ",o.clips.length]}),I&&s.jsx(q,{label:"Auto-advance",size:"small",color:"success",sx:{height:16,fontSize:"0.6rem"}}),o?.drinkingSoundPath&&s.jsx(q,{label:" Drinking sounds",size:"small",color:"warning",sx:{height:16,fontSize:"0.6rem"}}),W&&s.jsx(q,{label:" PARTY TIME! ",size:"small",variant:"filled",sx:{height:18,fontSize:"0.65rem",fontWeight:"bold",background:"linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 50%, #45B7D1 100%)",color:"white",animation:"partyChip 1s ease-in-out infinite alternate","@keyframes partyChip":{"0%":{transform:"scale(1)",boxShadow:"0 2px 8px rgba(255,107,107,0.3)"},"100%":{transform:"scale(1.1)",boxShadow:"0 4px 16px rgba(255,107,107,0.6)"}}}})]})]}),s.jsx(_e,{onDragEnd:ge,children:s.jsx(Fe,{droppableId:"youtube-playlist-clips",children:e=>s.jsxs(v,{sx:{flex:1,overflow:"auto",p:0},ref:e.innerRef,...e.droppableProps,children:[o.clips.map(((e,t)=>{const r=e.id||`clip-${t}-${Date.now()}`,a=e.id||`draggable-${t}-${Date.now()}`;return s.jsx($e,{draggableId:a,index:t,children:(r,a)=>s.jsxs(S,{ref:r.innerRef,...r.draggableProps,component:"div",onClick:()=>!a.isDragging&&(e=>{$||me(e)})(t),selected:t===m,sx:{borderBottom:1,borderColor:"divider",cursor:a.isDragging?"grabbing":"pointer",backgroundColor:a.isDragging?"rgba(0, 0, 0, 0.1)":t===m?`${n.primary}20`:"transparent","&:hover":{bgcolor:a.isDragging?"rgba(0, 0, 0, 0.1)":"action.hover"},transition:"background-color 0.2s ease",display:"flex",alignItems:"center",...r.draggableProps.style},children:[s.jsx(F,{children:s.jsx(h,{variant:"body2",color:"text.secondary",children:t+1})}),s.jsx(j,{primary:e.title,secondary:s.jsxs(s.Fragment,{children:[s.jsx(h,{variant:"caption",color:"text.secondary",component:"span",display:"block",children:e.artist}),s.jsxs(h,{variant:"caption",color:"text.secondary",component:"span",display:"block",children:[s.jsx(xa,{sx:{fontSize:12,mr:.5}}),dc(e.startTime)," - ",dc(e.startTime+e.duration)]})]}),sx:{flex:1}}),s.jsx(u,{...r.dragHandleProps,sx:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,color:"text.secondary",cursor:"grab","&:hover":{color:"text.primary",backgroundColor:"action.hover"},borderRadius:1,transition:"all 0.2s ease"},onClick:e=>{e.stopPropagation(),e.preventDefault()},children:s.jsx(ta,{fontSize:"small"})})]})},r)})),e.placeholder]})})})]})})]}),s.jsx(f,{open:Boolean(G),anchorEl:G,onClose:()=>{J(null)},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},sx:{zIndex:2500},disablePortal:!1,children:s.jsxs(u,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",px:2,py:2,bgcolor:"background.paper",borderRadius:3,boxShadow:3,height:140,minWidth:56,overflow:"hidden"},children:[s.jsx(p,{orientation:"vertical",min:0,max:100,step:1,value:V?0:B,onChange:(e,t)=>{const r=Array.isArray(t)?t[0]:t;H(r),ee.current&&ee.current.setVolume&&ee.current.setVolume(r),r>0&&V&&Y(!1)},sx:{height:100,"& .MuiSlider-track":{width:4},"& .MuiSlider-rail":{width:4},"& .MuiSlider-thumb":{width:16,height:16}}}),s.jsx(d,{onClick:()=>{const e=!V;Y(e),ee.current&&ee.current.setVolume&&ee.current.setVolume(e?0:B)},size:"small",sx:{mt:1},children:V||0===B?s.jsx(yn,{fontSize:"small"}):s.jsx(gn,{fontSize:"small"})})]})})]})},ZT="playlist_ratings",eR="user_downloads",tR=()=>{try{const e=localStorage.getItem(ZT);return e?JSON.parse(e):[]}catch(vz){return[]}},rR=e=>{try{return localStorage.setItem(ZT,JSON.stringify(e)),!0}catch(vz){return!1}},nR=()=>{try{const e=localStorage.getItem(eR);return e?JSON.parse(e):[]}catch(vz){return[]}},aR=async(e,t,r)=>{if(t<1||t>5)return!1;if(!vs.isAuthenticated())return!1;const n=vs.getCurrentUser();if(!n)return!1;if(n.isAnonymous)return!1;try{if(ks.isAvailable())try{if(await ks.ratePlaylist(e,t,r)){const n=Is(),a=tR().filter((t=>!(t.playlistId===e&&t.userId===n.id))),i={playlistId:e,userId:n.id,rating:t,review:r,createdAt:(new Date).toISOString()};return a.push(i),rR(a),!0}}catch(a){}const n=Is(),i=tR().filter((t=>!(t.playlistId===e&&t.userId===n.id))),o={playlistId:e,userId:n.id,rating:t,review:r,createdAt:(new Date).toISOString()};return i.push(o),!!rR(i)&&(await sR(e),!0)}catch(vz){return!1}},iR=e=>{const t=Is();return tR().find((r=>r.playlistId===e&&r.userId===t.id))||null},oR=e=>{const t=(e=>tR().filter((t=>t.playlistId===e)))(e);if(0===t.length)return 0;const r=t.reduce(((e,t)=>e+t.rating),0);return Math.round(r/t.length*10)/10},sR=async e=>{try{const t=Rs().find((t=>t.id===e));t&&(t.rating=oR(e),t.updatedAt=(new Date).toISOString(),Ms(t))}catch(vz){}},lR=e=>{try{const t=Is(),r=nR();if(r.find((r=>r.playlistId===e&&r.userId===t.id)))return!0;const n={playlistId:e,userId:t.id,downloadedAt:(new Date).toISOString()};return r.push(n),!!(e=>{try{return localStorage.setItem(eR,JSON.stringify(e)),!0}catch(vz){return!1}})(r)&&(uR(e).catch((e=>{})),!0)}catch(vz){return!1}},cR=e=>nR().filter((t=>t.playlistId===e)).length,uR=async e=>{try{const r=Rs().find((t=>t.id===e));r&&(r.downloadCount=cR(e),r.updatedAt=(new Date).toISOString(),Ms(r));try{const t=(await zs()).find((t=>t.id===e));t&&(t.downloadCount=cR(e),t.updatedAt=(new Date).toISOString(),await Ts(t))}catch(t){}}catch(vz){}},dR=e=>!!(e.id&&e.videoId&&e.title&&e.artist&&"number"==typeof e.startTime&&"number"==typeof e.duration&&e.thumbnail),hR=e=>{try{const t=localStorage.getItem("drinking_clips_library");return!!t&&JSON.parse(t).some((t=>"youtube"===e.type&&"youtube"===t.type?t.youtubeId===e.youtubeId&&t.startTime===e.startTime&&t.duration===e.duration:"audio"===e.type&&"audio"===t.type&&t.name===e.name))}catch(vz){return!1}},pR=async e=>{try{const n=await Ds(e);if(!n.success||!n.playlist)return{success:!1,message:n.message||"Failed to import playlist."};if(!((r=n.playlist).id&&r.name&&Array.isArray(r.clips)&&r.clips.every(dR)))return{success:!1,message:"Invalid playlist data. The playlist may be corrupted."};const a=(e=>{if(!e.drinkingSoundPath)return null;try{const t=JSON.parse(e.drinkingSoundPath);return{type:t.type||"audio",path:t.path,name:t.name||"Imported Drinking Clip",youtubeId:t.youtubeId,duration:t.duration,startTime:t.startTime}}catch{return{type:"audio",path:e.drinkingSoundPath,name:"Imported Drinking Clip"}}})(n.playlist),i=a&&!hR(a),o=(t=n.playlist,{id:gc(),name:`${t.name} (Imported)`,clips:t.clips,drinkingSoundPath:t.drinkingSoundPath,imagePath:t.imagePath,date:(new Date).toISOString(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:1});return pc(o)?{success:!0,playlist:o,message:`Successfully imported "${n.playlist.name}" with ${n.playlist.clips.length} clips.`,drinkingClip:a,hasNewDrinkingClip:i}:{success:!1,message:"Failed to save imported playlist. Please try again."}}catch(vz){return{success:!1,message:"An unexpected error occurred while importing the playlist."}}var t,r},fR=({playlist:e,onImport:t,onPreview:r,onUpdate:n,onDelete:a,showActions:o=!0,showOwnerActions:l=!1})=>{const c=m(),{user:p,canAccessFeature:f}=tc(),{isAuthenticated:x,isAnonymous:w,hasFullAccount:C}=nc(),[E,I]=i.useState(!1),[M,T]=i.useState(0),[R,z]=i.useState(!1),[D,O]=i.useState(!1),[_,$]=i.useState(null),[U,B]=i.useState(!1),[V,J]=i.useState(!1),[K,X]=i.useState(!1),[Q,Z]=i.useState(!1),[ee,te]=i.useState(!1);i.useEffect((()=>{Z(x&&C)}),[x,C]),i.useEffect((()=>{(async()=>{try{if(Q){const t=iR(e.id);if(t)T(t.rating);else try{const t=await(async e=>{try{if(ks.isAvailable()&&vs.isAuthenticated()){const t=await ks.getUserRating(e);return t?{rating:t.rating,review:t.review}:null}return null}catch(vz){return null}})(e.id);t&&T(t.rating)}catch(vz){}}if((e=>{const t=Is();return nR().some((r=>r.playlistId===e&&r.userId===t.id))})(e.id))z(!0);else try{const t=await(async e=>{try{return!(!ks.isAvailable()||!vs.isAuthenticated())&&await ks.hasUserDownloaded(e)}catch(vz){return!1}})(e.id);z(t)}catch(vz){}}catch(vz){}})()}),[e.id,Q]),i.useEffect((()=>{(async()=>{if(l&&x)try{const t=await ks.isPlaylistOwner(e.id);if(t)O(t);else{const t=Is(),r=e.creator===t.username;O(r)}}catch(vz){const r=Is(),n=e.creator===r.username;O(n)}else O(!1)})()}),[e.id,l,x]);const ne=e.clips.length>0?e.clips[0].thumbnail:e.imagePath||"/default-playlist-thumbnail.jpg",ie=e.clips.reduce(((e,t)=>e+t.duration),0),oe=e=>`${Math.floor(e/60)} min`,se=()=>{$(null)},le=()=>{t?.(e),z(!0)},ce=()=>{r?.(e)};return s.jsxs(s.Fragment,{children:[s.jsxs(N,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:c.shadows[8]},position:"relative"},children:[s.jsxs(u,{sx:{position:"relative"},children:[e.featured&&s.jsx(q,{label:"Featured",size:"small",sx:{position:"absolute",top:8,right:l&&D?48:8,zIndex:1,backgroundColor:c.palette.warning.main,color:"white"}}),l&&s.jsx(q,{icon:e.isPublic?s.jsx(ji,{}):s.jsx(si,{}),label:e.isPublic?"Public":"Private",size:"small",sx:{position:"absolute",top:e.featured?40:8,right:D?48:8,zIndex:1,backgroundColor:e.isPublic?c.palette.success.main:c.palette.grey[600],color:"white"}}),l&&D&&s.jsx(d,{size:"small",onClick:e=>{$(e.currentTarget)},sx:{position:"absolute",top:8,right:8,zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:s.jsx(hi,{})}),l&&s.jsxs(u,{sx:{position:"absolute",top:40,left:8,zIndex:2,backgroundColor:D?"rgba(0, 255, 0, 0.8)":"rgba(255, 0, 0, 0.8)",color:"white",padding:"2px 4px",fontSize:"10px",borderRadius:1},children:["Owner: ",D?"YES":"NO"]})]}),s.jsx(Y,{component:"img",height:"140",image:ne,alt:e.name,sx:{objectFit:"cover",backgroundColor:c.palette.grey[200]},onError:e=>{e.target.src="/default-playlist-thumbnail.jpg"}}),s.jsxs(W,{sx:{flexGrow:1,pb:1},children:[s.jsx(h,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:600,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.name}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:1},children:[s.jsx(xi,{sx:{fontSize:16,mr:.5,color:"text.secondary"}}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mr:2},children:e.creator}),s.jsx(pi,{sx:{fontSize:16,mr:.5,color:"text.secondary"}}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:[e.clips.length," clips"]})]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:1},children:[s.jsx(Ee,{value:e.rating,precision:.1,size:"small",readOnly:!0,sx:{mr:1}}),s.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mr:2},children:["(",e.rating.toFixed(1),")"]}),s.jsx(wn,{sx:{fontSize:16,mr:.5,color:"text.secondary"}}),s.jsx(h,{variant:"body2",color:"text.secondary",children:e.downloadCount})]}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:1},children:[s.jsx(Ai,{sx:{fontSize:16,mr:.5,color:"text.secondary"}}),s.jsx(h,{variant:"body2",color:"text.secondary",children:oe(ie)})]}),e.tags.length>0&&s.jsxs(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:[e.tags.slice(0,3).map(((e,t)=>s.jsx(q,{label:e,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}},t))),e.tags.length>3&&s.jsx(q,{label:"+"+(e.tags.length-3),size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}})]}),e.description&&s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.description})]}),o&&s.jsx(Ie,{sx:{pt:0,px:2,pb:2},children:s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[s.jsxs(u,{children:[s.jsx(G,{title:"View Details",children:s.jsx(d,{size:"small",onClick:()=>I(!0),sx:{mr:1},children:s.jsx(Ui,{})})}),r&&s.jsx(G,{title:"Preview",children:s.jsx(d,{size:"small",onClick:ce,sx:{mr:1},children:s.jsx(hn,{})})})]}),s.jsx(A,{variant:R?"outlined":"contained",size:"small",startIcon:s.jsx(wn,{}),onClick:le,disabled:R,sx:{minWidth:100},children:R?"Downloaded":"Import"})]})})]}),s.jsxs(g,{open:E,onClose:()=>I(!1),maxWidth:"md",fullWidth:!0,children:[s.jsx(y,{children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(re,{src:ne,sx:{width:56,height:56},children:s.jsx(pi,{})}),s.jsxs(u,{children:[s.jsx(h,{variant:"h6",children:e.name}),s.jsxs(h,{variant:"body2",color:"text.secondary",children:["by ",e.creator]})]})]})}),s.jsxs(b,{children:[e.description&&s.jsxs(s.Fragment,{children:[s.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Description"}),s.jsx(h,{variant:"body2",paragraph:!0,children:e.description}),s.jsx(k,{sx:{my:2}})]}),s.jsxs(u,{sx:{mb:2},children:[s.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Share Code"}),s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(h,{variant:"body2",sx:{fontFamily:"monospace",backgroundColor:"action.hover",padding:"4px 8px",borderRadius:1,fontSize:"1.1em",fontWeight:"bold"},children:e.shareCode}),s.jsx(G,{title:"Copy share code",children:s.jsx(d,{size:"small",onClick:async()=>{try{await navigator.clipboard.writeText(e.shareCode)}catch(vz){const r=document.createElement("textarea");r.value=e.shareCode,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}},children:s.jsx(fa,{fontSize:"small"})})})]})]}),s.jsx(k,{sx:{my:2}}),s.jsxs(u,{sx:{display:"flex",gap:4,mb:2},children:[s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle2",children:"Rating"}),s.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(Ee,{value:e.rating,precision:.1,size:"small",readOnly:!0}),s.jsx(h,{variant:"body2",sx:{ml:1},children:e.rating.toFixed(1)})]})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle2",children:"Downloads"}),s.jsx(h,{variant:"body2",children:e.downloadCount})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle2",children:"Clips"}),s.jsx(h,{variant:"body2",children:e.clips.length})]}),s.jsxs(u,{children:[s.jsx(h,{variant:"subtitle2",children:"Duration"}),s.jsx(h,{variant:"body2",children:oe(ie)})]})]}),e.tags.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Tags"}),s.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:e.tags.map(((e,t)=>s.jsx(q,{label:e,size:"small",variant:"outlined"},t)))})]}),s.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:["Clips (",e.clips.length,")"]}),s.jsx(v,{dense:!0,sx:{maxHeight:200,overflow:"auto"},children:e.clips.map(((t,r)=>{const n=t.id?`${t.id}-${r}`:`clip-${r}-${e.id}`;return s.jsx(S,{children:s.jsx(j,{primary:`${r+1}. ${t.title}`,secondary:`${t.artist}  ${t.duration}s`})},n)}))}),s.jsx(k,{sx:{my:2}}),s.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Your Rating"}),Q?s.jsx(Ee,{value:M,onChange:(t,r)=>(async t=>{if(null!==t)try{await aR(e.id,t)&&T(t)}catch(vz){}})(r),sx:{mb:2}}):s.jsxs(u,{sx:{mb:2},children:[s.jsx(Ee,{value:0,readOnly:!0,sx:{opacity:.5,mb:1}}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:x?w?"Create a full account to rate playlists":"Rating not available":"Sign in to rate this playlist"})]})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:()=>I(!1),children:"Close"}),s.jsx(A,{onClick:()=>te(!0),startIcon:s.jsx(pa,{}),children:"Share"}),r&&s.jsx(A,{onClick:ce,startIcon:s.jsx(hn,{}),children:"Preview"}),s.jsx(A,{variant:"contained",onClick:le,disabled:R,startIcon:s.jsx(wn,{}),children:R?"Downloaded":"Import Playlist"})]})]}),s.jsxs(ae,{anchorEl:_,open:Boolean(_),onClose:se,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[s.jsxs(L,{onClick:()=>{B(!0),se()},children:[s.jsx(F,{children:s.jsx(Jn,{fontSize:"small"})}),"Edit Playlist"]}),e.isPublic&&s.jsxs(L,{onClick:async()=>{try{if(await ks.removeFromCommunity(e.id)&&n){const t={...e,isPublic:!1};n(t)}}catch(vz){}se()},sx:{color:"warning.main"},children:[s.jsx(F,{children:s.jsx(si,{fontSize:"small",sx:{color:"warning.main"}})}),"Remove from Community"]}),s.jsxs(L,{onClick:()=>{J(!0),se()},sx:{color:"error.main"},children:[s.jsx(F,{children:s.jsx(dn,{fontSize:"small",sx:{color:"error.main"}})}),"Delete Playlist"]})]}),s.jsx(ic,{open:U,onClose:()=>B(!1),playlist:e,onSuccess:e=>{n&&n(e),B(!1)}}),s.jsxs(g,{open:V,onClose:()=>J(!1),maxWidth:"sm",fullWidth:!0,children:[s.jsx(y,{children:"Delete Playlist"}),s.jsxs(b,{children:[s.jsxs(h,{children:['Are you sure you want to delete "',e.name,'"? This action cannot be undone.']}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This will also remove all ratings and download records associated with this playlist."})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:()=>J(!1),disabled:K,children:"Cancel"}),s.jsx(A,{onClick:async()=>{X(!0);try{await ks.deletePlaylist(e.id)&&a&&a(e.id)}catch(vz){}finally{X(!1),J(!1)}},color:"error",variant:"contained",disabled:K,startIcon:K?s.jsx(H,{size:16}):s.jsx(dn,{}),children:K?"Deleting...":"Delete"})]})]}),s.jsx(Us,{open:ee,onClose:()=>te(!1),playlist:e})]})},mR=new class{isAvailable(){return Vo()&&!!Go}async checkAdminPermissions(){if(!vs.getCurrentUser())throw new Error("Not authenticated");const e=await vs.getUserProfile();if(!e||!cs({profile:e}))throw new Error("Insufficient permissions - admin access required");return!0}async getAllCommunityPlaylists(){if(!this.isAvailable())return[];await this.checkAdminPermissions();try{const e=ut(Go,"shared_playlists"),t=await ht(e);return t.docs.map((e=>({...e.data(),id:e.id,firebaseId:e.id})))}catch(vz){throw vz}}async deletePlaylist(e){if(!this.isAvailable())return!1;await this.checkAdminPermissions();try{const t=it(Go,"shared_playlists",e);return await bt(t),!0}catch(vz){return!1}}async bulkDeletePlaylists(e){if(!this.isAvailable())return{success:0,failed:e.length};await this.checkAdminPermissions();let t=0,r=0;const n=xt(Go);try{for(const t of e){const e=it(Go,"shared_playlists",t);n.delete(e)}await n.commit(),t=e.length}catch(vz){r=e.length}return{success:t,failed:r}}async clearAllCommunityPlaylists(){if(!this.isAvailable())return{success:0,failed:0};await this.checkAdminPermissions();try{const e=(await this.getAllCommunityPlaylists()).map((e=>e.id));return 0===e.length?{success:0,failed:0}:await this.bulkDeletePlaylists(e)}catch(vz){throw vz}}async moderatePlaylist(e,t){if(!this.isAvailable())return!1;await this.checkAdminPermissions();try{const r=it(Go,"shared_playlists",e);return await gt(r,{isPublic:t,moderatedAt:st(),moderatedBy:vs.getCurrentUser()?.uid}),!0}catch(vz){return!1}}async getCommunityStats(){if(!this.isAvailable())return{totalPlaylists:0,publicPlaylists:0,privatePlaylists:0,totalCreators:0};await this.checkAdminPermissions();try{const e=ut(Go,"shared_playlists"),t=await ht(e),r=await ht(dt(e,pt("isPublic","==",!0))),n=t.docs.map((e=>e.data())),a=new Set(n.map((e=>e.creatorId)).filter(Boolean));return{totalPlaylists:t.size,publicPlaylists:r.size,privatePlaylists:t.size-r.size,totalCreators:a.size}}catch(vz){return{totalPlaylists:0,publicPlaylists:0,privatePlaylists:0,totalCreators:0}}}},gR=({open:e,onClose:t})=>{m();const{user:r}=tc(),[n,a]=i.useState(!1),[o,l]=i.useState(null),[c,p]=i.useState([]),[f,w]=i.useState(""),[E,I]=i.useState(""),M=ds(r);i.useEffect((()=>{e&&M&&T()}),[e,M]);const T=async()=>{a(!0),w("");try{const[e,t]=await Promise.all([mR.getCommunityStats(),mR.getAllCommunityPlaylists()]);l(e),p(t)}catch(e){w(e.message||"Failed to load admin data")}finally{a(!1)}};return M?s.jsxs(g,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,children:[s.jsx(y,{children:s.jsxs(u,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[s.jsxs(u,{display:"flex",alignItems:"center",gap:1,children:[s.jsx(Sa,{}),"Admin Panel - Community Management"]}),s.jsx(d,{onClick:t,size:"small",children:s.jsx(An,{})})]})}),s.jsxs(b,{children:[n&&s.jsx(u,{display:"flex",justifyContent:"center",p:3,children:s.jsx(H,{})}),f&&s.jsx(x,{severity:"error",sx:{mb:2},children:f}),E&&s.jsx(x,{severity:"success",sx:{mb:2},children:E}),!n&&o&&s.jsxs(s.Fragment,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Community Statistics"}),s.jsxs(U,{container:!0,spacing:2,sx:{mb:3},children:[s.jsx(U,{item:!0,xs:12,sm:6,md:3,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Total Playlists"}),s.jsx(h,{variant:"h4",children:o.totalPlaylists})]})})}),s.jsx(U,{item:!0,xs:12,sm:6,md:3,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Public Playlists"}),s.jsx(h,{variant:"h4",color:"primary",children:o.publicPlaylists})]})})}),s.jsx(U,{item:!0,xs:12,sm:6,md:3,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Private Playlists"}),s.jsx(h,{variant:"h4",color:"secondary",children:o.privatePlaylists})]})})}),s.jsx(U,{item:!0,xs:12,sm:6,md:3,children:s.jsx(N,{children:s.jsxs(W,{children:[s.jsx(h,{color:"textSecondary",gutterBottom:!0,children:"Total Creators"}),s.jsx(h,{variant:"h4",children:o.totalCreators})]})})})]}),s.jsx(k,{sx:{my:2}}),s.jsxs(u,{display:"flex",gap:2,mb:3,children:[s.jsx(A,{variant:"contained",color:"error",startIcon:s.jsx(Hi,{}),onClick:async()=>{if(window.confirm("Are you sure you want to clear ALL community playlists? This action cannot be undone.")){a(!0),w(""),I("");try{const e=await mR.clearAllCommunityPlaylists();I(`Successfully cleared community: ${e.success} playlists deleted`),await T()}catch(e){w(e.message||"Failed to clear community")}finally{a(!1)}}},disabled:n||0===o.publicPlaylists,children:"Clear All Community Playlists"}),s.jsx(A,{variant:"outlined",onClick:T,disabled:n,children:"Refresh Data"})]}),s.jsxs(h,{variant:"h6",gutterBottom:!0,children:["Community Playlists (",c.length,")"]}),0===c.length?s.jsx(x,{severity:"info",children:"No community playlists found."}):s.jsx(v,{sx:{maxHeight:400,overflow:"auto"},children:c.map((e=>s.jsxs(S,{divider:!0,children:[s.jsx(j,{primary:s.jsxs(u,{display:"flex",alignItems:"center",gap:1,children:[e.name,s.jsx(q,{size:"small",label:e.isPublic?"Public":"Hidden",color:e.isPublic?"success":"default"})]}),secondary:`By: ${e.creator} | ${e.clips?.length||0} clips`}),s.jsxs(C,{children:[s.jsx(G,{title:e.isPublic?"Hide playlist":"Show playlist",children:s.jsx(d,{onClick:()=>(async(e,t,r)=>{const n=t?"hide":"show";if(window.confirm(`Are you sure you want to ${n} "${r}"?`))try{await mR.moderatePlaylist(e,!t)?(I(`Playlist ${t?"hidden":"made public"}: ${r}`),p((r=>r.map((r=>r.id===e?{...r,isPublic:!t}:r))))):w(`Failed to moderate playlist: ${r}`)}catch(a){w(a.message||"Failed to moderate playlist")}})(e.id,e.isPublic,e.name),size:"small",children:e.isPublic?s.jsx(Bi,{}):s.jsx(Ui,{})})}),s.jsx(G,{title:"Delete playlist",children:s.jsx(d,{onClick:()=>(async(e,t)=>{if(window.confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`))try{await mR.deletePlaylist(e)?(I(`Deleted playlist: ${t}`),p((t=>t.filter((t=>t.id!==e)))),o&&l({...o,totalPlaylists:o.totalPlaylists-1,publicPlaylists:o.publicPlaylists-1})):w(`Failed to delete playlist: ${t}`)}catch(r){w(r.message||"Failed to delete playlist")}})(e.id,e.name),size:"small",color:"error",children:s.jsx(dn,{})})})]})]},e.id)))})]})]}),s.jsx(P,{children:s.jsx(A,{onClick:t,children:"Close"})})]}):s.jsxs(g,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[s.jsx(y,{children:s.jsxs(u,{display:"flex",alignItems:"center",gap:1,children:[s.jsx(Sa,{}),"Access Denied"]})}),s.jsx(b,{children:s.jsx(x,{severity:"error",children:"You do not have administrative permissions to access this panel."})}),s.jsx(P,{children:s.jsx(A,{onClick:t,children:"Close"})})]})},yR=({open:e,onClose:t,drinkingClip:r,playlistName:n})=>{const[a,i]=w.useState(!1),[o,l]=w.useState(!1),[c,d]=w.useState(null),p=()=>{l(!1),d(null),t()};return s.jsxs(g,{open:e,onClose:p,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",color:"white"}},children:[s.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:2,borderBottom:"1px solid rgba(255,255,255,0.1)",pb:2},children:[s.jsx(na,{sx:{fontSize:32,color:"#ffd700"}}),s.jsxs(u,{children:[s.jsx(h,{variant:"h6",component:"div",children:"Drinking Clip Found!"}),s.jsx(h,{variant:"body2",sx:{opacity:.8},children:"This playlist includes a drinking clip"})]})]}),s.jsxs(b,{sx:{py:3},children:[o?s.jsx(x,{severity:"success",sx:{mb:2,"& .MuiAlert-icon":{color:"#4caf50"},backgroundColor:"rgba(76, 175, 80, 0.1)",color:"white",border:"1px solid rgba(76, 175, 80, 0.3)"},children:"Drinking clip successfully added to your library!"}):c?s.jsx(x,{severity:"error",sx:{mb:2,"& .MuiAlert-icon":{color:"#f44336"},backgroundColor:"rgba(244, 67, 54, 0.1)",color:"white",border:"1px solid rgba(244, 67, 54, 0.3)"},children:c}):null,s.jsxs(h,{variant:"body1",sx:{mb:3},children:['The playlist "',s.jsx("strong",{children:n}),'" includes a drinking clip. Would you like to add it to your drinking clips library?']}),s.jsxs(u,{sx:{p:2,borderRadius:1,backgroundColor:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)"},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:["youtube"===r.type?s.jsx(da,{sx:{color:"#ff0000"}}):s.jsx(Pa,{sx:{color:"#ffd700"}}),s.jsx(h,{variant:"h6",component:"div",children:r.name})]}),s.jsxs(u,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[s.jsx(q,{label:"youtube"===r.type?"YouTube Clip":"Audio File",size:"small",sx:{backgroundColor:"youtube"===r.type?"rgba(255,0,0,0.2)":"rgba(255,215,0,0.2)",color:"white",border:"1px solid "+("youtube"===r.type?"rgba(255,0,0,0.3)":"rgba(255,215,0,0.3)")}}),r.duration&&s.jsx(q,{label:"Duration: "+(f=r.duration,f?`${Math.floor(f/60)}:${(f%60).toString().padStart(2,"0")}`:"Unknown"),size:"small",sx:{backgroundColor:"rgba(255,255,255,0.1)",color:"white",border:"1px solid rgba(255,255,255,0.2)"}}),"youtube"===r.type&&void 0!==r.startTime&&s.jsx(q,{label:`Start: ${(e=>e?`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`:"0:00")(r.startTime)}`,size:"small",sx:{backgroundColor:"rgba(255,255,255,0.1)",color:"white",border:"1px solid rgba(255,255,255,0.2)"}})]})]})]}),s.jsxs(P,{sx:{borderTop:"1px solid rgba(255,255,255,0.1)",p:3,gap:2},children:[s.jsx(A,{onClick:p,variant:"outlined",sx:{color:"white",borderColor:"rgba(255,255,255,0.3)","&:hover":{borderColor:"rgba(255,255,255,0.5)",backgroundColor:"rgba(255,255,255,0.1)"}},children:o?"Done":"Skip"}),!o&&s.jsx(A,{onClick:async()=>{i(!0),d(null);try{(e=>{try{if(hR(e))return!0;const t=localStorage.getItem("drinking_clips_library"),r=t?JSON.parse(t):[],n={id:Math.random().toString(36).substr(2,9),name:e.name,type:e.type,youtubeId:e.youtubeId,duration:e.duration,startTime:e.startTime,path:e.path};return r.push(n),localStorage.setItem("drinking_clips_library",JSON.stringify(r)),!0}catch(c){return!1}})(r)?l(!0):d("Failed to add drinking clip to library")}catch(e){d("An error occurred while adding the drinking clip")}finally{i(!1)}},variant:"contained",disabled:a,sx:{backgroundColor:"#ffd700",color:"#1e3c72",fontWeight:600,"&:hover":{backgroundColor:"#ffed4e"},"&:disabled":{backgroundColor:"rgba(255,215,0,0.3)",color:"rgba(30,60,114,0.5)"}},children:a?"Adding...":"Add to Library"})]})]});var f},bR=()=>{const e=m(),{user:t,canAccessFeature:r}=tc(),{isAuthenticated:n,isAnonymous:a}=nc(),[o,l]=i.useState([]),[d,p]=i.useState([]),[f,v]=i.useState([]),[w,S]=i.useState(!0),[j,C]=i.useState("featured"),[k,E]=i.useState(""),[I,O]=i.useState([]),[_,F]=i.useState(""),[$,N]=i.useState("rating"),[W,V]=i.useState("desc"),[Y,G]=i.useState(0),[J,K]=i.useState(!1),[X,Q]=i.useState(""),[Z,ee]=i.useState(!1),[te,re]=i.useState(""),[ne,ae]=i.useState(!1),[ie,oe]=i.useState(""),[se,le]=i.useState(!1),[ce,ue]=i.useState(!1),[de,he]=i.useState(null),[pe,ge]=i.useState(""),ye=i.useMemo((()=>(()=>{const e=Rs(),t=new Set;return e.forEach((e=>{e.tags.forEach((e=>t.add(e)))})),Array.from(t).sort()})()),[o]),be=i.useMemo((()=>(()=>{const e=Rs(),t=new Set;return e.forEach((e=>{t.add(e.creator)})),Array.from(t).sort()})()),[o]);i.useEffect((()=>{xe()}),[j]),i.useEffect((()=>{const e={createTestPlaylist:async()=>{vs.isAuthenticated()||await vs.autoSignIn();const e={id:`test_playlist_${Date.now()}`,name:"Test Shared Playlist",clips:[{id:"test_clip_1",videoId:"dQw4w9WgXcQ",title:"Rick Astley - Never Gonna Give You Up",artist:"Rick Astley",startTime:0,duration:60,thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/medium.jpg"}],date:(new Date).toISOString(),isPublic:!0,shareCode:`TEST${Math.random().toString(36).substr(2,4).toUpperCase()}`,creator:"TestUser",description:"A test playlist for debugging owner actions",rating:0,downloadCount:0,tags:["test","debug"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:1,originalPlaylistId:`test_playlist_${Date.now()}`};try{const t=await ks.sharePlaylist(e);return xe(),t}catch(vz){throw vz}},checkAuth:()=>{},checkPlaylists:()=>{o.forEach((e=>{}))},fixPlaylistOwnership:async()=>{vs.isAuthenticated()||await vs.autoSignIn();const e=vs.getCurrentUser();if(e){for(const t of o)if(!t.creatorId)try{await ks.updatePlaylist(t.id,{creatorId:e.uid})}catch(vz){}xe()}},clearLocalStorage:()=>{(()=>{try{return localStorage.removeItem(Ps),!0}catch(vz){return!1}})()&&xe()}};window.communityDebug=e}),[o,d]),i.useEffect((()=>{n&&xe()}),[n,j]),i.useEffect((()=>{const e=()=>{xe()};return window.addEventListener("playlistShared",e),()=>{window.removeEventListener("playlistShared",e)}}),[]),i.useEffect((()=>{ve()}),[o,d,j,k,I,_,$,W,Y]);const xe=async()=>{S(!0);try{let e=await zs(j);if(e=e.filter((e=>!e.id.startsWith("demo_")&&!["PARTY2024","CHILL001","ROCK2024"].includes(e.shareCode))),l(e),n){const e=await ks.getUserPlaylists();p(e)}else p([])}catch(vz){}finally{S(!1)}},ve=()=>{let e="my-playlists"===j?d:o;e="my-playlists"===j?d:vs.getCurrentUser()?o.filter((e=>!d.some((t=>t.id===e.id)))):o;const t=((e,t)=>{let r=[...e];if(t.category)switch(t.category){case"featured":r=r.filter((e=>!0===e.featured));break;case"highly-rated":r=r.filter((e=>e.rating>=4));break;case"trending":r=r.sort(((e,t)=>t.downloadCount-e.downloadCount));break;case"new":r=r.sort(((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()))}if(t.tags&&t.tags.length>0&&(r=r.filter((e=>t.tags.some((t=>e.tags.includes(t)))))),t.minRating&&(r=r.filter((e=>e.rating>=t.minRating))),t.creator&&(r=r.filter((e=>e.creator.toLowerCase().includes(t.creator.toLowerCase())))),t.searchQuery){const e=t.searchQuery.toLowerCase();r=r.filter((t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.creator.toLowerCase().includes(e)||t.tags.some((t=>t.toLowerCase().includes(e)))))}return t.sortBy&&r.sort(((e,r)=>{let n,a;switch(t.sortBy){case"rating":n=e.rating,a=r.rating;break;case"downloads":n=e.downloadCount,a=r.downloadCount;break;case"date":n=new Date(e.createdAt).getTime(),a=new Date(r.createdAt).getTime();break;case"name":n=e.name.toLowerCase(),a=r.name.toLowerCase();break;default:return 0}return"desc"===t.sortOrder?a>n?1:a<n?-1:0:n>a?1:n<a?-1:0})),r})(e,{category:"my-playlists"===j?"new":j,searchQuery:k||void 0,tags:I.length>0?I:void 0,creator:_||void 0,minRating:Y>0?Y:void 0,sortBy:$,sortOrder:W}),r=t.filter(((e,t,r)=>r.findIndex((t=>t.id===e.id))===t));v(r)},we=async e=>{try{const t=await pR(e.shareCode);t.success&&(t.hasNewDrinkingClip&&t.drinkingClip&&(he(t.drinkingClip),ge(e.name),ue(!0)),n&&lR(e.id))}catch(vz){}},Se=e=>{},je=e=>{p((t=>t.map((t=>t.id===e.id?e:t)))),e.isPublic?l((t=>t.map((t=>t.id===e.id?e:t)))):l((t=>t.filter((t=>t.id!==e.id)))),ve()},Ce=e=>{p((t=>t.filter((t=>t.id!==e)))),l((t=>t.filter((t=>t.id!==e)))),ve()},ke=e=>{oe(e),ae(!0)},Pe=[{value:"featured",label:"Featured",icon:s.jsx(Ci,{})},{value:"highly-rated",label:"Highly Rated",icon:s.jsx(Mi,{})},{value:"trending",label:"Trending",icon:s.jsx(Oi,{})},{value:"new",label:"New",icon:s.jsx(gi,{})},...n?[{value:"my-playlists",label:"My Playlists",icon:s.jsx(xi,{})}]:[]];return w?s.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:s.jsx(H,{})}):s.jsxs(M,{maxWidth:"xl",sx:{py:3},children:[s.jsxs(u,{sx:{mb:4},children:[s.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600},children:"Community Playlists"}),s.jsx(h,{variant:"body1",color:"text.secondary",children:"Discover and import amazing Power Hour playlists created by the community"}),s.jsx(u,{sx:{mt:2,p:2,bgcolor:"background.paper",borderRadius:1,border:1,borderColor:"divider"},children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[s.jsx(u,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:s.jsxs(h,{variant:"body2",color:"text.secondary",children:["Status: ",n?a?" Anonymous Account":" Full Account":" Not Signed In"," | Community Playlists: ",o.length," | Your Playlists: ",d.length]})}),!n&&s.jsx(A,{variant:"outlined",size:"small",onClick:()=>ke("Sign in to access all community features, including sharing your own playlists and managing your collection."),startIcon:s.jsx(xi,{}),children:"Sign In"}),n&&a&&s.jsx(A,{variant:"outlined",size:"small",onClick:()=>ke("Upgrade to a full account to share playlists and access advanced community features."),startIcon:s.jsx(xi,{}),children:"Upgrade Account"}),ds(t)&&s.jsx(A,{variant:"contained",size:"small",onClick:()=>le(!0),startIcon:s.jsx(Sa,{}),color:"warning",children:"Admin Panel"})]})})]}),s.jsx(c,{sx:{mb:3},children:s.jsx(fe,{value:j,onChange:(e,t)=>C(t),variant:"fullWidth",sx:{"& .MuiTab-root":{minHeight:64,textTransform:"none",fontSize:"1rem"}},children:Pe.map((e=>s.jsx(me,{value:e.value,label:e.label,icon:e.icon,iconPosition:"start"},e.value)))})}),s.jsxs(c,{sx:{p:3,mb:3},children:[s.jsxs(h,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[s.jsx(Ka,{sx:{mr:1}}),"Filters"]}),s.jsxs(U,{container:!0,spacing:2,alignItems:"center",children:[s.jsx(U,{size:{xs:12,md:4},children:s.jsx(T,{fullWidth:!0,label:"Search playlists",value:k,onChange:e=>E(e.target.value),InputProps:{startAdornment:s.jsx(B,{position:"start",children:s.jsx(In,{})})}})}),s.jsx(U,{size:{xs:12,md:3},children:s.jsx(Me,{multiple:!0,options:ye,value:I,onChange:(e,t)=>O(t),renderTags:(e,t)=>e.map(((e,r)=>s.jsx(q,{variant:"outlined",label:e,...t({index:r})}))),renderInput:e=>s.jsx(T,{...e,label:"Tags",placeholder:"Select tags"})})}),s.jsx(U,{size:{xs:12,md:2},children:s.jsx(Me,{options:be,value:_,onChange:(e,t)=>F(t||""),renderInput:e=>s.jsx(T,{...e,label:"Creator",placeholder:"Any creator"})})}),s.jsx(U,{size:{xs:12,md:2},children:s.jsxs(R,{fullWidth:!0,children:[s.jsx(z,{children:"Sort by"}),s.jsxs(D,{value:$,label:"Sort by",onChange:e=>N(e.target.value),children:[s.jsx(L,{value:"rating",children:"Rating"}),s.jsx(L,{value:"downloads",children:"Downloads"}),s.jsx(L,{value:"date",children:"Date"}),s.jsx(L,{value:"name",children:"Name"})]})]})}),s.jsx(U,{size:{xs:6,md:1},children:s.jsx(A,{variant:"outlined",onClick:xe,startIcon:s.jsx(Sn,{}),fullWidth:!0,disabled:w,children:"Refresh"})}),s.jsx(U,{size:{xs:6,md:1},children:s.jsx(A,{variant:"outlined",onClick:()=>{E(""),O([]),F(""),G(0),N("rating"),V("desc")},startIcon:s.jsx(Mn,{}),fullWidth:!0,children:"Clear"})})]})]}),0===f.length?s.jsx(x,{severity:"info",sx:{mb:3},children:"my-playlists"===j?"You haven't created any playlists yet. Share a playlist to see it here!":"No playlists found matching your criteria. Try adjusting your filters."}):s.jsxs(s.Fragment,{children:[s.jsxs(h,{variant:"h6",gutterBottom:!0,children:["my-playlists"===j?"Your Playlists":"Community Playlists","(",f.length," playlist",1!==f.length?"s":"",")"]}),s.jsx(U,{container:!0,spacing:3,children:f.map(((e,t)=>s.jsx(U,{size:{xs:12,sm:6,md:4,lg:3},children:s.jsx(fR,{playlist:e,onImport:we,onPreview:Se,onUpdate:je,onDelete:Ce,showOwnerActions:"my-playlists"===j})},`${j}-${e.id}-${t}`)))})]}),s.jsx(u,{sx:{position:"fixed",bottom:24,right:24,zIndex:1e3},children:s.jsx(A,{variant:"contained",startIcon:s.jsx(wa,{}),onClick:()=>K(!0),sx:{borderRadius:28,px:3,py:1.5,fontSize:"1rem",fontWeight:600,boxShadow:e.shadows[8],"&:hover":{boxShadow:e.shadows[12]}},children:"Import by Code"})}),s.jsxs(g,{open:J,onClose:()=>K(!1),maxWidth:"sm",fullWidth:!0,children:[s.jsx(y,{children:"Import Playlist by Share Code"}),s.jsxs(b,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Enter the 8-character share code to import a playlist from another user."}),s.jsx(T,{fullWidth:!0,label:"Share Code",value:X,onChange:e=>{Q(e.target.value.toUpperCase()),re("")},placeholder:"e.g., PARTY2024",inputProps:{maxLength:8},error:!!te,helperText:te||"Share codes are 8 characters long",sx:{mb:2}}),te&&s.jsx(x,{severity:"error",sx:{mb:2},children:te})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:()=>K(!1),disabled:Z,children:"Cancel"}),s.jsx(A,{onClick:async()=>{if(X.trim()){ee(!0),re("");try{const e=await pR(X.trim());e.success?(K(!1),Q(""),e.hasNewDrinkingClip&&e.drinkingClip&&e.playlist&&(he(e.drinkingClip),ge(e.playlist.name),ue(!0))):re(e.message)}catch(vz){re("An unexpected error occurred")}finally{ee(!1)}}else re("Please enter a share code")},variant:"contained",disabled:Z||!X.trim(),children:Z?"Importing...":"Import Playlist"})]})]}),s.jsx(nP,{open:ne,onClose:()=>ae(!1),onSuccess:()=>{ae(!1),xe()},title:"Join the Community",subtitle:ie||"Sign in to access all community features"}),s.jsx(gR,{open:se,onClose:()=>{le(!1),xe()}}),de&&s.jsx(yR,{open:ce,onClose:()=>{ue(!1),he(null),ge("")},drinkingClip:de,playlistName:pe})]})},xR=({currentTab:e,onTabChange:t,tabs:r,variant:n="standard",enableAuthenticationAwareness:a=!1})=>{m();const{currentTheme:o}=qc(),{user:l,canAccessFeature:c}=tc(),{isAuthenticated:d,isAnonymous:p}=nc(),[f,x]=i.useState(!1),[v,w]=i.useState(null),[S,j]=i.useState(!1),C=r.filter((e=>!(a&&(e.requireAuth&&!d||e.requireNonAnonymous&&(!d||p))))),k=C.findIndex((t=>t.value===e));return s.jsxs(s.Fragment,{children:[s.jsx(fe,{value:k>=0?k:0,onChange:(e,r)=>{const n=C[r]?.value;if(n){if(a){const e=C[r];if(e){if(e.requireAuth&&!d)return w({title:e.authPromptTitle||"Authentication Required",message:e.authPromptMessage||`You need to sign in to access ${e.label}.`,requireNonAnonymous:!1}),void x(!0);if(e.requireNonAnonymous&&(!d||p))return w({title:e.authPromptTitle||"Full Account Required",message:e.authPromptMessage||`You need a full account to access ${e.label}. Anonymous accounts cannot use this feature.`,requireNonAnonymous:!0}),void x(!0)}}t(n)}},variant:n,scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTabs-indicator":{backgroundColor:"rgba(255, 255, 255, 0.8)",height:3,borderRadius:"3px 3px 0 0"},"& .MuiTab-root":{color:"rgba(255, 255, 255, 0.7)",textTransform:"none",fontSize:"1rem",fontWeight:500,minHeight:48,"&.Mui-selected":{color:"white"},"&:hover":{color:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"},"& .MuiTab-iconWrapper":{marginRight:1,marginBottom:0}}},children:C.map((e=>{let t=e.icon,r=e.tooltip;a&&(e.requireAuth||e.requireNonAnonymous)&&(!d||e.requireNonAnonymous&&p)&&(t=s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.icon,s.jsx(si,{sx:{fontSize:"0.75rem",opacity:.7}})]}),r=`${e.tooltip||e.label} (Authentication required)`);const n=s.jsx(me,{label:e.label,disabled:e.disabled,icon:e.badge?s.jsx(te,{badgeContent:e.badge,color:"primary",sx:{"& .MuiBadge-badge":{fontSize:"0.625rem",minWidth:16,height:16,borderRadius:8,backgroundColor:"rgba(255, 255, 255, 0.9)",color:"primary.main"}},children:t}):t,iconPosition:"start"},e.value);return r?s.jsx(G,{title:r,placement:"bottom",children:n},e.value):n}))}),s.jsxs(g,{open:f,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,children:[s.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(si,{}),v?.title]}),s.jsxs(b,{children:[s.jsx(h,{variant:"body1",sx:{mb:2},children:v?.message}),v?.requireNonAnonymous&&d&&p&&s.jsx(h,{variant:"body2",color:"text.secondary",children:"You're currently signed in anonymously. You'll need to create a full account or link your anonymous account to an email to access this feature."})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:()=>x(!1),children:"Cancel"}),s.jsx(A,{variant:"contained",onClick:()=>{x(!1),j(!0)},startIcon:s.jsx(xi,{}),children:v?.requireNonAnonymous&&d&&p?"Upgrade Account":"Sign In"})]})]}),s.jsx(nP,{open:S,onClose:()=>j(!1),onSuccess:()=>{j(!1)}})]})},vR={version:"1.0.0",maxRecentPlaylists:10,maxLibrarySize:1e4,autoSaveInterval:3e4,isDevelopment:!1,isProduction:!0,logLevel:"warn",enableAnalytics:!1,enableCrashReporting:!1};async function wR(e){try{const t=`${DE.BASE_URL}?method=artist.getSimilar&artist=${encodeURIComponent(e)}&api_key=${DE.API_KEY}&format=json&limit=10&autocorrect=1`;return(await yE.get(t,{timeout:1e4,headers:{"User-Agent":"PHat5-PowerHour/1.0.0"}})).data}catch(vz){return yE.isAxiosError(vz)&&vz.response?{error:vz.response.data}:{error:vz.message}}}async function SR(e){const t={artist:e,lastfmAvailable:NE.isAvailable(),lastfmApiKey:DE.API_KEY.substring(0,8)+"...",lastfmApiKeyValid:!1,lastfmResults:0,lastfmArtists:[],lastfmScores:[],lastfmError:void 0,lastfmRawResponse:void 0,backupResults:0,backupArtists:[],backupScores:[],recommendedAction:""},r=await wR(e);if(t.lastfmRawResponse=r,r.error?(t.lastfmError=r.error,t.lastfmApiKeyValid=!1):r.similarartists?t.lastfmApiKeyValid=!0:t.lastfmApiKeyValid=!1,t.lastfmAvailable)try{const r=await NE.getSimilarArtists(e,50);t.lastfmResults=r.length,t.lastfmArtists=r.slice(0,10).map((e=>e.name)),t.lastfmScores=r.slice(0,10).map((e=>e.similarity)),t.lastfmResults}catch(vz){t.lastfmError=vz.message,t.recommendedAction="Last.fm API error - check API key and network connection"}else t.recommendedAction="Configure Last.fm API key for better similarity discovery";const n=BE.getSimilarArtists(e,15);return t.backupResults=n.length,t.backupArtists=n.map((e=>e.name)),t.backupScores=n.map((e=>e.similarity)),t.backupResults,0===t.lastfmResults&&0===t.backupResults?t.recommendedAction="No similarity data available - will use genre-based fallbacks":0===t.lastfmResults&&t.backupResults>0?t.recommendedAction="Using backup discovery data - consider configuring Last.fm for more variety":t.lastfmResults>0&&t.backupResults>0?t.recommendedAction="Both Last.fm and backup data available - optimal configuration":t.lastfmResults>0&&0===t.backupResults&&(t.recommendedAction="Last.fm working but no backup data - consider adding artist to backup database"),t}async function jR(e){return NE.clearCache(e),await SR(e)}async function CR(e){if(NE.isAvailable())try{const t=await NE.getSimilarArtists(e);if(0===t.length)return;t.map((e=>e.similarity));const r={strict:.4,moderate:.2,loose:.1,"very-loose":.05};Object.entries(r).forEach((([e,r])=>{t.filter((e=>e.similarity>=r)).length}))}catch(vz){}}async function kR(e){if(await ZE.testDiscovery(e),NE.isAvailable())try{(await NE.getSimilarArtists(e,50)).length}catch(vz){}BE.hasDataFor(e)&&BE.getSimilarArtists(e);try{(await qE.findSimilarArtists(e,10)).length}catch(vz){}ZE.getStats()}async function PR(){const e=["Goose","Taylor Swift","Drake","Led Zeppelin","Deadmau5","Johnny Cash","Metallica","Unknown Artist"];for(const t of e)try{await ZE.findSimilarArtists(t,{maxResults:5})}catch(vz){}ZE.getStats()}new class{constructor(){r(this,"status",{available:!1,downloaded:!1,downloading:!1,checking:!1}),r(this,"settings",{autoCheck:!0,checkInterval:24,autoDownload:!0,autoInstall:!1,allowPrerelease:!1}),r(this,"listeners",[]),r(this,"checkTimer"),this.loadSettings(),this.setupAutoCheck()}async initialize(){try{if(!window.electronAPI?.checkForUpdates)return;this.setupUpdateListeners(),this.settings.autoCheck&&setTimeout((()=>this.checkForUpdates()),5e3)}catch(vz){this.updateStatus({error:"Failed to initialize updater"})}}async checkForUpdates(e=!1){try{if(this.status.checking)return null;if(this.updateStatus({checking:!0,error:void 0}),!window.electronAPI?.checkForUpdates)throw new Error("Auto-updater not available");const t=await window.electronAPI.checkForUpdates();return t.available?(this.updateStatus({checking:!1,available:!0,updateInfo:t}),this.settings.autoDownload&&!e&&this.downloadUpdate(),t):(this.updateStatus({checking:!1,available:!1}),null)}catch(vz){return this.updateStatus({checking:!1,error:vz instanceof Error?vz.message:"Update check failed"}),null}finally{this.settings.lastChecked=Date.now(),this.saveSettings()}}async downloadUpdate(){try{if(!this.status.available||this.status.downloading)return;if(this.updateStatus({downloading:!0,error:void 0}),!window.electronAPI?.downloadUpdate)throw new Error("Download functionality not available");await window.electronAPI.downloadUpdate(),this.updateStatus({downloading:!1,downloaded:!0}),this.settings.autoInstall&&this.installUpdate()}catch(vz){this.updateStatus({downloading:!1,error:vz instanceof Error?vz.message:"Download failed"})}}async installUpdate(){try{if(!this.status.downloaded)throw new Error("No update downloaded");if(!window.electronAPI?.installUpdate)throw new Error("Install functionality not available");await window.electronAPI.installUpdate()}catch(vz){this.updateStatus({error:vz instanceof Error?vz.message:"Installation failed"})}}getStatus(){return{...this.status}}getSettings(){return{...this.settings}}updateSettings(e){this.settings={...this.settings,...e},this.saveSettings(),this.setupAutoCheck()}subscribe(e){return this.listeners.push(e),()=>{const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}setupAutoCheck(){if(this.checkTimer&&clearInterval(this.checkTimer),this.settings.autoCheck&&vR.isProduction){const e=60*this.settings.checkInterval*60*1e3;this.checkTimer=setInterval((()=>{this.checkForUpdates()}),e)}}setupUpdateListeners(){window.electronAPI?.onUpdateProgress&&window.electronAPI.onUpdateProgress((e=>{this.updateStatus({progress:e})})),window.electronAPI?.onUpdateDownloaded&&window.electronAPI.onUpdateDownloaded((()=>{this.updateStatus({downloading:!1,downloaded:!0})})),window.electronAPI?.onUpdateError&&window.electronAPI.onUpdateError((e=>{this.updateStatus({checking:!1,downloading:!1,error:e})}))}updateStatus(e){this.status={...this.status,...e},this.listeners.forEach((e=>e(this.status)))}loadSettings(){try{const e=localStorage.getItem("phat5-update-settings");e&&(this.settings={...this.settings,...JSON.parse(e)})}catch(vz){}}saveSettings(){try{localStorage.setItem("phat5-update-settings",JSON.stringify(this.settings))}catch(vz){}}},new class{constructor(){r(this,"versionHistory",[]),r(this,"currentVersion","1.0.0"),this.loadVersionHistory(),this.getCurrentVersion()}async initialize(){try{window.electronAPI?.getCurrentVersion&&(this.currentVersion=await window.electronAPI.getCurrentVersion()),await this.loadVersionHistory(),await this.recordCurrentVersion()}catch(vz){}}getCurrentVersion(){return this.currentVersion}getVersionHistory(){return[...this.versionHistory].sort(((e,t)=>new Date(t.installDate).getTime()-new Date(e.installDate).getTime()))}async recordVersionInstall(e,t){try{const r=this.versionHistory.find((e=>e.isCurrentVersion));r&&(await this.createVersionBackup(r.version),r.isCurrentVersion=!1);const n={version:e,buildDate:(new Date).toISOString(),installDate:(new Date).toISOString(),releaseNotes:t,isCurrentVersion:!0,canRollback:!1};this.versionHistory.push(n),this.currentVersion=e,this.versionHistory.forEach((e=>{!e.isCurrentVersion&&e.backupPath&&(e.canRollback=!0)})),await this.saveVersionHistory()}catch(vz){}}async createVersionBackup(e){try{if(!window.electronAPI?.createVersionBackup)return null;const t=await window.electronAPI.createVersionBackup(e);if(t){const r=this.versionHistory.find((t=>t.version===e));return r&&(r.backupPath=t.backupPath,r.size=t.size,r.canRollback=!0),await this.saveVersionHistory(),t}return null}catch(vz){return null}}async rollbackToVersion(e){try{const t=this.versionHistory.find((t=>t.version===e));if(!t)throw new Error(`Version ${e} not found in history`);if(!t.canRollback)throw new Error(`Version ${e} cannot be rolled back to`);if(!t.backupPath)throw new Error(`No backup available for version ${e}`);if(!window.electronAPI?.rollbackToVersion)throw new Error("Rollback functionality not available");if(await this.createVersionBackup(this.currentVersion),await window.electronAPI.rollbackToVersion(e,t.backupPath))return this.versionHistory.forEach((t=>{t.isCurrentVersion=t.version===e})),this.currentVersion=e,await this.saveVersionHistory(),!0;throw new Error("Rollback operation failed")}catch(vz){return!1}}async deleteVersionBackup(e){try{const t=this.versionHistory.find((t=>t.version===e));return!(!t||!t.backupPath)&&(!!window.electronAPI?.deleteVersionBackup&&(!!(await window.electronAPI.deleteVersionBackup(t.backupPath))&&(t.backupPath=void 0,t.canRollback=!1,t.size=void 0,await this.saveVersionHistory(),!0)))}catch(vz){return!1}}async cleanupOldBackups(e=3){try{const t=this.getVersionHistory().slice(e);for(const e of t)e.backupPath&&!e.isCurrentVersion&&await this.deleteVersionBackup(e.version)}catch(vz){}}getTotalBackupSize(){return this.versionHistory.reduce(((e,t)=>e+(t.size||0)),0)}canRollbackTo(e){const t=this.versionHistory.find((t=>t.version===e));return t?.canRollback||!1}async recordCurrentVersion(){const e=this.versionHistory.find((e=>e.version===this.currentVersion));if(e)e.isCurrentVersion=!0;else{const e={version:this.currentVersion,buildDate:(new Date).toISOString(),installDate:(new Date).toISOString(),isCurrentVersion:!0,canRollback:!1};this.versionHistory.push(e),await this.saveVersionHistory()}}async loadVersionHistory(){try{if(window.electronAPI?.getVersionHistory){const e=await window.electronAPI.getVersionHistory();if(e&&e.length>0)return void(this.versionHistory=e)}const e=localStorage.getItem("phat5-version-history");e&&(this.versionHistory=JSON.parse(e))}catch(vz){this.versionHistory=[]}}async saveVersionHistory(){try{window.electronAPI?.saveVersionHistory&&await window.electronAPI.saveVersionHistory(this.versionHistory),localStorage.setItem("phat5-version-history",JSON.stringify(this.versionHistory))}catch(vz){}}},"undefined"!=typeof window&&(window.musicDebug={testSimilarityDiscovery:SR,testFreshSimilarityCall:jR,testSimilarityFiltering:CR,generateSimilarityReport:async function(e){const t=await SR(e);await jR(e),await CR(e),t.lastfmResults>0&&t.lastfmArtists.slice(0,5).forEach(((e,t)=>{})),t.backupResults>0&&t.backupArtists.slice(0,5).forEach(((e,t)=>{}))},clearCache:e=>NE.clearCache(e),testLastFmApiDirect:wR,testMultiTierDiscovery:kR,testMultipleGenres:PR,multiTierDiscovery:ZE,aiDiscovery:qE,backupDiscovery:BE,testGoose:()=>kR("Goose"),testTaylorSwift:()=>kR("Taylor Swift"),testDrake:()=>kR("Drake"),testUnknown:()=>kR("Unknown Artist"),testAll:PR,testGooseApi:()=>wR("Goose"),testTaylorApi:()=>wR("Taylor Swift"),diagnose:async e=>{const t=await wR(e),r=await SR(e);return await kR(e),{directResult:t,serviceResult:r}},testEnhancedPowerHour:async e=>{try{return await sI.generatePowerHour({seedArtist:e,totalTracks:10,prioritizeCachedResults:!0,maxApiCalls:5},(e=>{}))}catch(vz){return{error:vz.message}}},testSmartArtistSelection:e=>rI.selectArtists(e,{maxArtists:20,diversityWeight:.4,similarityWeight:.6}),testSmartSongSelection:async e=>{const t="string"==typeof e?{name:e,similarity:.8,genres:["pop"],tags:[]}:e;return await iI.selectSongForArtist(t)},getCacheStats:()=>_E.getStatistics(),exportCache:()=>sI.exportCache(),clearEnhancedCache:()=>{sI.clearCache()},testDisambiguation:e=>{const t=$E.disambiguateArtist(e);return t.suggestions&&t.suggestions.length>1&&t.suggestions.forEach(((e,t)=>{})),t},testDisambiguatedSearch:async(e,t)=>{$E.getLastFmQuery(e,t),$E.getYouTubeQuery(e,"songs",t);try{return await NE.getSimilarArtists(e,10,t)}catch(vz){return[]}},getAmbiguousArtists:()=>$E.getAmbiguousArtists(),testAllAmbiguous:async()=>{const e=$E.getAmbiguousArtists();for(const t of e)$E.disambiguateArtist(t).suggestions},testEnhancedDiscovery:async e=>{try{return await ZE.findSimilarArtists(e,{maxResults:20,enableLastFm:!0,enableCurated:!0,enableAI:!0,enableFallback:!0})}catch(vz){return null}},testSmallPowerHour:async e=>{try{return await sI.generatePowerHour({seedArtist:e,totalTracks:5,prioritizeCachedResults:!1,maxApiCalls:3},(e=>{}))}catch(vz){return null}},compareDiscoveryMethods:async e=>{const t=await ZE.testDiscovery(e),r=await ZE.findSimilarArtists(e,{maxResults:Math.max(120,100),enableLastFm:!0,enableCurated:!0,enableAI:!0,enableFallback:!0}),n=JSON.stringify(t.similarArtists)===JSON.stringify(r.similarArtists);return{discoveryTesterResult:t,enhancedDiscoveryResult:r,identical:n}}});const AR=i.createContext(void 0),ER="power_hour_favorite_tracks",IR="power_hour_recently_played",MR=({children:e,showSnackbar:t})=>{const r=uP.getInstance(),[n,a]=i.useState(null),[o,l]=i.useState([]),[c,u]=i.useState(!1),[d,h]=i.useState(null),[p,f]=i.useState(null),[m,g]=i.useState([]),[y,b]=i.useState(null),[x,v]=i.useState({field:"title",direction:"asc"}),[S,j]=i.useState(""),[C,k]=i.useState(new Set),[P,A]=i.useState((()=>{try{const e=localStorage.getItem(IR);return e?JSON.parse(e):[]}catch{return[]}})),[E,I]=i.useState((()=>{try{const e=localStorage.getItem(ER);return e?new Set(JSON.parse(e)):new Set}catch{return new Set}}));i.useEffect((()=>{try{localStorage.setItem(ER,JSON.stringify(Array.from(E)))}catch(vz){}}),[E]),i.useEffect((()=>{try{localStorage.setItem(IR,JSON.stringify(P))}catch(vz){}}),[P]);const M=i.useCallback((()=>{const e=r.getAllLibraries();g(e)}),[r]);i.useEffect((()=>{(async()=>{if(M(),window.electronAPI)try{const e=await window.electronAPI.getLibraryFolder();if(a(e),e)await T();else{const e=r.getCurrentLibrary();e&&(a(e.path),await T())}}catch(vz){h("Failed to initialize library")}else a(null),l([]),u(!1),h(null)})()}),[M]);const T=i.useCallback((async(e=!1,i)=>{u(!0),h(null),f({processed:0,current:"Checking cache..."});try{if(!window.electronAPI)return l([]),u(!1),void f(null);const t=r.getAllLibraries();if(0===t.length){let t=n;return t||(t=await window.electronAPI.getLibraryFolder(),a(t)),t?void(await R(t,e)):(l([]),u(!1),void f(null))}let i=[],o=0;for(const a of t)try{f({processed:o,current:`Loading ${a.name}...`});let t=null;if(e||await r.needsRefresh(a.path)||(t=r.loadLibrary(a.path)),!t||e){const e=(e,t)=>{f({processed:o+t.processed,current:`${a.name}: ${t.current}`})};window.electronAPI.onLibraryLoadProgress(e);try{t=window.electronAPI.scanFolderAudio?await window.electronAPI.scanFolderAudio(a.path):a.path===n?await window.electronAPI.listLibraryAudio():r.loadLibrary(a.path)||[],t&&r.saveLibrary(a.path,t,a.name,!1)}finally{window.electronAPI.removeLibraryLoadProgressListener(e)}}if(t){const e=t.map((e=>({...e,libraryPath:a.path,libraryName:a.name})));i=i.concat(e),o+=t.length}}catch(vz){}l(i)}catch(vz){h("Failed to load library songs"),t?.("Failed to load library songs","error")}finally{u(!1),f(null)}}),[t,r,n]),R=i.useCallback((async(e,t=!1)=>{if(!t){const t=r.loadLibrary(e),n=await r.needsRefresh(e);if(t&&!n)return void l(t)}f({processed:0,current:"Scanning library..."});const n=(e,t)=>{f(t)};window.electronAPI.onLibraryLoadProgress(n);try{let t;t=window.electronAPI.scanFolderAudio?await window.electronAPI.scanFolderAudio(e):await window.electronAPI.listLibraryAudio(),r.saveLibrary(e,t,void 0,!0),l(t)}finally{window.electronAPI.removeLibraryLoadProgressListener(n)}}),[t,r]),z=i.useCallback((e=>{a(e)}),[]),D=i.useCallback((e=>{A((t=>{const r=t.filter((t=>t.path!==e.path));return[e,...r].slice(0,10)}))}),[]),L=i.useCallback((e=>{if(!n)return!1;try{const t=r.addSongToLibrary(n,e);return!!t&&(l(t),!0)}catch(vz){return!1}}),[n,r]),O=i.useCallback((async(e,a)=>{if(!n)return!1;try{return l((t=>t.map((t=>t.path===e?{...t,...a}:t)))),r.updateSongMetadata(n,e,a)?(t?.("Song metadata updated successfully","success"),!0):(await T(),t?.("Failed to update song metadata","error"),!1)}catch(vz){return await T(),t?.("Failed to update song metadata","error"),!1}}),[n,r,t,T]),_=i.useCallback((e=>{I((t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}))}),[]),F=i.useCallback((async e=>{r.setCurrentLibrary(e),window.electronAPI&&await window.electronAPI.setLibraryFolder(e),a(e),await T(!0),M()}),[T,M,r]),$=i.useCallback((async e=>{if(!window.electronAPI)return t?.("Electron API not available","error"),!1;if(!e||"string"!=typeof e)return t?.("Invalid folder path provided","error"),!1;try{const o=r.getAllLibraries().find((t=>t.path===e));if(o)return t?.(`Library already exists: ${o.name}`,"warning"),!1;u(!0),h(null),f({processed:0,current:"Initializing scan..."});const s=(e,t)=>{f(t)};window.electronAPI.onLibraryLoadProgress(s);try{const i=await window.electronAPI.scanFolderAudio(e);if(0===i.length)return t?.("No audio files found in the selected folder","warning"),!1;const o=e.split(/[/\\]/).pop()||"Music Library";r.saveLibrary(e,i,o,!1);const s=r.getAllLibraries();return!n&&1===s.length&&(r.setCurrentLibrary(e),a(e),window.electronAPI&&await window.electronAPI.setLibraryFolder(e)),M(),await T(!1),t?.(`Added library "${o}" with ${i.length} songs`,"success"),!0}catch(i){return t?.(`Failed to scan folder: ${i instanceof Error?i.message:"Unknown error"}`,"error"),!1}}catch(vz){const r=vz instanceof Error?vz.message:"Unknown error occurred";return t?.(`Failed to add library folder: ${r}`,"error"),h(`Failed to add library folder: ${r}`),!1}finally{try{window.electronAPI&&window.electronAPI.removeLibraryLoadProgressListener&&window.electronAPI.removeLibraryLoadProgressListener((()=>{}))}catch(o){}u(!1),f(null)}}),[n,t,M,r,T]),N=i.useCallback((async()=>{if(window.electronAPI)try{const e=await window.electronAPI.selectLibraryFolder();e&&await $(e)}catch(vz){t?.("Failed to select library folder","error")}}),[$]),W=i.useCallback((async e=>{try{if(r.removeLibrary(e),n===e){const e=r.getAllLibraries();e.length>0?await F(e[0].path):(a(null),l([]),window.electronAPI&&await window.electronAPI.setLibraryFolder(null))}else await T(!1);M(),t?.(`Library removed: ${e}`,"success")}catch(vz){t?.("Failed to remove library","error")}}),[n,F,M,t,r,T]),U=i.useCallback((async e=>{try{if(!window.electronAPI.scanFolderAudio)throw new Error("scanFolderAudio API not available");u(!0),h(null);const n=(e,t)=>{f(t)};window.electronAPI.onLibraryLoadProgress(n);const a=await window.electronAPI.scanFolderAudio(e);r.saveLibrary(e,a,void 0,!1),window.electronAPI.removeLibraryLoadProgressListener(n),f(null),M(),await T(!1),t?.(`Library refreshed: ${a.length} songs found`,"success")}catch(vz){t?.("Failed to refresh library","error"),h("Failed to refresh library")}finally{u(!1)}}),[n,M,t,r,T]),B=i.useCallback((async e=>{if(window.electronAPI)try{if(window.electronAPI.scanFolderAudio)return await window.electronAPI.scanFolderAudio(e)}catch(vz){}}),[]);w.useEffect((()=>{"undefined"!=typeof window&&(window.testScanFolder=B)}),[B]);const H={libraryFolder:n,librarySongs:o,libraryLoading:c,libraryError:d,libraryProgress:p,allLibraries:m,libraryPlayingIndex:y,librarySort:x,librarySearch:S,selectedSongs:C,recentlyPlayed:P,favoriteTracks:E,loadLibrarySongs:T,setLibraryFolder:z,setLibraryPlayingIndex:b,setLibrarySort:v,setLibrarySearch:j,setSelectedSongs:k,addToRecentlyPlayed:D,addSongToLibrary:L,updateSongMetadata:O,toggleFavorite:_,selectLibrary:F,chooseLibraryFolder:N,addLibraryFolder:$,refreshAllLibraries:M,removeLibrary:W,refreshLibrary:U};return s.jsx(AR.Provider,{value:H,children:e})};class TR extends i.Component{constructor(e){super(e),r(this,"handleReload",(()=>{window.location.reload()})),r(this,"handleReset",(()=>{this.setState({hasError:!1,error:null,errorInfo:null})})),r(this,"handleGoHome",(()=>{window.location.hash="/",this.handleReset()})),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx(u,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",p:3,bgcolor:"background.default"},children:s.jsxs(c,{elevation:3,sx:{p:4,maxWidth:600,width:"100%",textAlign:"center"},children:[s.jsx(Ma,{sx:{fontSize:64,color:"error.main",mb:2}}),s.jsx(h,{variant:"h4",gutterBottom:!0,color:"error",children:"Oops! Something went wrong"}),s.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"PHat5 encountered an unexpected error. Don't worry - your data is safe!"}),s.jsxs(x,{severity:"error",sx:{mb:3,textAlign:"left"},children:[s.jsx(ve,{children:"Error Details"}),s.jsxs(h,{variant:"body2",component:"div",children:[s.jsx("strong",{children:"Error:"})," ",this.state.error?.message||"Unknown error"]}),!1]}),s.jsxs(I,{direction:"row",spacing:2,justifyContent:"center",children:[s.jsx(A,{variant:"contained",startIcon:s.jsx(Sn,{}),onClick:this.handleReload,color:"primary",children:"Reload App"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(ni,{}),onClick:this.handleGoHome,children:"Go Home"}),s.jsx(A,{variant:"text",onClick:this.handleReset,children:"Try Again"})]}),s.jsx(k,{sx:{my:3}}),s.jsx(h,{variant:"body2",color:"text.secondary",children:"If this problem persists, please restart the application or contact support."})]})}):this.props.children}}const RR=async()=>{try{(()=>{const e={id:"test_shared_playlist_demo",name:"Demo Shared Playlist",date:(new Date).toISOString(),clips:[{id:"clip_1",videoId:"dQw4w9WgXcQ",title:"Rick Astley - Never Gonna Give You Up",artist:"Rick Astley",startTime:0,duration:60,thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/medium.jpg"}],isPublic:!0,shareCode:"DEMO2024",creator:"TestUser",description:"A demo playlist for testing share code functionality",rating:4.5,downloadCount:10,tags:["demo","test"],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),version:1};Ms(e)})();const e=Rs().find((e=>"DEMO2024"===e.shareCode));if(!e)return;if(await aR(e.id,5,"Great test playlist!")){const t=iR(e.id);if(!t||5!==t.rating)return;if(5!==oR(e.id))return;if(!(await aR(e.id,4,"Updated rating")))return;{const t=iR(e.id);if(!t||4!==t.rating)return}}}catch(vz){}};"undefined"!=typeof window&&(window.testRatingSystem=RR);const zR=()=>{const e=Zl.getState();if(!e.user)return;const t=(e.sessionExpiry?Math.max(0,e.sessionExpiry.getTime()-Date.now()):0)/36e5,r=t/24;return{user:e.user,sessionValid:!!e.sessionExpiry&&new Date<e.sessionExpiry,hoursRemaining:t.toFixed(1),daysRemaining:r.toFixed(1),lastActivity:e.lastActivity,sessionExpiry:e.sessionExpiry}},DR=()=>es,LR=()=>{const e=Zl.getState();if(!e.user)return;const t=e.sessionExpiry,r=e.lastActivity;Zl.getState().updateActivity();const n=Zl.getState(),a=n.sessionExpiry,i=n.lastActivity;return{wasExtended:a&&t&&a.getTime()>t.getTime(),beforeExpiry:t,afterExpiry:a,beforeActivity:r,afterActivity:i}},OR=()=>{const e=localStorage.getItem("phat5_auth_state"),t=localStorage.getItem("phat5_user_profile"),r=localStorage.getItem("phat5_user_preferences"),n=localStorage.getItem("phat5_last_sync");return e&&JSON.parse(e),{authState:e?JSON.parse(e):null,userProfile:t?JSON.parse(t):null,userPreferences:r?JSON.parse(r):null,lastSync:n?JSON.parse(n):null}},_R=async()=>{const e=Zl.getState();if(!e.user)return;const t={sessionId:e.sessionId,sessionExpiry:e.sessionExpiry,lastActivity:e.lastActivity};try{await Zl.getState().refreshSession();const e=Zl.getState(),r=e.sessionId!==t.sessionId;return{success:!0,sessionChanged:r,activityUpdated:e.lastActivity&&t.lastActivity&&e.lastActivity.getTime()>t.lastActivity.getTime(),beforeState:t,afterState:e}}catch(vz){return{success:!1,error:vz}}},FR=async()=>{DR(),zR()&&(OR(),LR(),await _R(),zR())};"undefined"!=typeof window&&(window.sessionDemo={showSessionInfo:zR,showSessionConfig:DR,simulateActivity:LR,showStoredSessionData:OR,testSessionRefresh:_R,runSessionDemo:FR});const $R=()=>{try{const e=Zl.getState();if(!e.user)return{success:!1,message:"No authenticated user found. Please sign in first."};const t=localStorage.getItem("phat5_auth_state");if(!t)return{success:!1,message:"No auth state found in localStorage"};const r=JSON.parse(t);if(!(r.sessionId&&r.sessionToken&&r.sessionExpiry&&r.userId))return{success:!1,message:"Auth state missing required session fields",details:r};const n=Zo({sessionId:r.sessionId,sessionExpiry:new Date(r.sessionExpiry),sessionToken:r.sessionToken,userId:r.userId,lastActivity:r.lastActivity?new Date(r.lastActivity):null});return{success:n.isValid,message:n.isValid?"Session persistence test passed! Session data is valid and properly stored.":`Session validation failed: ${n.reason}`,details:{sessionData:r,validation:n,currentUser:{uid:e.user.uid,email:e.user.email,isAnonymous:e.user.isAnonymous}}}}catch(vz){return{success:!1,message:`Session persistence test failed: ${vz}`,details:vz}}},NR=async()=>{try{const e=Zl.getState(),t=e.user,r=e.sessionId;if(!t)return{success:!1,message:"No authenticated user found. Please sign in first."};if(Zl.setState({user:null,profile:null,preferences:null,sessionId:null,sessionToken:null,sessionExpiry:null,lastActivity:null,status:"loading",authMethod:"none"}),!(await e.restoreSession()))return{success:!1,message:"Session restoration failed - no user restored"};const n=Zl.getState(),a=!!(n.user&&n.sessionId&&n.sessionExpiry&&n.user.uid===t.uid);return{success:a,message:a?"Session restoration test passed! User session was successfully restored.":"Session restoration test failed - session data incomplete",details:{originalUser:{uid:t.uid,email:t.email,sessionId:r},restoredUser:{uid:n.user?.uid,email:n.user?.email,sessionId:n.sessionId},sessionValid:!!n.sessionExpiry&&Qo(n.sessionExpiry)}}}catch(vz){return{success:!1,message:`Session restoration test failed: ${vz}`,details:vz}}},WR=()=>{try{const e=Zl.getState();if(!e.user||!e.sessionExpiry)return{success:!1,message:"No authenticated user or session found."};const t=new Date(e.sessionExpiry);Zl.getState().updateActivity();const r=Zl.getState(),n=r.sessionExpiry?new Date(r.sessionExpiry):null;if(!n)return{success:!1,message:"Session expiry was cleared during activity update"};const a=n.getTime()>=t.getTime(),i=(n.getTime()-Date.now())/36e5;return{success:a,message:a?`Session extension test passed! Session remains valid for ${i.toFixed(1)} hours.`:"Session extension test failed - session was not extended",details:{originalExpiry:t.toISOString(),newExpiry:n.toISOString(),wasExtended:a,hoursRemaining:i.toFixed(1),sessionConfig:es}}}catch(vz){return{success:!1,message:`Session extension test failed: ${vz}`,details:vz}}},UR=async()=>{const e=$R(),t=await NR(),r=WR();return{persistence:e,restoration:t,extension:r,overall:e.success&&t.success&&r.success}};"undefined"!=typeof window&&(window.sessionTests={testSessionPersistence:$R,testSessionRestoration:NR,testSessionExtension:WR,runAllSessionTests:UR});const BR={testStoreInitialization:()=>lu.getState(),testCreatePlaylist:async()=>{const e=lu.getState();if(!vs.getCurrentUser())return null;try{return await e.createCollaborativePlaylist({name:"Test Collaborative Playlist",description:"A test playlist for debugging collaboration features",type:"regular",defaultPermission:"editor",isPublic:!1,initialClips:[]})}catch(vz){return null}},testLoadCollaborations:async()=>{try{return await iu.getUserCollaborations()}catch(vz){return[]}},testRefreshStore:async()=>{const e=lu.getState();try{return await e.refreshCollaborations(),lu.getState()}catch(vz){return null}},testInvitation:async(e,t)=>{const r=lu.getState();try{return await r.sendInvitation({playlistId:e,playlistName:"Test Playlist",inviteeEmail:t,permission:"editor",inviteCode:"TEST123",message:"Test invitation"})}catch(vz){return!1}},testPlaylistConversion:async()=>{const e=lu.getState(),t={id:"test_regular_playlist",name:"Test Regular Playlist for Conversion",date:(new Date).toISOString(),clips:[{id:"clip1",name:"Test Clip 1",start:0,duration:60,songName:"Test Song 1"}],drinkingSoundPath:"/path/to/drinking/sound.mp3"},r={id:"test_youtube_playlist",name:"Test YouTube Playlist for Conversion",date:(new Date).toISOString(),clips:[{id:"yt_clip1",videoId:"dQw4w9WgXcQ",title:"Test YouTube Video",startTime:0,endTime:60,duration:60}]};try{const n=await e.convertToCollaborative(t,"regular"),a=await e.convertToCollaborative(r,"youtube");return{regularConversion:!!n,youtubeConversion:!!a}}catch(vz){return{regularConversion:!1,youtubeConversion:!1}}},testJoinWithInviteCode:async()=>{const e=lu.getState();try{return!!(await e.joinCollaboration("TEST123ABC"))}catch(vz){return!1}},testFirebaseAvailability:()=>({isAvailable:iu.isAvailable(),currentUser:vs.getCurrentUser()}),runAllTests:async()=>{const{isAvailable:e,currentUser:t}=BR.testFirebaseAvailability();if(!e)return;if(!t)return;BR.testStoreInitialization(),await BR.testLoadCollaborations(),await BR.testRefreshStore();const r=await BR.testCreatePlaylist();r&&await BR.testInvitation(r,"test@example.com"),await BR.testPlaylistConversion(),await BR.testJoinWithInviteCode()}};"undefined"!=typeof window&&(window.collaborationDebug=BR);const HR=i.createContext((()=>{})),VR=({value:e,field:t,onSave:r,width:n="100%",isEditing:a=!1,onEditingChange:o})=>{const l=m(),[c,d]=i.useState(a),[h,p]=i.useState(e),f=i.useRef(null);i.useEffect((()=>{p(e)}),[e]),i.useEffect((()=>{d(a)}),[a]),i.useEffect((()=>{if(c&&f.current)try{f.current.focus(),"tags"!==t&&f.current.select()}catch(vz){}}),[c,t]);const g=()=>{c||(d(!0),o?.(!0))},y=async()=>{try{await r(h)?(d(!1),o?.(!1)):p(e)}catch(vz){p(e),d(!1),o?.(!1)}},b=()=>{try{p(e),d(!1),o?.(!1)}catch(vz){}},x=e=>{"Enter"===e.key?(e.preventDefault(),y()):"Escape"===e.key&&(e.preventDefault(),b())},v=()=>{y()};if("tags"===t){const t=Array.isArray(e)?e:[],r=Array.isArray(h)?h:[];if(c)return s.jsx(u,{style:{width:n},children:s.jsx(Me,{multiple:!0,freeSolo:!0,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,value:r,onChange:(e,t)=>{try{const e=t.map((e=>"string"==typeof e&&e.startsWith('Add "')?e.slice(5,-1):e)).filter((e=>e&&e.trim()));p(e)}catch(vz){}},onInputChange:(e,t,r)=>{},filterOptions:(e,t)=>{const r=e.filter((e=>e.toLowerCase().includes(t.inputValue.toLowerCase()))),{inputValue:n}=t,a=e.some((e=>e.toLowerCase()===n.toLowerCase()));return""===n||a||r.push(`Add "${n}"`),r},getOptionLabel:e=>"string"==typeof e&&e.startsWith('Add "')?e.slice(5,-1):e,options:["Chill","High Energy","Dance","Rock","Pop","Electronic"],renderTags:(e,t)=>e.map(((e,r)=>i.createElement(q,{variant:"outlined",label:e,size:"small",...t({index:r}),key:r}))),renderInput:e=>s.jsx(T,{...e,variant:"outlined",size:"small",placeholder:"Type and press Enter to add custom tags...",onKeyDown:e=>{const t=e.target;if("Enter"===e.key){e.preventDefault();const r=t.value;if(r&&r.trim()){const e=r.trim(),n=Array.isArray(h)?h:[];if(!n.includes(e)){const t=[...n,e];p(t)}t.value=""}else y()}else"Escape"===e.key&&(e.preventDefault(),b())},onBlur:v,sx:{"& .MuiOutlinedInput-root":{minHeight:"32px",fontSize:"0.85rem"}}}),sx:{width:"100%","& .MuiAutocomplete-tag":{margin:"1px",height:"20px"}}})});const a=t.length>0?`Tags: ${t.join(", ")}`:"No tags";return s.jsx(u,{onDoubleClick:g,sx:{width:n,minWidth:"80px",maxWidth:n,flexShrink:1,flexGrow:0,padding:"6px 16px",cursor:"pointer",minHeight:"32px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:.5,overflow:"hidden",borderRight:`1px solid ${l.palette.divider}`,boxSizing:"border-box","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)",...t.length>3&&{overflow:"visible",zIndex:10,position:"relative",backgroundColor:l.palette.background.paper,border:`1px solid ${l.palette.divider}`,borderRadius:"4px",boxShadow:l.shadows[4],maxWidth:"400px",minWidth:n}}},title:a,children:t.length>0?t.map(((e,t)=>s.jsx(q,{label:e,size:"small",variant:"outlined",sx:{height:"20px",fontSize:"0.7rem",color:l.palette.text.secondary,borderColor:l.palette.divider}},t))):s.jsx("span",{style:{color:l.palette.text.disabled,fontSize:"0.85rem"},children:"No tags"})})}return c?s.jsx(u,{style:{width:n},children:s.jsx(T,{ref:f,value:h||"",onChange:e=>{try{p(e.target.value)}catch(vz){}},onKeyDown:x,onBlur:v,variant:"outlined",size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{fontSize:"0.85rem",height:"32px",textAlign:"center"},"& .MuiOutlinedInput-input":{textAlign:"center"}}})}):s.jsx(u,{onDoubleClick:g,sx:{width:n,minWidth:"80px",maxWidth:n,flexShrink:1,flexGrow:0,padding:"6px 16px",cursor:"pointer",color:l.palette.text.secondary,minHeight:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRight:`1px solid ${l.palette.divider}`,boxSizing:"border-box",overflow:"hidden","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.05)"}},title:e?String(e):"Empty",children:s.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",display:"block",textAlign:"center",minWidth:0},children:e||s.jsx("span",{style:{color:l.palette.text.disabled},children:"Empty"})})})},YR=({field:e,label:t,width:r,sortField:n,sortDirection:a,onSort:o,onResize:l,minWidth:c=80,maxWidth:u=600})=>{const d=m(),[h,p]=i.useState(!1),[f,g]=i.useState(0),[y,b]=i.useState(r),x=i.useRef(null),v=i.useCallback((e=>{if(!x.current)return;const t=x.current.getBoundingClientRect();e.clientX>t.right-10&&(e.preventDefault(),e.stopPropagation(),p(!0),g(e.clientX),b(r),document.body.style.cursor="col-resize",document.body.style.userSelect="none")}),[r]),w=i.useCallback((t=>{if(!h)return;const r=t.clientX-f,n=Math.max(c,Math.min(u,y+r));l?.(e,n)}),[h,f,y,e,l,c,u]),S=i.useCallback((()=>{h&&(p(!1),document.body.style.cursor="",document.body.style.userSelect="")}),[h]);i.useEffect((()=>{if(h)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)}}),[h,w,S]);const[j,C]=i.useState(!1);return s.jsxs("div",{ref:x,onMouseDown:v,onClick:()=>{o&&!h&&o(e)},onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),style:{width:`${r}px`,minWidth:"80px",maxWidth:`${r}px`,flexShrink:1,flexGrow:0,padding:"6px 16px",cursor:o?"pointer":"default",color:d.palette.text.primary,fontWeight:"bold",fontSize:"0.85rem",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",borderRight:`1px solid ${d.palette.divider}`,userSelect:"none",backgroundColor:j&&o?"rgba(255, 255, 255, 0.05)":"transparent",boxSizing:"border-box",overflow:"hidden"},children:[s.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"center",flex:1},children:t}),s.jsx("div",{style:{position:"absolute",right:"20px"},children:n!==e?null:"asc"===a?s.jsx(oa,{sx:{fontSize:16,ml:.5}}):s.jsx(sa,{sx:{fontSize:16,ml:.5}})}),s.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"10px",cursor:"col-resize",backgroundColor:"transparent",zIndex:1},onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),p(!0),g(e.clientX),b(r),document.body.style.cursor="col-resize",document.body.style.userSelect="none"}}),s.jsx("div",{style:{position:"absolute",right:"2px",top:"50%",transform:"translateY(-50%)",width:"2px",height:"60%",backgroundColor:d.palette.divider,opacity:.5,pointerEvents:"none"}})]})},GR=i.memo((({song:e,index:t,selectedSongs:r,libraryPlayingIndex:n,onSelectSong:a,onPlaySong:o,onExtractClip:l,theme:c,favoriteTracks:u,onToggleFavorite:h,onUpdateSongMetadata:p,columnWidths:f,showTagsColumn:m,showExtractColumn:g,showWildCardColumn:y,onIndividualWildCard:b})=>{try{if(!e)return null;const x=r.has(e.path),v=n===t,w=u?.has(e.path)||!1,S=i.useCallback((()=>{a(e.path)}),[a,e.path]),j=i.useCallback((()=>{o(e,t)}),[o,e,t]),C=i.useCallback((()=>{l(e)}),[l,e]),k=i.useCallback((()=>{h?.(e.path)}),[h,e.path]),P=i.useCallback((()=>{b?.(e)}),[b,e]),A=i.useCallback((async(t,r)=>{try{return!!p&&await p(e.path,{[t]:r})}catch(vz){return!1}}),[p,e.path]),E=()=>v?`${c.secondary}25`:t%2==0?c.backgroundPaper:c.backgroundDefault,I=()=>v?`${c.secondary}35`:`${c.primary}20`;return s.jsxs("div",{style:{display:"flex",alignItems:"center",background:E(),borderBottom:`1px solid ${c.divider}`,borderLeft:v?`3px solid ${c.secondary}`:"3px solid transparent",fontSize:"0.85rem",transition:"all 0.2s",height:"40px",minHeight:"40px",width:"100%",overflow:"hidden"},onMouseOver:e=>{e.currentTarget.style.background=I()},onMouseOut:e=>{e.currentTarget.style.background=E()},children:[s.jsx("div",{style:{width:"50px",padding:"6px 12px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${c.divider}`},children:s.jsx($,{checked:x,onChange:S,sx:{color:c.textPrimary,padding:"2px"},size:"small"})}),s.jsx("div",{style:{width:"50px",padding:"6px 12px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${c.divider}`},children:s.jsx(d,{onClick:j,color:v?"primary":"default",sx:{color:v?c.secondary:c.textPrimary,padding:"4px"},size:"small",children:v?s.jsx(pn,{}):s.jsx(hn,{})})}),h&&s.jsx("div",{style:{width:"50px",padding:"6px 12px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${c.divider}`},children:s.jsx(G,{title:w?"Remove from favorites":"Add to favorites",children:s.jsx(d,{onClick:k,sx:{color:w?c.error:c.textSecondary,padding:"4px","&:hover":{color:w?c.errorDark:c.error}},size:"small",children:w?s.jsx(qa,{}):s.jsx(Ja,{})})})}),s.jsx(VR,{value:e.title||e.name,field:"title",onSave:e=>A("title",e),width:f?.title?`${f.title}px`:"30%"}),s.jsx(VR,{value:e.artist||"",field:"artist",onSave:e=>A("artist",e),width:f?.artist?`${f.artist}px`:"20%"}),s.jsx(VR,{value:e.album||"",field:"album",onSave:e=>A("album",e),width:f?.album?`${f.album}px`:"20%"}),s.jsx(VR,{value:e.genre||"",field:"genre",onSave:e=>A("genre",e),width:f?.genre?`${f.genre}px`:"15%"}),s.jsx(VR,{value:e.year||"",field:"year",onSave:e=>A("year",e),width:f?.year?`${f.year}px`:"10%"}),s.jsx("div",{style:{width:f?.library?`${f.library}px`:"15%",padding:"8px 12px",textAlign:"left",flexShrink:0,borderRight:`1px solid ${c.divider}`,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:c.textSecondary,fontSize:"0.8rem",display:"flex",alignItems:"center"},children:e.libraryName||"Default"}),m&&s.jsx(VR,{value:e.tags||[],field:"tags",onSave:e=>A("tags",e),width:f?.tags?`${f.tags}px`:"15%"}),g&&s.jsx("div",{style:{width:"50px",padding:"6px 12px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${c.divider}`},children:s.jsx(d,{onClick:C,sx:{color:c.textPrimary,padding:"4px","&:hover":{color:c.secondary}},size:"small",title:"Extract Clip",children:""})}),y&&s.jsx("div",{style:{width:"50px",padding:"6px 12px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${c.divider}`},children:s.jsx(d,{onClick:P,sx:{color:c.textPrimary,padding:"4px","&:hover":{color:c.secondary}},size:"small",title:"Wild Card - Extract random minute",children:""})})]})}catch(vz){return s.jsx("div",{style:{padding:"8px",color:"red",height:"40px",display:"flex",alignItems:"center"},children:"Error loading song"})}}),((e,t)=>e.song.path===t.song.path&&e.index===t.index&&e.selectedSongs.has(e.song.path)===t.selectedSongs.has(t.song.path)&&e.libraryPlayingIndex===t.libraryPlayingIndex&&e.favoriteTracks?.has(e.song.path)===t.favoriteTracks?.has(t.song.path)&&e.onSelectSong===t.onSelectSong&&e.onPlaySong===t.onPlaySong&&e.onExtractClip===t.onExtractClip&&e.onToggleFavorite===t.onToggleFavorite));GR.displayName="LibraryRow";const qR=({songs:e,selectedSongs:t,libraryPlayingIndex:r,onSelectSong:n,onSelectAll:a,onPlaySong:o,onExtractClip:l,librarySort:c,onSortChange:u,favoriteTracks:d,onToggleFavorite:p,showWaveforms:f,onUpdateSongMetadata:g,columnWidths:y,onColumnResize:b,showTagsColumn:x=!0,showExtractColumn:v=!0,showWildCardColumn:w=!1,onIndividualWildCard:S})=>{const j=m(),C=i.useRef(null),[k,P]=i.useState({start:0,end:Math.min(e.length,100)}),A={title:400,artist:280,album:280,genre:200,year:120,library:180,tags:220,...y},E=40,I=e.length*E;i.useEffect((()=>{P((t=>({start:0,end:Math.min(e.length,Math.max(t.end,100))})))}),[e.length]);const M=i.useMemo((()=>({primary:j.palette.primary.main,secondary:j.palette.secondary.main,textPrimary:j.palette.text.primary,textSecondary:j.palette.text.secondary,backgroundPaper:j.palette.background.paper,backgroundDefault:j.palette.background.default,divider:j.palette.divider,error:j.palette.error.main,errorDark:j.palette.error.dark})),[j]);i.useEffect((()=>{let t=!1,r=null;const n=()=>{if(!C.current)return;if(r=document.getElementById("main-content-scroll-container"),!r)return void requestAnimationFrame((()=>n()));const t=r.scrollTop,a=r.clientHeight,i=Math.max(0,Math.floor(t/E)-15),o=Math.ceil(a/E)+30,s=Math.min(e.length,i+o);P((e=>e.start!==i||e.end!==s?{start:i,end:s}:e))},a=()=>{t||(requestAnimationFrame((()=>{n(),t=!1})),t=!0)};return setTimeout((()=>{n(),r=document.getElementById("main-content-scroll-container"),r&&r.addEventListener("scroll",a,{passive:!0})}),100),window.addEventListener("resize",n),()=>{r&&r.removeEventListener("scroll",a),window.removeEventListener("resize",n)}}),[e.length,E,15]);const T=i.useMemo((()=>e.slice(k.start,k.end)),[e,k.start,k.end]);i.useCallback((e=>c.field===e?"asc"===c.direction?"":"":""),[c]);const R=i.useCallback((()=>{if("dark"===j.palette.mode){const e=j.palette.background.paper;if(j.palette.background.default,e.startsWith("rgb")){const t=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(t){const e=parseInt(t[1]),r=parseInt(t[2]),n=parseInt(t[3]),a=12;return`rgb(${Math.max(0,e-a)}, ${Math.max(0,r-a)}, ${Math.max(0,n-a)})`}}else if(e.startsWith("#")){const t=e.replace("#",""),r=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16),i=12;return`rgb(${Math.max(0,r-i)}, ${Math.max(0,n-i)}, ${Math.max(0,a-i)})`}return"rgba(0, 0, 0, 0.3)"}{const e=j.palette.background.default;if(e.startsWith("rgb")){const t=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(t){const e=parseInt(t[1]),r=parseInt(t[2]),n=parseInt(t[3]),a=25;return`rgb(${Math.max(0,e-a)}, ${Math.max(0,r-a)}, ${Math.max(0,n-a)})`}}else if(e.startsWith("#")){const t=e.replace("#",""),r=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16),i=25;return`rgb(${Math.max(0,r-i)}, ${Math.max(0,n-i)}, ${Math.max(0,a-i)})`}return"rgba(0, 0, 0, 0.08)"}}),[j]);return 0===e.length?s.jsx("div",{style:{padding:"20px",textAlign:"center",color:j.palette.text.secondary},children:s.jsx(h,{children:"No audio files found in this folder."})}):s.jsxs("div",{style:{width:"100%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",background:R(),borderBottom:`2px solid ${j.palette.secondary.main}`,fontSize:"0.85rem",fontWeight:"bold",height:"48px",position:"sticky",top:0,zIndex:1,overflow:"hidden",width:"100%"},children:[s.jsx("div",{style:{width:"50px",padding:"6px 16px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${j.palette.divider}`},children:s.jsx($,{checked:t.size===e.length&&e.length>0,indeterminate:t.size>0&&t.size<e.length,onChange:a,sx:{color:j.palette.text.primary,padding:"2px"},size:"small"})}),s.jsx("div",{style:{width:"50px",padding:"6px 16px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${j.palette.divider}`}}),p&&s.jsx("div",{style:{width:"50px",padding:"6px 16px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${j.palette.divider}`},children:s.jsx(qa,{sx:{fontSize:"1rem",color:j.palette.text.secondary}})}),s.jsx(YR,{field:"title",label:"Song",width:A.title,sortField:c.field,sortDirection:c.direction,onSort:u,onResize:b}),s.jsx(YR,{field:"artist",label:"Artist",width:A.artist,sortField:c.field,sortDirection:c.direction,onSort:u,onResize:b}),s.jsx(YR,{field:"album",label:"Album",width:A.album,sortField:c.field,sortDirection:c.direction,onSort:u,onResize:b}),s.jsx(YR,{field:"genre",label:"Genre",width:A.genre,sortField:c.field,sortDirection:c.direction,onSort:u,onResize:b}),s.jsx(YR,{field:"year",label:"Year",width:A.year,sortField:c.field,sortDirection:c.direction,onSort:u,onResize:b}),s.jsx(YR,{field:"library",label:"Library",width:A.library,sortField:c.field,sortDirection:c.direction,onSort:u,onResize:b}),x&&s.jsx(YR,{field:"tags",label:"Tags",width:A.tags,sortField:c.field,sortDirection:c.direction,onSort:u,onResize:b}),v&&s.jsx("div",{style:{width:"50px",padding:"6px 16px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${j.palette.divider}`,fontSize:"0.85rem",fontWeight:"bold"}}),w&&s.jsx("div",{style:{width:"50px",padding:"6px 16px",textAlign:"center",flexShrink:0,borderRight:`1px solid ${j.palette.divider}`,fontSize:"0.85rem",fontWeight:"bold"}})]}),s.jsx("div",{ref:C,style:{width:"100%",height:I,position:"relative"},children:T.map(((e,a)=>{const i=k.start+a;return s.jsx("div",{style:{position:"absolute",top:i*E,left:0,right:0,height:E},children:s.jsx(GR,{song:e,index:i,selectedSongs:t,libraryPlayingIndex:r,onSelectSong:n,onPlaySong:o,onExtractClip:l,theme:M,favoriteTracks:d,onToggleFavorite:p,onUpdateSongMetadata:g,columnWidths:A,showTagsColumn:x,showExtractColumn:v,showWildCardColumn:w,onIndividualWildCard:S})},e.path)}))})]})};var JR=(e=>(e[e.ERROR=0]="ERROR",e[e.WARN=1]="WARN",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e))(JR||{});const KR=class e{constructor(){r(this,"logLevel"),r(this,"logs",[]),r(this,"maxLogs",1e3),this.logLevel=1}static getInstance(){return e.instance||(e.instance=new e),e.instance}shouldLog(e){return e<=this.logLevel}formatMessage(e,t,r){return`${(new Date).toISOString()} ${JR[e]} ${r?`[${r}]`:""} ${t}`}addLog(e,t,r,n){const a={timestamp:(new Date).toISOString(),level:e,message:t,data:r,component:n};this.logs.push(a),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}error(e,t,r){this.shouldLog(0)&&(this.formatMessage(0,e,r),this.addLog(0,e,t,r))}warn(e,t,r){this.shouldLog(1)&&(this.formatMessage(1,e,r),this.addLog(1,e,t,r))}info(e,t,r){this.shouldLog(2)&&(this.formatMessage(2,e,r),this.addLog(2,e,t,r))}debug(e,t,r){this.shouldLog(3)&&(this.formatMessage(3,e,r),this.addLog(3,e,t,r))}getRecentLogs(e=50){return this.logs.slice(-e)}clearLogs(){this.logs=[]}setLogLevel(e){this.logLevel=e}exportLogs(){return this.logs.map((e=>{const t=e.data?` | Data: ${JSON.stringify(e.data)}`:"",r=e.component?` | Component: ${e.component}`:"";return`${e.timestamp} | ${JR[e.level]} | ${e.message}${r}${t}`})).join("\n")}};r(KR,"instance");const XR=KR.getInstance(),QR=(e,t,r)=>XR.error(e,t,r),ZR=(e,t,r)=>XR.warn(e,t,r),ez=(e,t,r)=>XR.info(e,t,r),tz=(e,t,r)=>XR.debug(e,t,r),rz=({activeFilters:e,onFilterToggle:t,onClearAllFilters:r,availableGenres:n,availableYears:a,recentlyPlayedCount:i,favoritesCount:o})=>{const[l,c]=w.useState(null),[p,f]=w.useState(null),m=(e,t)=>{c(e.currentTarget),f(t)},g=()=>{c(null),f(null)},y=e=>{t("genres"===p?`genre:${e}`:`year:${e}`),g()},b=[{id:"favorites",label:`Favorites (${o})`,icon:s.jsx(qa,{}),filter:{field:"favorite",value:"true"},color:"error"},{id:"recent",label:`Recently Played (${i})`,icon:s.jsx(ri,{}),filter:{field:"recent",value:"true"},color:"info"}],x=e.filter((e=>e.startsWith("genre:"))).map((e=>e.replace("genre:",""))),v=e.filter((e=>e.startsWith("year:"))).map((e=>e.replace("year:",""))),S=t=>e.includes(t);return s.jsxs(u,{sx:{mb:0},children:[" ",s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[s.jsx(h,{variant:"body2",color:"text.secondary",children:"Quick Filters:"}),e.length>0&&s.jsx(G,{title:"Clear all filters",children:s.jsx(d,{size:"small",onClick:r,children:s.jsx(Mn,{fontSize:"small"})})})]}),s.jsxs(u,{sx:{display:"flex",flexWrap:"wrap",gap:1,alignItems:"center"},children:[b.map((e=>s.jsx(q,{label:e.label,icon:e.icon,variant:S(e.id)?"filled":"outlined",color:S(e.id)?e.color:"default",onClick:()=>t(e.id),size:"small",clickable:!0},e.id))),s.jsx(q,{label:"Genres",icon:s.jsx(ja,{}),variant:"outlined",onClick:e=>m(e,"genres"),size:"small",clickable:!0}),s.jsx(q,{label:"Years",icon:s.jsx(Na,{}),variant:"outlined",onClick:e=>m(e,"years"),size:"small",clickable:!0}),x.map((e=>s.jsx(q,{label:e,variant:"filled",color:"primary",size:"small",onDelete:()=>t(`genre:${e}`),deleteIcon:s.jsx(Mn,{})},`genre:${e}`))),v.map((e=>s.jsx(q,{label:e,variant:"filled",color:"secondary",size:"small",onDelete:()=>t(`year:${e}`),deleteIcon:s.jsx(Mn,{})},`year:${e}`)))]}),s.jsxs(ae,{anchorEl:l,open:Boolean(l),onClose:g,PaperProps:{style:{maxHeight:300,width:"200px"}},children:["genres"===p&&n.map((e=>s.jsxs(L,{onClick:()=>y(e),selected:x.includes(e),children:[s.jsx(F,{children:s.jsx(ja,{fontSize:"small"})}),s.jsx(j,{primary:e})]},e))),"years"===p&&a.map((e=>s.jsxs(L,{onClick:()=>y(e),selected:v.includes(e),children:[s.jsx(F,{children:s.jsx(Na,{fontSize:"small"})}),s.jsx(j,{primary:e})]},e)))]})]})},nz=({open:e,onClose:t,songs:r,onEnhanceMetadata:n})=>{const[a,o]=i.useState(!1),[l,c]=i.useState(0),[d,p]=i.useState(""),[f,m]=i.useState({success:0,failed:0,skipped:0}),[x,w]=i.useState([{type:"title",label:"Song Titles",icon:s.jsx(pi,{}),description:"Clean up and standardize song titles",enabled:!0},{type:"artist",label:"Artist Names",icon:s.jsx(xi,{}),description:"Fetch missing artist information",enabled:!0},{type:"album",label:"Album Names",icon:s.jsx(ja,{}),description:"Identify and add album information",enabled:!0},{type:"genre",label:"Music Genres",icon:s.jsx(pi,{}),description:"Automatically categorize music by genre",enabled:!0},{type:"year",label:"Release Years",icon:s.jsx(Na,{}),description:"Find release dates for songs",enabled:!0},{type:"albumArt",label:"Album Artwork",icon:s.jsx(ra,{}),description:"Download high-quality album covers",enabled:!1},{type:"bpm",label:"BPM Detection",icon:s.jsx(Ii,{}),description:"Analyze tempo for better mixing",enabled:!1},{type:"duration",label:"Accurate Duration",icon:s.jsx(gn,{}),description:"Get precise song durations",enabled:!0}]);return s.jsxs(g,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,children:[s.jsx(y,{children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(pi,{}),"Enhance Metadata"]})}),s.jsxs(b,{children:[s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Automatically enhance your music library with missing metadata. This process will analyze your songs and fetch information from online databases."}),s.jsxs(u,{sx:{mb:3,p:2,backgroundColor:"action.hover",borderRadius:1},children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Library Statistics"}),s.jsxs(u,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[s.jsx(q,{label:`${r.length} songs`,variant:"outlined"}),s.jsx(q,{label:`${r.reduce(((e,t)=>{let r=0;return t.title||t.name||r++,t.artist||r++,t.album||r++,t.genre||r++,t.year||r++,e+r}),0)} missing fields`,color:"warning",variant:"outlined"}),s.jsx(q,{label:`~${(()=>{const e=x.filter((e=>e.enabled)).length,t=r.length*e*.5;return Math.ceil(t/60)})()} min estimated`,color:"info",variant:"outlined"})]})]}),s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Enhancement Options"}),s.jsx(v,{children:x.map((e=>s.jsxs(S,{sx:{px:0},children:[s.jsx(F,{children:e.icon}),s.jsx(j,{primary:e.label,secondary:e.description}),s.jsx(X,{control:s.jsx(Q,{checked:e.enabled,onChange:()=>{return t=e.type,void w((e=>e.map((e=>e.type===t?{...e,enabled:!e.enabled}:e))));var t}}),label:""})]},e.type)))}),a&&s.jsxs(s.Fragment,{children:[s.jsx(k,{sx:{my:2}}),s.jsxs(u,{sx:{mb:2},children:[s.jsxs(h,{variant:"body2",gutterBottom:!0,children:["Processing: ",d]}),s.jsx(he,{variant:"determinate",value:l}),s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[s.jsxs(h,{variant:"caption",children:[Math.round(l),"% complete"]}),s.jsxs(h,{variant:"caption",children:[f.success+f.failed," / ",r.length," processed"]})]})]}),s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(q,{icon:s.jsx(Oa,{}),label:`${f.success} enhanced`,color:"success",size:"small"}),s.jsx(q,{icon:s.jsx(Va,{}),label:`${f.failed} failed`,color:"error",size:"small"})]})]}),s.jsxs(u,{sx:{mt:3,p:2,backgroundColor:"warning.main",borderRadius:1,color:"warning.contrastText"},children:[s.jsx(h,{variant:"body2",sx:{fontWeight:"bold",mb:1},children:" Important Notes:"}),s.jsx(h,{variant:"body2",sx:{mb:.5},children:" This process requires an internet connection"}),s.jsx(h,{variant:"body2",sx:{mb:.5},children:" Large libraries may take significant time to process"}),s.jsx(h,{variant:"body2",children:" Original files will not be modified, only the app's database"})]})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:t,disabled:a,children:"Cancel"}),s.jsx(A,{onClick:async()=>{o(!0),c(0),m({success:0,failed:0,skipped:0});const e=x.filter((e=>e.enabled)).map((e=>e.type));try{for(let e=0;e<r.length;e++){const t=r[e];p(t.title||t.name),c(e/r.length*100),await new Promise((e=>setTimeout(e,100)));const n=Math.random()>.1;m(n?e=>({...e,success:e.success+1}):e=>({...e,failed:e.failed+1}))}await n(r,e),c(100)}catch(vz){}finally{o(!1),p("")}},variant:"contained",disabled:a||0===x.filter((e=>e.enabled)).length,children:a?"Enhancing...":"Start Enhancement"})]})]})},az=({open:e,onClose:t,onSelectLibrary:r,onAddLibraryFolder:n,currentLibraryPath:a,songs:o=[],onEnhanceMetadata:l,libraryLoading:c=!1,allLibraries:p=[],onRefreshAllLibraries:f,onRemoveLibrary:m,onRefreshLibrary:v})=>{const[w,S]=i.useState({}),[j,C]=i.useState(null),[E,M]=i.useState(""),[R,z]=i.useState(!1),[D,L]=i.useState(!1),[O,_]=i.useState(!1),[F,$]=i.useState(0),[U,B]=i.useState(null),[Y,J]=i.useState(null),K=uP.getInstance(),Z=p.length>0?p:K.getAllLibraries();i.useEffect((()=>{e&&(ee(),B(null),J(null),f&&f())}),[e,f]);const ee=()=>{const e=K.getSettings();S(e)},te=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]},re=e=>new Date(e).toLocaleDateString(),ne=i.useCallback((async()=>{_(!0),B(null),J(null),$(0);try{if(!window.electronAPI)throw new Error("Electron API not available");const e=await window.electronAPI.selectLibraryFolder();if(e){$(25);const t=Z.find((t=>t.path===e));if(t)return void B(`Library already exists: ${t.name}`);$(50);const r=await n(e);$(75),r?($(100),J(`Successfully added library: ${e.split(/[/\\]/).pop()}`),f&&f(),setTimeout((()=>J(null)),3e3)):B("Failed to add library. Please try again.")}}catch(e){B(`Error adding library: ${e instanceof Error?e.message:"Unknown error"}`)}finally{_(!1),$(0)}}),[Z,n,f]),ae=i.useCallback((e=>{r(e),J(`Switched to library: ${e.split(/[/\\]/).pop()}`),setTimeout((()=>J(null)),2e3),t()}),[r,t]),ie=i.useCallback((e=>{const t=Z.find((t=>t.path===e)),r=t?.name||e.split(/[/\\]/).pop();window.confirm(`Are you sure you want to remove "${r}" from the library manager?\n\nThis will not delete your music files, only remove them from the app's library cache.`)&&m&&(m(e),J(`Removed library: ${r}`),setTimeout((()=>J(null)),3e3))}),[Z,m]),oe=i.useCallback((e=>{if(v){v(e);const t=Z.find((t=>t.path===e))?.name||"Library";J(`Refreshing ${t}...`),setTimeout((()=>J(null)),3e3)}}),[Z,v]);return s.jsxs(s.Fragment,{children:[s.jsxs(g,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh",maxHeight:"90vh"}},children:[s.jsx(y,{children:s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2},children:[s.jsx(Cn,{color:"primary"}),s.jsx(h,{variant:"h5",component:"div",sx:{flexGrow:1},children:"Music Library Manager"}),s.jsx(q,{label:`${Z.length} ${1===Z.length?"Library":"Libraries"}`,color:"primary",variant:"outlined"}),s.jsx(d,{onClick:()=>z(!R),color:R?"primary":"default",children:s.jsx(ha,{})})]})}),s.jsxs(b,{sx:{pb:1},children:[s.jsx(V,{in:!!U,children:s.jsxs(x,{severity:"error",sx:{mb:2},onClose:()=>B(null),children:[s.jsx(ve,{children:"Error"}),U]})}),s.jsx(V,{in:!!Y,children:s.jsx(x,{severity:"success",sx:{mb:2},onClose:()=>J(null),children:Y})}),s.jsx(V,{in:O,children:s.jsx(N,{sx:{mb:2,bgcolor:"action.hover"},children:s.jsxs(W,{children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[s.jsx(H,{size:20}),s.jsx(h,{variant:"body1",children:"Adding new library..."})]}),s.jsx(he,{variant:"determinate",value:F})]})})}),s.jsx(V,{in:R,children:s.jsx(N,{sx:{mb:2},children:s.jsxs(W,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Library Settings"}),s.jsx(X,{control:s.jsx(Q,{checked:w.autoRefreshEnabled||!1,onChange:e=>{const t={...w,autoRefreshEnabled:e.target.checked};S(t),K.updateSettings(t)}}),label:"Auto-refresh libraries when files change"}),s.jsxs(u,{sx:{mt:2},children:[s.jsxs(h,{variant:"body2",gutterBottom:!0,children:["Cache expiry (days): ",w.cacheExpiryDays||7]}),s.jsx(T,{type:"number",size:"small",value:w.cacheExpiryDays||7,onChange:e=>{const t={...w,cacheExpiryDays:parseInt(e.target.value)||7};S(t),K.updateSettings(t)},inputProps:{min:1,max:30},sx:{width:"100px"}})]}),s.jsx(k,{sx:{my:2}}),s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Cache Statistics"}),s.jsx(u,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:2},children:(()=>{const e=K.getCacheStats();return s.jsxs(s.Fragment,{children:[s.jsx(N,{variant:"outlined",children:s.jsxs(W,{sx:{textAlign:"center",py:1},children:[s.jsx(Cn,{color:"primary"}),s.jsx(h,{variant:"h6",children:e.totalLibraries}),s.jsx(h,{variant:"caption",children:"Libraries"})]})}),s.jsx(N,{variant:"outlined",children:s.jsxs(W,{sx:{textAlign:"center",py:1},children:[s.jsx(pi,{color:"primary"}),s.jsx(h,{variant:"h6",children:e.totalSongs}),s.jsx(h,{variant:"caption",children:"Songs"})]})}),s.jsx(N,{variant:"outlined",children:s.jsxs(W,{sx:{textAlign:"center",py:1},children:[s.jsx(Ti,{color:"primary"}),s.jsx(h,{variant:"h6",children:te(e.totalSize)}),s.jsx(h,{variant:"caption",children:"Total Size"})]})}),s.jsx(N,{variant:"outlined",children:s.jsxs(W,{sx:{textAlign:"center",py:1},children:[s.jsx(Ai,{color:"primary"}),s.jsx(h,{variant:"h6",children:re(e.newestCache)}),s.jsx(h,{variant:"caption",children:"Last Updated"})]})})]})})()}),s.jsx(u,{sx:{mt:2},children:s.jsx(A,{variant:"outlined",color:"warning",onClick:()=>{window.confirm("Clear all library caches? You will need to reload your libraries.")&&(K.clearAllCaches(),f&&f(),J("All caches cleared successfully"),setTimeout((()=>J(null)),3e3))},children:"Clear All Caches"})})]})})}),s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[s.jsxs(h,{variant:"h6",children:["Your Music Libraries",a&&s.jsxs(h,{variant:"caption",display:"block",color:"text.secondary",children:["Current: ",a.split(/[/\\]/).pop()]})]}),s.jsxs(I,{direction:"row",spacing:1,children:[s.jsx(A,{variant:"outlined",startIcon:s.jsx(Sn,{}),onClick:()=>{f&&(f(),J("Libraries refreshed"),setTimeout((()=>J(null)),2e3))},size:"small",children:"Refresh"}),s.jsx(A,{variant:"contained",startIcon:O?s.jsx(H,{size:16}):s.jsx(wa,{}),onClick:ne,disabled:O,children:O?"Adding...":"Add Library"})]})]}),0===Z.length?s.jsx(N,{sx:{textAlign:"center",py:6},children:s.jsxs(W,{children:[s.jsx(Qa,{sx:{fontSize:64,color:"text.secondary",mb:2}}),s.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:O||c?"Adding your first library...":"No libraries found"}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:O||c?"Please wait while we scan your music folder and all its subfolders":'Click "Add Library" to select a folder containing your music files. All subfolders will be scanned automatically.'}),(O||c)&&s.jsx(H,{})]})}):s.jsx(u,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:2},children:Z.map((e=>s.jsx("div",{children:s.jsxs(N,{sx:{height:"100%",border:a===e.path?2:1,borderColor:a===e.path?"primary.main":"divider",bgcolor:a===e.path?"action.selected":"background.paper",transition:"all 0.2s ease-in-out","&:hover":{boxShadow:4,transform:"translateY(-2px)"}},children:[s.jsxs(W,{sx:{pb:1},children:[s.jsxs(u,{sx:{display:"flex",alignItems:"flex-start",gap:2,mb:2},children:[s.jsx(u,{sx:{flexShrink:0,mt:.5},children:a===e.path?s.jsx(Oa,{color:"primary",sx:{fontSize:32}}):s.jsx(Rn,{color:"action",sx:{fontSize:32}})}),s.jsx(u,{sx:{flexGrow:1,minWidth:0},children:j===e.id?s.jsx(T,{value:E,onChange:e=>M(e.target.value),size:"small",fullWidth:!0,autoFocus:!0,onKeyPress:t=>{"Enter"===t.key&&(E.trim()&&(K.updateLibraryMetadata(e.path,{name:E.trim()}),f&&f()),C(null),M("")),"Escape"===t.key&&(C(null),M(""))}}):s.jsxs(u,{children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[s.jsx(h,{variant:"h6",sx:{fontWeight:a===e.path?600:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name}),a===e.path&&s.jsx(q,{label:"Current",size:"small",color:"primary"})]}),s.jsxs(h,{variant:"caption",color:"text.secondary",sx:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[" ",e.path]})]})})]}),s.jsxs(u,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:1,mb:2},children:[s.jsxs(u,{sx:{textAlign:"center"},children:[s.jsx(h,{variant:"h6",color:"primary",children:e.songCount}),s.jsx(h,{variant:"caption",color:"text.secondary",children:"Songs"})]}),s.jsxs(u,{sx:{textAlign:"center"},children:[s.jsx(h,{variant:"h6",color:"primary",children:te(e.totalSize)}),s.jsx(h,{variant:"caption",color:"text.secondary",children:"Size"})]}),s.jsxs(u,{sx:{textAlign:"center"},children:[s.jsx(h,{variant:"h6",color:"primary",children:re(e.lastScanned)}),s.jsx(h,{variant:"caption",color:"text.secondary",children:"Scanned"})]})]})]}),s.jsx(Ie,{sx:{justifyContent:"space-between",px:2,pb:2},children:j===e.id?s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(A,{size:"small",onClick:()=>{E.trim()&&(K.updateLibraryMetadata(e.path,{name:E.trim()}),f&&f()),C(null),M("")},color:"primary",children:"Save"}),s.jsx(A,{size:"small",onClick:()=>{C(null),M("")},children:"Cancel"})]}):s.jsxs(u,{sx:{display:"flex",gap:.5},children:[s.jsx(G,{title:"Select Library",children:s.jsx(d,{size:"small",onClick:()=>ae(e.path),color:"primary",children:s.jsx(Cn,{})})}),s.jsx(G,{title:"Refresh Library",children:s.jsx(d,{size:"small",onClick:()=>oe(e.path),children:s.jsx(Sn,{})})}),s.jsx(G,{title:"Edit Name",children:s.jsx(d,{size:"small",onClick:()=>{C(e.id),M(e.name)},children:s.jsx(Jn,{})})}),s.jsx(G,{title:"Remove Library",children:s.jsx(d,{size:"small",onClick:()=>ie(e.path),color:"error",children:s.jsx(dn,{})})})]})})]})},`library-${e.id}-${e.lastScanned}`)))})]}),s.jsxs(P,{sx:{justifyContent:"space-between",px:3,pb:2},children:[s.jsx(u,{children:!R&&l&&s.jsx(A,{onClick:()=>L(!0),startIcon:s.jsx(_i,{}),disabled:0===o.length,variant:"outlined",children:"Enhance Metadata"})}),s.jsx(A,{onClick:t,variant:"contained",children:"Close"})]})]}),l&&s.jsx(nz,{open:D,onClose:()=>L(!1),songs:o,onEnhanceMetadata:l})]})},iz=({title:e,subtitle:t,children:r,actions:n,headerActions:a,variant:i="elevated",hover:o=!0,clickable:l=!1,onClick:c,status:d="default",badge:p,icon:f,image:g,gradient:y=!1,className:b,sx:x})=>{const v=m(),{currentTheme:w}=qc(),S={...(()=>{const e={borderRadius:16,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"};switch(i){case"outlined":return{...e,border:`2px solid ${v.palette.divider}`,boxShadow:"none",backgroundColor:v.palette.background.paper};case"filled":return{...e,backgroundColor:pe(w.primary,.05),border:`1px solid ${pe(w.primary,.1)}`,boxShadow:"none"};default:return{...e,boxShadow:"dark"===v.palette.mode?"0 4px 20px rgba(0, 0, 0, 0.3)":"0 4px 20px rgba(0, 0, 0, 0.08)",border:`1px solid ${v.palette.divider}`}}})(),...o||l?{"&:hover":{transform:"translateY(-4px)",boxShadow:"dark"===v.palette.mode?"0 8px 40px rgba(0, 0, 0, 0.4)":"0 8px 40px rgba(0, 0, 0, 0.12)",..."outlined"===i&&{borderColor:w.primary},..."filled"===i&&{backgroundColor:pe(w.primary,.08)}}}:{},...l&&{cursor:"pointer",userSelect:"none"},...y&&{background:`linear-gradient(135deg, ${pe(w.primary,.1)} 0%, ${pe(w.secondary,.05)} 100%)`,border:`1px solid ${pe(w.primary,.2)}`},...x};return s.jsxs(N,{className:b,sx:S,onClick:l?c:void 0,children:[g&&s.jsx(u,{sx:{position:"absolute",top:0,left:0,right:0,height:200,backgroundImage:`url(${g})`,backgroundSize:"cover",backgroundPosition:"center","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`linear-gradient(to bottom, transparent 0%, ${v.palette.background.paper} 100%)`}}}),"default"!==d&&s.jsx(u,{sx:{position:"absolute",top:12,right:12,width:8,height:8,borderRadius:"50%",backgroundColor:(()=>{switch(d){case"success":return v.palette.success.main;case"warning":return v.palette.warning.main;case"error":return v.palette.error.main;case"info":return v.palette.info.main;default:return w.primary}})(),boxShadow:`0 0 0 2px ${v.palette.background.paper}`,zIndex:1}}),(e||t||a||f||p)&&s.jsx(Te,{avatar:f&&s.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40,borderRadius:10,backgroundColor:pe(w.primary,.1),color:w.primary},children:f}),title:e&&s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(h,{variant:"h6",component:"h3",sx:{fontWeight:600},children:e}),p&&s.jsx(q,{label:p,size:"small",color:"primary",sx:{height:20,fontSize:"0.75rem",fontWeight:500}})]}),subheader:t&&s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:t}),action:a,sx:{pb:r?1:2,"& .MuiCardHeader-content":{overflow:"hidden"},"& .MuiCardHeader-title":{fontSize:"1.125rem",lineHeight:1.4},"& .MuiCardHeader-subheader":{fontSize:"0.875rem",lineHeight:1.5}}}),r&&s.jsx(W,{sx:{pt:e||t||a||f?0:2,"&:last-child":{pb:n?2:3}},children:r}),n&&s.jsx(Ie,{sx:{px:3,pb:3,pt:0,justifyContent:"flex-end",gap:1},children:n})]})},oz=({variant:e="circular",size:t="medium",text:r,subtext:n,progress:a,fullScreen:i=!1,overlay:o=!1,animated:l=!0})=>{const c=m(),{currentTheme:d}=qc(),p=()=>{switch(t){case"small":return 32;case"large":return 64;default:return 48}};return s.jsxs(u,{sx:(()=>{const e={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,p:3};return i?{...e,position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:o?pe(c.palette.background.default,.8):c.palette.background.default,backdropFilter:o?"blur(8px)":"none",WebkitBackdropFilter:o?"blur(8px)":"none",zIndex:9999}:e})(),children:[(()=>{switch(e){case"linear":return s.jsxs(u,{sx:{width:"100%",maxWidth:300},children:[s.jsx(he,{variant:void 0!==a?"determinate":"indeterminate",value:a,sx:{height:8,borderRadius:4,backgroundColor:pe(d.primary,.1),"& .MuiLinearProgress-bar":{borderRadius:4,background:`linear-gradient(135deg, ${d.primary} 0%, ${d.secondary} 100%)`}}}),void 0!==a&&s.jsxs(h,{variant:"caption",sx:{mt:1,textAlign:"center",display:"block"},children:[Math.round(a),"%"]})]});case"skeleton":return s.jsx(N,{sx:{width:"100%",maxWidth:400},children:s.jsxs(W,{children:[s.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[s.jsx(Re,{variant:"circular",width:40,height:40}),s.jsxs(u,{sx:{flex:1},children:[s.jsx(Re,{variant:"text",width:"60%",height:24}),s.jsx(Re,{variant:"text",width:"40%",height:20})]})]}),s.jsx(Re,{variant:"rectangular",width:"100%",height:120,sx:{borderRadius:2,mb:2}}),s.jsxs(u,{sx:{display:"flex",gap:1},children:[s.jsx(Re,{variant:"rectangular",width:80,height:32,sx:{borderRadius:1}}),s.jsx(Re,{variant:"rectangular",width:60,height:32,sx:{borderRadius:1}})]})]})});case"pulse":return s.jsx(u,{sx:{display:"flex",gap:1},children:[0,1,2].map((e=>s.jsx(u,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:d.primary,animation:"pulse 1.4s ease-in-out infinite both",animationDelay:.16*e+"s","@keyframes pulse":{"0%, 80%, 100%":{transform:"scale(0)",opacity:.5},"40%":{transform:"scale(1)",opacity:1}}}},e)))});case"wave":return s.jsx(u,{sx:{display:"flex",alignItems:"end",gap:1,height:40},children:[0,1,2,3,4].map((e=>s.jsx(u,{sx:{width:4,backgroundColor:d.primary,borderRadius:2,animation:"wave 1.2s ease-in-out infinite",animationDelay:.1*e+"s","@keyframes wave":{"0%, 40%, 100%":{height:8,opacity:.5},"20%":{height:32,opacity:1}}}},e)))});default:return s.jsxs(u,{sx:{position:"relative",display:"inline-flex"},children:[s.jsx(H,{variant:void 0!==a?"determinate":"indeterminate",value:a,size:p(),thickness:4,sx:{color:d.primary,"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),l&&s.jsx(u,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"pulse 2s ease-in-out infinite","@keyframes pulse":{"0%":{opacity:1,transform:"translate(-50%, -50%) scale(1)"},"50%":{opacity:.7,transform:"translate(-50%, -50%) scale(1.1)"},"100%":{opacity:1,transform:"translate(-50%, -50%) scale(1)"}}},children:s.jsx(pi,{sx:{fontSize:.4*p(),color:d.primary}})})]})}})(),r&&s.jsx(h,{variant:"h6",sx:{fontWeight:500,color:c.palette.text.primary,textAlign:"center"},children:r}),n&&s.jsx(h,{variant:"body2",sx:{color:c.palette.text.secondary,textAlign:"center",maxWidth:300},children:n})]})},sz=({progress:e,currentSong:t})=>s.jsx(oz,{variant:"linear",text:"Loading Music Library",subtext:t?`Processing: ${t}`:"Scanning your music collection...",progress:e,size:"medium"});function lz(e){const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${r}:${n.toString().padStart(2,"0")}`}const cz=({playMix:e})=>{const t=m(),{currentTheme:r}=qc(),n=Sr(),a=xr(),o=(()=>{const e=i.useContext(AR);if(!e)throw new Error("useLibrary must be used within a LibraryProvider");return e})(),l=Bn(),[c,f]=i.useState(!1),[C,k]=i.useState(null),[E,M]=i.useState(!1),[R,z]=i.useState((()=>{const e=localStorage.getItem("powerhour_songs");if(e)try{const t=JSON.parse(e);if(Array.isArray(t))return t.filter((e=>e.name||e.artist||e.album||e.year))}catch{}return[]})),[D,O]=i.useState(null),[_,$]=i.useState(null),[N,W]=i.useState([]),[U,B]=i.useState(null);i.useRef(null);const[V,Y]=i.useState(!1),[G,q]=i.useState(null),[J,X]=i.useState(!1),Q=i.useRef(null),[Z,ee]=i.useState(0),[te,re]=i.useState(0),ne=i.useRef(null),[se,le]=i.useState(1),[ce,ue]=i.useState(null),[de,he]=i.useState(!1),[pe,fe]=i.useState(null),[me,ge]=i.useState([0,60]),ye=60,[be,xe]=i.useState(0),[ve,we]=i.useState([]),[Se,je]=i.useState(null),[Ce,ke]=i.useState(null),[Pe,Ae]=i.useState(!1),[Ee,Ie]=i.useState(!1),[Me,Te]=i.useState(0),[Re,De]=i.useState(0);i.useRef(null);const[Le,Oe]=i.useState(null),[_e,Fe]=i.useState(!1),[$e,We]=i.useState(0),[Ue,Be]=i.useState(!1),He=i.useRef(null),Ve=i.useRef(null),[Ye,Ge]=i.useState(!1),[qe,Je]=i.useState(null),[Ke,Xe]=i.useState(!1),[Qe,Ze]=i.useState(null),[et,tt]=i.useState(!1),[rt,nt]=i.useState(null),[at,it]=i.useState(!1),[ot,st]=i.useState(!1),[lt,ct]=i.useState(null),[ut,dt]=i.useState(!1),[ht,pt]=i.useState("Power Hour Mix"),[ft,mt]=i.useState(!1),[gt,yt]=i.useState(null),[bt,xt]=i.useState(!1),[vt,wt]=i.useState(null),[St,jt]=i.useState(null),{libraryFolder:Ct,librarySongs:kt,libraryLoading:Pt,libraryError:At,libraryProgress:Et,libraryPlayingIndex:It,librarySort:Mt,librarySearch:Tt,selectedSongs:Rt,recentlyPlayed:zt,favoriteTracks:Dt,allLibraries:Lt,loadLibrarySongs:Ot,setLibraryFolder:_t,setLibraryPlayingIndex:Ft,setLibrarySort:$t,setLibrarySearch:Nt,setSelectedSongs:Wt,addToRecentlyPlayed:Ut,addSongToLibrary:Bt,updateSongMetadata:Ht,toggleFavorite:Vt,selectLibrary:Yt,chooseLibraryFolder:Gt,refreshAllLibraries:qt}=o,[Jt,Kt]=i.useState(Tt),[Xt,Qt]=i.useState({}),Zt=uP.getInstance(),er=Uu.getInstance();i.useEffect((()=>{const e=setTimeout((()=>{Kt(Tt)}),300);return()=>clearTimeout(e)}),[Tt]),i.useEffect((()=>{const e=Zt.getSettings();Ar(e);const t=e=>{Ar(e.detail)};return window.addEventListener("librarySettingsChanged",t),()=>window.removeEventListener("librarySettingsChanged",t)}),[Zt]);const tr=i.useCallback(((e,t)=>{Qt((r=>({...r,[e]:t})))}),[]),rr=i.useCallback((e=>{const t=Math.max(50,Math.min(98,e));kr(t),er.setMusicLibraryWidth(t)}),[er]),[nr,ar]=i.useState(null),[ir,or]=i.useState([]),[sr,lr]=i.useState([]),[cr,ur]=i.useState((()=>{const e=new Date;return`Playlist ${e.toLocaleDateString()} ${e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`})),dr=i.useContext(HR),[hr,pr]=i.useState(!1),[fr,mr]=i.useState([]),[gr,yr]=i.useState(!1),[br,vr]=i.useState(!1),[wr,jr]=i.useState(null),[Cr,kr]=i.useState((()=>er.getMusicLibraryWidth())),[Pr,Ar]=i.useState({}),Er=i.useCallback((async e=>{Ze(null),tt(!0);let t=0;try{for(const n of e)try{tz("Processing file for upload",{fileName:n.name},"SongUploader");const e=n.name.replace(/\.[^/.]+$/,"");let a=e,i="",o="",s="";const l=e.indexOf(" - ");l>0&&(i=e.substring(0,l).trim(),a=e.substring(l+3).trim(),tz("Split filename by dash separator",{artist:i,title:a},"SongUploader"));try{if(n.path){const e=n.path.split(/[/\\]/);if(e.length>1){const t=e[e.length-2],r=e.length>2?e[e.length-3]:null;i?o||(o=t,tz("Using folder name as album",{album:o},"SongUploader")):(i=t,tz("Using folder name as artist",{artist:i},"SongUploader")),i&&!o&&r&&(o=r,tz("Using grandparent folder as album",{album:o},"SongUploader"))}}}catch(r){ZR("Error getting folder structure info",{error:r},"SongUploader")}!i&&Ct&&Ct.includes("Neighbor")&&(i="Neighbor",tz("Set default artist to Neighbor based on library folder",{},"SongUploader"),!o&&n.path&&n.path.includes("Levitate")&&(o="Live At Levitate [Disc 1]",tz("Set default album for Neighbor",{},"SongUploader")));const c=a.match(/^(\d+)[\s.\-_]+(.+)$/);c&&(a=c[2],tz("Removed track number from title",{title:a},"SongUploader")),a||(a=e),tz("Final metadata extracted",{title:a,artist:i,album:o,year:s},"SongUploader");const u={id:Math.random().toString(36).substr(2,9),name:a,artist:i||"",album:o||"",year:s||"",file:n};if(tz("Created new song object",{songId:u.id,songName:u.name},"SongUploader"),n.name.toLowerCase().endsWith(".m4a")){Xe(!0);try{const e=new FormData;e.append("file",n);const r=await fetch("http://localhost:4000/convert",{method:"POST",body:e});if(!r.ok)throw new Error("Conversion failed");const a=await r.blob(),i=new File([a],n.name.replace(/\.[^/.]+$/,"")+".mp3",{type:"audio/mp3"});z((e=>[{...u,file:i},...e]));const o=await Ir({...u,file:i});o&&(ez("Added converted song to library cache",{songName:o.name},"SongUploader"),Bt(o),t++)}catch(r){Ze("Failed to convert .m4a to .mp3: "+(r?.message||r)),z((e=>[u,...e]));const e=await Ir(u);e&&(ez("Added original song to library cache",{songName:e.name},"SongUploader"),Bt(e),t++)}finally{Xe(!1)}}else{z((e=>[u,...e]));const e=await Ir(u);e&&(ez("Added regular song to library cache",{songName:e.name},"SongUploader"),Bt(e),t++)}}catch(r){QR("Error processing file",{fileName:n.name,error:r},"SongUploader")}t>0?dr(`Added ${t} song${1===t?"":"s"} to your Power Hour Library`,"success"):e.length>0&&dr("No files were added to the library. Please check if you have a library folder selected.","warning")}catch(vz){QR("Error processing dropped files",{error:vz},"SongUploader"),dr("Error processing some files. Please try again.","error")}finally{tt(!1)}}),[Ct,dr,Bt]),Ir=async e=>{try{if(!window.electronAPI)return ZR("Electron API not available, cannot add to library",{},"SongUploader"),null;let t=Ct;if(!t&&(t=await window.electronAPI.getLibraryFolder(),!t)){if(t=await window.electronAPI.selectLibraryFolder(),!t)return ZR("No library folder selected, cannot add to library",{},"SongUploader"),null;_t(t)}const r=await e.file.arrayBuffer(),n={id:e.id,name:e.name,artist:e.artist||"",album:e.album||"",year:e.year||"",originalName:e.file.name,targetFolder:t,addToLibrary:!0};if(await window.electronAPI.saveTempSong(n,r)){ez("Added song to library",{songName:e.name},"SongUploader");const r=path.extname(e.file.name)||".mp3";let n=e.file.name;if(e.artist&&e.name){const t=e.artist.replace(/[\\/:*?"<>|]/g,"_");n=`${t} - ${e.name.replace(/[\\/:*?"<>|]/g,"_")}${r}`}const a=path.join(t,n).replace(/\\/g,"/");return{name:n,path:a,title:e.name,artist:e.artist||"",album:e.album||"",year:e.year||"",fileSize:e.file.size,lastModified:Date.now()}}return QR("Failed to add song to library",{},"SongUploader"),null}catch(t){return QR("Error adding song to library",{error:t},"SongUploader"),null}},{getRootProps:Mr,getInputProps:Tr,isDragActive:Rr}=Ne({onDrop:Er,accept:{"audio/*":[".mp3",".wav",".ogg",".m4a"]},noClick:!0,noKeyboard:!0}),[zr,Dr]=i.useState(null),Lr=async e=>{try{let t;if("number"!=typeof e){if(!window.electronAPI)throw new Error("Electron API not available");const r=await window.electronAPI.getFileBlob(e.path),n=new File([r],e.name);t={id:Math.random().toString(36).substr(2,9),name:e.title||e.name.replace(/\.[^/.]+$/,""),artist:e.artist,album:e.album,year:e.year,file:n,sourceFilePath:e.path},tz("Created temporary song for extraction",{songName:t.name,artist:t.artist},"SongUploader")}else{if(e<0||e>=R.length)throw new Error(`Invalid song index: ${e}. Songs array length: ${R.length}`);t=R[e],tz("Using existing song for extraction",{songName:t.name,artist:t.artist},"SongUploader")}Dr(t),ge([0,60]);const r=await t.file.arrayBuffer(),n=new(window.AudioContext||window.webkitAudioContext),a=await n.decodeAudioData(r);xe(a.duration),n.close(),he(!0)}catch(t){QR("Failed to open extract modal",{error:t},"SongUploader"),dr("Failed to open extraction editor for this song.","error"),Dr(null),fe(null)}},Or=async()=>{if(he(!1),fe(null),Dr(null),ir.length>0){const e=ir[0],t=ir.slice(1);or(t),setTimeout((async()=>{await Lr(e)}),100)}},_r=()=>{Le&&!_e&&(He.current&&clearInterval(He.current),Le.play(),Fe(!0),Be(!1),setTimeout((()=>{if(Le&&Le.playing()){const e=Le.seek();We(e)}}),50),He.current=setInterval((()=>{if(Le&&Le.playing()){const e=Le.seek();We(e),e>=me[1]&&(Le.stop(),Fr())}}),100))},Fr=()=>{He.current&&(clearInterval(He.current),He.current=null),Le&&(Le.stop(),Oe(null)),Fe(!1),Be(!1),We(me[0])};w.useEffect((()=>{_e||Ue||We(me[0])}),[me,_e,Ue]);const $r=async e=>{const t=On(e);return new Blob([t],{type:"audio/wav"})},Nr=e=>{Wr();const t=R[e];let r;r=t.minuteClip?URL.createObjectURL(t.minuteClip):URL.createObjectURL(t.file);const n=new bn.Howl({src:[r],html5:!0,volume:se,onend:()=>Y(!1),onload:()=>{re(n.duration())}});n.play(),q(n),O(e),Y(!0),X(!1),re(n.duration()),ee(0),ne.current=setInterval((()=>{ee(n.seek())}),200)},Wr=()=>{G&&(G.stop(),q(null)),Y(!1),X(!1),ee(0),re(0),Q.current&&clearTimeout(Q.current),ne.current&&clearInterval(ne.current)};w.useEffect((()=>{G&&G.volume(se)}),[se,G]),w.useEffect((()=>()=>{ne.current&&clearInterval(ne.current)}),[]),i.useEffect((()=>{"preview"===l.audioSource?(Ae(l.previewPlaying),Ie(!l.previewPlaying&&null!==l.previewSound)):(Ae(!1),Ie(!1))}),[l.audioSource,l.previewPlaying,l.previewSound]);const Ur=i.useCallback((e=>{const t=ve[e];if(t&&t.blob)try{const r=new Blob([t.blob],{type:"audio/wav"}),n=URL.createObjectURL(r);l.playPreview(n,t.name,e,ve.length,cr,t.artist),ke(e)}catch(vz){}}),[ve,l]);i.useEffect((()=>(l.setPreviewClipNavigationCallback(Ur),()=>{l.setPreviewClipNavigationCallback(null)})),[Ur,l]);const Br=e=>{Ae(!1),Ie(!1),je(null),_&&e<ve.length-1?(Ve.current=new bn.Howl({src:[URL.createObjectURL(_)],html5:!0,volume:se,onend:()=>{Hr(e),Ve.current=null}}),Ve.current.play()):Hr(e)},Hr=e=>{const t=null!=e?e:Ce;null!==t&&t<ve.length-1?Ur(t+1):(ke(null),Ae(!1),je(null))},Vr=()=>{dt(!1)},Yr=e=>{we((t=>{const r=60-t.length;return r<=0?(mt(!0),t):(e.length>r&&mt(!0),[...t,...e.slice(0,r)])}))};w.useEffect((()=>{const e=R.map((e=>({id:e.id,name:e.name,artist:e.artist,album:e.album,year:e.year})));if(localStorage.setItem("powerhour_songs",JSON.stringify(e)),window.electronAPI){let e=0;R.forEach((async t=>{if(t.file)try{const r={id:t.id,name:t.name,artist:t.artist,album:t.album,year:t.year,originalName:t.file.name},n=await t.file.arrayBuffer();await(window.electronAPI?.saveTempSong(r,n)),e++}catch(vz){}}))}}),[R]);const[Gr,qr]=w.useState(!0);w.useEffect((()=>{if(Gr)return;const e=ve.map(((e,t)=>({id:e.id,name:e.name,start:e.start,duration:e.duration,artist:e.artist,songName:e.songName,album:e.album,year:e.year,genre:e.genre})));localStorage.setItem("powerhour_clips_meta",JSON.stringify(e)),window.electronAPI&&ve.length>0?ve.forEach((async(e,t)=>{const r={id:e.id,name:e.name,start:e.start,duration:e.duration,artist:e.artist,songName:e.songName,album:e.album,year:e.year,genre:e.genre};try{const t=await e.blob.arrayBuffer();await(window.electronAPI?.saveTempClip(r,t))}catch(vz){}})):0===ve.length&&localStorage.removeItem("powerhour_clips_meta")}),[ve]),w.useEffect((()=>{}),[]),w.useEffect((()=>{(async()=>{const e=localStorage.getItem("powerhour_clips_meta");if(e)try{const t=JSON.parse(e);Array.isArray(t)&&t.length>0&&lr(t)}catch(t){}window.electronAPI&&(await Jr(),await Kr())})().catch((e=>{})).finally((()=>{qr(!1)}))}),[]);const Jr=async()=>{try{if(!window.electronAPI)return;const t=localStorage.getItem("powerhour_clips_meta");let r=[];if(t)try{const e=JSON.parse(t);Array.isArray(e)&&(r=e.map((e=>e.id)))}catch(e){}const n=await window.electronAPI.listTempClips();if(n&&n.length>0){const e=new Map(n.map((e=>[e.id,e]))),t=[];for(const n of r){const r=e.get(n);if(r)try{const a=await window.electronAPI.getTempClip(r.id);if(a){const i=new Blob([a],{type:"audio/wav"});t.push({id:r.id,name:r.name,start:r.start,duration:r.duration,blob:i,artist:r.artist,songName:r.songName,album:r.album,year:r.year,genre:r.genre}),e.delete(n)}}catch(vz){}}for(const[r,n]of e)try{const e=await window.electronAPI.getTempClip(n.id);if(e){const r=new Blob([e],{type:"audio/wav"});t.push({id:n.id,name:n.name,start:n.start,duration:n.duration,blob:r,artist:n.artist,songName:n.songName,album:n.album,year:n.year,genre:n.genre})}}catch(vz){}t.length>0&&(we(t),lr([]))}}catch(vz){}},Kr=async()=>{try{if(!window.electronAPI)return;const e=await window.electronAPI.listTempSongs();if(e&&e.length>0){const t=[];for(const r of e)try{const e=await window.electronAPI.getTempSong(r.id,r.fileExtension);if(e){const n=r.originalName||`${r.name}.mp3`,a=Xr(n),i=new File([e],n,{type:a});t.push({id:r.id,name:r.name||n.replace(/\.[^/.]+$/,""),artist:r.artist||"",album:r.album||"",year:r.year||"",file:i})}}catch(vz){}t.length>0&&z(t)}}catch(vz){}},Xr=e=>{let t="audio/mp3";switch(e.split(".").pop()?.toLowerCase()||""){case"mp3":t="audio/mp3";break;case"wav":t="audio/wav";break;case"ogg":t="audio/ogg";break;case"m4a":t="audio/m4a";break;case"flac":t="audio/flac"}return t},Qr=i.useCallback((async(t,r)=>{try{if(!window.electronAPI)throw new Error("Electron API not available");if(It===r&&"mix"===l.audioSource&&l.currentMix)return void(l.mixPlaying?l.pauseMix():l.resumeMix());const n=await window.electronAPI.getFileBlob(t.path),a=new Blob([n]),i=URL.createObjectURL(a);e({name:t.title||t.name,localFilePath:i,songList:[],artist:t.artist,year:t.year,genre:t.genre}),Ft(r),Ut(t)}catch(n){Ft(null),ar("Failed to play: "+(t.title||t.name))}}),[e,Ft,Ut,It,l]),Zr=w.useMemo((()=>{try{const e=Mt.field,t="asc"===Mt.direction?1:-1;let r=kt;if(Jt.trim()){const e=Jt.toLowerCase().trim();r=kt.filter((t=>{try{const r=(t.title||t.name||"").toLowerCase(),n=(t.artist||"").toLowerCase(),a=(t.album||"").toLowerCase(),i=(t.genre||"").toLowerCase(),o=(t.year||"").toLowerCase(),s=(t.tags||[]).join(" ").toLowerCase();return r.includes(e)||n.includes(e)||a.includes(e)||i.includes(e)||o.includes(e)||s.includes(e)}catch(vz){return!1}}))}return fr.forEach((e=>{try{if("favorites"===e)r=r.filter((e=>Dt.has(e.path)));else if("recent"===e){const e=new Set(zt.map((e=>e.path)));r=r.filter((t=>e.has(t.path)))}else if(e.startsWith("genre:")){const t=e.replace("genre:","");r=r.filter((e=>(e.genre||"").toLowerCase().includes(t.toLowerCase())))}else if(e.startsWith("year:")){const t=e.replace("year:","");r=r.filter((e=>(e.year||"").includes(t)))}}catch(vz){}})),[...r].sort(((r,n)=>{try{let a,i;return"tags"===e?(a=(Array.isArray(r.tags)&&r.tags.length>0?r.tags[0]:"").toLowerCase(),i=(Array.isArray(n.tags)&&n.tags.length>0?n.tags[0]:"").toLowerCase()):"library"===e?(a=(r.libraryName||"Default").toLowerCase(),i=(n.libraryName||"Default").toLowerCase()):(a=(r[e]||"").toLowerCase(),i=(n[e]||"").toLowerCase()),a<i?-1*t:a>i?1*t:0}catch(vz){return 0}}))}catch(vz){return kt}}),[kt,Mt,Jt,fr,Dt,zt]),en=i.useCallback((e=>{const t=new Set(Rt);t.has(e)?t.delete(e):t.add(e),Wt(t)}),[Rt,Wt]),tn=i.useCallback((()=>{Rt.size===Zr.length?Wt(new Set):Wt(new Set(Zr.map((e=>e.path))))}),[Rt.size,Zr,Wt]),rn=async()=>{if(0===Rt.size)return void dr("Please select songs to extract clips from","warning");const e=kt.filter((e=>Rt.has(e.path)));if(1===e.length)await Lr(e[0]);else{const[t,...r]=e;or(r),dr(`Starting extraction for ${e.length} songs. Extract modal will open for each song.`,"info"),await Lr(t)}},nn=async()=>{0!==Rt.size?await an():dr("Please select songs to use for Wild Card extraction","warning")},an=async()=>{if(0===Rt.size)return;if(ve.length>0){if(!confirm("This will replace your current clips. Continue?"))return;we([])}const e=document.title;document.title="Creating Wild Card Mix...";const r=[...kt.filter((e=>Rt.has(e.path)))].sort((()=>Math.random()-.5)).slice(0,60),n=r.length,a=[];let i=0;const o=document.createElement("div");o.style.position="fixed",o.style.top="50%",o.style.left="50%",o.style.transform="translate(-50%, -50%)",o.style.backgroundColor=t.palette.background.paper,o.style.color=t.palette.text.primary,o.style.padding="20px",o.style.borderRadius="8px",o.style.boxShadow="0 4px 20px rgba(0,0,0,0.5)",o.style.zIndex="9999",o.style.minWidth="300px",o.style.textAlign="center",o.innerHTML=`<h3>Creating Wild Card Mix</h3><p>Processing songs: <span id="process-count">0</span>/${n}</p>`,document.body.appendChild(o);try{for(const e of r){try{if(!window.electronAPI)throw new Error("Electron API not available");const t=await window.electronAPI.getFileBlob(e.path),r=new(window.AudioContext||window.webkitAudioContext),n=e.name.toLowerCase();if(n.endsWith(".m4a")){r.close();continue}let o;try{o=await r.decodeAudioData(t)}catch(xz){r.close();continue}const s=o.duration,l=Math.max(0,s-60),c=Math.random()*l,u=Math.min(60,s-c),d=r.createBuffer(o.numberOfChannels,r.sampleRate*u,r.sampleRate);for(let e=0;e<o.numberOfChannels;e++){const t=o.getChannelData(e).slice(Math.floor(r.sampleRate*c),Math.floor(r.sampleRate*(c+u)));d.copyToChannel(t,e)}const h=new OfflineAudioContext(d.numberOfChannels,d.length,d.sampleRate),p=h.createBufferSource();p.buffer=d,p.connect(h.destination),p.start();const f=await h.startRendering(),m=await $r(f),g=e.title||e.name.replace(/\.[^/.]+$/,""),y={id:Math.random().toString(36).substr(2,9),name:g+` [${lz(c)} - ${lz(c+u)}]`,blob:m,start:c,duration:u,songName:e.title||e.name,artist:e.artist,album:e.album,year:e.year,genre:e.genre};a.push(y),i++;const b=document.getElementById("process-count");b&&(b.textContent=i.toString()),r.close()}catch(s){}if(a.length>=60)break}we(a),Ge(!0),dr(`Created ${i} random 1-minute clips for your Power Hour!`,"success")}finally{document.body.removeChild(o),document.title=e}},on=w.useCallback((e=>{mr((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}),[]),sn=w.useCallback((()=>{mr([])}),[]),ln=w.useCallback((async(e,t)=>{dr(`Enhanced metadata for ${e.length} songs`,"success"),Ct&&Ot(!0)}),[dr,Ct,Ot]),cn=w.useCallback((async e=>{await Yt(e)}),[Yt]);w.useCallback((async()=>{try{await Gt()}catch(vz){}}),[Gt]);const un=()=>{jr(null)},zn=w.useMemo((()=>{const e=new Set,t=new Set,r=new Set,n=new Set;return kt.forEach((a=>{a.genre&&e.add(a.genre),a.year&&t.add(a.year),a.artist&&r.add(a.artist),a.album&&n.add(a.album)})),{genres:Array.from(e).sort(),years:Array.from(t).sort().reverse(),artists:Array.from(r).sort(),albums:Array.from(n).sort()}}),[kt]);(e=>{const t=i.useCallback((t=>{const r=t.target;if("INPUT"===r.tagName||"TEXTAREA"===r.tagName||r.isContentEditable)return;const{ctrlKey:n,shiftKey:a,altKey:i,key:o,code:s}=t;return" "===o||"Spacebar"===o?(t.preventDefault(),void e.onPlayPause?.()):"Escape"===o?(t.preventDefault(),void e.onStop?.()):"ArrowRight"!==o||n||a||i?"ArrowLeft"!==o||n||a||i?"ArrowUp"!==o||n||a||i?"ArrowDown"!==o||n||a||i?"m"===o||"M"===o?(t.preventDefault(),void e.onMute?.()):n&&"f"===o?(t.preventDefault(),void e.onSearch?.()):n&&a&&"F"===o?(t.preventDefault(),void e.onAdvancedSearch?.()):n&&"p"===o?(t.preventDefault(),void e.onSmartPlaylists?.()):n&&"a"===o?(t.preventDefault(),void e.onSelectAll?.()):"Delete"!==o&&"Backspace"!==o||n||a||i?n&&"e"===o?(t.preventDefault(),void e.onExtractSelected?.()):n&&"r"===o?(t.preventDefault(),void e.onWildCard?.()):n&&"b"===o?(t.preventDefault(),void e.onToggleSidebar?.()):"F5"===o||n&&"r"===o&&a?(t.preventDefault(),void e.onRefreshLibrary?.()):n&&"s"===o?(t.preventDefault(),void e.onSavePlaylist?.()):n&&"z"===o&&!a?(t.preventDefault(),void e.onUndo?.()):n&&("y"===o||"z"===o&&a)?(t.preventDefault(),void e.onRedo?.()):void 0:(t.preventDefault(),void e.onClearSelection?.()):(t.preventDefault(),void e.onVolumeDown?.()):(t.preventDefault(),void e.onVolumeUp?.()):(t.preventDefault(),void e.onPrevious?.()):(t.preventDefault(),void e.onNext?.())}),[e]);i.useEffect((()=>(document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)})),[t])})({onPlayPause:()=>{null!==It&&Zr[It]&&Qr(Zr[It],It)},onStop:()=>{Ft(null)},onNext:()=>{if(null!==It&&It<Zr.length-1){const e=It+1;Qr(Zr[e],e)}},onPrevious:()=>{if(null!==It&&It>0){const e=It-1;Qr(Zr[e],e)}},onSearch:()=>{const e=document.querySelector('input[placeholder*="Search songs"]');e&&(e.focus(),e.select())},onSelectAll:()=>{tn()},onClearSelection:()=>{Wt(new Set)},onExtractSelected:()=>{Rt.size>0&&rn()},onWildCard:()=>{Rt.size>0&&nn()},onToggleSidebar:()=>{Ge(!Ye)},onRefreshLibrary:()=>{Ct&&Ot()},onSavePlaylist:()=>{ve.length>0&&dt(!0)}}),w.useEffect((()=>(Ye?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>{document.body.classList.remove("sidebar-open")})),[Ye]),i.useEffect((()=>{if("true"===new URLSearchParams(a.search).get("editMix")){const e=localStorage.getItem("edit_mix");if(e)try{const t=JSON.parse(e);k(t),f(!0),M(!0),pt(t.name+" (Edit)"),t.hasDrinkingSound}catch(xz){}}const e=localStorage.getItem("edit_playlist");if(e)try{const t=JSON.parse(e);pt(`${t.name} (Edited)`),t.clips&&t.clips.length>0&&Dn(t),t.drinkingSoundPath&&(async()=>{try{if(window.electronAPI){const e=await window.electronAPI.getFileBlob(t.drinkingSoundPath);if(e){const r=t.drinkingSoundPath.split("/").pop()||"drinking-sound.wav",n=new File([e],r,{type:"audio/wav"});$(n)}}}catch(e){}})(),localStorage.removeItem("edit_playlist")}catch(t){localStorage.removeItem("edit_playlist")}}),[a]);const Dn=async e=>{if(e.clips&&0!==e.clips.length){pr(!0);try{const t=e.clips.map((async e=>{if(!e.clipPath)return null;try{if(!window.electronAPI)throw new Error("Electron API not available");const t=await window.electronAPI.getClipFromFile(e.clipPath);if(!t)throw new Error(`Failed to load clip from ${e.clipPath}`);const{buffer:r}=t,n=new Blob([r],{type:"audio/wav"}),a=URL.createObjectURL(n),i=new bn.Howl({src:[a],format:["wav"],html5:!0});return{id:e.id,name:e.name||`Clip ${ve.length+1}`,sound:i,blob:n,url:a,waveform:null,start:e.start||0,duration:e.duration||0,playing:!1,songName:e.songName,clipPath:e.clipPath,data:r,artist:e.artist,album:e.album,year:e.year,genre:e.genre}}catch(t){return null}})),r=(await Promise.all(t)).filter((e=>null!==e));we(r)}catch(t){}finally{pr(!1)}}};return s.jsxs("div",{style:{width:"100%",maxWidth:"100%",padding:"24px 20px",boxSizing:"border-box",display:"flex",flexDirection:"column",position:"relative"},children:[s.jsx("style",{children:`\n        .MuiDrawer-root.MuiDrawer-persistent .MuiDrawer-paper {\n          position: fixed !important;\n        }\n        body.sidebar-open {\n          padding-right: 0 !important;\n          overflow: auto !important;\n          margin-right: 0 !important;\n        }\n\n        /* Force full width usage */\n        #main-content-scroll-container {\n          padding: 0 !important;\n          margin: 0 !important;\n        }\n\n        /* Remove any container constraints */\n        .MuiContainer-root, .MuiBox-root {\n          max-width: 100% !important;\n          padding-left: 0 !important;\n          padding-right: 0 !important;\n          margin-left: 0 !important;\n          margin-right: 0 !important;\n        }\n        .library-table-container {\n          overflow-x: auto !important;\n          width: 100% !important;\n          max-width: 100% !important;\n        }\n        .library-table {\n          min-width: 800px !important;\n          table-layout: fixed !important;\n          width: 100% !important;\n          margin: 0 auto;\n        }\n        .library-table th, .library-table td {\n          white-space: nowrap !important;\n          overflow: hidden !important;\n          text-overflow: ellipsis !important;\n        }\n        .library-table-container::-webkit-scrollbar {\n          height: 8px;\n          background-color: ${"dark"===t.palette.mode?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)"};\n          border-radius: 8px;\n        }\n        .library-table-container::-webkit-scrollbar-thumb {\n          background-color: ${"dark"===t.palette.mode?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)"};\n          border-radius: 8px;\n        }\n        .library-table-container::-webkit-scrollbar-thumb:hover {\n          background-color: ${"dark"===t.palette.mode?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)"};\n        }\n        @media (max-width: 1200px) {\n          body > div:first-child {\n            padding-left: 0 !important;\n            padding-right: 0 !important;\n          }\n        }\n        @media (max-width: 768px) {\n          body > div:first-child {\n            padding-left: 16px !important;\n            padding-right: 16px !important;\n          }\n          .library-controls {\n            flex-direction: column;\n            align-items: flex-start;\n          }\n          .library-controls > div:last-child {\n            margin-top: 8px;\n            display: flex;\n            flex-wrap: wrap;\n            gap: 8px;\n          }\n        }\n      `}),c&&s.jsx(x,{severity:"info",sx:{mb:3,display:E?"flex":"none",width:"100%",maxWidth:"100%"},action:s.jsxs(s.Fragment,{children:[s.jsx(A,{color:"inherit",size:"small",onClick:async()=>{if(!C||!C.clips||!C.clips.length)return;if(we([]),C.projectData?.originalSongs&&window.electronAPI)try{const e=await window.electronAPI.loadOriginalFiles(C.id);if(e&&e.length>0){const t=[];for(const n of C.projectData.originalSongs){const a=e.find((e=>e.relativePath.includes(`songs/${n.filePath}`)||e.name===n.filePath));if(a&&a.buffer){const e=new File([a.buffer],n.filePath||a.name,{type:Xr(a.name)});t.push({id:n.id,name:n.name,artist:n.artist,album:n.album,year:n.year,file:e,sourceFilePath:n.sourceFilePath})}else if(n.sourceFilePath&&window.electronAPI)try{const e=await window.electronAPI.getFileBlob(n.sourceFilePath);if(e){const r=n.filePath||path.basename(n.sourceFilePath),a=new File([e],r,{type:Xr(r)});t.push({id:n.id,name:n.name,artist:n.artist,album:n.album,year:n.year,file:a,sourceFilePath:n.sourceFilePath})}}catch(r){}else t.push({id:n.id,name:n.name,artist:n.artist,album:n.album,year:n.year,file:null,sourceFilePath:n.sourceFilePath})}t.length>0&&z(t)}else if(C.projectData.originalSongs.length>0){const e=C.projectData.originalSongs.map((e=>({id:e.id,name:e.name,artist:e.artist,album:e.album,year:e.year,file:null,sourceFilePath:e.sourceFilePath})));z(e)}}catch(r){}const e=C.clips.map((async e=>{try{if(window.electronAPI){const t=await window.electronAPI.getTempClip(e.id);if(t){const r=new(window.AudioContext||window.webkitAudioContext),n=t,a=await r.decodeAudioData(n),i=On(a),o=new Blob([i],{type:"audio/wav"}),s=URL.createObjectURL(o),l=new bn.Howl({src:[s],format:["wav"],html5:!0,volume:se,onend:()=>Br(ve.length),onload:()=>{},onloaderror:(e,t)=>{},onplayerror:(e,t)=>{}});return{id:e.id,name:e.name||`Clip ${ve.length+1}`,sound:l,blob:o,url:s,waveform:null,start:e.start||0,duration:e.duration||l.duration(),playing:!1,data:a}}}const t=new(window.AudioContext||window.webkitAudioContext),r=t.sampleRate,n=t.createBuffer(2,r,r);for(let e=0;e<2;e++){const t=n.getChannelData(e);for(let e=0;e<r;e++)t[e]=.01*Math.sin(e/100)}const a=On(n),i=new Blob([a],{type:"audio/wav"}),o=URL.createObjectURL(i),s=new bn.Howl({src:[o],format:["wav"],html5:!0,volume:se,onend:()=>Br(ve.length),onload:()=>{},onloaderror:(e,t)=>{},onplayerror:(e,t)=>{}});return{id:e.id,name:e.name||`Clip ${ve.length+1}`,sound:s,blob:i,url:o,waveform:null,start:e.start||0,duration:e.duration||1,playing:!1,isPlaceholder:!0,data:n}}catch(r){return null}})),t=(await Promise.all(e)).filter((e=>null!==e));we(t)},children:"LOAD CLIPS"}),s.jsx(A,{color:"inherit",size:"small",onClick:()=>{f(!1),k(null),localStorage.removeItem("edit_mix"),n("/saved")},children:"CANCEL"}),s.jsx(d,{color:"inherit",size:"small",onClick:()=>M(!E),children:s.jsx(jn,{})})]}),onClose:()=>M(!1),children:s.jsxs("div",{children:[s.jsxs(h,{variant:"body1",fontWeight:"bold",children:["Editing: ",C?.name]}),s.jsx(h,{variant:"body2",children:"To edit this mix, first load the clip metadata, then replace any clips by extracting new segments."}),C?.hasDrinkingSound&&s.jsx(h,{variant:"body2",color:"warning.main",children:"This mix used a drinking sound. Please upload it again."})]})}),G&&s.jsxs(s.Fragment,{children:[s.jsxs(u,{sx:{mb:2,px:2,width:"100%"},children:[s.jsx(p,{value:Z,min:0,max:te,step:.01,onChange:(e,t)=>{G&&"number"==typeof t&&(G.seek(t),ee(t))},"aria-labelledby":"seek-bar",sx:{color:"secondary.main"}}),s.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",fontSize:12},children:[s.jsx("span",{children:lz(Z)}),s.jsx("span",{children:lz(te)})]})]}),s.jsxs(I,{direction:"row",spacing:2,sx:{mb:2,justifyContent:"center",alignItems:"center",width:"100%"},children:[s.jsx(d,{onClick:()=>{null!==D&&D>0&&Nr(D-1)},disabled:null===D||0===D,children:s.jsx(kn,{})}),V?s.jsx(d,{onClick:()=>{G&&V&&(G.pause(),X(!0),Y(!1),Q.current&&clearTimeout(Q.current))},children:s.jsx(pn,{})}):J?s.jsx(d,{onClick:()=>{G&&J&&(G.play(),X(!1),Y(!0))},children:s.jsx(hn,{})}):s.jsx(d,{onClick:()=>Nr(null!==D?D:0),disabled:0===R.length,children:s.jsx(hn,{})}),s.jsx(d,{onClick:Wr,disabled:!V&&!J,children:s.jsx(fn,{})}),s.jsx(d,{onClick:()=>(()=>{const e=D;null!==e&&e<R.length-1?Nr(e+1):(O(null),Y(!1),q(null))})(),disabled:null===D||D===R.length-1,children:s.jsx(Pn,{})}),s.jsx(d,{onClick:e=>{ue(e.currentTarget)},children:0===se?s.jsx(yn,{}):s.jsx(gn,{})})]})]}),s.jsxs("div",{...Mr(),style:{width:"100%",maxWidth:"100%",position:"relative"},children:[s.jsx("input",{...Tr()}),(Rr||et)&&s.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:et?"rgba(76, 175, 80, 0.1)":"rgba(0, 123, 255, 0.1)",border:"2px dashed "+(et?"#4caf50":"#007bff"),borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,pointerEvents:"none"},children:s.jsx("div",{style:{textAlign:"center",color:et?"#4caf50":"#007bff",fontSize:"1.2rem",fontWeight:"bold"},children:et?s.jsxs(s.Fragment,{children:[s.jsx(H,{size:48,sx:{color:"#4caf50",mb:2}}),s.jsx("div",{children:"Processing files..."}),s.jsx("div",{style:{fontSize:"0.9rem",marginTop:"8px",opacity:.8},children:"Adding songs to your library"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),s.jsx("div",{children:"Drop audio files here to add to library"}),s.jsx("div",{style:{fontSize:"0.9rem",marginTop:"8px",opacity:.8},children:"Supports MP3, WAV, OGG, M4A"})]})})}),s.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",width:"100%",position:"relative"},children:[s.jsx("div",{style:{position:"absolute",left:"145px"},children:s.jsx(A,{variant:"outlined",startIcon:s.jsx(Cn,{}),endIcon:s.jsx(Tn,{}),onClick:e=>{jr(e.currentTarget)},size:"small",children:"Manage Library"})}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",flexDirection:"column",gap:"4px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx("h2",{style:{margin:0,fontSize:"1.4rem",textAlign:"center"},children:"Music Library"}),s.jsxs(h,{variant:"body2",sx:{ml:1,color:t.palette.text.secondary,fontWeight:700,fontSize:"1.1rem"},children:["(",Zr.length,")"]})]}),Rt.size>0&&s.jsxs(h,{variant:"body2",sx:{color:t.palette.primary.main,fontWeight:600,fontSize:"0.9rem",textAlign:"center"},children:[Rt.size," song",1===Rt.size?"":"s"," selected"]})]})]}),At&&s.jsx(h,{color:"error",sx:{padding:"0 0 12px 0",fontSize:"0.8rem",width:"100%"},children:At}),s.jsxs(ae,{anchorEl:wr,open:Boolean(wr),onClose:un,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[s.jsxs(L,{onClick:()=>{un();const e=document.createElement("input");e.type="file",e.accept="audio/*",e.multiple=!0,e.onchange=e=>{const t=e.target.files;t&&Er(Array.from(t))},e.click()},children:[s.jsx(F,{children:s.jsx(mn,{fontSize:"small"})}),s.jsx(j,{children:"Add Songs"})]}),s.jsxs(L,{onClick:()=>{un(),vr(!0)},children:[s.jsx(F,{children:s.jsx(Rn,{fontSize:"small"})}),s.jsx(j,{children:"Add Folder"})]}),s.jsxs(L,{onClick:()=>{un(),Ot(!0)},disabled:!Ct,children:[s.jsx(F,{children:s.jsx(Sn,{fontSize:"small"})}),s.jsx(j,{children:"Refresh Library"})]})]}),s.jsx("div",{style:{padding:"0 0 16px 0",width:"100%"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px",maxWidth:"80%"},children:[s.jsx("div",{style:{display:"flex",alignItems:"center"},children:s.jsx(rz,{activeFilters:fr,onFilterToggle:on,onClearAllFilters:sn,availableGenres:zn.genres,availableYears:zn.years,recentlyPlayedCount:zt.length,favoritesCount:Dt.size})}),s.jsx("div",{style:{display:"flex",alignItems:"center"},children:s.jsx(T,{variant:"outlined",placeholder:"Search songs...",value:Tt,onChange:e=>{try{Nt(e.target.value)}catch(vz){}},size:"small",sx:{width:"250px","& .MuiOutlinedInput-root":{backgroundColor:t.palette.background.paper,color:t.palette.text.primary,"& fieldset":{borderColor:t.palette.secondary.main},"&:hover fieldset":{borderColor:t.palette.primary.main},"&.Mui-focused fieldset":{borderColor:t.palette.secondary.main}},"& .MuiInputBase-input::placeholder":{color:t.palette.text.secondary,opacity:.7}},InputProps:{startAdornment:s.jsx(In,{sx:{color:t.palette.text.secondary,mr:1}}),endAdornment:Tt&&s.jsx(d,{size:"small",onClick:()=>{try{Nt("")}catch(vz){}},sx:{color:t.palette.text.secondary},children:s.jsx(Mn,{fontSize:"small"})})}})})]})}),Rt.size>0&&s.jsxs("div",{style:{padding:"0 0 16px 0",width:"100%",display:"flex",gap:"12px",alignItems:"center"},children:[s.jsxs(h,{variant:"body2",sx:{color:t.palette.text.secondary,fontSize:"0.9rem"},children:["Extract clips from ",Rt.size," selected song",1===Rt.size?"":"s",":"]}),s.jsx(A,{size:"small",variant:"contained",onClick:nn,sx:{background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.6*t))}, ${Math.max(0,Math.floor(.6*n))}, ${Math.max(0,Math.floor(.6*a))}) !important`})(),color:"#ffffff","&:hover":{background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.4*t))}, ${Math.max(0,Math.floor(.4*n))}, ${Math.max(0,Math.floor(.4*a))}) !important`})()},padding:"4px 12px",fontSize:"0.85rem",borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px"},title:"Wild Card - Extract random clips from selected songs",children:" Wild Card (Random)"}),s.jsxs(A,{size:"small",variant:"contained",onClick:rn,sx:{background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.6*t))}, ${Math.max(0,Math.floor(.6*n))}, ${Math.max(0,Math.floor(.6*a))}) !important`})(),color:"#ffffff","&:hover":{background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.4*t))}, ${Math.max(0,Math.floor(.4*n))}, ${Math.max(0,Math.floor(.4*a))}) !important`})()},padding:"4px 12px",fontSize:"0.85rem",borderRadius:"6px",display:"flex",alignItems:"center",gap:"6px"},title:"Extract precise clips from selected songs using the extraction modal",children:[s.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPCEtLSBDRCBvdXRlciBjaXJjbGUgLS0+CiAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSIxODAiIGZpbGw9IiNlOGU4ZTgiIHN0cm9rZT0iIzJjM2U1MCIgc3Ryb2tlLXdpZHRoPSI0Ii8+CiAgCiAgPCEtLSBDRCBpbm5lciByZWZsZWN0aXZlIHN1cmZhY2UgLS0+CiAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSIxNzUiIGZpbGw9InVybCgjY2RHcmFkaWVudCkiLz4KICAKICA8IS0tIENEIGNlbnRlciBob2xlIC0tPgogIDxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMjUiIGZpbGw9IiMyYzNlNTAiLz4KICAKICA8IS0tIENEIGxhYmVsIGFyZWEgLS0+CiAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSI4MCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjkpIi8+CiAgCiAgPCEtLSBDRCB0ZXh0L2xhYmVsIC0tPgogIDx0ZXh0IHg9IjIwMCIgeT0iMTkwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzJjM2U1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIj5NVVNJQzwvdGV4dD4KICA8dGV4dCB4PSIyMDAiIHk9IjIxNSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzY2NiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIj5DRDwvdGV4dD4KICAKICA8IS0tIENEIHJlZmxlY3Rpb24gbGluZXMgLS0+CiAgPHBhdGggZD0iTSA4MCAxMjAgUSAyMDAgMTAwIDMyMCAxMjAiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjYpIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz4KICA8cGF0aCBkPSJNIDkwIDE0MCBRIDIwMCAxMjAgMzEwIDE0MCIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LDAuNCkiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Ik0gMTAwIDI4MCBRIDIwMCAzMDAgMzAwIDI4MCIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LDAuNikiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Ik0gMTEwIDMwMCBRIDIwMCAzMjAgMjkwIDMwMCIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LDAuNCkiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgogIAogIDwhLS0gR3JhZGllbnQgZGVmaW5pdGlvbiAtLT4KICA8ZGVmcz4KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iY2RHcmFkaWVudCIgY3g9IjAuMyIgY3k9IjAuMyI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmMGYwZjAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNkMGQwZDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjYjBiMGIwIi8+CiAgICA8L3JhZGlhbEdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg==",alt:"Extract clips",style:{width:"16px",height:"16px"}}),"Extract (Precise)"]})]}),Pt?s.jsx("div",{style:{width:"100%",padding:"20px"},children:s.jsxs(iz,{children:[s.jsx(sz,{progress:Et?Et.processed/Math.max(kt.length,1)*100:void 0,currentSong:Et?.current}),Et&&s.jsx(u,{sx:{mt:2,display:"flex",justifyContent:"center"},children:s.jsx(A,{variant:"outlined",size:"small",onClick:async()=>{window.electronAPI&&await window.electronAPI.cancelLibraryLoading()},sx:{fontSize:"0.75rem"},children:"Cancel Loading"})})]})}):s.jsxs("div",{style:{width:"100%",maxWidth:"100%",display:"flex",position:"relative"},children:[s.jsx("div",{style:{width:`${Cr}%`,minWidth:"50%",maxWidth:"98%",position:"relative",borderRight:`2px solid ${t.palette.divider}`,paddingRight:"8px"},children:0===Zr.length&&Tt.trim()?s.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:t.palette.text.secondary,backgroundColor:t.palette.background.paper,borderRadius:"8px",border:`1px solid ${t.palette.divider}`},children:[s.jsx(h,{variant:"h6",sx:{mb:2},children:"No results found"}),s.jsxs(h,{variant:"body2",sx:{mb:2},children:['No songs match your search for "',Tt,'"']}),s.jsx(A,{variant:"outlined",size:"small",onClick:()=>Nt(""),sx:{mt:1},children:"Clear Search"})]}):s.jsx(qR,{songs:Zr,selectedSongs:Rt,libraryPlayingIndex:It,onSelectSong:en,onSelectAll:tn,onPlaySong:(e,t)=>{try{Qr(e,t)}catch(vz){}},onExtractClip:e=>{try{Lr(e)}catch(vz){}},librarySort:Mt,onSortChange:e=>{try{const t={field:e,direction:Mt.field===e&&"asc"===Mt.direction?"desc":"asc"};$t(t)}catch(vz){}},favoriteTracks:Dt,onToggleFavorite:Vt,showWaveforms:!1,onUpdateSongMetadata:Ht,columnWidths:Xt,onColumnResize:tr,showTagsColumn:!1!==Pr.showTagsColumn,showExtractColumn:!1!==Pr.showExtractColumn,showWildCardColumn:!0===Pr.showWildCardColumn,onIndividualWildCard:async e=>{try{await(async e=>{try{if(!window.electronAPI)throw new Error("Electron API not available");let t;if("path"in e)t=await window.electronAPI.getFileBlob(e.path);else{if(!e.file)return void dr("Cannot extract from this song - no file available","error");t=await e.file.arrayBuffer()}const r="path"in e?new File([t],e.name):e.file,n=new(window.AudioContext||window.webkitAudioContext);if("audio/x-m4a"===r.type||"audio/m4a"===r.type||r.name.toLowerCase().endsWith(".m4a"))return dr("This audio format is not supported for extraction. Please use MP3, WAV, or OGG.","error"),void n.close();let a;try{a=await n.decodeAudioData(t)}catch(xz){return dr("This audio format is not supported for extraction. Please use MP3, WAV, or OGG.","error"),void n.close()}const i=a.duration,o=Math.max(0,i-60),s=Math.random()*o,l=Math.min(60,i-s),c=n.createBuffer(a.numberOfChannels,n.sampleRate*l,n.sampleRate);for(let e=0;e<a.numberOfChannels;e++){const t=a.getChannelData(e).slice(Math.floor(n.sampleRate*s),Math.floor(n.sampleRate*(s+l)));c.copyToChannel(t,e)}const u=new OfflineAudioContext(c.numberOfChannels,c.length,c.sampleRate),d=u.createBufferSource();d.buffer=c,d.connect(u.destination),d.start();const h=await u.startRendering(),p=await $r(h),f="title"in e&&e.title||e.name.replace(/\.[^/.]+$/,""),m={id:Math.random().toString(36).substr(2,9),name:f+` [${lz(s)} - ${lz(s+l)}]`,blob:p,start:s,duration:l,songName:e.title||e.name,artist:e.artist||void 0,album:e.album||void 0,year:e.year||void 0,genre:e.genre||void 0};Yr([m]),n.close(),dr(`Extracted 1 minute from "${f}" and added to your clips.`,"success")}catch(t){dr("Failed to extract minute from song.","error")}})(e)}catch(t){dr("Failed to extract wild card minute from song.","error")}}})}),s.jsx("div",{style:{width:"8px",cursor:"col-resize",backgroundColor:"transparent",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"},onMouseDown:e=>{e.preventDefault();const t=e.clientX,r=Cr,n=e.currentTarget.parentElement,a=n?n.getBoundingClientRect().width:window.innerWidth,i=e=>{const n=e.clientX-t;rr(r+n/a*100)},o=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o),document.body.style.cursor="",document.body.style.userSelect=""};document.addEventListener("mousemove",i),document.addEventListener("mouseup",o),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},children:s.jsx("div",{style:{width:"2px",height:"40px",backgroundColor:t.palette.divider,borderRadius:"1px"}})})]})]}),s.jsx(ze,{open:de,onClose:()=>{Or(),Fr()},children:s.jsxs(u,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:t.palette.background.paper,color:t.palette.text.primary,p:2.5,borderRadius:2,minWidth:400,width:"40%",maxWidth:600,boxShadow:"0 8px 24px rgba(0,0,0,0.4)",border:`1px solid ${t.palette.secondary.main}`,display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsxs(u,{sx:{position:"relative",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",mb:1.5},children:[s.jsxs(h,{variant:"h5",sx:{fontWeight:600,color:t.palette.text.primary,fontSize:"1.2rem",textAlign:"center"},children:["Select 1-Minute Segment",ir.length>0&&s.jsxs(h,{variant:"body2",sx:{color:t.palette.text.secondary,fontSize:"0.9rem",mt:.5},children:["(",ir.length+1," songs remaining)"]})]}),s.jsx(d,{onClick:()=>{Or(),Fr()},sx:{color:t.palette.text.primary,p:1,position:"absolute",right:-8,top:-8},children:s.jsx(An,{})})]}),s.jsx(h,{variant:"body2",sx:{mb:2,textAlign:"center",width:"90%",color:t.palette.text.secondary,fontSize:"0.85rem"},children:"Drag either bracket to scroll the 1-minute window."}),zr&&s.jsxs(u,{sx:{mb:1.5,textAlign:"center",width:"90%",bgcolor:`${t.palette.primary.main}15`,borderRadius:2,py:1.5,px:2,border:`1px solid ${t.palette.primary.main}30`},children:[s.jsx(h,{variant:"h6",sx:{fontWeight:700,color:t.palette.text.primary,fontSize:"1.1rem",mb:.3,letterSpacing:"0.5px"},children:zr.name}),zr.artist&&s.jsxs(h,{variant:"body2",sx:{color:t.palette.text.secondary,fontSize:"0.9rem",fontStyle:"italic"},children:["by ",zr.artist]})]}),s.jsx(u,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:s.jsx(u,{sx:{width:"80%",position:"relative",height:"36px"},children:s.jsx(p,{value:me,min:0,max:be>0?be:60,step:.01,onChange:(e,t)=>{if(Array.isArray(t)){let[e,r]=t;r-e!==ye&&(e!==me[0]?(e=Math.max(0,Math.min(e,be-ye)),r=e+ye):(r=Math.min(be,Math.max(r,ye)),e=r-ye)),ge([e,r])}},sx:{color:t.palette.secondary.main,height:4,position:"absolute",left:0,right:0,marginLeft:"auto",marginRight:"auto","& .MuiSlider-rail":{opacity:.5}}})})}),s.jsxs(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:4,mb:1.5,mt:.5},children:[s.jsxs(h,{sx:{color:t.palette.text.secondary,fontSize:"0.85rem",minWidth:"60px",textAlign:"center"},children:["Start: ",lz(me[0])]}),s.jsx(u,{sx:{display:"inline-block",bgcolor:`${t.palette.primary.main}20`,borderRadius:1,px:2,py:.6},children:s.jsxs(h,{sx:{color:t.palette.text.secondary,fontSize:"0.9rem"},children:["Current: ",lz($e)]})}),s.jsxs(h,{sx:{color:t.palette.text.secondary,fontSize:"0.85rem",minWidth:"60px",textAlign:"center"},children:["End: ",lz(me[1])]})]}),s.jsxs(I,{direction:"row",spacing:2,sx:{mb:2,justifyContent:"center",alignItems:"center"},children:[_e?s.jsx(A,{variant:"contained",startIcon:s.jsx(pn,{}),onClick:()=>{if(Le&&_e){const e=Le.seek();Le.pause(),Fe(!1),Be(!0),We(e),He.current&&(clearInterval(He.current),He.current=null)}},size:"small",sx:{borderRadius:28,px:2,py:.5,bgcolor:t.palette.secondary.main,fontSize:"0.8rem"},children:"Pause"}):s.jsx(A,{variant:"contained",startIcon:s.jsx(hn,{}),onClick:async()=>{if(!zr)return;if(Le&&!_e)return void _r();Fr();const e=zr,t=URL.createObjectURL(e.file),r=new bn.Howl({src:[t],html5:!0,volume:se,onplay:()=>{Fe(!0),He.current&&clearInterval(He.current),He.current=setInterval((()=>{if(r&&r.playing()){const e=r.seek();We(e),e>=me[1]&&(r.stop(),Fr())}}),100)},onend:()=>Fr(),onloaderror:()=>{QR("Failed to load audio for preview",{},"SongUploader"),Fr()}});We(me[0]),Be(!1),r.once("play",(()=>{r.seek(me[0]),setTimeout((()=>{r&&r.playing()&&We(r.seek())}),50)})),r.play(),Oe(r)},size:"small",sx:{borderRadius:28,px:2,py:.5,bgcolor:t.palette.secondary.main,fontSize:"0.8rem"},children:"Preview"}),s.jsx(A,{variant:"outlined",startIcon:s.jsx(fn,{}),onClick:Fr,size:"small",sx:{borderRadius:28,px:2,py:.5,color:t.palette.text.primary,borderColor:t.palette.secondary.main,fontSize:"0.8rem"},children:"Stop"}),s.jsx(A,{variant:"outlined",onClick:()=>{if(zr){if(be<=ye)ge([0,Math.min(ye,be)]);else{const e=be-ye,t=Math.random()*e;ge([t,t+ye])}Fr()}else QR("No song available for random range selection",{},"SongUploader")},size:"small",sx:{borderRadius:28,px:2,py:.5,color:t.palette.text.primary,borderColor:t.palette.secondary.main,fontSize:"0.8rem","&:hover":{borderColor:t.palette.secondary.light,backgroundColor:`${t.palette.secondary.main}20`}},title:"Set random minute position",children:" Random"})]}),s.jsxs(u,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",gap:1,alignItems:"center"},children:[s.jsx(A,{variant:"contained",color:"secondary",onClick:async()=>{if(!zr)return void QR("No song available for extraction",{},"SongUploader");tz("Extract minute called",{fileName:zr.file.name,fileType:zr.file.type},"SongUploader");const e=zr;let t;if("audio/x-m4a"===e.file.type||"audio/m4a"===e.file.type||e.file.name.toLowerCase().endsWith(".m4a"))return void QR("Audio format not supported for extraction",{format:"M4A"},"SongUploader");t=await e.file.arrayBuffer();const r=new(window.AudioContext||window.webkitAudioContext);let n;try{n=await r.decodeAudioData(t)}catch(xz){return Je("This audio format is not supported for extraction. Please use MP3, WAV, or OGG."),void r.close()}const a=me[0],i=Math.min(ye,n.duration-a),o=r.createBuffer(n.numberOfChannels,r.sampleRate*i,r.sampleRate);for(let p=0;p<n.numberOfChannels;p++){const e=n.getChannelData(p).slice(Math.floor(r.sampleRate*a),Math.floor(r.sampleRate*(a+i)));o.copyToChannel(e,p)}const s=new OfflineAudioContext(o.numberOfChannels,o.length,o.sampleRate),l=s.createBufferSource();l.buffer=o,l.connect(s.destination),l.start();const c=await s.startRendering(),u=await $r(c),d=e.name.replace(/\.[^/.]+$/,"");tz("Creating manual clip from song",{songName:e.name,songArtist:e.artist,songAlbum:e.album,songYear:e.year,songGenre:e.genre},"SongUploader");const h={id:Math.random().toString(36).substr(2,9),name:d+` [${lz(a)} - ${lz(a+i)}]`,blob:u,start:a,duration:i,songName:e.name,artist:e.artist||void 0,album:e.album||void 0,year:e.year||void 0,genre:e.genre||void 0};tz("Created manual clip with metadata",{clipName:h.name,clipSongName:h.songName,clipArtist:h.artist,clipAlbum:h.album,clipYear:h.year,clipGenre:h.genre},"SongUploader"),Yr([h]),r.close(),Or(),Fr()},sx:{borderRadius:28,px:4,py:.8,background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.6*t))}, ${Math.max(0,Math.floor(.6*n))}, ${Math.max(0,Math.floor(.6*a))}) !important`})(),color:"#ffffff",fontSize:"0.9rem",fontWeight:600,minWidth:"auto","&:hover":{background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.4*t))}, ${Math.max(0,Math.floor(.4*n))}, ${Math.max(0,Math.floor(.4*a))}) !important`})()}},children:"SAVE THIS CLIP"}),ir.length>0&&s.jsxs(A,{variant:"outlined",onClick:()=>{or([]),Or(),Fr()},sx:{borderRadius:28,px:3,py:.5,color:t.palette.text.secondary,borderColor:t.palette.text.secondary,fontSize:"0.8rem",minWidth:"auto","&:hover":{borderColor:t.palette.error.main,color:t.palette.error.main}},children:["Skip Remaining (",ir.length," songs)"]})]})]})}),s.jsxs("div",{style:{position:"fixed",top:0,right:0,height:"100%",zIndex:1250},children:[s.jsxs("div",{style:{position:"absolute",top:"calc(50% + 40px)",right:Ye?"320px":"20px",transform:"translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:t.palette.primary.dark,color:"white",padding:"16px 8px",borderRadius:"8px 0 0 8px",cursor:"pointer",boxShadow:"0 3px 5px rgba(0,0,0,0.3)",border:`1px solid ${t.palette.secondary.main}`,borderRight:"none",transition:"right 0.3s ease",zIndex:1251},onClick:()=>Ge(!Ye),children:[Ye?s.jsx(xn,{}):s.jsx(vn,{}),s.jsx("div",{style:{writingMode:"vertical-rl",transform:"rotate(180deg)",marginTop:"8px",fontWeight:"bold",letterSpacing:"1px",fontSize:"12px"},children:"CLIPS"})]}),s.jsxs(ie,{variant:"persistent",anchor:"right",open:Ye,PaperProps:{sx:{width:320,bgcolor:t.palette.primary.dark,color:"#fff",p:2,display:"flex",flexDirection:"column",height:"calc(100% - 80px)",overflowY:"hidden",boxShadow:"-2px 0 10px rgba(0,0,0,0.3)",zIndex:1250,top:"80px"}},children:[s.jsxs(u,{sx:{display:"flex",flexDirection:"column",mb:2,flexShrink:0,position:"relative",zIndex:1300},children:[s.jsx(u,{sx:{display:"flex",justifyContent:"center",mb:2},children:s.jsx(T,{value:cr,onChange:e=>ur(e.target.value),placeholder:"Enter playlist name...",variant:"outlined",size:"small",sx:{width:"100%","& .MuiOutlinedInput-root":{color:"#fff",fontSize:"1rem",fontWeight:600,textAlign:"center","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:r.secondary},"& input":{textAlign:"center"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}})}),s.jsxs(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:1},children:[s.jsxs(h,{variant:"body2",sx:{color:"#fff",fontWeight:700,fontSize:"1.2rem"},children:["(",ve.length,"/60)"]}),ve.length>0&&s.jsx(A,{variant:"contained",size:"small",onClick:()=>{we([]),lr([]),window.electronAPI&&window.electronAPI.clearTempClips().catch((e=>{}))},sx:{fontSize:"0.75rem",color:"#ffffff",background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.6*t))}, ${Math.max(0,Math.floor(.6*n))}, ${Math.max(0,Math.floor(.6*a))}) !important`})(),position:"relative",zIndex:1301,fontWeight:600,textShadow:"0 1px 2px rgba(0,0,0,0.3)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)","&:hover":{background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.4*t))}, ${Math.max(0,Math.floor(.4*n))}, ${Math.max(0,Math.floor(.4*a))}) !important`})(),boxShadow:"0 4px 8px rgba(0,0,0,0.3)",transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)",boxShadow:"0 1px 2px rgba(0,0,0,0.2)"}},children:"Clear All"})]})]}),sr.length>0&&0===ve.length&&s.jsx(u,{sx:{bgcolor:"rgba(255, 193, 7, 0.1)",border:"1px solid #FFC107",borderRadius:"4px",p:1.5,mb:2,flexShrink:0},children:s.jsxs(h,{variant:"body2",sx:{color:"#FFC107",fontSize:"0.85rem"},children:["You have ",sr.length," previously saved clips. Re-extract these sections from your songs to restore them."]})}),rt&&s.jsx(A,{variant:"outlined",color:"secondary",href:URL.createObjectURL(rt),download:"power-hour.wav",startIcon:s.jsx(wn,{}),sx:{mb:2,width:"100%",color:"#fff",borderColor:"#fff","&.Mui-disabled":{color:"#fff",borderColor:"#fff",opacity:.5},flexShrink:0},children:"Download Combined WAV"}),rt&&s.jsx(A,{variant:"contained",color:"primary",onClick:()=>{pt("Power Hour Mix"),dt(!0)},disabled:ot,sx:{mb:2,width:"100%",flexShrink:0},children:"Save Mix Locally"}),lt&&s.jsx(K,{open:!!lt,autoHideDuration:6e3,onClose:()=>ct(null),message:lt,anchorOrigin:{vertical:"bottom",horizontal:"center"}}),s.jsx(K,{open:!!vt,autoHideDuration:6e3,onClose:()=>wt(null),message:vt,anchorOrigin:{vertical:"bottom",horizontal:"center"}}),s.jsx(K,{open:!!St,autoHideDuration:6e3,onClose:()=>jt(null),message:St,anchorOrigin:{vertical:"bottom",horizontal:"center"}}),s.jsx(v,{sx:{flexGrow:1,overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",maxHeight:ve.length>10?"calc(100vh - 340px)":"none","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",borderRadius:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:`${t.palette.primary.main}80`,borderRadius:"8px","&:hover":{backgroundColor:`${t.palette.primary.main}CC`}},scrollbarWidth:"thin",scrollbarColor:`${t.palette.primary.main}80 rgba(0,0,0,0.1)`,paddingRight:"4px",mb:2},children:ve.map(((e,t)=>s.jsxs("div",{style:{marginBottom:"8px",backgroundColor:Ce===t?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.4)",borderRadius:"4px",border:Ce===t?"1px solid rgba(255,255,255,0.3)":"1px solid transparent",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{style:{flex:1,minWidth:0,cursor:"pointer",padding:"8px",borderRadius:"4px"},onClick:e=>{if(e.preventDefault(),e.stopPropagation(),Ce===t&&Se){const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=t.width,a=Math.max(0,Math.min(1,r/n))*Re;Se.seek(a),Te(a)}else Ur(t)},children:[s.jsxs("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t+1,". ",e.songName||e.name]}),s.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.artist||"Unknown Artist","  ",lz(e.start||0)," - ",lz((e.start||0)+(e.duration||0))]})]}),s.jsx(d,{onClick:t=>{var r;t.stopPropagation(),r=e.id,we((e=>e.filter((e=>e.id!==r)))),window.electronAPI&&window.electronAPI.deleteTempClip(r).catch((e=>{}))},sx:{ml:1,color:"rgba(255,255,255,0.5)","&:hover":{color:"rgba(255,100,100,0.8)"}},children:s.jsx(dn,{fontSize:"small"})})]},e.id)))}),0===ve.length&&sr.length>0&&s.jsxs(v,{sx:{flexGrow:1,overflowY:"auto",overflowX:"hidden",mb:2,"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",borderRadius:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:`${t.palette.primary.main}80`,borderRadius:"8px","&:hover":{backgroundColor:`${t.palette.primary.main}CC`}},scrollbarWidth:"thin",scrollbarColor:`${t.palette.primary.main}80 rgba(0,0,0,0.1)`,paddingRight:"4px"},children:[s.jsx(h,{variant:"subtitle2",sx:{pl:2,pb:1,color:"rgba(255, 255, 255, 0.7)",fontWeight:400},children:"Previously Saved Clips:"}),sr.map((e=>s.jsx(S,{disablePadding:!0,sx:{position:"relative",overflow:"hidden",borderRadius:1,mb:1,opacity:.8,bgcolor:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.6*t))}, ${Math.max(0,Math.floor(.6*n))}, ${Math.max(0,Math.floor(.6*a))})`})(),minHeight:"56px",border:"1px solid rgba(0,0,0,0.1)"},children:s.jsx(oe,{disabled:!0,sx:{pl:2},children:s.jsx(j,{primary:e.name,secondary:`${lz(e.start)} - ${lz(e.start+e.duration)}`,primaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.9)",textShadow:"0px 1px 1px rgba(0,0,0,0.5)",fontSize:"0.85rem",lineHeight:1.2,display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:2}},secondaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.75rem",textShadow:"0px 1px 1px rgba(0,0,0,0.3)"}}})})},e.id)))]}),s.jsx(A,{variant:"contained",startIcon:s.jsx(En,{}),onClick:async()=>{if(0===ve.length)return jt("No clips to send to playlists."),void dr("No clips to send to playlists.","error");if(cr.trim())try{if(xt(!0),jt(null),!window.electronAPI)throw new Error("Electron API not available");const r=[];for(const n of ve){let a,i={};if(n.blob)try{const e=await n.blob.arrayBuffer(),t={id:n.id,name:n.name,start:n.start||0,duration:n.duration||0,songName:n.songName||n.name.split(" - ")[0]||"Unknown Song",artist:n.artist,album:n.album,year:n.year,genre:n.genre},r=await window.electronAPI.saveClipToFile(n.id,e,t);if(!(r.success&&r.clipPath&&r.metadata))throw new Error(r.message||`Failed to save clip ${n.name}`);a=r.clipPath,i=r.metadata}catch(e){return jt(`Error processing clip ${n.name}: ${e.message}`),void xt(!1)}else{if(!n.clipPath||!fs.existsSync(n.clipPath))continue;a=n.clipPath;try{const e=await window.electronAPI.getClipFromFile(a);i=e&&e.metadata?e.metadata:{id:n.id,name:n.name,start:n.start,duration:n.duration,songName:n.songName,clipPath:a,artist:n.artist,album:n.album,year:n.year,genre:n.genre}}catch(t){i={id:n.id,name:n.name,start:n.start,duration:n.duration,songName:n.songName,clipPath:a,artist:n.artist,album:n.album,year:n.year,genre:n.genre}}}a&&r.push({id:i.id||n.id,name:i.name||n.name,start:i.start||n.start||0,duration:i.duration||n.duration||0,songName:i.songName||n.songName||"Unknown Song",clipPath:a,artist:i.artist||n.artist,album:i.album||n.album,year:i.year||n.year,genre:i.genre||n.genre})}if(0===r.length)return jt("No valid clips could be processed to send to playlists."),dr("No valid clips could be processed.","error"),void xt(!1);const a={id:`pl_${Date.now()}`,name:cr.trim(),date:(new Date).toISOString(),clips:r,drinkingSoundPath:_&&_.path?_.path:void 0},i=await window.electronAPI.savePlaylistFromCreator(a);if(!i||!i.success)throw new Error(i.message||"Failed to send playlist to Playlist Page");dr(`Playlist "${a.name}" sent to Playlist Page!`,"success"),n("/playlists")}catch(vz){jt(`Error: ${vz.message}`),dr(`Error: ${vz.message}`,"error")}finally{xt(!1)}else dr("Please enter a playlist name.","error")},disabled:0===ve.length||bt,sx:{mt:2,mb:1,width:"100%",background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.6*t))}, ${Math.max(0,Math.floor(.6*n))}, ${Math.max(0,Math.floor(.6*a))}) !important`})(),color:"#ffffff",fontWeight:600,textShadow:"0 1px 2px rgba(0,0,0,0.3)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)","&:hover":{background:(()=>{const e=r.primary,t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return`rgb(${Math.max(0,Math.floor(.4*t))}, ${Math.max(0,Math.floor(.4*n))}, ${Math.max(0,Math.floor(.4*a))}) !important`})(),boxShadow:"0 4px 8px rgba(0,0,0,0.3)",transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)",boxShadow:"0 1px 2px rgba(0,0,0,0.2)"},"&:disabled":{backgroundColor:"rgba(255,255,255,0.3)",color:"rgba(255,255,255,0.7)"},fontSize:"0.8rem",padding:"8px 16px",flexShrink:0,transition:"all 0.2s ease-in-out"},children:bt?s.jsx(H,{size:20,sx:{color:"#ffffff"}}):"Save Playlist"}),Se&&s.jsxs(I,{direction:"row",spacing:1,sx:{mb:1,mt:1,justifyContent:"center",alignItems:"center",flexShrink:0,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:1},children:[s.jsx(d,{onClick:()=>{null!==Ce&&Ce>0&&Ur(Ce-1)},disabled:null===Ce||0===Ce,size:"small",sx:{color:"white"},children:s.jsx(kn,{fontSize:"small"})}),"preview"===l.audioSource&&l.previewPlaying?s.jsx(d,{onClick:()=>{"preview"===l.audioSource&&l.previewPlaying&&(l.pausePreview(),Ie(!0),Ae(!1))},size:"small",sx:{color:"white",bgcolor:"rgba(124, 77, 255, 0.3)","&:hover":{bgcolor:"rgba(124, 77, 255, 0.5)"}},children:s.jsx(pn,{fontSize:"small"})}):"preview"!==l.audioSource||l.previewPlaying?s.jsx(d,{onClick:()=>Ur(null!==Ce?Ce:0),disabled:0===ve.length,size:"small",sx:{color:"white"},children:s.jsx(hn,{fontSize:"small"})}):s.jsx(d,{onClick:()=>{"preview"!==l.audioSource||l.previewPlaying||(l.resumePreview(),Ie(!1),Ae(!0))},size:"small",sx:{color:"white",bgcolor:"rgba(124, 77, 255, 0.3)","&:hover":{bgcolor:"rgba(124, 77, 255, 0.5)"}},children:s.jsx(hn,{fontSize:"small"})}),s.jsx(d,{onClick:()=>{"preview"===l.audioSource&&l.stopPreview(),Ae(!1),Ie(!1),ke(null)},disabled:"preview"!==l.audioSource,size:"small",sx:{color:"white"},children:s.jsx(fn,{fontSize:"small"})}),s.jsx(d,{onClick:()=>Hr(),disabled:null===Ce||Ce===ve.length-1,size:"small",sx:{color:"white"},children:s.jsx(Pn,{fontSize:"small"})})]}),s.jsx(K,{open:ft,autoHideDuration:4e3,onClose:()=>mt(!1),message:"You can only have 60 clips in your Power Hour!",anchorOrigin:{vertical:"bottom",horizontal:"center"}})]})]}),s.jsx(K,{open:!!qe,autoHideDuration:6e3,onClose:()=>Je(null),message:qe,anchorOrigin:{vertical:"bottom",horizontal:"center"}}),s.jsx(ze,{open:Ke,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs(u,{sx:{bgcolor:"#222",color:"#fff",p:4,borderRadius:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx(H,{color:"secondary",sx:{mb:2}}),s.jsx(h,{variant:"h6",children:"Converting .m4a to .mp3 please wait"})]})}),s.jsx(K,{open:!!Qe,autoHideDuration:6e3,onClose:()=>Ze(null),message:Qe,anchorOrigin:{vertical:"bottom",horizontal:"center"}}),s.jsxs(g,{open:ut,onClose:Vr,children:[s.jsx(y,{children:c?"Update Mix":"Name Your Mix"}),s.jsxs(b,{children:[s.jsx(T,{autoFocus:!0,margin:"dense",label:"Mix Name",fullWidth:!0,value:ht,onChange:e=>pt(e.target.value),disabled:c}),c&&s.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:['This will update the existing mix "',C?.name,'". The original mix will be replaced with your new version.']})]}),s.jsxs(P,{children:[s.jsx(A,{onClick:Vr,children:"Cancel"}),s.jsx(A,{onClick:async()=>{if(rt){st(!0),ct(null);try{let t=gt;if(!t&&window.electronAPI&&(t=await window.electronAPI.selectMixFolder(),yt(t)),!t)throw new Error("No folder selected");const r=await rt.arrayBuffer(),n=ve.map((e=>({id:e.id,name:e.name,start:e.start,duration:e.duration,songName:e.name.split(" [")[0]}))),a={originalSongs:R.map((e=>({id:e.id,name:e.name,artist:e.artist,album:e.album,year:e.year,filePath:e.file?e.file.name:void 0,sourceFilePath:e.sourceFilePath||void 0}))),drinkingSoundPath:_?_.name:void 0,lastModified:(new Date).toISOString(),version:"1.0",notes:"",tags:[]},i={name:c&&C?C.name:ht,date:(new Date).toISOString(),songList:ve.map((e=>e.name)),clips:n,hasDrinkingSound:!!_,id:c&&C?C.id:void 0,projectData:a};if(!window.electronAPI)return ct("Saving mixes locally is only supported in the desktop app."),void st(!1);c&&C&&await window.electronAPI.deleteMix(C);const o=await window.electronAPI.saveMix(i,r);if(!o)throw new Error("Failed to save mix");if(o&&window.electronAPI)try{const e=[];for(const t of R)t.file&&t.audioBuffer&&e.push({path:t.file.name,relativePath:`songs/${t.file.name}`,buffer:await t.file.arrayBuffer()});_&&e.push({path:_.name,relativePath:`drinking/${_.name}`,buffer:await _.arrayBuffer()}),e.length>0&&await window.electronAPI.backupOriginalFiles(i.id,e);for(const t of ve)if(!t.isPlaceholder&&t.blob){const e=await t.blob.arrayBuffer(),r={id:t.id,name:t.name};await window.electronAPI.saveTempClip(r,e)}}catch(e){}dt(!1),pt("Power Hour Mix"),c&&(f(!1),k(null),localStorage.removeItem("edit_mix"))}catch(t){ct(t instanceof Error?t.message:"Failed to save mix")}finally{st(!1)}}},disabled:ot||!c&&!ht.trim(),children:ot?"Saving...":c?"Update Mix":"Save"})]})]}),s.jsx(K,{open:!!nr,autoHideDuration:6e3,onClose:()=>ar(null),message:nr,anchorOrigin:{vertical:"bottom",horizontal:"center"}}),s.jsx(nz,{open:gr,onClose:()=>yr(!1),songs:kt,onEnhanceMetadata:ln}),s.jsx(az,{open:br,onClose:()=>vr(!1),onSelectLibrary:cn,onAddLibraryFolder:o.addLibraryFolder,currentLibraryPath:Ct||void 0,songs:kt,onEnhanceMetadata:ln,libraryLoading:Pt,allLibraries:Lt,onRefreshAllLibraries:qt,onRemoveLibrary:o.removeLibrary,onRefreshLibrary:o.refreshLibrary})]})},uz=new class{constructor(){r(this,"audioContext",null),r(this,"currentHowl",null),this.initializeAudioContext()}initializeAudioContext(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(vz){}}getAudioContext(){return this.audioContext||this.initializeAudioContext(),this.audioContext}async loadAudioFile(e){return new Promise(((t,r)=>{const n=new FileReader;n.onload=async n=>{try{const r=n.target?.result,a=this.getAudioContext();if(!a)throw new Error("Audio context not available");const i=await a.decodeAudioData(r),o={title:e.name.replace(/\.[^/.]+$/,""),duration:i.duration};t({metadata:o,audioBuffer:i})}catch(vz){r(vz)}},n.onerror=()=>r(new Error("Failed to read file")),n.readAsArrayBuffer(e)}))}async extractClip(e,t,r,n){try{const{audioBuffer:a}=await this.loadAudioFile(e),i=this.getAudioContext();if(!i)throw new Error("Audio context not available");const o=a.sampleRate,s=Math.floor(t*o),l=Math.floor(r*o)-s,c=i.createBuffer(a.numberOfChannels,l,o);for(let e=0;e<a.numberOfChannels;e++){const t=a.getChannelData(e),r=c.getChannelData(e);for(let e=0;e<l;e++)r[e]=t[s+e]||0}const u=await this.audioBufferToBlob(c);return{id:Date.now().toString(),name:n,duration:r-t,startTime:t,endTime:r,file:e.name,audioBuffer:c,blob:u}}catch(vz){throw vz}}async audioBufferToBlob(e){const t=e.numberOfChannels,r=e.sampleRate,n=e.length,a=new ArrayBuffer(44+n*t*2),i=new DataView(a),o=(e,t)=>{for(let r=0;r<t.length;r++)i.setUint8(e+r,t.charCodeAt(r))};o(0,"RIFF"),i.setUint32(4,36+n*t*2,!0),o(8,"WAVE"),o(12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,t,!0),i.setUint32(24,r,!0),i.setUint32(28,r*t*2,!0),i.setUint16(32,2*t,!0),i.setUint16(34,16,!0),o(36,"data"),i.setUint32(40,n*t*2,!0);let s=44;for(let l=0;l<n;l++)for(let r=0;r<t;r++){const t=Math.max(-1,Math.min(1,e.getChannelData(r)[l]));i.setInt16(s,t<0?32768*t:32767*t,!0),s+=2}return new Blob([a],{type:"audio/wav"})}playClip(e){return new Promise(((t,r)=>{try{this.currentHowl&&this.currentHowl.stop();const n=e.blob?URL.createObjectURL(e.blob):e.file;this.currentHowl=new bn.Howl({src:[n],format:["wav","mp3","ogg"],onend:()=>{e.blob&&URL.revokeObjectURL(n),t()},onloaderror:(e,t)=>{r(t)},onplayerror:(e,t)=>{r(t)}}),this.currentHowl.play()}catch(vz){r(vz)}}))}stopPlayback(){this.currentHowl&&(this.currentHowl.stop(),this.currentHowl=null)}getSupportedFormats(){const e=document.createElement("audio"),t=[];return[{ext:"mp3",mime:"audio/mpeg"},{ext:"wav",mime:"audio/wav"},{ext:"ogg",mime:"audio/ogg"},{ext:"m4a",mime:"audio/mp4"},{ext:"aac",mime:"audio/aac"}].forEach((r=>{e.canPlayType(r.mime)&&t.push(r.ext)})),t}cleanup(){this.stopPlayback(),this.audioContext&&"closed"!==this.audioContext.state&&this.audioContext.close()}},dz=()=>!("undefined"==typeof window||!window.electronAPI)||!("undefined"==typeof process||!process.versions||!process.versions.electron)||!("undefined"==typeof navigator||!navigator.userAgent.toLowerCase().includes("electron")),hz=()=>!dz()&&"undefined"!=typeof window&&"undefined"!=typeof document,pz=()=>dz()?"electron":"undefined"!=typeof navigator&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"mobile":hz()&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||"serviceWorker"in navigator&&!0===window.navigator.standalone)?"pwa":"web",fz=e=>(()=>{switch(pz()){case"electron":return{fileSystemAccess:!0,nativeAudioProcessing:!0,localFileUpload:!0,notifications:!0,fullscreen:!0,clipboard:!0,dragAndDrop:!0};case"web":case"pwa":return{fileSystemAccess:"showDirectoryPicker"in window,nativeAudioProcessing:!1,localFileUpload:!0,notifications:"Notification"in window,fullscreen:"requestFullscreen"in document.documentElement,clipboard:"clipboard"in navigator,dragAndDrop:!0};case"mobile":return{fileSystemAccess:!1,nativeAudioProcessing:!1,localFileUpload:!0,notifications:"Notification"in window,fullscreen:"requestFullscreen"in document.documentElement,clipboard:"clipboard"in navigator,dragAndDrop:!1};default:return{fileSystemAccess:!1,nativeAudioProcessing:!1,localFileUpload:!1,notifications:!1,fullscreen:!1,clipboard:!1,dragAndDrop:!1}}})()[e],mz=({onFilesProcessed:e,maxFiles:t=100,acceptedFormats:r=["mp3","wav","ogg","m4a","aac"]})=>{const[n,a]=i.useState([]),[o,l]=i.useState(!1),[c,p]=i.useState(0),[f,m]=i.useState(!1),[w,k]=i.useState(null),E=i.useRef(null),I=fz("fileSystemAccess"),M=i.useCallback((async t=>{l(!0),p(0);const r=[];for(let e=0;e<t.length;e++){const n=t[e],i=`${Date.now()}-${e}`;try{const t={id:i,file:n,metadata:{title:n.name},status:"processing"};r.push(t),a((e=>[...e,t]));const{metadata:o}=await uz.loadAudioFile(n),s={...t,metadata:o,status:"ready"};r[e]=s,a((e=>e.map((e=>e.id===i?s:e))))}catch(vz){const o={id:i,file:n,metadata:{title:n.name},status:"error",error:vz instanceof Error?vz.message:"Unknown error"};r[e]=o,a((e=>e.map((e=>e.id===i?o:e))))}p((e+1)/t.length*100)}l(!1),e(r.filter((e=>"ready"===e.status)))}),[e]),T=i.useCallback(((e,t)=>{t.length>0&&m(!0),e.length>0&&M(e)}),[M]),{getRootProps:R,getInputProps:z,isDragActive:D}=Ne({onDrop:T,accept:{"audio/*":r.map((e=>`.${e}`))},maxFiles:t,disabled:o}),L=e=>e?`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`:"Unknown";return hz()?s.jsxs(u,{children:[s.jsx(N,{sx:{mb:2},children:s.jsxs(W,{children:[s.jsxs(u,{...R(),sx:{border:"2px dashed",borderColor:D?"primary.main":"grey.300",borderRadius:2,p:4,textAlign:"center",cursor:"pointer",bgcolor:D?"action.hover":"transparent",transition:"all 0.2s ease"},children:[s.jsx("input",{...z()}),s.jsx(Fa,{sx:{fontSize:48,color:"primary.main",mb:2}}),s.jsx(h,{variant:"h6",gutterBottom:!0,children:D?"Drop files here":"Upload Audio Files"}),s.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Drag & drop audio files here, or click to select files"}),s.jsx(u,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:r.map((e=>s.jsx(q,{label:e.toUpperCase(),size:"small"},e)))})]}),s.jsxs(u,{sx:{display:"flex",gap:2,mt:2,justifyContent:"center"},children:[s.jsx(A,{variant:"outlined",startIcon:s.jsx(Fa,{}),onClick:()=>{E.current&&E.current.click()},disabled:o,children:"Select Files"}),I&&s.jsx(A,{variant:"outlined",startIcon:s.jsx(pi,{}),onClick:async()=>{if(I)try{const e=await window.showDirectoryPicker(),t=[],n=async e=>{for await(const a of e.values())if("file"===a.kind){const e=await a.getFile(),n=e.name.split(".").pop()?.toLowerCase();n&&r.includes(n)&&t.push(e)}else"directory"===a.kind&&await n(a)};await n(e),t.length>0?M(t):alert("No supported audio files found in the selected directory")}catch(vz){}else alert("Directory selection not supported in this browser")},disabled:o,children:"Select Folder"})]}),s.jsx("input",{ref:E,type:"file",multiple:!0,accept:r.map((e=>`.${e}`)).join(","),style:{display:"none"},onChange:e=>{const t=Array.from(e.target.files||[]);t.length>0&&M(t)}})]})}),o&&s.jsx(N,{sx:{mb:2},children:s.jsxs(W,{children:[s.jsx(h,{variant:"h6",gutterBottom:!0,children:"Processing Files..."}),s.jsx(he,{variant:"determinate",value:c}),s.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[Math.round(c),"% complete"]})]})}),n.length>0&&s.jsx(N,{children:s.jsxs(W,{children:[s.jsxs(h,{variant:"h6",gutterBottom:!0,children:["Uploaded Files (",n.length,")"]}),s.jsx(v,{children:n.map((e=>s.jsxs(S,{children:[s.jsx(j,{primary:e.metadata.title||e.file.name,secondary:s.jsxs(u,{children:[s.jsxs(h,{variant:"body2",color:"text.secondary",children:[e.metadata.artist&&`${e.metadata.artist}  `,L(e.metadata.duration)," ",(e.file.size/1024/1024).toFixed(1)," MB"]}),"error"===e.status&&s.jsxs(h,{variant:"body2",color:"error",children:["Error: ",e.error]})]})}),s.jsx(C,{children:s.jsxs(u,{sx:{display:"flex",gap:1},children:["ready"===e.status&&s.jsx(d,{onClick:()=>(async e=>{if(w===e.id)return uz.stopPlayback(),void k(null);try{k(e.id);const{metadata:t}=await uz.loadAudioFile(e.file),r=await uz.extractClip(e.file,0,Math.min(t.duration||30,30),e.metadata.title||"Preview");await uz.playClip(r),k(null)}catch(vz){k(null)}})(e),color:w===e.id?"secondary":"default",children:w===e.id?s.jsx(fn,{}):s.jsx(hn,{})}),s.jsx(d,{onClick:()=>{return t=e.id,void a((e=>e.filter((e=>e.id!==t))));var t},color:"error",children:s.jsx(dn,{})})]})})]},e.id)))})]})}),s.jsxs(g,{open:f,onClose:()=>m(!1),children:[s.jsx(y,{children:"Unsupported Files"}),s.jsx(b,{children:s.jsxs(x,{severity:"warning",children:["Some files were not uploaded because they are not supported audio formats. Supported formats: ",r.join(", ").toUpperCase()]})}),s.jsx(P,{children:s.jsx(A,{onClick:()=>m(!1),children:"OK"})})]})]}):null},gz=i.createContext(null);function yz(){const{currentTheme:e}=qc(),{isAuthenticated:t,user:r}=tc(),{isLoading:n}=nc(),[a,o]=i.useState(null),[l,c]=i.useState(!1),[h,p]=i.useState(0),[f,m]=i.useState(!1),[g,y]=i.useState(!1);i.useRef(null);const b=Sr(),x=xr();i.useEffect((()=>{n||t||r||localStorage.getItem("phat5-onboarding-completed")||y(!0)}),[n,t,r]);const v=e=>{o(e),p(0),c(!0),m(!0),b("/visualizer")},w=()=>{y(!1),localStorage.setItem("phat5-onboarding-completed","true")};return g?s.jsx(aP,{onComplete:w}):s.jsxs(u,{sx:{display:"flex",flexDirection:"column",height:"100vh",bgcolor:"background.default",color:"text.primary"},children:[s.jsx(De,{}),s.jsx(Le,{position:"static",elevation:0,sx:{bgcolor:e.primary,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:s.jsxs(Oe,{children:[s.jsx(d,{edge:"start",color:"inherit",sx:{mr:2},children:s.jsx(pi,{})}),s.jsxs(u,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[s.jsx(u,{component:"span",sx:{fontSize:"1.5rem",fontWeight:"bold",background:`linear-gradient(45deg, ${e.secondary}, ${e.primary})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"PHat5"}),s.jsx(u,{component:"span",sx:{ml:1,fontSize:"0.875rem",opacity:.8,display:{xs:"none",sm:"inline"}},children:"Power Hour Music App - Web Version"})]}),s.jsx(u,{sx:{px:1,py:.5,bgcolor:"rgba(255,255,255,0.1)",borderRadius:1,fontSize:"0.75rem",mr:2},children:pz().toUpperCase()})]})}),s.jsx(xR,{}),s.jsx(u,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:"/visualizer"===x.pathname&&f?s.jsx(cd,{mix:a,isPlaying:l,currentTrackIndex:h,onClose:()=>{m(!1),b("/")}}):s.jsx(u,{sx:{flex:1,overflow:"auto",p:{xs:1,sm:2,md:3}},children:s.jsxs(Lr,{children:[s.jsx(zr,{path:"/",element:hz()?s.jsxs(u,{children:[s.jsx(mz,{onFilesProcessed:e=>{}}),s.jsx(u,{sx:{mt:2},children:s.jsx(cz,{playMix:v})})]}):s.jsx(cz,{playMix:v})}),s.jsx(zr,{path:"/playlists",element:s.jsx(Hu,{onPlayMix:v})}),s.jsx(zr,{path:"/youtube",element:s.jsx(XT,{})}),s.jsx(zr,{path:"/community",element:s.jsx(bR,{})}),s.jsx(zr,{path:"/youtube-player/:playlistId",element:s.jsx(QT,{})}),s.jsx(zr,{path:"/settings",element:s.jsx(dP,{})})]})})}),a&&s.jsx(Yn,{mix:a,isPlaying:l,currentTrackIndex:h,onPlayPause:()=>c(!l),onNext:()=>p((e=>e<a.clips.length-1?e+1:0)),onPrevious:()=>p((e=>e>0?e-1:a.clips.length-1)),onVisualizerToggle:()=>{m(!f),b(f?"/":"/visualizer")}}),s.jsx(Ou,{})]})}function bz(){const[e,t]=i.useState({open:!1,message:"",severity:"info"}),r=(e,r="info")=>{t({open:!0,message:e,severity:r})},n=()=>{t((e=>({...e,open:!1})))};return s.jsx(TR,{children:s.jsx(gz.Provider,{value:r,children:s.jsx(Xc,{children:s.jsx(rc,{children:s.jsx(Qu,{children:s.jsx(Hn,{showSnackbar:r,children:s.jsxs(MR,{showSnackbar:r,children:[s.jsx(an,{children:s.jsx(TR,{children:s.jsx(yz,{})})}),s.jsx(K,{open:e.open,autoHideDuration:4e3,onClose:n,anchorOrigin:{vertical:"top",horizontal:"center"},children:s.jsx(x,{elevation:6,variant:"filled",onClose:n,severity:e.severity,sx:{width:"100%"},children:e.message})})]})})})})})})})}hz(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{})).catch((e=>{}))})),Ot.createRoot(document.getElementById("root")).render(s.jsx(i.StrictMode,{children:s.jsx(bz,{})}))}},function(){return Pt||(0,kt[t(kt)[0]])((Pt={exports:{}}).exports,Pt),Pt.exports});export default At();
